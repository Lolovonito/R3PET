function WA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ew={exports:{}},Zd={},tw={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),qA=Symbol.for("react.portal"),YA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),KA=Symbol.for("react.profiler"),QA=Symbol.for("react.provider"),$A=Symbol.for("react.context"),ZA=Symbol.for("react.forward_ref"),JA=Symbol.for("react.suspense"),eI=Symbol.for("react.memo"),tI=Symbol.for("react.lazy"),Tm=Symbol.iterator;function nI(t){return t===null||typeof t!="object"?null:(t=Tm&&t[Tm]||t["@@iterator"],typeof t=="function"?t:null)}var nw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rw=Object.assign,iw={};function Hl(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||nw}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sw(){}sw.prototype=Hl.prototype;function ag(t,e,n){this.props=t,this.context=e,this.refs=iw,this.updater=n||nw}var lg=ag.prototype=new sw;lg.constructor=ag;rw(lg,Hl.prototype);lg.isPureReactComponent=!0;var Sm=Array.isArray,ow=Object.prototype.hasOwnProperty,cg={current:null},aw={key:!0,ref:!0,__self:!0,__source:!0};function lw(t,e,n){var r,i={},o=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)ow.call(e,r)&&!aw.hasOwnProperty(r)&&(i[r]=e[r]);var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){for(var p=Array(f),g=0;g<f;g++)p[g]=arguments[g+2];i.children=p}if(t&&t.defaultProps)for(r in f=t.defaultProps,f)i[r]===void 0&&(i[r]=f[r]);return{$$typeof:Du,type:t,key:o,ref:c,props:i,_owner:cg.current}}function rI(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ug(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function iI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Nm=/\/+/g;function Gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iI(""+t.key):e.toString(36)}function Ph(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case Du:case qA:c=!0}}if(c)return c=t,i=i(c),t=r===""?"."+Gf(c,0):r,Sm(i)?(n="",t!=null&&(n=t.replace(Nm,"$&/")+"/"),Ph(i,e,n,"",function(g){return g})):i!=null&&(ug(i)&&(i=rI(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(Nm,"$&/")+"/")+t)),e.push(i)),1;if(c=0,r=r===""?".":r+":",Sm(t))for(var f=0;f<t.length;f++){o=t[f];var p=r+Gf(o,f);c+=Ph(o,e,n,p,i)}else if(p=nI(t),typeof p=="function")for(t=p.call(t),f=0;!(o=t.next()).done;)o=o.value,p=r+Gf(o,f++),c+=Ph(o,e,n,p,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function ah(t,e,n){if(t==null)return t;var r=[],i=0;return Ph(t,r,"","",function(o){return e.call(n,o,i++)}),r}function sI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wr={current:null},kh={transition:null},oI={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:kh,ReactCurrentOwner:cg};function cw(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:ah,forEach:function(t,e,n){ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ah(t,function(){e++}),e},toArray:function(t){return ah(t,function(e){return e})||[]},only:function(t){if(!ug(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=Hl;ot.Fragment=YA;ot.Profiler=KA;ot.PureComponent=ag;ot.StrictMode=XA;ot.Suspense=JA;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oI;ot.act=cw;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rw({},t.props),i=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=cg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(p in e)ow.call(e,p)&&!aw.hasOwnProperty(p)&&(r[p]=e[p]===void 0&&f!==void 0?f[p]:e[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){f=Array(p);for(var g=0;g<p;g++)f[g]=arguments[g+2];r.children=f}return{$$typeof:Du,type:t.type,key:i,ref:o,props:r,_owner:c}};ot.createContext=function(t){return t={$$typeof:$A,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QA,_context:t},t.Consumer=t};ot.createElement=lw;ot.createFactory=function(t){var e=lw.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:ZA,render:t}};ot.isValidElement=ug;ot.lazy=function(t){return{$$typeof:tI,_payload:{_status:-1,_result:t},_init:sI}};ot.memo=function(t,e){return{$$typeof:eI,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=kh.transition;kh.transition={};try{t()}finally{kh.transition=e}};ot.unstable_act=cw;ot.useCallback=function(t,e){return wr.current.useCallback(t,e)};ot.useContext=function(t){return wr.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return wr.current.useDeferredValue(t)};ot.useEffect=function(t,e){return wr.current.useEffect(t,e)};ot.useId=function(){return wr.current.useId()};ot.useImperativeHandle=function(t,e,n){return wr.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return wr.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return wr.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return wr.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return wr.current.useReducer(t,e,n)};ot.useRef=function(t){return wr.current.useRef(t)};ot.useState=function(t){return wr.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return wr.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return wr.current.useTransition()};ot.version="18.3.1";tw.exports=ot;var se=tw.exports;const yn=GA(se),aI=WA({__proto__:null,default:yn},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=se,cI=Symbol.for("react.element"),uI=Symbol.for("react.fragment"),hI=Object.prototype.hasOwnProperty,dI=lI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fI={key:!0,ref:!0,__self:!0,__source:!0};function uw(t,e,n){var r,i={},o=null,c=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)hI.call(e,r)&&!fI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:cI,type:t,key:o,ref:c,props:i,_owner:dI.current}}Zd.Fragment=uI;Zd.jsx=uw;Zd.jsxs=uw;ew.exports=Zd;var E=ew.exports,M0={},hw={exports:{}},ni={},dw={exports:{}},fw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,ee){var ie=re.length;re.push(ee);e:for(;0<ie;){var fe=ie-1>>>1,he=re[fe];if(0<i(he,ee))re[fe]=ee,re[ie]=he,ie=fe;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ee=re[0],ie=re.pop();if(ie!==ee){re[0]=ie;e:for(var fe=0,he=re.length,Ee=he>>>1;fe<Ee;){var ue=2*(fe+1)-1,ce=re[ue],me=ue+1,Me=re[me];if(0>i(ce,ie))me<he&&0>i(Me,ce)?(re[fe]=Me,re[me]=ie,fe=me):(re[fe]=ce,re[ue]=ie,fe=ue);else if(me<he&&0>i(Me,ie))re[fe]=Me,re[me]=ie,fe=me;else break e}}return ee}function i(re,ee){var ie=re.sortIndex-ee.sortIndex;return ie!==0?ie:re.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],g=[],y=1,w=null,v=3,b=!1,S=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(re){for(var ee=n(g);ee!==null;){if(ee.callback===null)r(g);else if(ee.startTime<=re)r(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function H(re){if(j=!1,M(re),!S)if(n(p)!==null)S=!0,X(J);else{var ee=n(g);ee!==null&&G(H,ee.startTime-re)}}function J(re,ee){S=!1,j&&(j=!1,P(A),A=-1),b=!0;var ie=v;try{for(M(ee),w=n(p);w!==null&&(!(w.expirationTime>ee)||re&&!z());){var fe=w.callback;if(typeof fe=="function"){w.callback=null,v=w.priorityLevel;var he=fe(w.expirationTime<=ee);ee=t.unstable_now(),typeof he=="function"?w.callback=he:w===n(p)&&r(p),M(ee)}else r(p);w=n(p)}if(w!==null)var Ee=!0;else{var ue=n(g);ue!==null&&G(H,ue.startTime-ee),Ee=!1}return Ee}finally{w=null,v=ie,b=!1}}var q=!1,k=null,A=-1,I=5,F=-1;function z(){return!(t.unstable_now()-F<I)}function O(){if(k!==null){var re=t.unstable_now();F=re;var ee=!0;try{ee=k(!0,re)}finally{ee?R():(q=!1,k=null)}}else q=!1}var R;if(typeof L=="function")R=function(){L(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Y=$.port2;$.port1.onmessage=O,R=function(){Y.postMessage(null)}}else R=function(){V(O,0)};function X(re){k=re,q||(q=!0,R())}function G(re,ee){A=V(function(){re(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,X(J))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(re){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ie=v;v=ee;try{return re()}finally{v=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,ee){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ie=v;v=re;try{return ee()}finally{v=ie}},t.unstable_scheduleCallback=function(re,ee,ie){var fe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,re){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ie+he,re={id:y++,callback:ee,priorityLevel:re,startTime:ie,expirationTime:he,sortIndex:-1},ie>fe?(re.sortIndex=ie,e(g,re),n(p)===null&&re===n(g)&&(j?(P(A),A=-1):j=!0,G(H,ie-fe))):(re.sortIndex=he,e(p,re),S||b||(S=!0,X(J))),re},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(re){var ee=v;return function(){var ie=v;v=ee;try{return re.apply(this,arguments)}finally{v=ie}}}})(fw);dw.exports=fw;var gI=dw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI=se,ti=gI;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gw=new Set,Jc={};function Ra(t,e){Nl(t,e),Nl(t+"Capture",e)}function Nl(t,e){for(Jc[t]=e,t=0;t<e.length;t++)gw.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L0=Object.prototype.hasOwnProperty,mI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rm={},Dm={};function xI(t){return L0.call(Dm,t)?!0:L0.call(Rm,t)?!1:mI.test(t)?Dm[t]=!0:(Rm[t]=!0,!1)}function yI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wI(t,e,n,r){if(e===null||typeof e>"u"||yI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(t,e,n,r,i,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rr[t]=new Er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rr[e]=new Er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rr[t]=new Er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rr[t]=new Er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rr[t]=new Er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rr[t]=new Er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rr[t]=new Er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rr[t]=new Er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rr[t]=new Er(t,5,!1,t.toLowerCase(),null,!1,!1)});var hg=/[\-:]([a-z])/g;function dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hg,dg);rr[e]=new Er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hg,dg);rr[e]=new Er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hg,dg);rr[e]=new Er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rr[t]=new Er(t,1,!1,t.toLowerCase(),null,!1,!1)});rr.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rr[t]=new Er(t,1,!1,t.toLowerCase(),null,!0,!0)});function fg(t,e,n,r){var i=rr.hasOwnProperty(e)?rr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wI(e,n,i,r)&&(n=null),r||i===null?xI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fs=pI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=Symbol.for("react.element"),nl=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),j0=Symbol.for("react.profiler"),pw=Symbol.for("react.provider"),mw=Symbol.for("react.context"),pg=Symbol.for("react.forward_ref"),F0=Symbol.for("react.suspense"),B0=Symbol.for("react.suspense_list"),mg=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),xw=Symbol.for("react.offscreen"),Pm=Symbol.iterator;function mc(t){return t===null||typeof t!="object"?null:(t=Pm&&t[Pm]||t["@@iterator"],typeof t=="function"?t:null)}var on=Object.assign,qf;function bc(t){if(qf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qf=e&&e[1]||""}return`
`+qf+t}var Yf=!1;function Xf(t,e){if(!t||Yf)return"";Yf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var r=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){r=g}t.call(e.prototype)}else{try{throw Error()}catch(g){r=g}t()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),o=r.stack.split(`
`),c=i.length-1,f=o.length-1;1<=c&&0<=f&&i[c]!==o[f];)f--;for(;1<=c&&0<=f;c--,f--)if(i[c]!==o[f]){if(c!==1||f!==1)do if(c--,f--,0>f||i[c]!==o[f]){var p=`
`+i[c].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=c&&0<=f);break}}}finally{Yf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bc(t):""}function EI(t){switch(t.tag){case 5:return bc(t.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return t=Xf(t.type,!1),t;case 11:return t=Xf(t.type.render,!1),t;case 1:return t=Xf(t.type,!0),t;default:return""}}function U0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rl:return"Fragment";case nl:return"Portal";case j0:return"Profiler";case gg:return"StrictMode";case F0:return"Suspense";case B0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mw:return(t.displayName||"Context")+".Consumer";case pw:return(t._context.displayName||"Context")+".Provider";case pg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mg:return e=t.displayName||null,e!==null?e:U0(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return U0(t(e))}catch{}}return null}function _I(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U0(e);case 8:return e===gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function No(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vI(t){var e=yw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ch(t){t._valueTracker||(t._valueTracker=vI(t))}function ww(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function V0(t,e){var n=e.checked;return on({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function km(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=No(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ew(t,e){e=e.checked,e!=null&&fg(t,"checked",e,!1)}function z0(t,e){Ew(t,e);var n=No(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?H0(t,e.type,n):e.hasOwnProperty("defaultValue")&&H0(t,e.type,No(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Om(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function H0(t,e,n){(e!=="number"||ed(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tc=Array.isArray;function yl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+No(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function W0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return on({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Tc(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:No(n)}}function _w(t,e){var n=No(e.value),r=No(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uh,Cw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uh=uh||document.createElement("div"),uh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CI=["Webkit","ms","Moz","O"];Object.keys(Mc).forEach(function(t){CI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mc[e]=Mc[t]})});function Aw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mc.hasOwnProperty(t)&&Mc[t]?(""+e).trim():e+"px"}function Iw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Aw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var AI=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q0(t,e){if(e){if(AI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function Y0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X0=null;function xg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var K0=null,wl=null,El=null;function jm(t){if(t=Ou(t)){if(typeof K0!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=rf(e),K0(t.stateNode,t.type,e))}}function bw(t){wl?El?El.push(t):El=[t]:wl=t}function Tw(){if(wl){var t=wl,e=El;if(El=wl=null,jm(t),e)for(t=0;t<e.length;t++)jm(e[t])}}function Sw(t,e){return t(e)}function Nw(){}var Kf=!1;function Rw(t,e,n){if(Kf)return t(e,n);Kf=!0;try{return Sw(t,e,n)}finally{Kf=!1,(wl!==null||El!==null)&&(Nw(),Tw())}}function tu(t,e){var n=t.stateNode;if(n===null)return null;var r=rf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var Q0=!1;if(Ss)try{var xc={};Object.defineProperty(xc,"passive",{get:function(){Q0=!0}}),window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Q0=!1}function II(t,e,n,r,i,o,c,f,p){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(y){this.onError(y)}}var Lc=!1,td=null,nd=!1,$0=null,bI={onError:function(t){Lc=!0,td=t}};function TI(t,e,n,r,i,o,c,f,p){Lc=!1,td=null,II.apply(bI,arguments)}function SI(t,e,n,r,i,o,c,f,p){if(TI.apply(this,arguments),Lc){if(Lc){var g=td;Lc=!1,td=null}else throw Error(Ce(198));nd||(nd=!0,$0=g)}}function Da(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fm(t){if(Da(t)!==t)throw Error(Ce(188))}function NI(t){var e=t.alternate;if(!e){if(e=Da(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Fm(i),t;if(o===r)return Fm(i),e;o=o.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=i,r=o;else{for(var c=!1,f=i.child;f;){if(f===n){c=!0,n=i,r=o;break}if(f===r){c=!0,r=i,n=o;break}f=f.sibling}if(!c){for(f=o.child;f;){if(f===n){c=!0,n=o,r=i;break}if(f===r){c=!0,r=o,n=i;break}f=f.sibling}if(!c)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function Pw(t){return t=NI(t),t!==null?kw(t):null}function kw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kw(t);if(e!==null)return e;t=t.sibling}return null}var Ow=ti.unstable_scheduleCallback,Bm=ti.unstable_cancelCallback,RI=ti.unstable_shouldYield,DI=ti.unstable_requestPaint,En=ti.unstable_now,PI=ti.unstable_getCurrentPriorityLevel,yg=ti.unstable_ImmediatePriority,Mw=ti.unstable_UserBlockingPriority,rd=ti.unstable_NormalPriority,kI=ti.unstable_LowPriority,Lw=ti.unstable_IdlePriority,Jd=null,Ji=null;function OI(t){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:jI,MI=Math.log,LI=Math.LN2;function jI(t){return t>>>=0,t===0?32:31-(MI(t)/LI|0)|0}var hh=64,dh=4194304;function Sc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,c=n&268435455;if(c!==0){var f=c&~i;f!==0?r=Sc(f):(o&=c,o!==0&&(r=Sc(o)))}else c=n&~i,c!==0?r=Sc(c):o!==0&&(r=Sc(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ti(e),i=1<<n,r|=t[n],e&=~i;return r}function FI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Ti(o),f=1<<c,p=i[c];p===-1?(!(f&n)||f&r)&&(i[c]=FI(f,e)):p<=e&&(t.expiredLanes|=f),o&=~f}}function Z0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jw(){var t=hh;return hh<<=1,!(hh&4194240)&&(hh=64),t}function Qf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ti(e),t[e]=n}function UI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ti(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function wg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ti(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Dt=0;function Fw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bw,Eg,Uw,Vw,zw,J0=!1,fh=[],po=null,mo=null,xo=null,nu=new Map,ru=new Map,to=[],VI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Um(t,e){switch(t){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function yc(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ou(e),e!==null&&Eg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zI(t,e,n,r,i){switch(e){case"focusin":return po=yc(po,t,e,n,r,i),!0;case"dragenter":return mo=yc(mo,t,e,n,r,i),!0;case"mouseover":return xo=yc(xo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return nu.set(o,yc(nu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ru.set(o,yc(ru.get(o)||null,t,e,n,r,i)),!0}return!1}function Hw(t){var e=oa(t.target);if(e!==null){var n=Da(e);if(n!==null){if(e=n.tag,e===13){if(e=Dw(n),e!==null){t.blockedOn=e,zw(t.priority,function(){Uw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=e1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);X0=r,n.target.dispatchEvent(r),X0=null}else return e=Ou(n),e!==null&&Eg(e),t.blockedOn=n,!1;e.shift()}return!0}function Vm(t,e,n){Oh(t)&&n.delete(e)}function HI(){J0=!1,po!==null&&Oh(po)&&(po=null),mo!==null&&Oh(mo)&&(mo=null),xo!==null&&Oh(xo)&&(xo=null),nu.forEach(Vm),ru.forEach(Vm)}function wc(t,e){t.blockedOn===e&&(t.blockedOn=null,J0||(J0=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,HI)))}function iu(t){function e(i){return wc(i,t)}if(0<fh.length){wc(fh[0],t);for(var n=1;n<fh.length;n++){var r=fh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(po!==null&&wc(po,t),mo!==null&&wc(mo,t),xo!==null&&wc(xo,t),nu.forEach(e),ru.forEach(e),n=0;n<to.length;n++)r=to[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<to.length&&(n=to[0],n.blockedOn===null);)Hw(n),n.blockedOn===null&&to.shift()}var _l=Fs.ReactCurrentBatchConfig,sd=!0;function WI(t,e,n,r){var i=Dt,o=_l.transition;_l.transition=null;try{Dt=1,_g(t,e,n,r)}finally{Dt=i,_l.transition=o}}function GI(t,e,n,r){var i=Dt,o=_l.transition;_l.transition=null;try{Dt=4,_g(t,e,n,r)}finally{Dt=i,_l.transition=o}}function _g(t,e,n,r){if(sd){var i=e1(t,e,n,r);if(i===null)o0(t,e,r,od,n),Um(t,r);else if(zI(i,t,e,n,r))r.stopPropagation();else if(Um(t,r),e&4&&-1<VI.indexOf(t)){for(;i!==null;){var o=Ou(i);if(o!==null&&Bw(o),o=e1(t,e,n,r),o===null&&o0(t,e,r,od,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else o0(t,e,r,null,n)}}var od=null;function e1(t,e,n,r){if(od=null,t=xg(r),t=oa(t),t!==null)if(e=Da(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function Ww(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PI()){case yg:return 1;case Mw:return 4;case rd:case kI:return 16;case Lw:return 536870912;default:return 16}default:return 16}}var lo=null,vg=null,Mh=null;function Gw(){if(Mh)return Mh;var t,e=vg,n=e.length,r,i="value"in lo?lo.value:lo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===i[o-r];r++);return Mh=i.slice(t,1<r?1-r:void 0)}function Lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gh(){return!0}function zm(){return!1}function ri(t){function e(n,r,i,o,c){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gh:zm,this.isPropagationStopped=zm,this}return on(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gh)},persist:function(){},isPersistent:gh}),e}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cg=ri(Wl),ku=on({},Wl,{view:0,detail:0}),qI=ri(ku),$f,Zf,Ec,ef=on({},ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ec&&(Ec&&t.type==="mousemove"?($f=t.screenX-Ec.screenX,Zf=t.screenY-Ec.screenY):Zf=$f=0,Ec=t),$f)},movementY:function(t){return"movementY"in t?t.movementY:Zf}}),Hm=ri(ef),YI=on({},ef,{dataTransfer:0}),XI=ri(YI),KI=on({},ku,{relatedTarget:0}),Jf=ri(KI),QI=on({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),$I=ri(QI),ZI=on({},Wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JI=ri(ZI),eb=on({},Wl,{data:0}),Wm=ri(eb),tb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ib(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rb[t])?!!e[t]:!1}function Ag(){return ib}var sb=on({},ku,{key:function(t){if(t.key){var e=tb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?Lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ob=ri(sb),ab=on({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gm=ri(ab),lb=on({},ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),cb=ri(lb),ub=on({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),hb=ri(ub),db=on({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fb=ri(db),gb=[9,13,27,32],Ig=Ss&&"CompositionEvent"in window,jc=null;Ss&&"documentMode"in document&&(jc=document.documentMode);var pb=Ss&&"TextEvent"in window&&!jc,qw=Ss&&(!Ig||jc&&8<jc&&11>=jc),qm=" ",Ym=!1;function Yw(t,e){switch(t){case"keyup":return gb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var il=!1;function mb(t,e){switch(t){case"compositionend":return Xw(e);case"keypress":return e.which!==32?null:(Ym=!0,qm);case"textInput":return t=e.data,t===qm&&Ym?null:t;default:return null}}function xb(t,e){if(il)return t==="compositionend"||!Ig&&Yw(t,e)?(t=Gw(),Mh=vg=lo=null,il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qw&&e.locale!=="ko"?null:e.data;default:return null}}var yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yb[t.type]:e==="textarea"}function Kw(t,e,n,r){bw(r),e=ad(e,"onChange"),0<e.length&&(n=new Cg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fc=null,su=null;function wb(t){oE(t,0)}function tf(t){var e=al(t);if(ww(e))return t}function Eb(t,e){if(t==="change")return e}var Qw=!1;if(Ss){var e0;if(Ss){var t0="oninput"in document;if(!t0){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),t0=typeof Km.oninput=="function"}e0=t0}else e0=!1;Qw=e0&&(!document.documentMode||9<document.documentMode)}function Qm(){Fc&&(Fc.detachEvent("onpropertychange",$w),su=Fc=null)}function $w(t){if(t.propertyName==="value"&&tf(su)){var e=[];Kw(e,su,t,xg(t)),Rw(wb,e)}}function _b(t,e,n){t==="focusin"?(Qm(),Fc=e,su=n,Fc.attachEvent("onpropertychange",$w)):t==="focusout"&&Qm()}function vb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(su)}function Cb(t,e){if(t==="click")return tf(e)}function Ab(t,e){if(t==="input"||t==="change")return tf(e)}function Ib(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Di=typeof Object.is=="function"?Object.is:Ib;function ou(t,e){if(Di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L0.call(e,i)||!Di(t[i],e[i]))return!1}return!0}function $m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zm(t,e){var n=$m(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$m(n)}}function Zw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jw(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ed(t.document)}return e}function bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bb(t){var e=Jw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zw(n.ownerDocument.documentElement,n)){if(r!==null&&bg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Zm(n,o);var c=Zm(n,r);i&&c&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tb=Ss&&"documentMode"in document&&11>=document.documentMode,sl=null,t1=null,Bc=null,n1=!1;function Jm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n1||sl==null||sl!==ed(r)||(r=sl,"selectionStart"in r&&bg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bc&&ou(Bc,r)||(Bc=r,r=ad(t1,"onSelect"),0<r.length&&(e=new Cg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sl)))}function ph(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ol={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},n0={},eE={};Ss&&(eE=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function nf(t){if(n0[t])return n0[t];if(!ol[t])return t;var e=ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eE)return n0[t]=e[n];return t}var tE=nf("animationend"),nE=nf("animationiteration"),rE=nf("animationstart"),iE=nf("transitionend"),sE=new Map,ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uo(t,e){sE.set(t,e),Ra(e,[t])}for(var r0=0;r0<ex.length;r0++){var i0=ex[r0],Sb=i0.toLowerCase(),Nb=i0[0].toUpperCase()+i0.slice(1);Uo(Sb,"on"+Nb)}Uo(tE,"onAnimationEnd");Uo(nE,"onAnimationIteration");Uo(rE,"onAnimationStart");Uo("dblclick","onDoubleClick");Uo("focusin","onFocus");Uo("focusout","onBlur");Uo(iE,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nc));function tx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SI(r,e,void 0,t),t.currentTarget=null}function oE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var c=r.length-1;0<=c;c--){var f=r[c],p=f.instance,g=f.currentTarget;if(f=f.listener,p!==o&&i.isPropagationStopped())break e;tx(i,f,g),o=p}else for(c=0;c<r.length;c++){if(f=r[c],p=f.instance,g=f.currentTarget,f=f.listener,p!==o&&i.isPropagationStopped())break e;tx(i,f,g),o=p}}}if(nd)throw t=$0,nd=!1,$0=null,t}function Yt(t,e){var n=e[a1];n===void 0&&(n=e[a1]=new Set);var r=t+"__bubble";n.has(r)||(aE(e,t,2,!1),n.add(r))}function s0(t,e,n){var r=0;e&&(r|=4),aE(n,t,r,e)}var mh="_reactListening"+Math.random().toString(36).slice(2);function au(t){if(!t[mh]){t[mh]=!0,gw.forEach(function(n){n!=="selectionchange"&&(Rb.has(n)||s0(n,!1,t),s0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mh]||(e[mh]=!0,s0("selectionchange",!1,e))}}function aE(t,e,n,r){switch(Ww(e)){case 1:var i=WI;break;case 4:i=GI;break;default:i=_g}n=i.bind(null,e,n,t),i=void 0,!Q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function o0(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var f=r.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(c===4)for(c=r.return;c!==null;){var p=c.tag;if((p===3||p===4)&&(p=c.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;c=c.return}for(;f!==null;){if(c=oa(f),c===null)return;if(p=c.tag,p===5||p===6){r=o=c;continue e}f=f.parentNode}}r=r.return}Rw(function(){var g=o,y=xg(n),w=[];e:{var v=sE.get(t);if(v!==void 0){var b=Cg,S=t;switch(t){case"keypress":if(Lh(n)===0)break e;case"keydown":case"keyup":b=ob;break;case"focusin":S="focus",b=Jf;break;case"focusout":S="blur",b=Jf;break;case"beforeblur":case"afterblur":b=Jf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=XI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=cb;break;case tE:case nE:case rE:b=$I;break;case iE:b=hb;break;case"scroll":b=qI;break;case"wheel":b=fb;break;case"copy":case"cut":case"paste":b=JI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Gm}var j=(e&4)!==0,V=!j&&t==="scroll",P=j?v!==null?v+"Capture":null:v;j=[];for(var L=g,M;L!==null;){M=L;var H=M.stateNode;if(M.tag===5&&H!==null&&(M=H,P!==null&&(H=tu(L,P),H!=null&&j.push(lu(L,H,M)))),V)break;L=L.return}0<j.length&&(v=new b(v,S,null,n,y),w.push({event:v,listeners:j}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&n!==X0&&(S=n.relatedTarget||n.fromElement)&&(oa(S)||S[Ns]))break e;if((b||v)&&(v=y.window===y?y:(v=y.ownerDocument)?v.defaultView||v.parentWindow:window,b?(S=n.relatedTarget||n.toElement,b=g,S=S?oa(S):null,S!==null&&(V=Da(S),S!==V||S.tag!==5&&S.tag!==6)&&(S=null)):(b=null,S=g),b!==S)){if(j=Hm,H="onMouseLeave",P="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(j=Gm,H="onPointerLeave",P="onPointerEnter",L="pointer"),V=b==null?v:al(b),M=S==null?v:al(S),v=new j(H,L+"leave",b,n,y),v.target=V,v.relatedTarget=M,H=null,oa(y)===g&&(j=new j(P,L+"enter",S,n,y),j.target=M,j.relatedTarget=V,H=j),V=H,b&&S)t:{for(j=b,P=S,L=0,M=j;M;M=$a(M))L++;for(M=0,H=P;H;H=$a(H))M++;for(;0<L-M;)j=$a(j),L--;for(;0<M-L;)P=$a(P),M--;for(;L--;){if(j===P||P!==null&&j===P.alternate)break t;j=$a(j),P=$a(P)}j=null}else j=null;b!==null&&nx(w,v,b,j,!1),S!==null&&V!==null&&nx(w,V,S,j,!0)}}e:{if(v=g?al(g):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var J=Eb;else if(Xm(v))if(Qw)J=Ab;else{J=vb;var q=_b}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(J=Cb);if(J&&(J=J(t,g))){Kw(w,J,n,y);break e}q&&q(t,v,g),t==="focusout"&&(q=v._wrapperState)&&q.controlled&&v.type==="number"&&H0(v,"number",v.value)}switch(q=g?al(g):window,t){case"focusin":(Xm(q)||q.contentEditable==="true")&&(sl=q,t1=g,Bc=null);break;case"focusout":Bc=t1=sl=null;break;case"mousedown":n1=!0;break;case"contextmenu":case"mouseup":case"dragend":n1=!1,Jm(w,n,y);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":Jm(w,n,y)}var k;if(Ig)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else il?Yw(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(qw&&n.locale!=="ko"&&(il||A!=="onCompositionStart"?A==="onCompositionEnd"&&il&&(k=Gw()):(lo=y,vg="value"in lo?lo.value:lo.textContent,il=!0)),q=ad(g,A),0<q.length&&(A=new Wm(A,t,null,n,y),w.push({event:A,listeners:q}),k?A.data=k:(k=Xw(n),k!==null&&(A.data=k)))),(k=pb?mb(t,n):xb(t,n))&&(g=ad(g,"onBeforeInput"),0<g.length&&(y=new Wm("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:g}),y.data=k))}oE(w,e)})}function lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ad(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=tu(t,n),o!=null&&r.unshift(lu(t,o,i)),o=tu(t,e),o!=null&&r.push(lu(t,o,i))),t=t.return}return r}function $a(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nx(t,e,n,r,i){for(var o=e._reactName,c=[];n!==null&&n!==r;){var f=n,p=f.alternate,g=f.stateNode;if(p!==null&&p===r)break;f.tag===5&&g!==null&&(f=g,i?(p=tu(n,o),p!=null&&c.unshift(lu(n,p,f))):i||(p=tu(n,o),p!=null&&c.push(lu(n,p,f)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var Db=/\r\n?/g,Pb=/\u0000|\uFFFD/g;function rx(t){return(typeof t=="string"?t:""+t).replace(Db,`
`).replace(Pb,"")}function xh(t,e,n){if(e=rx(e),rx(t)!==e&&n)throw Error(Ce(425))}function ld(){}var r1=null,i1=null;function s1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var o1=typeof setTimeout=="function"?setTimeout:void 0,kb=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,Ob=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(t){return ix.resolve(null).then(t).catch(Mb)}:o1;function Mb(t){setTimeout(function(){throw t})}function a0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),iu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);iu(e)}function yo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gl=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Gl,cu="__reactProps$"+Gl,Ns="__reactContainer$"+Gl,a1="__reactEvents$"+Gl,Lb="__reactListeners$"+Gl,jb="__reactHandles$"+Gl;function oa(t){var e=t[Qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ns]||n[Qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sx(t);t!==null;){if(n=t[Qi])return n;t=sx(t)}return e}t=n,n=t.parentNode}return null}function Ou(t){return t=t[Qi]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function rf(t){return t[cu]||null}var l1=[],ll=-1;function Vo(t){return{current:t}}function Kt(t){0>ll||(t.current=l1[ll],l1[ll]=null,ll--)}function zt(t,e){ll++,l1[ll]=t.current,t.current=e}var Ro={},ur=Vo(Ro),Pr=Vo(!1),pa=Ro;function Rl(t,e){var n=t.type.contextTypes;if(!n)return Ro;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function cd(){Kt(Pr),Kt(ur)}function ox(t,e,n){if(ur.current!==Ro)throw Error(Ce(168));zt(ur,e),zt(Pr,n)}function lE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ce(108,_I(t)||"Unknown",i));return on({},n,r)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ro,pa=ur.current,zt(ur,t),zt(Pr,Pr.current),!0}function ax(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=lE(t,e,pa),r.__reactInternalMemoizedMergedChildContext=t,Kt(Pr),Kt(ur),zt(ur,t)):Kt(Pr),zt(Pr,n)}var ys=null,sf=!1,l0=!1;function cE(t){ys===null?ys=[t]:ys.push(t)}function Fb(t){sf=!0,cE(t)}function zo(){if(!l0&&ys!==null){l0=!0;var t=0,e=Dt;try{var n=ys;for(Dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,sf=!1}catch(i){throw ys!==null&&(ys=ys.slice(t+1)),Ow(yg,zo),i}finally{Dt=e,l0=!1}}return null}var cl=[],ul=0,hd=null,dd=0,ui=[],hi=0,ma=null,ws=1,Es="";function ra(t,e){cl[ul++]=dd,cl[ul++]=hd,hd=t,dd=e}function uE(t,e,n){ui[hi++]=ws,ui[hi++]=Es,ui[hi++]=ma,ma=t;var r=ws;t=Es;var i=32-Ti(r)-1;r&=~(1<<i),n+=1;var o=32-Ti(e)+i;if(30<o){var c=i-i%5;o=(r&(1<<c)-1).toString(32),r>>=c,i-=c,ws=1<<32-Ti(e)+i|n<<i|r,Es=o+t}else ws=1<<o|n<<i|r,Es=t}function Tg(t){t.return!==null&&(ra(t,1),uE(t,1,0))}function Sg(t){for(;t===hd;)hd=cl[--ul],cl[ul]=null,dd=cl[--ul],cl[ul]=null;for(;t===ma;)ma=ui[--hi],ui[hi]=null,Es=ui[--hi],ui[hi]=null,ws=ui[--hi],ui[hi]=null}var Zr=null,Kr=null,$t=!1,Ii=null;function hE(t,e){var n=di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Kr=yo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ma!==null?{id:ws,overflow:Es}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zr=t,Kr=null,!0):!1;default:return!1}}function c1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function u1(t){if($t){var e=Kr;if(e){var n=e;if(!lx(t,e)){if(c1(t))throw Error(Ce(418));e=yo(n.nextSibling);var r=Zr;e&&lx(t,e)?hE(r,n):(t.flags=t.flags&-4097|2,$t=!1,Zr=t)}}else{if(c1(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,$t=!1,Zr=t}}}function cx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function yh(t){if(t!==Zr)return!1;if(!$t)return cx(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!s1(t.type,t.memoizedProps)),e&&(e=Kr)){if(c1(t))throw dE(),Error(Ce(418));for(;e;)hE(t,e),e=yo(e.nextSibling)}if(cx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kr=yo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kr=null}}else Kr=Zr?yo(t.stateNode.nextSibling):null;return!0}function dE(){for(var t=Kr;t;)t=yo(t.nextSibling)}function Dl(){Kr=Zr=null,$t=!1}function Ng(t){Ii===null?Ii=[t]:Ii.push(t)}var Bb=Fs.ReactCurrentBatchConfig;function _c(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var f=i.refs;c===null?delete f[o]:f[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function wh(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ux(t){var e=t._init;return e(t._payload)}function fE(t){function e(P,L){if(t){var M=P.deletions;M===null?(P.deletions=[L],P.flags|=16):M.push(L)}}function n(P,L){if(!t)return null;for(;L!==null;)e(P,L),L=L.sibling;return null}function r(P,L){for(P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function i(P,L){return P=vo(P,L),P.index=0,P.sibling=null,P}function o(P,L,M){return P.index=M,t?(M=P.alternate,M!==null?(M=M.index,M<L?(P.flags|=2,L):M):(P.flags|=2,L)):(P.flags|=1048576,L)}function c(P){return t&&P.alternate===null&&(P.flags|=2),P}function f(P,L,M,H){return L===null||L.tag!==6?(L=p0(M,P.mode,H),L.return=P,L):(L=i(L,M),L.return=P,L)}function p(P,L,M,H){var J=M.type;return J===rl?y(P,L,M.props.children,H,M.key):L!==null&&(L.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Js&&ux(J)===L.type)?(H=i(L,M.props),H.ref=_c(P,L,M),H.return=P,H):(H=Hh(M.type,M.key,M.props,null,P.mode,H),H.ref=_c(P,L,M),H.return=P,H)}function g(P,L,M,H){return L===null||L.tag!==4||L.stateNode.containerInfo!==M.containerInfo||L.stateNode.implementation!==M.implementation?(L=m0(M,P.mode,H),L.return=P,L):(L=i(L,M.children||[]),L.return=P,L)}function y(P,L,M,H,J){return L===null||L.tag!==7?(L=ha(M,P.mode,H,J),L.return=P,L):(L=i(L,M),L.return=P,L)}function w(P,L,M){if(typeof L=="string"&&L!==""||typeof L=="number")return L=p0(""+L,P.mode,M),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case lh:return M=Hh(L.type,L.key,L.props,null,P.mode,M),M.ref=_c(P,null,L),M.return=P,M;case nl:return L=m0(L,P.mode,M),L.return=P,L;case Js:var H=L._init;return w(P,H(L._payload),M)}if(Tc(L)||mc(L))return L=ha(L,P.mode,M,null),L.return=P,L;wh(P,L)}return null}function v(P,L,M,H){var J=L!==null?L.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return J!==null?null:f(P,L,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case lh:return M.key===J?p(P,L,M,H):null;case nl:return M.key===J?g(P,L,M,H):null;case Js:return J=M._init,v(P,L,J(M._payload),H)}if(Tc(M)||mc(M))return J!==null?null:y(P,L,M,H,null);wh(P,M)}return null}function b(P,L,M,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return P=P.get(M)||null,f(L,P,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case lh:return P=P.get(H.key===null?M:H.key)||null,p(L,P,H,J);case nl:return P=P.get(H.key===null?M:H.key)||null,g(L,P,H,J);case Js:var q=H._init;return b(P,L,M,q(H._payload),J)}if(Tc(H)||mc(H))return P=P.get(M)||null,y(L,P,H,J,null);wh(L,H)}return null}function S(P,L,M,H){for(var J=null,q=null,k=L,A=L=0,I=null;k!==null&&A<M.length;A++){k.index>A?(I=k,k=null):I=k.sibling;var F=v(P,k,M[A],H);if(F===null){k===null&&(k=I);break}t&&k&&F.alternate===null&&e(P,k),L=o(F,L,A),q===null?J=F:q.sibling=F,q=F,k=I}if(A===M.length)return n(P,k),$t&&ra(P,A),J;if(k===null){for(;A<M.length;A++)k=w(P,M[A],H),k!==null&&(L=o(k,L,A),q===null?J=k:q.sibling=k,q=k);return $t&&ra(P,A),J}for(k=r(P,k);A<M.length;A++)I=b(k,P,A,M[A],H),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?A:I.key),L=o(I,L,A),q===null?J=I:q.sibling=I,q=I);return t&&k.forEach(function(z){return e(P,z)}),$t&&ra(P,A),J}function j(P,L,M,H){var J=mc(M);if(typeof J!="function")throw Error(Ce(150));if(M=J.call(M),M==null)throw Error(Ce(151));for(var q=J=null,k=L,A=L=0,I=null,F=M.next();k!==null&&!F.done;A++,F=M.next()){k.index>A?(I=k,k=null):I=k.sibling;var z=v(P,k,F.value,H);if(z===null){k===null&&(k=I);break}t&&k&&z.alternate===null&&e(P,k),L=o(z,L,A),q===null?J=z:q.sibling=z,q=z,k=I}if(F.done)return n(P,k),$t&&ra(P,A),J;if(k===null){for(;!F.done;A++,F=M.next())F=w(P,F.value,H),F!==null&&(L=o(F,L,A),q===null?J=F:q.sibling=F,q=F);return $t&&ra(P,A),J}for(k=r(P,k);!F.done;A++,F=M.next())F=b(k,P,A,F.value,H),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?A:F.key),L=o(F,L,A),q===null?J=F:q.sibling=F,q=F);return t&&k.forEach(function(O){return e(P,O)}),$t&&ra(P,A),J}function V(P,L,M,H){if(typeof M=="object"&&M!==null&&M.type===rl&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case lh:e:{for(var J=M.key,q=L;q!==null;){if(q.key===J){if(J=M.type,J===rl){if(q.tag===7){n(P,q.sibling),L=i(q,M.props.children),L.return=P,P=L;break e}}else if(q.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Js&&ux(J)===q.type){n(P,q.sibling),L=i(q,M.props),L.ref=_c(P,q,M),L.return=P,P=L;break e}n(P,q);break}else e(P,q);q=q.sibling}M.type===rl?(L=ha(M.props.children,P.mode,H,M.key),L.return=P,P=L):(H=Hh(M.type,M.key,M.props,null,P.mode,H),H.ref=_c(P,L,M),H.return=P,P=H)}return c(P);case nl:e:{for(q=M.key;L!==null;){if(L.key===q)if(L.tag===4&&L.stateNode.containerInfo===M.containerInfo&&L.stateNode.implementation===M.implementation){n(P,L.sibling),L=i(L,M.children||[]),L.return=P,P=L;break e}else{n(P,L);break}else e(P,L);L=L.sibling}L=m0(M,P.mode,H),L.return=P,P=L}return c(P);case Js:return q=M._init,V(P,L,q(M._payload),H)}if(Tc(M))return S(P,L,M,H);if(mc(M))return j(P,L,M,H);wh(P,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,L!==null&&L.tag===6?(n(P,L.sibling),L=i(L,M),L.return=P,P=L):(n(P,L),L=p0(M,P.mode,H),L.return=P,P=L),c(P)):n(P,L)}return V}var Pl=fE(!0),gE=fE(!1),fd=Vo(null),gd=null,hl=null,Rg=null;function Dg(){Rg=hl=gd=null}function Pg(t){var e=fd.current;Kt(fd),t._currentValue=e}function h1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vl(t,e){gd=t,Rg=hl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dr=!0),t.firstContext=null)}function gi(t){var e=t._currentValue;if(Rg!==t)if(t={context:t,memoizedValue:e,next:null},hl===null){if(gd===null)throw Error(Ce(308));hl=t,gd.dependencies={lanes:0,firstContext:t}}else hl=hl.next=t;return e}var aa=null;function kg(t){aa===null?aa=[t]:aa.push(t)}function pE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rs(t,r)}function Rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var eo=!1;function Og(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function As(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rs(t,n)}return i=r.interleaved,i===null?(e.next=e,kg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rs(t,n)}function jh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wg(t,n)}}function hx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pd(t,e,n,r){var i=t.updateQueue;eo=!1;var o=i.firstBaseUpdate,c=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var p=f,g=p.next;p.next=null,c===null?o=g:c.next=g,c=p;var y=t.alternate;y!==null&&(y=y.updateQueue,f=y.lastBaseUpdate,f!==c&&(f===null?y.firstBaseUpdate=g:f.next=g,y.lastBaseUpdate=p))}if(o!==null){var w=i.baseState;c=0,y=g=p=null,f=o;do{var v=f.lane,b=f.eventTime;if((r&v)===v){y!==null&&(y=y.next={eventTime:b,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var S=t,j=f;switch(v=e,b=n,j.tag){case 1:if(S=j.payload,typeof S=="function"){w=S.call(b,w,v);break e}w=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=j.payload,v=typeof S=="function"?S.call(b,w,v):S,v==null)break e;w=on({},w,v);break e;case 2:eo=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[f]:v.push(f))}else b={eventTime:b,lane:v,tag:f.tag,payload:f.payload,callback:f.callback,next:null},y===null?(g=y=b,p=w):y=y.next=b,c|=v;if(f=f.next,f===null){if(f=i.shared.pending,f===null)break;v=f,f=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(y===null&&(p=w),i.baseState=p,i.firstBaseUpdate=g,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do c|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ya|=c,t.lanes=c,t.memoizedState=w}}function dx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ce(191,i));i.call(r)}}}var Mu={},es=Vo(Mu),uu=Vo(Mu),hu=Vo(Mu);function la(t){if(t===Mu)throw Error(Ce(174));return t}function Mg(t,e){switch(zt(hu,e),zt(uu,t),zt(es,Mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G0(e,t)}Kt(es),zt(es,e)}function kl(){Kt(es),Kt(uu),Kt(hu)}function xE(t){la(hu.current);var e=la(es.current),n=G0(e,t.type);e!==n&&(zt(uu,t),zt(es,n))}function Lg(t){uu.current===t&&(Kt(es),Kt(uu))}var nn=Vo(0);function md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var c0=[];function jg(){for(var t=0;t<c0.length;t++)c0[t]._workInProgressVersionPrimary=null;c0.length=0}var Fh=Fs.ReactCurrentDispatcher,u0=Fs.ReactCurrentBatchConfig,xa=0,sn=null,Fn=null,qn=null,xd=!1,Uc=!1,du=0,Ub=0;function sr(){throw Error(Ce(321))}function Fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Di(t[n],e[n]))return!1;return!0}function Bg(t,e,n,r,i,o){if(xa=o,sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=t===null||t.memoizedState===null?Wb:Gb,t=n(r,i),Uc){o=0;do{if(Uc=!1,du=0,25<=o)throw Error(Ce(301));o+=1,qn=Fn=null,e.updateQueue=null,Fh.current=qb,t=n(r,i)}while(Uc)}if(Fh.current=yd,e=Fn!==null&&Fn.next!==null,xa=0,qn=Fn=sn=null,xd=!1,e)throw Error(Ce(300));return t}function Ug(){var t=du!==0;return du=0,t}function qi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?sn.memoizedState=qn=t:qn=qn.next=t,qn}function pi(){if(Fn===null){var t=sn.alternate;t=t!==null?t.memoizedState:null}else t=Fn.next;var e=qn===null?sn.memoizedState:qn.next;if(e!==null)qn=e,Fn=t;else{if(t===null)throw Error(Ce(310));Fn=t,t={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},qn===null?sn.memoizedState=qn=t:qn=qn.next=t}return qn}function fu(t,e){return typeof e=="function"?e(t):e}function h0(t){var e=pi(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=Fn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var c=i.next;i.next=o.next,o.next=c}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var f=c=null,p=null,g=o;do{var y=g.lane;if((xa&y)===y)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:t(r,g.action);else{var w={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(f=p=w,c=r):p=p.next=w,sn.lanes|=y,ya|=y}g=g.next}while(g!==null&&g!==o);p===null?c=r:p.next=f,Di(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=p,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,sn.lanes|=o,ya|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function d0(t){var e=pi(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var c=i=i.next;do o=t(o,c.action),c=c.next;while(c!==i);Di(o,e.memoizedState)||(Dr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function yE(){}function wE(t,e){var n=sn,r=pi(),i=e(),o=!Di(r.memoizedState,i);if(o&&(r.memoizedState=i,Dr=!0),r=r.queue,Vg(vE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||qn!==null&&qn.memoizedState.tag&1){if(n.flags|=2048,gu(9,_E.bind(null,n,r,i,e),void 0,null),Kn===null)throw Error(Ce(349));xa&30||EE(n,e,i)}return i}function EE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _E(t,e,n,r){e.value=n,e.getSnapshot=r,CE(e)&&AE(t)}function vE(t,e,n){return n(function(){CE(e)&&AE(t)})}function CE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Di(t,n)}catch{return!0}}function AE(t){var e=Rs(t,1);e!==null&&Si(e,t,1,-1)}function fx(t){var e=qi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:t},e.queue=t,t=t.dispatch=Hb.bind(null,sn,t),[e.memoizedState,t]}function gu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IE(){return pi().memoizedState}function Bh(t,e,n,r){var i=qi();sn.flags|=t,i.memoizedState=gu(1|e,n,void 0,r===void 0?null:r)}function of(t,e,n,r){var i=pi();r=r===void 0?null:r;var o=void 0;if(Fn!==null){var c=Fn.memoizedState;if(o=c.destroy,r!==null&&Fg(r,c.deps)){i.memoizedState=gu(e,n,o,r);return}}sn.flags|=t,i.memoizedState=gu(1|e,n,o,r)}function gx(t,e){return Bh(8390656,8,t,e)}function Vg(t,e){return of(2048,8,t,e)}function bE(t,e){return of(4,2,t,e)}function TE(t,e){return of(4,4,t,e)}function SE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NE(t,e,n){return n=n!=null?n.concat([t]):null,of(4,4,SE.bind(null,e,t),n)}function zg(){}function RE(t,e){var n=pi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DE(t,e){var n=pi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PE(t,e,n){return xa&21?(Di(n,e)||(n=jw(),sn.lanes|=n,ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n)}function Vb(t,e){var n=Dt;Dt=n!==0&&4>n?n:4,t(!0);var r=u0.transition;u0.transition={};try{t(!1),e()}finally{Dt=n,u0.transition=r}}function kE(){return pi().memoizedState}function zb(t,e,n){var r=_o(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OE(t))ME(e,n);else if(n=pE(t,e,n,r),n!==null){var i=yr();Si(n,t,r,i),LE(n,e,r)}}function Hb(t,e,n){var r=_o(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OE(t))ME(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,f=o(c,n);if(i.hasEagerState=!0,i.eagerState=f,Di(f,c)){var p=e.interleaved;p===null?(i.next=i,kg(e)):(i.next=p.next,p.next=i),e.interleaved=i;return}}catch{}finally{}n=pE(t,e,i,r),n!==null&&(i=yr(),Si(n,t,r,i),LE(n,e,r))}}function OE(t){var e=t.alternate;return t===sn||e!==null&&e===sn}function ME(t,e){Uc=xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wg(t,n)}}var yd={readContext:gi,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},Wb={readContext:gi,useCallback:function(t,e){return qi().memoizedState=[t,e===void 0?null:e],t},useContext:gi,useEffect:gx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,SE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=qi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zb.bind(null,sn,t),[r.memoizedState,t]},useRef:function(t){var e=qi();return t={current:t},e.memoizedState=t},useState:fx,useDebugValue:zg,useDeferredValue:function(t){return qi().memoizedState=t},useTransition:function(){var t=fx(!1),e=t[0];return t=Vb.bind(null,t[1]),qi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sn,i=qi();if($t){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),Kn===null)throw Error(Ce(349));xa&30||EE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,gx(vE.bind(null,r,o,t),[t]),r.flags|=2048,gu(9,_E.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=qi(),e=Kn.identifierPrefix;if($t){var n=Es,r=ws;n=(r&~(1<<32-Ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ub++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gb={readContext:gi,useCallback:RE,useContext:gi,useEffect:Vg,useImperativeHandle:NE,useInsertionEffect:bE,useLayoutEffect:TE,useMemo:DE,useReducer:h0,useRef:IE,useState:function(){return h0(fu)},useDebugValue:zg,useDeferredValue:function(t){var e=pi();return PE(e,Fn.memoizedState,t)},useTransition:function(){var t=h0(fu)[0],e=pi().memoizedState;return[t,e]},useMutableSource:yE,useSyncExternalStore:wE,useId:kE,unstable_isNewReconciler:!1},qb={readContext:gi,useCallback:RE,useContext:gi,useEffect:Vg,useImperativeHandle:NE,useInsertionEffect:bE,useLayoutEffect:TE,useMemo:DE,useReducer:d0,useRef:IE,useState:function(){return d0(fu)},useDebugValue:zg,useDeferredValue:function(t){var e=pi();return Fn===null?e.memoizedState=t:PE(e,Fn.memoizedState,t)},useTransition:function(){var t=d0(fu)[0],e=pi().memoizedState;return[t,e]},useMutableSource:yE,useSyncExternalStore:wE,useId:kE,unstable_isNewReconciler:!1};function vi(t,e){if(t&&t.defaultProps){e=on({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function d1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:on({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var af={isMounted:function(t){return(t=t._reactInternals)?Da(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yr(),i=_o(t),o=As(r,i);o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Si(e,t,i,r),jh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yr(),i=_o(t),o=As(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Si(e,t,i,r),jh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yr(),r=_o(t),i=As(n,r);i.tag=2,e!=null&&(i.callback=e),e=wo(t,i,r),e!==null&&(Si(e,t,r,n),jh(e,t,r))}};function px(t,e,n,r,i,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,c):e.prototype&&e.prototype.isPureReactComponent?!ou(n,r)||!ou(i,o):!0}function jE(t,e,n){var r=!1,i=Ro,o=e.contextType;return typeof o=="object"&&o!==null?o=gi(o):(i=kr(e)?pa:ur.current,r=e.contextTypes,o=(r=r!=null)?Rl(t,i):Ro),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=af,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function mx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&af.enqueueReplaceState(e,e.state,null)}function f1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Og(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=gi(o):(o=kr(e)?pa:ur.current,i.context=Rl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(d1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&af.enqueueReplaceState(i,i.state,null),pd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ol(t,e){try{var n="",r=e;do n+=EI(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function f0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function g1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yb=typeof WeakMap=="function"?WeakMap:Map;function FE(t,e,n){n=As(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ed||(Ed=!0,A1=r),g1(t,e)},n}function BE(t,e,n){n=As(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){g1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){g1(t,e),typeof r!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function xx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aT.bind(null,t,e,n),e.then(t,t))}function yx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=As(-1,1),e.tag=2,wo(n,e,1))),n.lanes|=1),t)}var Xb=Fs.ReactCurrentOwner,Dr=!1;function mr(t,e,n,r){e.child=t===null?gE(e,null,n,r):Pl(e,t.child,n,r)}function Ex(t,e,n,r,i){n=n.render;var o=e.ref;return vl(e,i),r=Bg(t,e,n,r,o,i),n=Ug(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ds(t,e,i)):($t&&n&&Tg(e),e.flags|=1,mr(t,e,r,i),e.child)}function _x(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Qg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,UE(t,e,o,r,i)):(t=Hh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:ou,n(c,r)&&t.ref===e.ref)return Ds(t,e,i)}return e.flags|=1,t=vo(o,r),t.ref=e.ref,t.return=e,e.child=t}function UE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ou(o,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Dr=!0);else return e.lanes=t.lanes,Ds(t,e,i)}return p1(t,e,n,r,i)}function VE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(fl,Gr),Gr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,zt(fl,Gr),Gr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,zt(fl,Gr),Gr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,zt(fl,Gr),Gr|=r;return mr(t,e,i,n),e.child}function zE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function p1(t,e,n,r,i){var o=kr(n)?pa:ur.current;return o=Rl(e,o),vl(e,i),n=Bg(t,e,n,r,o,i),r=Ug(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ds(t,e,i)):($t&&r&&Tg(e),e.flags|=1,mr(t,e,n,i),e.child)}function vx(t,e,n,r,i){if(kr(n)){var o=!0;ud(e)}else o=!1;if(vl(e,i),e.stateNode===null)Uh(t,e),jE(e,n,r),f1(e,n,r,i),r=!0;else if(t===null){var c=e.stateNode,f=e.memoizedProps;c.props=f;var p=c.context,g=n.contextType;typeof g=="object"&&g!==null?g=gi(g):(g=kr(n)?pa:ur.current,g=Rl(e,g));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function";w||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==r||p!==g)&&mx(e,c,r,g),eo=!1;var v=e.memoizedState;c.state=v,pd(e,r,c,i),p=e.memoizedState,f!==r||v!==p||Pr.current||eo?(typeof y=="function"&&(d1(e,n,y,r),p=e.memoizedState),(f=eo||px(e,n,f,r,v,p,g))?(w||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=p),c.props=r,c.state=p,c.context=g,r=f):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,mE(t,e),f=e.memoizedProps,g=e.type===e.elementType?f:vi(e.type,f),c.props=g,w=e.pendingProps,v=c.context,p=n.contextType,typeof p=="object"&&p!==null?p=gi(p):(p=kr(n)?pa:ur.current,p=Rl(e,p));var b=n.getDerivedStateFromProps;(y=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==w||v!==p)&&mx(e,c,r,p),eo=!1,v=e.memoizedState,c.state=v,pd(e,r,c,i);var S=e.memoizedState;f!==w||v!==S||Pr.current||eo?(typeof b=="function"&&(d1(e,n,b,r),S=e.memoizedState),(g=eo||px(e,n,g,r,v,S,p)||!1)?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,S,p),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,S,p)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),c.props=r,c.state=S,c.context=p,r=g):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return m1(t,e,n,r,o,i)}function m1(t,e,n,r,i,o){zE(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return i&&ax(e,n,!1),Ds(t,e,o);r=e.stateNode,Xb.current=e;var f=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=Pl(e,t.child,null,o),e.child=Pl(e,null,f,o)):mr(t,e,f,o),e.memoizedState=r.state,i&&ax(e,n,!0),e.child}function HE(t){var e=t.stateNode;e.pendingContext?ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ox(t,e.context,!1),Mg(t,e.containerInfo)}function Cx(t,e,n,r,i){return Dl(),Ng(i),e.flags|=256,mr(t,e,n,r),e.child}var x1={dehydrated:null,treeContext:null,retryLane:0};function y1(t){return{baseLanes:t,cachePool:null,transitions:null}}function WE(t,e,n){var r=e.pendingProps,i=nn.current,o=!1,c=(e.flags&128)!==0,f;if((f=c)||(f=t!==null&&t.memoizedState===null?!1:(i&2)!==0),f?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),zt(nn,i&1),t===null)return u1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,o?(r=e.mode,o=e.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=uf(c,r,0,null),t=ha(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=y1(n),e.memoizedState=x1,t):Hg(e,c));if(i=t.memoizedState,i!==null&&(f=i.dehydrated,f!==null))return Kb(t,e,c,r,f,i,n);if(o){o=r.fallback,c=e.mode,i=t.child,f=i.sibling;var p={mode:"hidden",children:r.children};return!(c&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=p,e.deletions=null):(r=vo(i,p),r.subtreeFlags=i.subtreeFlags&14680064),f!==null?o=vo(f,o):(o=ha(o,c,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,c=t.child.memoizedState,c=c===null?y1(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~n,e.memoizedState=x1,r}return o=t.child,t=o.sibling,r=vo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hg(t,e){return e=uf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eh(t,e,n,r){return r!==null&&Ng(r),Pl(e,t.child,null,n),t=Hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kb(t,e,n,r,i,o,c){if(n)return e.flags&256?(e.flags&=-257,r=f0(Error(Ce(422))),Eh(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=uf({mode:"visible",children:r.children},i,0,null),o=ha(o,i,c,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Pl(e,t.child,null,c),e.child.memoizedState=y1(c),e.memoizedState=x1,o);if(!(e.mode&1))return Eh(t,e,c,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var f=r.dgst;return r=f,o=Error(Ce(419)),r=f0(o,r,void 0),Eh(t,e,c,r)}if(f=(c&t.childLanes)!==0,Dr||f){if(r=Kn,r!==null){switch(c&-c){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|c)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Rs(t,i),Si(r,t,i,-1))}return Kg(),r=f0(Error(Ce(421))),Eh(t,e,c,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lT.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Kr=yo(i.nextSibling),Zr=e,$t=!0,Ii=null,t!==null&&(ui[hi++]=ws,ui[hi++]=Es,ui[hi++]=ma,ws=t.id,Es=t.overflow,ma=e),e=Hg(e,r.children),e.flags|=4096,e)}function Ax(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),h1(t.return,e,n)}function g0(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function GE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(mr(t,e,r.children,n),r=nn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ax(t,n,e);else if(t.tag===19)Ax(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zt(nn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&md(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),g0(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&md(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}g0(e,!0,n,null,o);break;case"together":g0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ds(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=vo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qb(t,e,n){switch(e.tag){case 3:HE(e),Dl();break;case 5:xE(e);break;case 1:kr(e.type)&&ud(e);break;case 4:Mg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;zt(fd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(zt(nn,nn.current&1),e.flags|=128,null):n&e.child.childLanes?WE(t,e,n):(zt(nn,nn.current&1),t=Ds(t,e,n),t!==null?t.sibling:null);zt(nn,nn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return GE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),zt(nn,nn.current),r)break;return null;case 22:case 23:return e.lanes=0,VE(t,e,n)}return Ds(t,e,n)}var qE,w1,YE,XE;qE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w1=function(){};YE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,la(es.current);var o=null;switch(n){case"input":i=V0(t,i),r=V0(t,r),o=[];break;case"select":i=on({},i,{value:void 0}),r=on({},r,{value:void 0}),o=[];break;case"textarea":i=W0(t,i),r=W0(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ld)}q0(n,r);var c;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var f=i[g];for(c in f)f.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Jc.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var p=r[g];if(f=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&p!==f&&(p!=null||f!=null))if(g==="style")if(f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(n||(n={}),n[c]=p[c])}else n||(o||(o=[]),o.push(g,n)),n=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(o=o||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Jc.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&Yt("scroll",t),o||f===p||(o=[])):(o=o||[]).push(g,p))}n&&(o=o||[]).push("style",n);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};XE=function(t,e,n,r){n!==r&&(e.flags|=4)};function vc(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function or(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $b(t,e,n){var r=e.pendingProps;switch(Sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(e),null;case 1:return kr(e.type)&&cd(),or(e),null;case 3:return r=e.stateNode,kl(),Kt(Pr),Kt(ur),jg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&(T1(Ii),Ii=null))),w1(t,e),or(e),null;case 5:Lg(e);var i=la(hu.current);if(n=e.type,t!==null&&e.stateNode!=null)YE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return or(e),null}if(t=la(es.current),yh(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Qi]=e,r[cu]=o,t=(e.mode&1)!==0,n){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(i=0;i<Nc.length;i++)Yt(Nc[i],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":km(r,o),Yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Yt("invalid",r);break;case"textarea":Mm(r,o),Yt("invalid",r)}q0(n,o),i=null;for(var c in o)if(o.hasOwnProperty(c)){var f=o[c];c==="children"?typeof f=="string"?r.textContent!==f&&(o.suppressHydrationWarning!==!0&&xh(r.textContent,f,t),i=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&xh(r.textContent,f,t),i=["children",""+f]):Jc.hasOwnProperty(c)&&f!=null&&c==="onScroll"&&Yt("scroll",r)}switch(n){case"input":ch(r),Om(r,o,!0);break;case"textarea":ch(r),Lm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ld)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Qi]=e,t[cu]=r,qE(t,e,!1,!1),e.stateNode=t;e:{switch(c=Y0(n,r),n){case"dialog":Yt("cancel",t),Yt("close",t),i=r;break;case"iframe":case"object":case"embed":Yt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nc.length;i++)Yt(Nc[i],t);i=r;break;case"source":Yt("error",t),i=r;break;case"img":case"image":case"link":Yt("error",t),Yt("load",t),i=r;break;case"details":Yt("toggle",t),i=r;break;case"input":km(t,r),i=V0(t,r),Yt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=on({},r,{value:void 0}),Yt("invalid",t);break;case"textarea":Mm(t,r),i=W0(t,r),Yt("invalid",t);break;default:i=r}q0(n,i),f=i;for(o in f)if(f.hasOwnProperty(o)){var p=f[o];o==="style"?Iw(t,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Cw(t,p)):o==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&eu(t,p):typeof p=="number"&&eu(t,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jc.hasOwnProperty(o)?p!=null&&o==="onScroll"&&Yt("scroll",t):p!=null&&fg(t,o,p,c))}switch(n){case"input":ch(t),Om(t,r,!1);break;case"textarea":ch(t),Lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+No(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?yl(t,!!r.multiple,o,!1):r.defaultValue!=null&&yl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return or(e),null;case 6:if(t&&e.stateNode!=null)XE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=la(hu.current),la(es.current),yh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qi]=e,(o=r.nodeValue!==n)&&(t=Zr,t!==null))switch(t.tag){case 3:xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qi]=e,e.stateNode=r}return or(e),null;case 13:if(Kt(nn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Kr!==null&&e.mode&1&&!(e.flags&128))dE(),Dl(),e.flags|=98560,o=!1;else if(o=yh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Ce(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ce(317));o[Qi]=e}else Dl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;or(e),o=!1}else Ii!==null&&(T1(Ii),Ii=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nn.current&1?Un===0&&(Un=3):Kg())),e.updateQueue!==null&&(e.flags|=4),or(e),null);case 4:return kl(),w1(t,e),t===null&&au(e.stateNode.containerInfo),or(e),null;case 10:return Pg(e.type._context),or(e),null;case 17:return kr(e.type)&&cd(),or(e),null;case 19:if(Kt(nn),o=e.memoizedState,o===null)return or(e),null;if(r=(e.flags&128)!==0,c=o.rendering,c===null)if(r)vc(o,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=md(t),c!==null){for(e.flags|=128,vc(o,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return zt(nn,nn.current&1|2),e.child}t=t.sibling}o.tail!==null&&En()>Ml&&(e.flags|=128,r=!0,vc(o,!1),e.lanes=4194304)}else{if(!r)if(t=md(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!$t)return or(e),null}else 2*En()-o.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,r=!0,vc(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(n=o.last,n!==null?n.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=En(),e.sibling=null,n=nn.current,zt(nn,r?n&1|2:n&1),e):(or(e),null);case 22:case 23:return Xg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gr&1073741824&&(or(e),e.subtreeFlags&6&&(e.flags|=8192)):or(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function Zb(t,e){switch(Sg(e),e.tag){case 1:return kr(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kl(),Kt(Pr),Kt(ur),jg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lg(e),null;case 13:if(Kt(nn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Dl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(nn),null;case 4:return kl(),null;case 10:return Pg(e.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var _h=!1,cr=!1,Jb=typeof WeakSet=="function"?WeakSet:Set,ke=null;function dl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(t,e,r)}else n.current=null}function E1(t,e,n){try{n()}catch(r){fn(t,e,r)}}var Ix=!1;function eT(t,e){if(r1=sd,t=Jw(),bg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,f=-1,p=-1,g=0,y=0,w=t,v=null;t:for(;;){for(var b;w!==n||i!==0&&w.nodeType!==3||(f=c+i),w!==o||r!==0&&w.nodeType!==3||(p=c+r),w.nodeType===3&&(c+=w.nodeValue.length),(b=w.firstChild)!==null;)v=w,w=b;for(;;){if(w===t)break t;if(v===n&&++g===i&&(f=c),v===o&&++y===r&&(p=c),(b=w.nextSibling)!==null)break;w=v,v=w.parentNode}w=b}n=f===-1||p===-1?null:{start:f,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(i1={focusedElem:t,selectionRange:n},sd=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var j=S.memoizedProps,V=S.memoizedState,P=e.stateNode,L=P.getSnapshotBeforeUpdate(e.elementType===e.type?j:vi(e.type,j),V);P.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(H){fn(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return S=Ix,Ix=!1,S}function Vc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&E1(e,n,o)}i=i.next}while(i!==r)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KE(t){var e=t.alternate;e!==null&&(t.alternate=null,KE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qi],delete e[cu],delete e[a1],delete e[Lb],delete e[jb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QE(t){return t.tag===5||t.tag===3||t.tag===4}function bx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function v1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ld));else if(r!==4&&(t=t.child,t!==null))for(v1(t,e,n),t=t.sibling;t!==null;)v1(t,e,n),t=t.sibling}function C1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(C1(t,e,n),t=t.sibling;t!==null;)C1(t,e,n),t=t.sibling}var Zn=null,Ci=!1;function Ks(t,e,n){for(n=n.child;n!==null;)$E(t,e,n),n=n.sibling}function $E(t,e,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:cr||dl(n,e);case 6:var r=Zn,i=Ci;Zn=null,Ks(t,e,n),Zn=r,Ci=i,Zn!==null&&(Ci?(t=Zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Zn.removeChild(n.stateNode));break;case 18:Zn!==null&&(Ci?(t=Zn,n=n.stateNode,t.nodeType===8?a0(t.parentNode,n):t.nodeType===1&&a0(t,n),iu(t)):a0(Zn,n.stateNode));break;case 4:r=Zn,i=Ci,Zn=n.stateNode.containerInfo,Ci=!0,Ks(t,e,n),Zn=r,Ci=i;break;case 0:case 11:case 14:case 15:if(!cr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&E1(n,e,c),i=i.next}while(i!==r)}Ks(t,e,n);break;case 1:if(!cr&&(dl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){fn(n,e,f)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(cr=(r=cr)||n.memoizedState!==null,Ks(t,e,n),cr=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function Tx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Jb),e.forEach(function(r){var i=cT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _i(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,c=e,f=c;e:for(;f!==null;){switch(f.tag){case 5:Zn=f.stateNode,Ci=!1;break e;case 3:Zn=f.stateNode.containerInfo,Ci=!0;break e;case 4:Zn=f.stateNode.containerInfo,Ci=!0;break e}f=f.return}if(Zn===null)throw Error(Ce(160));$E(o,c,i),Zn=null,Ci=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(g){fn(i,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZE(e,t),e=e.sibling}function ZE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_i(e,t),Wi(t),r&4){try{Vc(3,t,t.return),lf(3,t)}catch(j){fn(t,t.return,j)}try{Vc(5,t,t.return)}catch(j){fn(t,t.return,j)}}break;case 1:_i(e,t),Wi(t),r&512&&n!==null&&dl(n,n.return);break;case 5:if(_i(e,t),Wi(t),r&512&&n!==null&&dl(n,n.return),t.flags&32){var i=t.stateNode;try{eu(i,"")}catch(j){fn(t,t.return,j)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,c=n!==null?n.memoizedProps:o,f=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&Ew(i,o),Y0(f,c);var g=Y0(f,o);for(c=0;c<p.length;c+=2){var y=p[c],w=p[c+1];y==="style"?Iw(i,w):y==="dangerouslySetInnerHTML"?Cw(i,w):y==="children"?eu(i,w):fg(i,y,w,g)}switch(f){case"input":z0(i,o);break;case"textarea":_w(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?yl(i,!!o.multiple,b,!1):v!==!!o.multiple&&(o.defaultValue!=null?yl(i,!!o.multiple,o.defaultValue,!0):yl(i,!!o.multiple,o.multiple?[]:"",!1))}i[cu]=o}catch(j){fn(t,t.return,j)}}break;case 6:if(_i(e,t),Wi(t),r&4){if(t.stateNode===null)throw Error(Ce(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(j){fn(t,t.return,j)}}break;case 3:if(_i(e,t),Wi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(j){fn(t,t.return,j)}break;case 4:_i(e,t),Wi(t);break;case 13:_i(e,t),Wi(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(qg=En())),r&4&&Tx(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(cr=(g=cr)||y,_i(e,t),cr=g):_i(e,t),Wi(t),r&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(ke=t,y=t.child;y!==null;){for(w=ke=y;ke!==null;){switch(v=ke,b=v.child,v.tag){case 0:case 11:case 14:case 15:Vc(4,v,v.return);break;case 1:dl(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(j){fn(r,n,j)}}break;case 5:dl(v,v.return);break;case 22:if(v.memoizedState!==null){Nx(w);continue}}b!==null?(b.return=v,ke=b):Nx(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{i=w.stateNode,g?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=w.stateNode,p=w.memoizedProps.style,c=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=Aw("display",c))}catch(j){fn(t,t.return,j)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=g?"":w.memoizedProps}catch(j){fn(t,t.return,j)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:_i(e,t),Wi(t),r&4&&Tx(t);break;case 21:break;default:_i(e,t),Wi(t)}}function Wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QE(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(eu(i,""),r.flags&=-33);var o=bx(t);C1(t,o,i);break;case 3:case 4:var c=r.stateNode.containerInfo,f=bx(t);v1(t,f,c);break;default:throw Error(Ce(161))}}catch(p){fn(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tT(t,e,n){ke=t,JE(t)}function JE(t,e,n){for(var r=(t.mode&1)!==0;ke!==null;){var i=ke,o=i.child;if(i.tag===22&&r){var c=i.memoizedState!==null||_h;if(!c){var f=i.alternate,p=f!==null&&f.memoizedState!==null||cr;f=_h;var g=cr;if(_h=c,(cr=p)&&!g)for(ke=i;ke!==null;)c=ke,p=c.child,c.tag===22&&c.memoizedState!==null?Rx(i):p!==null?(p.return=c,ke=p):Rx(i);for(;o!==null;)ke=o,JE(o),o=o.sibling;ke=i,_h=f,cr=g}Sx(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ke=o):Sx(t)}}function Sx(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cr||lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&dx(e,o,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dx(e,c,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&iu(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}cr||e.flags&512&&_1(e)}catch(v){fn(e,e.return,v)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function Nx(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function Rx(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lf(4,e)}catch(p){fn(e,n,p)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(p){fn(e,i,p)}}var o=e.return;try{_1(e)}catch(p){fn(e,o,p)}break;case 5:var c=e.return;try{_1(e)}catch(p){fn(e,c,p)}}}catch(p){fn(e,e.return,p)}if(e===t){ke=null;break}var f=e.sibling;if(f!==null){f.return=e.return,ke=f;break}ke=e.return}}var nT=Math.ceil,wd=Fs.ReactCurrentDispatcher,Wg=Fs.ReactCurrentOwner,fi=Fs.ReactCurrentBatchConfig,vt=0,Kn=null,Dn=null,nr=0,Gr=0,fl=Vo(0),Un=0,pu=null,ya=0,cf=0,Gg=0,zc=null,Rr=null,qg=0,Ml=1/0,xs=null,Ed=!1,A1=null,Eo=null,vh=!1,co=null,_d=0,Hc=0,I1=null,Vh=-1,zh=0;function yr(){return vt&6?En():Vh!==-1?Vh:Vh=En()}function _o(t){return t.mode&1?vt&2&&nr!==0?nr&-nr:Bb.transition!==null?(zh===0&&(zh=jw()),zh):(t=Dt,t!==0||(t=window.event,t=t===void 0?16:Ww(t.type)),t):1}function Si(t,e,n,r){if(50<Hc)throw Hc=0,I1=null,Error(Ce(185));Pu(t,n,r),(!(vt&2)||t!==Kn)&&(t===Kn&&(!(vt&2)&&(cf|=n),Un===4&&no(t,nr)),Or(t,r),n===1&&vt===0&&!(e.mode&1)&&(Ml=En()+500,sf&&zo()))}function Or(t,e){var n=t.callbackNode;BI(t,e);var r=id(t,t===Kn?nr:0);if(r===0)n!==null&&Bm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bm(n),e===1)t.tag===0?Fb(Dx.bind(null,t)):cE(Dx.bind(null,t)),Ob(function(){!(vt&6)&&zo()}),n=null;else{switch(Fw(r)){case 1:n=yg;break;case 4:n=Mw;break;case 16:n=rd;break;case 536870912:n=Lw;break;default:n=rd}n=a_(n,e_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function e_(t,e){if(Vh=-1,zh=0,vt&6)throw Error(Ce(327));var n=t.callbackNode;if(Cl()&&t.callbackNode!==n)return null;var r=id(t,t===Kn?nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vd(t,r);else{e=r;var i=vt;vt|=2;var o=n_();(Kn!==t||nr!==e)&&(xs=null,Ml=En()+500,ua(t,e));do try{sT();break}catch(f){t_(t,f)}while(!0);Dg(),wd.current=o,vt=i,Dn!==null?e=0:(Kn=null,nr=0,e=Un)}if(e!==0){if(e===2&&(i=Z0(t),i!==0&&(r=i,e=b1(t,i))),e===1)throw n=pu,ua(t,0),no(t,r),Or(t,En()),n;if(e===6)no(t,r);else{if(i=t.current.alternate,!(r&30)&&!rT(i)&&(e=vd(t,r),e===2&&(o=Z0(t),o!==0&&(r=o,e=b1(t,o))),e===1))throw n=pu,ua(t,0),no(t,r),Or(t,En()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:ia(t,Rr,xs);break;case 3:if(no(t,r),(r&130023424)===r&&(e=qg+500-En(),10<e)){if(id(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=o1(ia.bind(null,t,Rr,xs),e);break}ia(t,Rr,xs);break;case 4:if(no(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var c=31-Ti(r);o=1<<c,c=e[c],c>i&&(i=c),r&=~o}if(r=i,r=En()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nT(r/1960))-r,10<r){t.timeoutHandle=o1(ia.bind(null,t,Rr,xs),r);break}ia(t,Rr,xs);break;case 5:ia(t,Rr,xs);break;default:throw Error(Ce(329))}}}return Or(t,En()),t.callbackNode===n?e_.bind(null,t):null}function b1(t,e){var n=zc;return t.current.memoizedState.isDehydrated&&(ua(t,e).flags|=256),t=vd(t,e),t!==2&&(e=Rr,Rr=n,e!==null&&T1(e)),t}function T1(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function rT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Di(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(t,e){for(e&=~Gg,e&=~cf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),r=1<<n;t[n]=-1,e&=~r}}function Dx(t){if(vt&6)throw Error(Ce(327));Cl();var e=id(t,0);if(!(e&1))return Or(t,En()),null;var n=vd(t,e);if(t.tag!==0&&n===2){var r=Z0(t);r!==0&&(e=r,n=b1(t,r))}if(n===1)throw n=pu,ua(t,0),no(t,e),Or(t,En()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ia(t,Rr,xs),Or(t,En()),null}function Yg(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Ml=En()+500,sf&&zo())}}function wa(t){co!==null&&co.tag===0&&!(vt&6)&&Cl();var e=vt;vt|=1;var n=fi.transition,r=Dt;try{if(fi.transition=null,Dt=1,t)return t()}finally{Dt=r,fi.transition=n,vt=e,!(vt&6)&&zo()}}function Xg(){Gr=fl.current,Kt(fl)}function ua(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kb(n)),Dn!==null)for(n=Dn.return;n!==null;){var r=n;switch(Sg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cd();break;case 3:kl(),Kt(Pr),Kt(ur),jg();break;case 5:Lg(r);break;case 4:kl();break;case 13:Kt(nn);break;case 19:Kt(nn);break;case 10:Pg(r.type._context);break;case 22:case 23:Xg()}n=n.return}if(Kn=t,Dn=t=vo(t.current,null),nr=Gr=e,Un=0,pu=null,Gg=cf=ya=0,Rr=zc=null,aa!==null){for(e=0;e<aa.length;e++)if(n=aa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=i,r.next=c}n.pending=r}aa=null}return t}function t_(t,e){do{var n=Dn;try{if(Dg(),Fh.current=yd,xd){for(var r=sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xd=!1}if(xa=0,qn=Fn=sn=null,Uc=!1,du=0,Wg.current=null,n===null||n.return===null){Un=1,pu=e,Dn=null;break}e:{var o=t,c=n.return,f=n,p=e;if(e=nr,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,y=f,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var v=y.alternate;v?(y.updateQueue=v.updateQueue,y.memoizedState=v.memoizedState,y.lanes=v.lanes):(y.updateQueue=null,y.memoizedState=null)}var b=yx(c);if(b!==null){b.flags&=-257,wx(b,c,f,o,e),b.mode&1&&xx(o,g,e),e=b,p=g;var S=e.updateQueue;if(S===null){var j=new Set;j.add(p),e.updateQueue=j}else S.add(p);break e}else{if(!(e&1)){xx(o,g,e),Kg();break e}p=Error(Ce(426))}}else if($t&&f.mode&1){var V=yx(c);if(V!==null){!(V.flags&65536)&&(V.flags|=256),wx(V,c,f,o,e),Ng(Ol(p,f));break e}}o=p=Ol(p,f),Un!==4&&(Un=2),zc===null?zc=[o]:zc.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=FE(o,p,e);hx(o,P);break e;case 1:f=p;var L=o.type,M=o.stateNode;if(!(o.flags&128)&&(typeof L.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Eo===null||!Eo.has(M)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=BE(o,f,e);hx(o,H);break e}}o=o.return}while(o!==null)}i_(n)}catch(J){e=J,Dn===n&&n!==null&&(Dn=n=n.return);continue}break}while(!0)}function n_(){var t=wd.current;return wd.current=yd,t===null?yd:t}function Kg(){(Un===0||Un===3||Un===2)&&(Un=4),Kn===null||!(ya&268435455)&&!(cf&268435455)||no(Kn,nr)}function vd(t,e){var n=vt;vt|=2;var r=n_();(Kn!==t||nr!==e)&&(xs=null,ua(t,e));do try{iT();break}catch(i){t_(t,i)}while(!0);if(Dg(),vt=n,wd.current=r,Dn!==null)throw Error(Ce(261));return Kn=null,nr=0,Un}function iT(){for(;Dn!==null;)r_(Dn)}function sT(){for(;Dn!==null&&!RI();)r_(Dn)}function r_(t){var e=o_(t.alternate,t,Gr);t.memoizedProps=t.pendingProps,e===null?i_(t):Dn=e,Wg.current=null}function i_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Zb(n,e),n!==null){n.flags&=32767,Dn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,Dn=null;return}}else if(n=$b(n,e,Gr),n!==null){Dn=n;return}if(e=e.sibling,e!==null){Dn=e;return}Dn=e=t}while(e!==null);Un===0&&(Un=5)}function ia(t,e,n){var r=Dt,i=fi.transition;try{fi.transition=null,Dt=1,oT(t,e,n,r)}finally{fi.transition=i,Dt=r}return null}function oT(t,e,n,r){do Cl();while(co!==null);if(vt&6)throw Error(Ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(UI(t,o),t===Kn&&(Dn=Kn=null,nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,a_(rd,function(){return Cl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fi.transition,fi.transition=null;var c=Dt;Dt=1;var f=vt;vt|=4,Wg.current=null,eT(t,n),ZE(n,t),bb(i1),sd=!!r1,i1=r1=null,t.current=n,tT(n),DI(),vt=f,Dt=c,fi.transition=o}else t.current=n;if(vh&&(vh=!1,co=t,_d=i),o=t.pendingLanes,o===0&&(Eo=null),OI(n.stateNode),Or(t,En()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ed)throw Ed=!1,t=A1,A1=null,t;return _d&1&&t.tag!==0&&Cl(),o=t.pendingLanes,o&1?t===I1?Hc++:(Hc=0,I1=t):Hc=0,zo(),null}function Cl(){if(co!==null){var t=Fw(_d),e=fi.transition,n=Dt;try{if(fi.transition=null,Dt=16>t?16:t,co===null)var r=!1;else{if(t=co,co=null,_d=0,vt&6)throw Error(Ce(331));var i=vt;for(vt|=4,ke=t.current;ke!==null;){var o=ke,c=o.child;if(ke.flags&16){var f=o.deletions;if(f!==null){for(var p=0;p<f.length;p++){var g=f[p];for(ke=g;ke!==null;){var y=ke;switch(y.tag){case 0:case 11:case 15:Vc(8,y,o)}var w=y.child;if(w!==null)w.return=y,ke=w;else for(;ke!==null;){y=ke;var v=y.sibling,b=y.return;if(KE(y),y===g){ke=null;break}if(v!==null){v.return=b,ke=v;break}ke=b}}}var S=o.alternate;if(S!==null){var j=S.child;if(j!==null){S.child=null;do{var V=j.sibling;j.sibling=null,j=V}while(j!==null)}}ke=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,ke=c;else e:for(;ke!==null;){if(o=ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Vc(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,ke=P;break e}ke=o.return}}var L=t.current;for(ke=L;ke!==null;){c=ke;var M=c.child;if(c.subtreeFlags&2064&&M!==null)M.return=c,ke=M;else e:for(c=L;ke!==null;){if(f=ke,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:lf(9,f)}}catch(J){fn(f,f.return,J)}if(f===c){ke=null;break e}var H=f.sibling;if(H!==null){H.return=f.return,ke=H;break e}ke=f.return}}if(vt=i,zo(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(Jd,t)}catch{}r=!0}return r}finally{Dt=n,fi.transition=e}}return!1}function Px(t,e,n){e=Ol(n,e),e=FE(t,e,1),t=wo(t,e,1),e=yr(),t!==null&&(Pu(t,1,e),Or(t,e))}function fn(t,e,n){if(t.tag===3)Px(t,t,n);else for(;e!==null;){if(e.tag===3){Px(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eo===null||!Eo.has(r))){t=Ol(n,t),t=BE(e,t,1),e=wo(e,t,1),t=yr(),e!==null&&(Pu(e,1,t),Or(e,t));break}}e=e.return}}function aT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yr(),t.pingedLanes|=t.suspendedLanes&n,Kn===t&&(nr&n)===n&&(Un===4||Un===3&&(nr&130023424)===nr&&500>En()-qg?ua(t,0):Gg|=n),Or(t,e)}function s_(t,e){e===0&&(t.mode&1?(e=dh,dh<<=1,!(dh&130023424)&&(dh=4194304)):e=1);var n=yr();t=Rs(t,e),t!==null&&(Pu(t,e,n),Or(t,n))}function lT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s_(t,n)}function cT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),s_(t,n)}var o_;o_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pr.current)Dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dr=!1,Qb(t,e,n);Dr=!!(t.flags&131072)}else Dr=!1,$t&&e.flags&1048576&&uE(e,dd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uh(t,e),t=e.pendingProps;var i=Rl(e,ur.current);vl(e,n),i=Bg(null,e,r,t,i,n);var o=Ug();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(o=!0,ud(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Og(e),i.updater=af,e.stateNode=i,i._reactInternals=e,f1(e,r,t,n),e=m1(null,e,r,!0,o,n)):(e.tag=0,$t&&o&&Tg(e),mr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hT(r),t=vi(r,t),i){case 0:e=p1(null,e,r,t,n);break e;case 1:e=vx(null,e,r,t,n);break e;case 11:e=Ex(null,e,r,t,n);break e;case 14:e=_x(null,e,r,vi(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),p1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),vx(t,e,r,i,n);case 3:e:{if(HE(e),t===null)throw Error(Ce(387));r=e.pendingProps,o=e.memoizedState,i=o.element,mE(t,e),pd(e,r,null,n);var c=e.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ol(Error(Ce(423)),e),e=Cx(t,e,r,n,i);break e}else if(r!==i){i=Ol(Error(Ce(424)),e),e=Cx(t,e,r,n,i);break e}else for(Kr=yo(e.stateNode.containerInfo.firstChild),Zr=e,$t=!0,Ii=null,n=gE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dl(),r===i){e=Ds(t,e,n);break e}mr(t,e,r,n)}e=e.child}return e;case 5:return xE(e),t===null&&u1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,c=i.children,s1(r,i)?c=null:o!==null&&s1(r,o)&&(e.flags|=32),zE(t,e),mr(t,e,c,n),e.child;case 6:return t===null&&u1(e),null;case 13:return WE(t,e,n);case 4:return Mg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pl(e,null,r,n):mr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),Ex(t,e,r,i,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,c=i.value,zt(fd,r._currentValue),r._currentValue=c,o!==null)if(Di(o.value,c)){if(o.children===i.children&&!Pr.current){e=Ds(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var f=o.dependencies;if(f!==null){c=o.child;for(var p=f.firstContext;p!==null;){if(p.context===r){if(o.tag===1){p=As(-1,n&-n),p.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?p.next=p:(p.next=y.next,y.next=p),g.pending=p}}o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),h1(o.return,n,e),f.lanes|=n;break}p=p.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Ce(341));c.lanes|=n,f=c.alternate,f!==null&&(f.lanes|=n),h1(c,n,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}mr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vl(e,n),i=gi(i),r=r(i),e.flags|=1,mr(t,e,r,n),e.child;case 14:return r=e.type,i=vi(r,e.pendingProps),i=vi(r.type,i),_x(t,e,r,i,n);case 15:return UE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),Uh(t,e),e.tag=1,kr(r)?(t=!0,ud(e)):t=!1,vl(e,n),jE(e,r,i),f1(e,r,i,n),m1(null,e,r,!0,t,n);case 19:return GE(t,e,n);case 22:return VE(t,e,n)}throw Error(Ce(156,e.tag))};function a_(t,e){return Ow(t,e)}function uT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(t,e,n,r){return new uT(t,e,n,r)}function Qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hT(t){if(typeof t=="function")return Qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pg)return 11;if(t===mg)return 14}return 2}function vo(t,e){var n=t.alternate;return n===null?(n=di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hh(t,e,n,r,i,o){var c=2;if(r=t,typeof t=="function")Qg(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case rl:return ha(n.children,i,o,e);case gg:c=8,i|=8;break;case j0:return t=di(12,n,e,i|2),t.elementType=j0,t.lanes=o,t;case F0:return t=di(13,n,e,i),t.elementType=F0,t.lanes=o,t;case B0:return t=di(19,n,e,i),t.elementType=B0,t.lanes=o,t;case xw:return uf(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pw:c=10;break e;case mw:c=9;break e;case pg:c=11;break e;case mg:c=14;break e;case Js:c=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=di(c,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function ha(t,e,n,r){return t=di(7,t,r,e),t.lanes=n,t}function uf(t,e,n,r){return t=di(22,t,r,e),t.elementType=xw,t.lanes=n,t.stateNode={isHidden:!1},t}function p0(t,e,n){return t=di(6,t,null,e),t.lanes=n,t}function m0(t,e,n){return e=di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qf(0),this.expirationTimes=Qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $g(t,e,n,r,i,o,c,f,p){return t=new dT(t,e,n,f,p),e===1?(e=1,o===!0&&(e|=8)):e=0,o=di(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Og(o),t}function fT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function l_(t){if(!t)return Ro;t=t._reactInternals;e:{if(Da(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(kr(n))return lE(t,n,e)}return e}function c_(t,e,n,r,i,o,c,f,p){return t=$g(n,r,!0,t,i,o,c,f,p),t.context=l_(null),n=t.current,r=yr(),i=_o(n),o=As(r,i),o.callback=e??null,wo(n,o,i),t.current.lanes=i,Pu(t,i,r),Or(t,r),t}function hf(t,e,n,r){var i=e.current,o=yr(),c=_o(i);return n=l_(n),e.context===null?e.context=n:e.pendingContext=n,e=As(o,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wo(i,e,c),t!==null&&(Si(t,i,c,o),jh(t,i,c)),c}function Cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zg(t,e){kx(t,e),(t=t.alternate)&&kx(t,e)}function gT(){return null}var u_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jg(t){this._internalRoot=t}df.prototype.render=Jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));hf(t,e,null,null)};df.prototype.unmount=Jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wa(function(){hf(null,t,null,null)}),e[Ns]=null}};function df(t){this._internalRoot=t}df.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<to.length&&e!==0&&e<to[n].priority;n++);to.splice(n,0,t),n===0&&Hw(t)}};function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function pT(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var g=Cd(c);o.call(g)}}var c=c_(e,r,t,0,null,!1,!1,"",Ox);return t._reactRootContainer=c,t[Ns]=c.current,au(t.nodeType===8?t.parentNode:t),wa(),c}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var f=r;r=function(){var g=Cd(p);f.call(g)}}var p=$g(t,0,!1,null,null,!1,!1,"",Ox);return t._reactRootContainer=p,t[Ns]=p.current,au(t.nodeType===8?t.parentNode:t),wa(function(){hf(e,p,n,r)}),p}function gf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var c=o;if(typeof i=="function"){var f=i;i=function(){var p=Cd(c);f.call(p)}}hf(e,c,t,i)}else c=pT(n,e,t,i,r);return Cd(c)}Bw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sc(e.pendingLanes);n!==0&&(wg(e,n|1),Or(e,En()),!(vt&6)&&(Ml=En()+500,zo()))}break;case 13:wa(function(){var r=Rs(t,1);if(r!==null){var i=yr();Si(r,t,1,i)}}),Zg(t,1)}};Eg=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var n=yr();Si(e,t,134217728,n)}Zg(t,134217728)}};Uw=function(t){if(t.tag===13){var e=_o(t),n=Rs(t,e);if(n!==null){var r=yr();Si(n,t,e,r)}Zg(t,e)}};Vw=function(){return Dt};zw=function(t,e){var n=Dt;try{return Dt=t,e()}finally{Dt=n}};K0=function(t,e,n){switch(e){case"input":if(z0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rf(r);if(!i)throw Error(Ce(90));ww(r),z0(r,i)}}}break;case"textarea":_w(t,n);break;case"select":e=n.value,e!=null&&yl(t,!!n.multiple,e,!1)}};Sw=Yg;Nw=wa;var mT={usingClientEntryPoint:!1,Events:[Ou,al,rf,bw,Tw,Yg]},Cc={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xT={bundleType:Cc.bundleType,version:Cc.version,rendererPackageName:Cc.rendererPackageName,rendererConfig:Cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pw(t),t===null?null:t.stateNode},findFiberByHostInstance:Cc.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{Jd=Ch.inject(xT),Ji=Ch}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;ni.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(e))throw Error(Ce(200));return fT(t,e,null,n)};ni.createRoot=function(t,e){if(!ep(t))throw Error(Ce(299));var n=!1,r="",i=u_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$g(t,1,!1,null,null,n,!1,r,i),t[Ns]=e.current,au(t.nodeType===8?t.parentNode:t),new Jg(e)};ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=Pw(e),t=t===null?null:t.stateNode,t};ni.flushSync=function(t){return wa(t)};ni.hydrate=function(t,e,n){if(!ff(e))throw Error(Ce(200));return gf(null,t,e,!0,n)};ni.hydrateRoot=function(t,e,n){if(!ep(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",c=u_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=c_(e,null,t,1,n??null,i,!1,o,c),t[Ns]=e.current,au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new df(e)};ni.render=function(t,e,n){if(!ff(e))throw Error(Ce(200));return gf(null,t,e,!1,n)};ni.unmountComponentAtNode=function(t){if(!ff(t))throw Error(Ce(40));return t._reactRootContainer?(wa(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};ni.unstable_batchedUpdates=Yg;ni.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ff(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return gf(t,e,n,!1,r)};ni.version="18.3.1-next-f1338f8080-20240426";function h_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h_)}catch(t){console.error(t)}}h_(),hw.exports=ni;var yT=hw.exports,Mx=yT;M0.createRoot=Mx.createRoot,M0.hydrateRoot=Mx.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}var uo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(uo||(uo={}));const Lx="popstate";function wT(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:f}=r.location;return S1("",{pathname:o,search:c,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ad(i)}return _T(e,n,null,t)}function _n(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ET(){return Math.random().toString(36).substr(2,8)}function jx(t,e){return{usr:t.state,key:t.key,idx:e}}function S1(t,e,n,r){return n===void 0&&(n=null),mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ql(e):e,{state:n,key:e&&e.key||r||ET()})}function Ad(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _T(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,f=uo.Pop,p=null,g=y();g==null&&(g=0,c.replaceState(mu({},c.state,{idx:g}),""));function y(){return(c.state||{idx:null}).idx}function w(){f=uo.Pop;let V=y(),P=V==null?null:V-g;g=V,p&&p({action:f,location:j.location,delta:P})}function v(V,P){f=uo.Push;let L=S1(j.location,V,P);g=y()+1;let M=jx(L,g),H=j.createHref(L);try{c.pushState(M,"",H)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign(H)}o&&p&&p({action:f,location:j.location,delta:1})}function b(V,P){f=uo.Replace;let L=S1(j.location,V,P);g=y();let M=jx(L,g),H=j.createHref(L);c.replaceState(M,"",H),o&&p&&p({action:f,location:j.location,delta:0})}function S(V){let P=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof V=="string"?V:Ad(V);return L=L.replace(/ $/,"%20"),_n(P,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,P)}let j={get action(){return f},get location(){return t(i,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Lx,w),p=V,()=>{i.removeEventListener(Lx,w),p=null}},createHref(V){return e(i,V)},createURL:S,encodeLocation(V){let P=S(V);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:b,go(V){return c.go(V)}};return j}var Fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fx||(Fx={}));function vT(t,e,n){return n===void 0&&(n="/"),CT(t,e,n)}function CT(t,e,n,r){let i=typeof e=="string"?ql(e):e,o=np(i.pathname||"/",n);if(o==null)return null;let c=d_(t);AT(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let g=LT(o);f=kT(c[p],g)}return f}function d_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,f)=>{let p={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(_n(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let g=Co([r,p.relativePath]),y=n.concat(p);o.children&&o.children.length>0&&(_n(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),d_(o.children,e,y,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:DT(g,o.index),routesMeta:y})};return t.forEach((o,c)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))i(o,c);else for(let p of f_(o.path))i(o,c,p)}),e}function f_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=f_(r.join("/")),f=[];return f.push(...c.map(p=>p===""?o:[o,p].join("/"))),i&&f.push(...c),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function AT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IT=/^:[\w-]+$/,bT=3,TT=2,ST=1,NT=10,RT=-2,Bx=t=>t==="*";function DT(t,e){let n=t.split("/"),r=n.length;return n.some(Bx)&&(r+=RT),e&&(r+=TT),n.filter(i=>!Bx(i)).reduce((i,o)=>i+(IT.test(o)?bT:o===""?ST:NT),r)}function PT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kT(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let f=0;f<r.length;++f){let p=r[f],g=f===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",w=OT({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),v=p.route;if(!w)return null;Object.assign(i,w.params),c.push({params:i,pathname:Co([o,w.pathname]),pathnameBase:VT(Co([o,w.pathnameBase])),route:v}),w.pathnameBase!=="/"&&(o=Co([o,w.pathnameBase]))}return c}function OT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((g,y,w)=>{let{paramName:v,isOptional:b}=y;if(v==="*"){let j=f[w]||"";c=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const S=f[w];return b&&!S?g[v]=void 0:g[v]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:t}}function MT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(r.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function LT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function np(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const jT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FT=t=>jT.test(t);function BT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ql(t):t,o;if(n)if(FT(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),tp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?o=Ux(n.substring(1),"/"):o=Ux(n,e)}else o=e;return{pathname:o,search:zT(r),hash:HT(i)}}function Ux(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function x0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rp(t,e){let n=UT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ip(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ql(t):(i=mu({},t),_n(!i.pathname||!i.pathname.includes("?"),x0("?","pathname","search",i)),_n(!i.pathname||!i.pathname.includes("#"),x0("#","pathname","hash",i)),_n(!i.search||!i.search.includes("#"),x0("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,f;if(c==null)f=n;else{let w=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),w-=1;i.pathname=v.join("/")}f=w>=0?e[w]:"/"}let p=BT(i,f),g=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const Co=t=>t.join("/").replace(/\/\/+/g,"/"),VT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const g_=["post","put","patch","delete"];new Set(g_);const GT=["get",...g_];new Set(GT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xu.apply(this,arguments)}const sp=se.createContext(null),qT=se.createContext(null),Ho=se.createContext(null),pf=se.createContext(null),Bs=se.createContext({outlet:null,matches:[],isDataRoute:!1}),p_=se.createContext(null);function YT(t,e){let{relative:n}=e===void 0?{}:e;Yl()||_n(!1);let{basename:r,navigator:i}=se.useContext(Ho),{hash:o,pathname:c,search:f}=y_(t,{relative:n}),p=c;return r!=="/"&&(p=c==="/"?r:Co([r,c])),i.createHref({pathname:p,search:f,hash:o})}function Yl(){return se.useContext(pf)!=null}function Xl(){return Yl()||_n(!1),se.useContext(pf).location}function m_(t){se.useContext(Ho).static||se.useLayoutEffect(t)}function xi(){let{isDataRoute:t}=se.useContext(Bs);return t?a3():XT()}function XT(){Yl()||_n(!1);let t=se.useContext(sp),{basename:e,future:n,navigator:r}=se.useContext(Ho),{matches:i}=se.useContext(Bs),{pathname:o}=Xl(),c=JSON.stringify(rp(i,n.v7_relativeSplatPath)),f=se.useRef(!1);return m_(()=>{f.current=!0}),se.useCallback(function(g,y){if(y===void 0&&(y={}),!f.current)return;if(typeof g=="number"){r.go(g);return}let w=ip(g,JSON.parse(c),o,y.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Co([e,w.pathname])),(y.replace?r.replace:r.push)(w,y.state,y)},[e,r,c,o,t])}const x_=se.createContext(null);function Pa(){return se.useContext(x_)}function KT(t){let e=se.useContext(Bs).outlet;return e&&se.createElement(x_.Provider,{value:t},e)}function y_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=se.useContext(Ho),{matches:i}=se.useContext(Bs),{pathname:o}=Xl(),c=JSON.stringify(rp(i,r.v7_relativeSplatPath));return se.useMemo(()=>ip(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function QT(t,e){return $T(t,e)}function $T(t,e,n,r){Yl()||_n(!1);let{navigator:i}=se.useContext(Ho),{matches:o}=se.useContext(Bs),c=o[o.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let g=Xl(),y;if(e){var w;let V=typeof e=="string"?ql(e):e;p==="/"||(w=V.pathname)!=null&&w.startsWith(p)||_n(!1),y=V}else y=g;let v=y.pathname||"/",b=v;if(p!=="/"){let V=p.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(V.length).join("/")}let S=vT(t,{pathname:b}),j=n3(S&&S.map(V=>Object.assign({},V,{params:Object.assign({},f,V.params),pathname:Co([p,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?p:Co([p,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,r);return e&&j?se.createElement(pf.Provider,{value:{location:xu({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:uo.Pop}},j):j}function ZT(){let t=o3(),e=WT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:i},n):null,null)}const JT=se.createElement(ZT,null);class e3 extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?se.createElement(Bs.Provider,{value:this.props.routeContext},se.createElement(p_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t3(t){let{routeContext:e,match:n,children:r}=t,i=se.useContext(sp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),se.createElement(Bs.Provider,{value:e},r)}function n3(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,f=(i=n)==null?void 0:i.errors;if(f!=null){let y=c.findIndex(w=>w.route.id&&(f==null?void 0:f[w.route.id])!==void 0);y>=0||_n(!1),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let w=c[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=y),w.route.id){let{loaderData:v,errors:b}=n,S=w.route.loader&&v[w.route.id]===void 0&&(!b||b[w.route.id]===void 0);if(w.route.lazy||S){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,w,v)=>{let b,S=!1,j=null,V=null;n&&(b=f&&w.route.id?f[w.route.id]:void 0,j=w.route.errorElement||JT,p&&(g<0&&v===0?(l3("route-fallback"),S=!0,V=null):g===v&&(S=!0,V=w.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,v+1)),L=()=>{let M;return b?M=j:S?M=V:w.route.Component?M=se.createElement(w.route.Component,null):w.route.element?M=w.route.element:M=y,se.createElement(t3,{match:w,routeContext:{outlet:y,matches:P,isDataRoute:n!=null},children:M})};return n&&(w.route.ErrorBoundary||w.route.errorElement||v===0)?se.createElement(e3,{location:n.location,revalidation:n.revalidation,component:j,error:b,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):L()},null)}var w_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(w_||{}),E_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(E_||{});function r3(t){let e=se.useContext(sp);return e||_n(!1),e}function i3(t){let e=se.useContext(qT);return e||_n(!1),e}function s3(t){let e=se.useContext(Bs);return e||_n(!1),e}function __(t){let e=s3(),n=e.matches[e.matches.length-1];return n.route.id||_n(!1),n.route.id}function o3(){var t;let e=se.useContext(p_),n=i3(),r=__();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function a3(){let{router:t}=r3(w_.UseNavigateStable),e=__(E_.UseNavigateStable),n=se.useRef(!1);return m_(()=>{n.current=!0}),se.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xu({fromRouteId:e},o)))},[t,e])}const Vx={};function l3(t,e,n){Vx[t]||(Vx[t]=!0)}function c3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zx(t){let{to:e,replace:n,state:r,relative:i}=t;Yl()||_n(!1);let{future:o,static:c}=se.useContext(Ho),{matches:f}=se.useContext(Bs),{pathname:p}=Xl(),g=xi(),y=ip(e,rp(f,o.v7_relativeSplatPath),p,i==="path"),w=JSON.stringify(y);return se.useEffect(()=>g(JSON.parse(w),{replace:n,state:r,relative:i}),[g,w,i,n,r]),null}function u3(t){return KT(t.context)}function Nn(t){_n(!1)}function h3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=uo.Pop,navigator:o,static:c=!1,future:f}=t;Yl()&&_n(!1);let p=e.replace(/^\/*/,"/"),g=se.useMemo(()=>({basename:p,navigator:o,static:c,future:xu({v7_relativeSplatPath:!1},f)}),[p,f,o,c]);typeof r=="string"&&(r=ql(r));let{pathname:y="/",search:w="",hash:v="",state:b=null,key:S="default"}=r,j=se.useMemo(()=>{let V=np(y,p);return V==null?null:{location:{pathname:V,search:w,hash:v,state:b,key:S},navigationType:i}},[p,y,w,v,b,S,i]);return j==null?null:se.createElement(Ho.Provider,{value:g},se.createElement(pf.Provider,{children:n,value:j}))}function d3(t){let{children:e,location:n}=t;return QT(N1(e),n)}new Promise(()=>{});function N1(t,e){e===void 0&&(e=[]);let n=[];return se.Children.forEach(t,(r,i)=>{if(!se.isValidElement(r))return;let o=[...e,i];if(r.type===se.Fragment){n.push.apply(n,N1(r.props.children,o));return}r.type!==Nn&&_n(!1),!r.props.index||!r.props.children||_n(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=N1(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R1(){return R1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R1.apply(this,arguments)}function f3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function g3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p3(t,e){return t.button===0&&(!e||e==="_self")&&!g3(t)}const m3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x3="6";try{window.__reactRouterVersion=x3}catch{}const y3="startTransition",Hx=aI[y3];function w3(t){let{basename:e,children:n,future:r,window:i}=t,o=se.useRef();o.current==null&&(o.current=wT({window:i,v5Compat:!0}));let c=o.current,[f,p]=se.useState({action:c.action,location:c.location}),{v7_startTransition:g}=r||{},y=se.useCallback(w=>{g&&Hx?Hx(()=>p(w)):p(w)},[p,g]);return se.useLayoutEffect(()=>c.listen(y),[c,y]),se.useEffect(()=>c3(r),[r]),se.createElement(h3,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:c,future:r})}const E3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=se.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:f,target:p,to:g,preventScrollReset:y,viewTransition:w}=e,v=f3(e,m3),{basename:b}=se.useContext(Ho),S,j=!1;if(typeof g=="string"&&_3.test(g)&&(S=g,E3))try{let M=new URL(window.location.href),H=g.startsWith("//")?new URL(M.protocol+g):new URL(g),J=np(H.pathname,b);H.origin===M.origin&&J!=null?g=J+H.search+H.hash:j=!0}catch{}let V=YT(g,{relative:i}),P=v3(g,{replace:c,state:f,target:p,preventScrollReset:y,relative:i,viewTransition:w});function L(M){r&&r(M),M.defaultPrevented||P(M)}return se.createElement("a",R1({},v,{href:S||V,onClick:j||o?r:L,ref:n,target:p}))});var Wx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Wx||(Wx={}));var Gx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gx||(Gx={}));function v3(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:f}=e===void 0?{}:e,p=xi(),g=Xl(),y=y_(t,{relative:c});return se.useCallback(w=>{if(p3(w,n)){w.preventDefault();let v=r!==void 0?r:Ad(g)===Ad(y);p(t,{replace:v,state:i,preventScrollReset:o,relative:c,viewTransition:f})}},[g,p,y,r,i,n,t,o,c,f])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Qt=(t,e)=>{const n=se.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:f="",children:p,...g},y)=>se.createElement("svg",{ref:y,...C3,width:i,height:i,stroke:r,strokeWidth:c?Number(o)*24/Number(i):o,className:["lucide",`lucide-${A3(t)}`,f].join(" "),...g},[...e.map(([w,v])=>se.createElement(w,v)),...Array.isArray(p)?p:[p]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Qt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=Qt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Qt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Qt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Qt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=Qt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Qt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Qt("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Qt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=Qt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Qt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Qt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Qt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Qt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Qt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=Qt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=Qt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=Qt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Qt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Qt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Qt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Qt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Qt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Qt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Qt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),D3=()=>{};var Yx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},P3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],f=t[n++],p=((i&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},T_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,f=c?t[i+1]:0,p=i+2<t.length,g=p?t[i+2]:0,y=o>>2,w=(o&3)<<4|f>>4;let v=(f&15)<<2|g>>6,b=g&63;p||(b=64,c||(v=64)),r.push(n[y],n[w],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):P3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],f=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||f==null||g==null||w==null)throw new k3;const v=o<<2|f>>4;if(r.push(v),g!==64){const b=f<<4&240|g>>2;if(r.push(b),w!==64){const S=g<<6&192|w;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O3=function(t){const e=b_(t);return T_.encodeByteArray(e,!0)},Id=function(t){return O3(t).replace(/\./g,"")},S_=function(t){try{return T_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=()=>M3().__FIREBASE_DEFAULTS__,j3=()=>{if(typeof process>"u"||typeof Yx>"u")return;const t=Yx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S_(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return D3()||L3()||j3()||F3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},N_=t=>{var e,n;return(n=(e=yf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},R_=t=>{const e=N_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D_=()=>{var t;return(t=yf())==null?void 0:t.config},P_=t=>{var e;return(e=yf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function up(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Id(JSON.stringify(n)),Id(JSON.stringify(c)),""].join(".")}const Gc={};function U3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?t.emulator.push(e):t.prod.push(e);return t}function V3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xx=!1;function hp(t,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||Gc[t]===e||Gc[t]||Xx)return;Gc[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=U3().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function f(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function g(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Xx=!0,c()},v}function y(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function w(){const v=V3(r),b=n("text"),S=document.getElementById(b)||document.createElement("span"),j=n("learnmore"),V=document.getElementById(j)||document.createElement("a"),P=n("preprendIcon"),L=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;f(M),y(V,j);const H=g();p(L,P),M.append(L,S,V,H),document.body.appendChild(M)}o?(S.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function H3(){var e;const t=(e=yf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function q3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y3(){const t=hr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X3(){return!H3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K3(){try{return typeof indexedDB=="object"}catch{return!1}}function Q3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="FirebaseError";class ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$3,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?Z3(o,r):"Error",f=`${this.serviceName}: ${c} (${i}).`;return new ls(i,f,r)}}function Z3(t,e){return t.replace(J3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const J3=/\{\$([^}]+)}/g;function eS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ea(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(Kx(o)&&Kx(c)){if(!Ea(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Dc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tS(t,e){const n=new nS(t,e);return n.subscribe.bind(n)}class nS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=w0),i.error===void 0&&(i.error=w0),i.complete===void 0&&(i.complete=w0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function w0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Po{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new B3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oS(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);r===f&&c.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sS(t){return t===sa?void 0:t}function oS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(dt||(dt={}));const lS={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},cS=dt.INFO,uS={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},hS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dp{constructor(e){this.name=e,this._logLevel=cS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const dS=(t,e)=>e.some(n=>t instanceof n);let Qx,$x;function fS(){return Qx||(Qx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gS(){return $x||($x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O_=new WeakMap,D1=new WeakMap,M_=new WeakMap,E0=new WeakMap,fp=new WeakMap;function pS(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(Ao(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&O_.set(n,t)}).catch(()=>{}),fp.set(e,t),e}function mS(t){if(D1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});D1.set(t,e)}let P1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xS(t){P1=t(P1)}function yS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_0(this),e,...n);return M_.set(r,e.sort?e.sort():[e]),Ao(r)}:gS().includes(t)?function(...e){return t.apply(_0(this),e),Ao(O_.get(this))}:function(...e){return Ao(t.apply(_0(this),e))}}function wS(t){return typeof t=="function"?yS(t):(t instanceof IDBTransaction&&mS(t),dS(t,fS())?new Proxy(t,P1):t)}function Ao(t){if(t instanceof IDBRequest)return pS(t);if(E0.has(t))return E0.get(t);const e=wS(t);return e!==t&&(E0.set(t,e),fp.set(e,t)),e}const _0=t=>fp.get(t);function ES(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),f=Ao(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ao(c.result),p.oldVersion,p.newVersion,Ao(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const _S=["get","getKey","getAll","getAllKeys","count"],vS=["put","add","delete","clear"],v0=new Map;function Zx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(v0.get(e))return v0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_S.includes(n)))return;const o=async function(c,...f){const p=this.transaction(c,i?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),i&&p.done]))[0]};return v0.set(e,o),o}xS(t=>({...t,get:(e,n,r)=>Zx(e,n)||t.get(e,n,r),has:(e,n)=>!!Zx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const k1="@firebase/app",Jx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new dp("@firebase/app"),IS="@firebase/app-compat",bS="@firebase/analytics-compat",TS="@firebase/analytics",SS="@firebase/app-check-compat",NS="@firebase/app-check",RS="@firebase/auth",DS="@firebase/auth-compat",PS="@firebase/database",kS="@firebase/data-connect",OS="@firebase/database-compat",MS="@firebase/functions",LS="@firebase/functions-compat",jS="@firebase/installations",FS="@firebase/installations-compat",BS="@firebase/messaging",US="@firebase/messaging-compat",VS="@firebase/performance",zS="@firebase/performance-compat",HS="@firebase/remote-config",WS="@firebase/remote-config-compat",GS="@firebase/storage",qS="@firebase/storage-compat",YS="@firebase/firestore",XS="@firebase/ai",KS="@firebase/firestore-compat",QS="firebase",$S="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="[DEFAULT]",ZS={[k1]:"fire-core",[IS]:"fire-core-compat",[TS]:"fire-analytics",[bS]:"fire-analytics-compat",[NS]:"fire-app-check",[SS]:"fire-app-check-compat",[RS]:"fire-auth",[DS]:"fire-auth-compat",[PS]:"fire-rtdb",[kS]:"fire-data-connect",[OS]:"fire-rtdb-compat",[MS]:"fire-fn",[LS]:"fire-fn-compat",[jS]:"fire-iid",[FS]:"fire-iid-compat",[BS]:"fire-fcm",[US]:"fire-fcm-compat",[VS]:"fire-perf",[zS]:"fire-perf-compat",[HS]:"fire-rc",[WS]:"fire-rc-compat",[GS]:"fire-gcs",[qS]:"fire-gcs-compat",[YS]:"fire-fst",[KS]:"fire-fst-compat",[XS]:"fire-vertex","fire-js":"fire-js",[QS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,JS=new Map,M1=new Map;function e2(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _a(t){const e=t.name;if(M1.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;M1.set(e,t);for(const n of bd.values())e2(n,t);for(const n of JS.values())e2(n,t);return!0}function wf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Lu("app","Firebase",e4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=$S;function L_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:O1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Io.create("bad-app-name",{appName:String(i)});if(n||(n=D_()),!n)throw Io.create("no-options");const o=bd.get(i);if(o){if(Ea(n,o.options)&&Ea(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}const c=new aS(i);for(const p of M1.values())c.addComponent(p);const f=new t4(n,r,c);return bd.set(i,f),f}function gp(t=O1){const e=bd.get(t);if(!e&&t===O1&&D_())return L_();if(!e)throw Io.create("no-app",{appName:t});return e}function ts(t,e,n){let r=ZS[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(c.join(" "));return}_a(new Po(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="firebase-heartbeat-database",r4=1,yu="firebase-heartbeat-store";let C0=null;function j_(){return C0||(C0=ES(n4,r4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Io.create("idb-open",{originalErrorMessage:t.message})})),C0}async function i4(t){try{const n=(await j_()).transaction(yu),r=await n.objectStore(yu).get(F_(t));return await n.done,r}catch(e){if(e instanceof ls)ks.warn(e.message);else{const n=Io.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function t2(t,e){try{const r=(await j_()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,F_(t)),await r.done}catch(n){if(n instanceof ls)ks.warn(n.message);else{const r=Io.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(r.message)}}}function F_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=1024,o4=30;class a4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=n2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>o4){const c=u4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ks.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n2(),{heartbeatsToSend:r,unsentEntries:i}=l4(this._heartbeatsCache.heartbeats),o=Id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ks.warn(n),""}}}function n2(){return new Date().toISOString().substring(0,10)}function l4(t,e=s4){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),r2(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),r2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class c4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K3()?Q3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return t2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return t2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function r2(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}function u4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){_a(new Po("platform-logger",e=>new CS(e),"PRIVATE")),_a(new Po("heartbeat",e=>new a4(e),"PRIVATE")),ts(k1,Jx,t),ts(k1,Jx,"esm2020"),ts("fire-js","")}h4("");var d4="firebase",f4="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(d4,f4,"app");function B_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g4=B_,U_=new Lu("auth","Firebase",B_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new dp("@firebase/auth");function p4(t,...e){Td.logLevel<=dt.WARN&&Td.warn(`Auth (${ka}): ${t}`,...e)}function Wh(t,...e){Td.logLevel<=dt.ERROR&&Td.error(`Auth (${ka}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,...e){throw pp(t,...e)}function ns(t,...e){return pp(t,...e)}function V_(t,e,n){const r={...g4(),[e]:n};return new Lu("auth","Firebase",r).create(e,{appName:t.name})}function bs(t){return V_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return U_.create(t,...e)}function We(t,e,...n){if(!t)throw pp(e,...n)}function _s(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wh(e),new Error(e)}function Os(t,e){t||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function m4(){return i2()==="http:"||i2()==="https:"}function i2(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m4()||G3()||"connection"in navigator)?navigator.onLine:!0}function y4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=z3()||q3()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_4=new Fu(3e4,6e4);function Go(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qo(t,e,n,r,i={}){return H_(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const f=ju({key:t.config.apiKey,...c}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:p,...o};return W3()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Wo(t.emulatorConfig.host)&&(g.credentials="include"),z_.fetch()(await W_(t,t.config.apiHost,n,f),g)})}async function H_(t,e,n){t._canInitEmulator=!1;const r={...w4,...e};try{const i=new C4(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Ah(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(t,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ah(t,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ah(t,"user-disabled",c);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw V_(t,y,g);Pi(t,y)}}catch(i){if(i instanceof ls)throw i;Pi(t,"network-request-failed",{message:String(i)})}}async function Bu(t,e,n,r,i={}){const o=await qo(t,e,n,r,i);return"mfaPendingCredential"in o&&Pi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function W_(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?mp(t.config,i):`${t.config.apiScheme}://${i}`;return E4.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function v4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),_4.get())})}}function Ah(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ns(t,e,r);return i.customData._tokenResponse=n,i}function s2(t){return t!==void 0&&t.enterprise!==void 0}class A4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return v4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function I4(t,e){return qo(t,"GET","/v2/recaptchaConfig",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,e){return qo(t,"POST","/v1/accounts:delete",e)}async function Sd(t,e){return qo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T4(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),i=xp(r);We(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:qc(A0(i.auth_time)),issuedAtTime:qc(A0(i.iat)),expirationTime:qc(A0(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function A0(t){return Number(t)*1e3}function xp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const i=S_(n);return i?JSON.parse(i):(Wh("Failed to decode base64 JWT payload"),null)}catch(i){return Wh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o2(t){const e=xp(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ls&&S4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function S4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var w;const e=t.auth,n=await t.getIdToken(),r=await wu(t,Sd(e,{idToken:n}));We(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(w=i.providerUserInfo)!=null&&w.length?G_(i.providerUserInfo):[],c=D4(t.providerData,o),f=t.isAnonymous,p=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),g=f?p:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new j1(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function R4(t){const e=Ht(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e){const n=await H_(t,{},async()=>{const r=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await W_(t,i,"/v1/token",`key=${o}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:r};return t.emulatorConfig&&Wo(t.emulatorConfig.host)&&(p.credentials="include"),z_.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k4(t,e){return qo(t,"POST","/v2/accounts:revokeToken",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");const n=o2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await P4(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new Al;return r&&(We(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(We(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new N4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new j1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wu(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T4(this,e)}reload(){return R4(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await wu(this,b4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,f=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:v,isAnonymous:b,providerData:S,stsTokenManager:j}=n;We(w&&j,e,"internal-error");const V=Al.fromJSON(this.name,j);We(typeof w=="string",e,"internal-error"),Qs(r,e.name),Qs(i,e.name),We(typeof v=="boolean",e,"internal-error"),We(typeof b=="boolean",e,"internal-error"),Qs(o,e.name),Qs(c,e.name),Qs(f,e.name),Qs(p,e.name),Qs(g,e.name),Qs(y,e.name);const P=new bi({uid:w,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:V,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(P.providerData=S.map(L=>({...L}))),p&&(P._redirectEventId=p),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Al;i.updateFromServerResponse(n);const o=new bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nd(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];We(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?G_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),f=new Al;f.updateFromIdToken(r);const p=new bi({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new j1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Map;function vs(t){Os(t instanceof Function,"Expected a class definition");let e=a2.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q_.type="NONE";const l2=q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t,e,n){return`firebase:${t}:${e}:${n}`}class Il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Gh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sd(this.auth,{idToken:e}).catch(()=>{});return n?bi._fromGetAccountInfoResponse(this.auth,n,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Il(vs(l2),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||vs(l2);const c=Gh(r,e.config.apiKey,e.name);let f=null;for(const g of n)try{const y=await g._get(c);if(y){let w;if(typeof y=="string"){const v=await Sd(e,{idToken:y}).catch(()=>{});if(!v)break;w=await bi._fromGetAccountInfoResponse(e,v,y)}else w=bi._fromJSON(e,y);g!==o&&(f=w),o=g;break}}catch{}const p=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new Il(o,e,r):(o=p[0],f&&await o._set(c,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new Il(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z_(e))return"Blackberry";if(J_(e))return"Webos";if(X_(e))return"Safari";if((e.includes("chrome/")||K_(e))&&!e.includes("edge/"))return"Chrome";if($_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y_(t=hr()){return/firefox\//i.test(t)}function X_(t=hr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K_(t=hr()){return/crios\//i.test(t)}function Q_(t=hr()){return/iemobile/i.test(t)}function $_(t=hr()){return/android/i.test(t)}function Z_(t=hr()){return/blackberry/i.test(t)}function J_(t=hr()){return/webos/i.test(t)}function yp(t=hr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O4(t=hr()){var e;return yp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function M4(){return Y3()&&document.documentMode===10}function ev(t=hr()){return yp(t)||$_(t)||J_(t)||Z_(t)||/windows phone/i.test(t)||Q_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e=[]){let n;switch(t){case"Browser":n=c2(hr());break;case"Worker":n=`${c2(hr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ka}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,f)=>{try{const p=e(o);c(p)}catch(p){f(p)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,e={}){return qo(t,"GET","/v2/passwordPolicy",Go(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=6;class B4{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??F4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u2(this),this.idTokenSubscription=new u2(this),this.beforeStateQueue=new L4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vs(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sd(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(qr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,f=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(bs(this));const n=e?Ht(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j4(this),n=new B4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vs(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&p4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oa(t){return Ht(t)}class u2{constructor(e){this.auth=e,this.observer=null,this.addObserver=tS(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V4(t){Ef=t}function nv(t){return Ef.loadJS(t)}function z4(){return Ef.recaptchaEnterpriseScript}function H4(){return Ef.gapiScript}function W4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class G4{constructor(){this.enterprise=new q4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class q4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Y4="recaptcha-enterprise",rv="NO_RECAPTCHA";class X4{constructor(e){this.type=Y4,this.auth=Oa(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{I4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new A4(p);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(p=>{f(p)})})}function i(o,c,f){const p=window.grecaptcha;s2(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(rv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G4().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(f=>{if(!n&&s2(window.grecaptcha))i(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=z4();p.length!==0&&(p+=f),nv(p).then(()=>{i(f,o,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function h2(t,e,n,r=!1,i=!1){const o=new X4(t);let c;if(i)c=rv;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function F1(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await h2(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await h2(t,e,n,n==="getOobCode");return r(t,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t,e){const n=wf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ea(o,e??{}))return i;Pi(i,"already-initialized")}return n.initialize({options:e})}function Q4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $4(t,e,n){const r=Oa(t);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=iv(e),{host:c,port:f}=Z4(e),p=f===null?"":`:${f}`,g={url:`${o}//${c}${p}/`},y=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Ea(g,r.config.emulator)&&Ea(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Wo(c)?(up(`${o}//${c}${p}`),hp("Auth",!0)):J4()}function iv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z4(t){const e=iv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:d2(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:d2(c)}}}function d2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,n){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function eN(t,e){return qo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e){return Bu(t,"POST","/v1/accounts:signInWithPassword",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e){return Bu(t,"POST","/v1/accounts:signInWithEmailLink",Go(t,e))}async function rN(t,e){return Bu(t,"POST","/v1/accounts:signInWithEmailLink",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends wp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Eu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Eu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F1(e,n,"signInWithPassword",tN);case"emailLink":return nN(e,{email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F1(e,r,"signUpPassword",eN);case"emailLink":return rN(e,{idToken:n,email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Bu(t,"POST","/v1/accounts:signInWithIdp",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="http://localhost";class va extends wp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const c=new va(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ju(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oN(t){const e=Rc(Dc(t)).link,n=e?Rc(Dc(e)).deep_link_id:null,r=Rc(Dc(t)).deep_link_id;return(r?Rc(Dc(r)).link:null)||r||n||e||t}class Ep{constructor(e){const n=Rc(Dc(e)),r=n.apiKey??null,i=n.oobCode??null,o=sN(n.mode??null);We(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=oN(e);try{return new Ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(e,n){return Eu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ep.parseLink(n);return We(r,"argument-error"),Eu._fromEmailAndCode(e,r.code,r.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends sv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Uu{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return io.credential(n,r)}catch{return null}}}io.GOOGLE_SIGN_IN_METHOD="google.com";io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Uu{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Uu{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return oo.credential(n,r)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(t,e){return Bu(t,"POST","/v1/accounts:signUp",Go(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await bi._fromIdTokenResponse(e,r,i),c=f2(r);return new Ca({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=f2(r);return new Ca({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function f2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ls{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rd(e,n,r,i)}}function ov(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,o,e,r):o})}async function lN(t,e,n=!1){const r=await wu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ca._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e,n=!1){const{auth:r}=t;if(qr(r.app))return Promise.reject(bs(r));const i="reauthenticate";try{const o=await wu(t,ov(r,i,e,t),n);We(o.idToken,r,"internal-error");const c=xp(o.idToken);We(c,r,"internal-error");const{sub:f}=c;return We(t.uid===f,r,"user-mismatch"),Ca._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Pi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function av(t,e,n=!1){if(qr(t.app))return Promise.reject(bs(t));const r="signIn",i=await ov(t,r,e),o=await Ca._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function uN(t,e){return av(Oa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lv(t){const e=Oa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cv(t,e,n){if(qr(t.app))return Promise.reject(bs(t));const r=Oa(t),c=await F1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&lv(t),p}),f=await Ca._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(f.user),f}function hN(t,e,n){return qr(t.app)?Promise.reject(bs(t)):uN(Ht(t),Ql.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lv(t),r})}function dN(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function fN(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function gN(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function pN(t){return Ht(t).signOut()}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1e3,xN=10;class hv extends uv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ev(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);M4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hv.type="LOCAL";const yN=hv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends uv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dv.type="SESSION";const fv=dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _f(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(c).map(async g=>g(n.origin,o)),p=await wN(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((f,p)=>{const g=_p("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(w){const v=w;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(v.data.response);break;default:clearTimeout(y),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function _N(t){rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function vN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function AN(){return gv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="firebaseLocalStorageDb",IN=1,Pd="firebaseLocalStorage",mv="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(t,e){return t.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function bN(){const t=indexedDB.deleteDatabase(pv);return new Vu(t).toPromise()}function B1(){const t=indexedDB.open(pv,IN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pd,{keyPath:mv})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pd)?e(r):(r.close(),await bN(),e(await B1()))})})}async function g2(t,e,n){const r=vf(t,!0).put({[mv]:e,value:n});return new Vu(r).toPromise()}async function TN(t,e){const n=vf(t,!1).get(e),r=await new Vu(n).toPromise();return r===void 0?null:r.value}function p2(t,e){const n=vf(t,!0).delete(e);return new Vu(n).toPromise()}const SN=800,NN=3;class xv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(AN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await vN(),!this.activeServiceWorker)return;this.sender=new EN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B1();return await g2(e,Dd,"1"),await p2(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>g2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=vf(i,!1).getAll();return new Vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xv.type="LOCAL";const RN=xv;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){return e?vs(e):(We(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends wp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PN(t){return av(t.auth,new vp(t),t.bypassAuthState)}function kN(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),cN(n,new vp(t),t.bypassAuthState)}async function ON(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),lN(n,new vp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PN;case"linkViaPopup":case"linkViaRedirect":return ON;case"reauthViaPopup":case"reauthViaRedirect":return kN;default:Pi(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Fu(2e3,1e4);class gl extends yv{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MN.get())};e()}}gl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="pendingRedirect",qh=new Map;class jN extends yv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const r=await FN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FN(t,e){const n=VN(e),r=UN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function BN(t,e){qh.set(t._key(),e)}function UN(t){return vs(t._redirectPersistence)}function VN(t){return Gh(LN,t.config.apiKey,t.name)}async function zN(t,e,n=!1){if(qr(t.app))return Promise.reject(bs(t));const r=Oa(t),i=DN(r,e),c=await new jN(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=10*60*1e3;class WN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wv(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ns(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HN&&this.cachedEventUids.clear(),this.cachedEventUids.has(m2(e))}saveEventToCache(e){this.cachedEventUids.add(m2(e)),this.lastProcessedEventTime=Date.now()}}function m2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e={}){return qo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XN=/^https?/;async function KN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qN(t);for(const n of e)try{if(QN(n))return}catch{}Pi(t,"unauthorized-domain")}function QN(t){const e=L1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!XN.test(n))return!1;if(YN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new Fu(3e4,6e4);function x2(){const t=rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZN(t){return new Promise((e,n)=>{var i,o,c;function r(){x2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x2(),n(ns(t,"network-request-failed"))},timeout:$N.get()})}if((o=(i=rs().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=rs().gapi)!=null&&c.load)r();else{const f=W4("iframefcb");return rs()[f]=()=>{gapi.load?r():n(ns(t,"network-request-failed"))},nv(`${H4()}?onload=${f}`).catch(p=>n(p))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function JN(t){return Yh=Yh||ZN(t),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Fu(5e3,15e3),tR="__/auth/iframe",nR="emulator/auth/iframe",rR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sR(t){const e=t.config;We(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mp(e,nR):`https://${t.config.authDomain}/${tR}`,r={apiKey:e.apiKey,appName:t.name,v:ka},i=iR.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ju(r).slice(1)}`}async function oR(t){const e=await JN(t),n=rs().gapi;return We(n,t,"internal-error"),e.open({where:document.body,url:sR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rR,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=ns(t,"network-request-failed"),f=rs().setTimeout(()=>{o(c)},eR.get());function p(){rs().clearTimeout(f),i(r)}r.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lR=500,cR=600,uR="_blank",hR="http://localhost";class y2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dR(t,e,n,r=lR,i=cR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const p={...aR,width:r.toString(),height:i.toString(),top:o,left:c},g=hr().toLowerCase();n&&(f=K_(g)?uR:n),Y_(g)&&(e=e||hR,p.scrollbars="yes");const y=Object.entries(p).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(O4(g)&&f!=="_self")return fR(e||"",f),new y2(null);const w=window.open(e||"",f,y);We(w,t,"popup-blocked");try{w.focus()}catch{}return new y2(w)}function fR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="__/auth/handler",pR="emulator/auth/handler",mR=encodeURIComponent("fac");async function w2(t,e,n,r,i,o){We(t.config.authDomain,t,"auth-domain-config-required"),We(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ka,eventId:i};if(e instanceof sv){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",eS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))c[y]=w}if(e instanceof Uu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const p=await t._getAppCheckToken(),g=p?`#${mR}=${encodeURIComponent(p)}`:"";return`${xR(t)}?${ju(f).slice(1)}${g}`}function xR({config:t}){return t.emulator?mp(t,pR):`https://${t.authDomain}/${gR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="webStorageSupport";class yR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fv,this._completeRedirectFn=zN,this._overrideRedirectResult=BN}async _openPopup(e,n,r,i){var c;Os((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await w2(e,n,r,L1(),i);return dR(e,o,_p())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await w2(e,n,r,L1(),i);return _N(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Os(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oR(e),r=new WN(e);return n.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I0,{type:I0},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[I0];o!==void 0&&n(!!o),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ev()||X_()||yp()}}const wR=yR;var E2="@firebase/auth",_2="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(t){_a(new Po("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;We(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tv(t)},g=new U4(r,i,o,p);return Q4(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_a(new Po("auth-internal",e=>{const n=Oa(e.getProvider("auth").getImmediate());return(r=>new ER(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(E2,_2,_R(t)),ts(E2,_2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=5*60,AR=P_("authIdTokenMaxAge")||CR;let v2=null;const IR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AR)return;const i=n==null?void 0:n.token;v2!==i&&(v2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bR(t=gp()){const e=wf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K4(t,{popupRedirectResolver:wR,persistence:[RN,yN,fv]}),r=P_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=IR(o.toString());fN(n,c,()=>c(n.currentUser)),dN(n,f=>c(f))}}const i=N_("auth");return i&&$4(n,`http://${i}`),n}function TR(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}V4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ns("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",TR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");var C2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,Ev;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function I(){}I.prototype=A.prototype,k.F=A.prototype,k.prototype=new I,k.prototype.constructor=k,k.D=function(F,z,O){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return A.prototype[z].apply(F,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,A,I){I||(I=0);const F=Array(16);if(typeof A=="string")for(var z=0;z<16;++z)F[z]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(z=0;z<16;++z)F[z]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=k.g[0],I=k.g[1],z=k.g[2];let O=k.g[3],R;R=A+(O^I&(z^O))+F[0]+3614090360&4294967295,A=I+(R<<7&4294967295|R>>>25),R=O+(z^A&(I^z))+F[1]+3905402710&4294967295,O=A+(R<<12&4294967295|R>>>20),R=z+(I^O&(A^I))+F[2]+606105819&4294967295,z=O+(R<<17&4294967295|R>>>15),R=I+(A^z&(O^A))+F[3]+3250441966&4294967295,I=z+(R<<22&4294967295|R>>>10),R=A+(O^I&(z^O))+F[4]+4118548399&4294967295,A=I+(R<<7&4294967295|R>>>25),R=O+(z^A&(I^z))+F[5]+1200080426&4294967295,O=A+(R<<12&4294967295|R>>>20),R=z+(I^O&(A^I))+F[6]+2821735955&4294967295,z=O+(R<<17&4294967295|R>>>15),R=I+(A^z&(O^A))+F[7]+4249261313&4294967295,I=z+(R<<22&4294967295|R>>>10),R=A+(O^I&(z^O))+F[8]+1770035416&4294967295,A=I+(R<<7&4294967295|R>>>25),R=O+(z^A&(I^z))+F[9]+2336552879&4294967295,O=A+(R<<12&4294967295|R>>>20),R=z+(I^O&(A^I))+F[10]+4294925233&4294967295,z=O+(R<<17&4294967295|R>>>15),R=I+(A^z&(O^A))+F[11]+2304563134&4294967295,I=z+(R<<22&4294967295|R>>>10),R=A+(O^I&(z^O))+F[12]+1804603682&4294967295,A=I+(R<<7&4294967295|R>>>25),R=O+(z^A&(I^z))+F[13]+4254626195&4294967295,O=A+(R<<12&4294967295|R>>>20),R=z+(I^O&(A^I))+F[14]+2792965006&4294967295,z=O+(R<<17&4294967295|R>>>15),R=I+(A^z&(O^A))+F[15]+1236535329&4294967295,I=z+(R<<22&4294967295|R>>>10),R=A+(z^O&(I^z))+F[1]+4129170786&4294967295,A=I+(R<<5&4294967295|R>>>27),R=O+(I^z&(A^I))+F[6]+3225465664&4294967295,O=A+(R<<9&4294967295|R>>>23),R=z+(A^I&(O^A))+F[11]+643717713&4294967295,z=O+(R<<14&4294967295|R>>>18),R=I+(O^A&(z^O))+F[0]+3921069994&4294967295,I=z+(R<<20&4294967295|R>>>12),R=A+(z^O&(I^z))+F[5]+3593408605&4294967295,A=I+(R<<5&4294967295|R>>>27),R=O+(I^z&(A^I))+F[10]+38016083&4294967295,O=A+(R<<9&4294967295|R>>>23),R=z+(A^I&(O^A))+F[15]+3634488961&4294967295,z=O+(R<<14&4294967295|R>>>18),R=I+(O^A&(z^O))+F[4]+3889429448&4294967295,I=z+(R<<20&4294967295|R>>>12),R=A+(z^O&(I^z))+F[9]+568446438&4294967295,A=I+(R<<5&4294967295|R>>>27),R=O+(I^z&(A^I))+F[14]+3275163606&4294967295,O=A+(R<<9&4294967295|R>>>23),R=z+(A^I&(O^A))+F[3]+4107603335&4294967295,z=O+(R<<14&4294967295|R>>>18),R=I+(O^A&(z^O))+F[8]+1163531501&4294967295,I=z+(R<<20&4294967295|R>>>12),R=A+(z^O&(I^z))+F[13]+2850285829&4294967295,A=I+(R<<5&4294967295|R>>>27),R=O+(I^z&(A^I))+F[2]+4243563512&4294967295,O=A+(R<<9&4294967295|R>>>23),R=z+(A^I&(O^A))+F[7]+1735328473&4294967295,z=O+(R<<14&4294967295|R>>>18),R=I+(O^A&(z^O))+F[12]+2368359562&4294967295,I=z+(R<<20&4294967295|R>>>12),R=A+(I^z^O)+F[5]+4294588738&4294967295,A=I+(R<<4&4294967295|R>>>28),R=O+(A^I^z)+F[8]+2272392833&4294967295,O=A+(R<<11&4294967295|R>>>21),R=z+(O^A^I)+F[11]+1839030562&4294967295,z=O+(R<<16&4294967295|R>>>16),R=I+(z^O^A)+F[14]+4259657740&4294967295,I=z+(R<<23&4294967295|R>>>9),R=A+(I^z^O)+F[1]+2763975236&4294967295,A=I+(R<<4&4294967295|R>>>28),R=O+(A^I^z)+F[4]+1272893353&4294967295,O=A+(R<<11&4294967295|R>>>21),R=z+(O^A^I)+F[7]+4139469664&4294967295,z=O+(R<<16&4294967295|R>>>16),R=I+(z^O^A)+F[10]+3200236656&4294967295,I=z+(R<<23&4294967295|R>>>9),R=A+(I^z^O)+F[13]+681279174&4294967295,A=I+(R<<4&4294967295|R>>>28),R=O+(A^I^z)+F[0]+3936430074&4294967295,O=A+(R<<11&4294967295|R>>>21),R=z+(O^A^I)+F[3]+3572445317&4294967295,z=O+(R<<16&4294967295|R>>>16),R=I+(z^O^A)+F[6]+76029189&4294967295,I=z+(R<<23&4294967295|R>>>9),R=A+(I^z^O)+F[9]+3654602809&4294967295,A=I+(R<<4&4294967295|R>>>28),R=O+(A^I^z)+F[12]+3873151461&4294967295,O=A+(R<<11&4294967295|R>>>21),R=z+(O^A^I)+F[15]+530742520&4294967295,z=O+(R<<16&4294967295|R>>>16),R=I+(z^O^A)+F[2]+3299628645&4294967295,I=z+(R<<23&4294967295|R>>>9),R=A+(z^(I|~O))+F[0]+4096336452&4294967295,A=I+(R<<6&4294967295|R>>>26),R=O+(I^(A|~z))+F[7]+1126891415&4294967295,O=A+(R<<10&4294967295|R>>>22),R=z+(A^(O|~I))+F[14]+2878612391&4294967295,z=O+(R<<15&4294967295|R>>>17),R=I+(O^(z|~A))+F[5]+4237533241&4294967295,I=z+(R<<21&4294967295|R>>>11),R=A+(z^(I|~O))+F[12]+1700485571&4294967295,A=I+(R<<6&4294967295|R>>>26),R=O+(I^(A|~z))+F[3]+2399980690&4294967295,O=A+(R<<10&4294967295|R>>>22),R=z+(A^(O|~I))+F[10]+4293915773&4294967295,z=O+(R<<15&4294967295|R>>>17),R=I+(O^(z|~A))+F[1]+2240044497&4294967295,I=z+(R<<21&4294967295|R>>>11),R=A+(z^(I|~O))+F[8]+1873313359&4294967295,A=I+(R<<6&4294967295|R>>>26),R=O+(I^(A|~z))+F[15]+4264355552&4294967295,O=A+(R<<10&4294967295|R>>>22),R=z+(A^(O|~I))+F[6]+2734768916&4294967295,z=O+(R<<15&4294967295|R>>>17),R=I+(O^(z|~A))+F[13]+1309151649&4294967295,I=z+(R<<21&4294967295|R>>>11),R=A+(z^(I|~O))+F[4]+4149444226&4294967295,A=I+(R<<6&4294967295|R>>>26),R=O+(I^(A|~z))+F[11]+3174756917&4294967295,O=A+(R<<10&4294967295|R>>>22),R=z+(A^(O|~I))+F[2]+718787259&4294967295,z=O+(R<<15&4294967295|R>>>17),R=I+(O^(z|~A))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(z+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.v=function(k,A){A===void 0&&(A=k.length);const I=A-this.blockSize,F=this.C;let z=this.h,O=0;for(;O<A;){if(z==0)for(;O<=I;)i(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<A;)if(F[z++]=k.charCodeAt(O++),z==this.blockSize){i(this,F),z=0;break}}else for(;O<A;)if(F[z++]=k[O++],z==this.blockSize){i(this,F),z=0;break}}this.h=z,this.o+=A},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,I=0;I<4;++I)for(let F=0;F<32;F+=8)k[A++]=this.g[I]>>>F&255;return k};function o(k,A){var I=f;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=A(k)}function c(k,A){this.h=A;const I=[];let F=!0;for(let z=k.length-1;z>=0;z--){const O=k[z]|0;F&&O==A||(I[z]=O,F=!1)}this.g=I}var f={};function p(k){return-128<=k&&k<128?o(k,function(A){return new c([A|0],A<0?-1:0)}):new c([k|0],k<0?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return w;if(k<0)return V(g(-k));const A=[];let I=1;for(let F=0;k>=I;F++)A[F]=k/I|0,I*=4294967296;return new c(A,0)}function y(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return V(y(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(A,8));let F=w;for(let O=0;O<k.length;O+=8){var z=Math.min(8,k.length-O);const R=parseInt(k.substring(O,O+z),A);z<8?(z=g(Math.pow(A,z)),F=F.j(z).add(g(R))):(F=F.j(I),F=F.add(g(R)))}return F}var w=p(0),v=p(1),b=p(16777216);t=c.prototype,t.m=function(){if(j(this))return-V(this).m();let k=0,A=1;for(let I=0;I<this.g.length;I++){const F=this.i(I);k+=(F>=0?F:4294967296+F)*A,A*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(j(this))return"-"+V(this).toString(k);const A=g(Math.pow(k,6));var I=this;let F="";for(;;){const z=H(I,A).g;I=P(I,z.j(A));let O=((I.g.length>0?I.g[0]:I.h)>>>0).toString(k);if(I=z,S(I))return O+F;for(;O.length<6;)O="0"+O;F=O+F}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function j(k){return k.h==-1}t.l=function(k){return k=P(this,k),j(k)?-1:S(k)?0:1};function V(k){const A=k.g.length,I=[];for(let F=0;F<A;F++)I[F]=~k.g[F];return new c(I,~k.h).add(v)}t.abs=function(){return j(this)?V(this):this},t.add=function(k){const A=Math.max(this.g.length,k.g.length),I=[];let F=0;for(let z=0;z<=A;z++){let O=F+(this.i(z)&65535)+(k.i(z)&65535),R=(O>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);F=R>>>16,O&=65535,R&=65535,I[z]=R<<16|O}return new c(I,I[I.length-1]&-2147483648?-1:0)};function P(k,A){return k.add(V(A))}t.j=function(k){if(S(this)||S(k))return w;if(j(this))return j(k)?V(this).j(V(k)):V(V(this).j(k));if(j(k))return V(this.j(V(k)));if(this.l(b)<0&&k.l(b)<0)return g(this.m()*k.m());const A=this.g.length+k.g.length,I=[];for(var F=0;F<2*A;F++)I[F]=0;for(F=0;F<this.g.length;F++)for(let z=0;z<k.g.length;z++){const O=this.i(F)>>>16,R=this.i(F)&65535,$=k.i(z)>>>16,Y=k.i(z)&65535;I[2*F+2*z]+=R*Y,L(I,2*F+2*z),I[2*F+2*z+1]+=O*Y,L(I,2*F+2*z+1),I[2*F+2*z+1]+=R*$,L(I,2*F+2*z+1),I[2*F+2*z+2]+=O*$,L(I,2*F+2*z+2)}for(k=0;k<A;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=A;k<2*A;k++)I[k]=0;return new c(I,0)};function L(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function M(k,A){this.g=k,this.h=A}function H(k,A){if(S(A))throw Error("division by zero");if(S(k))return new M(w,w);if(j(k))return A=H(V(k),A),new M(V(A.g),V(A.h));if(j(A))return A=H(k,V(A)),new M(V(A.g),A.h);if(k.g.length>30){if(j(k)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var I=v,F=A;F.l(k)<=0;)I=J(I),F=J(F);var z=q(I,1),O=q(F,1);for(F=q(F,2),I=q(I,2);!S(F);){var R=O.add(F);R.l(k)<=0&&(z=z.add(I),O=R),F=q(F,1),I=q(I,1)}return A=P(k,z.j(A)),new M(z,A)}for(z=w;k.l(A)>=0;){for(I=Math.max(1,Math.floor(k.m()/A.m())),F=Math.ceil(Math.log(I)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),O=g(I),R=O.j(A);j(R)||R.l(k)>0;)I-=F,O=g(I),R=O.j(A);S(O)&&(O=v),z=z.add(O),k=P(k,R)}return new M(z,k)}t.B=function(k){return H(this,k).h},t.and=function(k){const A=Math.max(this.g.length,k.g.length),I=[];for(let F=0;F<A;F++)I[F]=this.i(F)&k.i(F);return new c(I,this.h&k.h)},t.or=function(k){const A=Math.max(this.g.length,k.g.length),I=[];for(let F=0;F<A;F++)I[F]=this.i(F)|k.i(F);return new c(I,this.h|k.h)},t.xor=function(k){const A=Math.max(this.g.length,k.g.length),I=[];for(let F=0;F<A;F++)I[F]=this.i(F)^k.i(F);return new c(I,this.h^k.h)};function J(k){const A=k.g.length+1,I=[];for(let F=0;F<A;F++)I[F]=k.i(F)<<1|k.i(F-1)>>>31;return new c(I,k.h)}function q(k,A){const I=A>>5;A%=32;const F=k.g.length-I,z=[];for(let O=0;O<F;O++)z[O]=A>0?k.i(O+I)>>>A|k.i(O+I+1)<<32-A:k.i(O+I);return new c(z,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ev=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,bo=c}).apply(typeof C2<"u"?C2:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _v,Pc,vv,Xh,U1,Cv,Av,Iv;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var T=0;T<m.length;++T){var D=m[T];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(m,T){if(T)e:{var D=r;m=m.split(".");for(var K=0;K<m.length-1;K++){var oe=m[K];if(!(oe in D))break e;D=D[oe]}m=m[m.length-1],K=D[m],T=T(K),T!=K&&T!=null&&e(D,m,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(T){var D=[],K;for(K in T)Object.prototype.hasOwnProperty.call(T,K)&&D.push([K,T[K]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function f(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function p(m,T,D){return m.call.apply(m.bind,arguments)}function g(m,T,D){return g=p,g.apply(null,arguments)}function y(m,T){var D=Array.prototype.slice.call(arguments,1);return function(){var K=D.slice();return K.push.apply(K,arguments),m.apply(this,K)}}function w(m,T){function D(){}D.prototype=T.prototype,m.Z=T.prototype,m.prototype=new D,m.prototype.constructor=m,m.Ob=function(K,oe,ge){for(var Ae=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)Ae[Qe-2]=arguments[Qe];return T.prototype[oe].apply(K,Ae)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function b(m){const T=m.length;if(T>0){const D=Array(T);for(let K=0;K<T;K++)D[K]=m[K];return D}return[]}function S(m,T){for(let K=1;K<arguments.length;K++){const oe=arguments[K];var D=typeof oe;if(D=D!="object"?D:oe?Array.isArray(oe)?"array":D:"null",D=="array"||D=="object"&&typeof oe.length=="number"){D=m.length||0;const ge=oe.length||0;m.length=D+ge;for(let Ae=0;Ae<ge;Ae++)m[D+Ae]=oe[Ae]}else m.push(oe)}}class j{constructor(T,D){this.i=T,this.j=D,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function V(m){c.setTimeout(()=>{throw m},0)}function P(){var m=k;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class L{constructor(){this.h=this.g=null}add(T,D){const K=M.get();K.set(T,D),this.h?this.h.next=K:this.g=K,this.h=K}}var M=new j(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(T,D){this.h=T,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let J,q=!1,k=new L,A=()=>{const m=Promise.resolve(void 0);J=()=>{m.then(I)}};function I(){for(var m;m=P();){try{m.h.call(m.g)}catch(D){V(D)}var T=M;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}q=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const D=()=>{};c.addEventListener("test",D,T),c.removeEventListener("test",D,T)}catch{}return m}();function R(m){return/^[\s\xa0]*$/.test(m)}function $(m,T){z.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}w($,z),$.prototype.init=function(m,T){const D=this.type=m.type,K=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(D=="mouseover"?T=m.fromElement:D=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),X=0;function G(m,T,D,K,oe){this.listener=m,this.proxy=null,this.src=T,this.type=D,this.capture=!!K,this.ha=oe,this.key=++X,this.da=this.fa=!1}function re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ee(m,T,D){for(const K in m)T.call(D,m[K],K,m)}function ie(m,T){for(const D in m)T.call(void 0,m[D],D,m)}function fe(m){const T={};for(const D in m)T[D]=m[D];return T}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(m,T){let D,K;for(let oe=1;oe<arguments.length;oe++){K=arguments[oe];for(D in K)m[D]=K[D];for(let ge=0;ge<he.length;ge++)D=he[ge],Object.prototype.hasOwnProperty.call(K,D)&&(m[D]=K[D])}}function ue(m){this.src=m,this.g={},this.h=0}ue.prototype.add=function(m,T,D,K,oe){const ge=m.toString();m=this.g[ge],m||(m=this.g[ge]=[],this.h++);const Ae=me(m,T,K,oe);return Ae>-1?(T=m[Ae],D||(T.fa=!1)):(T=new G(T,this.src,ge,!!K,oe),T.fa=D,m.push(T)),T};function ce(m,T){const D=T.type;if(D in m.g){var K=m.g[D],oe=Array.prototype.indexOf.call(K,T,void 0),ge;(ge=oe>=0)&&Array.prototype.splice.call(K,oe,1),ge&&(re(T),m.g[D].length==0&&(delete m.g[D],m.h--))}}function me(m,T,D,K){for(let oe=0;oe<m.length;++oe){const ge=m[oe];if(!ge.da&&ge.listener==T&&ge.capture==!!D&&ge.ha==K)return oe}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Oe={};function ze(m,T,D,K,oe){if(Array.isArray(T)){for(let ge=0;ge<T.length;ge++)ze(m,T[ge],D,K,oe);return null}return D=Be(D),m&&m[Y]?m.J(T,D,f(K)?!!K.capture:!1,oe):et(m,T,D,!1,K,oe)}function et(m,T,D,K,oe,ge){if(!T)throw Error("Invalid event type");const Ae=f(oe)?!!oe.capture:!!oe;let Qe=jt(m);if(Qe||(m[Me]=Qe=new ue(m)),D=Qe.add(T,D,K,Ae,ge),D.proxy)return D;if(K=tt(),D.proxy=K,K.src=m,K.listener=D,m.addEventListener)O||(oe=Ae),oe===void 0&&(oe=!1),m.addEventListener(T.toString(),K,oe);else if(m.attachEvent)m.attachEvent(vn(T.toString()),K);else if(m.addListener&&m.removeListener)m.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return D}function tt(){function m(D){return T.call(m.src,m.listener,D)}const T=pt;return m}function Tt(m,T,D,K,oe){if(Array.isArray(T))for(var ge=0;ge<T.length;ge++)Tt(m,T[ge],D,K,oe);else K=f(K)?!!K.capture:!!K,D=Be(D),m&&m[Y]?(m=m.i,ge=String(T).toString(),ge in m.g&&(T=m.g[ge],D=me(T,D,K,oe),D>-1&&(re(T[D]),Array.prototype.splice.call(T,D,1),T.length==0&&(delete m.g[ge],m.h--)))):m&&(m=jt(m))&&(T=m.g[T.toString()],m=-1,T&&(m=me(T,D,K,oe)),(D=m>-1?T[m]:null)&&qe(D))}function qe(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Y])ce(T.i,m);else{var D=m.type,K=m.proxy;T.removeEventListener?T.removeEventListener(D,K,m.capture):T.detachEvent?T.detachEvent(vn(D),K):T.addListener&&T.removeListener&&T.removeListener(K),(D=jt(T))?(ce(D,m),D.h==0&&(D.src=null,T[Me]=null)):re(m)}}}function vn(m){return m in Oe?Oe[m]:Oe[m]="on"+m}function pt(m,T){if(m.da)m=!0;else{T=new $(T,this);const D=m.listener,K=m.ha||m.src;m.fa&&qe(m),m=D.call(K,T)}return m}function jt(m){return m=m[Me],m instanceof ue?m:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(m){return typeof m=="function"?m:(m[Ye]||(m[Ye]=function(T){return m.handleEvent(T)}),m[Ye])}function Re(){F.call(this),this.i=new ue(this),this.M=this,this.G=null}w(Re,F),Re.prototype[Y]=!0,Re.prototype.removeEventListener=function(m,T,D,K){Tt(this,m,T,D,K)};function at(m,T){var D,K=m.G;if(K)for(D=[];K;K=K.G)D.push(K);if(m=m.M,K=T.type||T,typeof T=="string")T=new z(T,m);else if(T instanceof z)T.target=T.target||m;else{var oe=T;T=new z(K,m),Ee(T,oe)}oe=!0;let ge,Ae;if(D)for(Ae=D.length-1;Ae>=0;Ae--)ge=T.g=D[Ae],oe=Te(ge,K,!0,T)&&oe;if(ge=T.g=m,oe=Te(ge,K,!0,T)&&oe,oe=Te(ge,K,!1,T)&&oe,D)for(Ae=0;Ae<D.length;Ae++)ge=T.g=D[Ae],oe=Te(ge,K,!1,T)&&oe}Re.prototype.N=function(){if(Re.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const D=m.g[T];for(let K=0;K<D.length;K++)re(D[K]);delete m.g[T],m.h--}}this.G=null},Re.prototype.J=function(m,T,D,K){return this.i.add(String(m),T,!1,D,K)},Re.prototype.K=function(m,T,D,K){return this.i.add(String(m),T,!0,D,K)};function Te(m,T,D,K){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let oe=!0;for(let ge=0;ge<T.length;++ge){const Ae=T[ge];if(Ae&&!Ae.da&&Ae.capture==D){const Qe=Ae.listener,un=Ae.ha||Ae.src;Ae.fa&&ce(m.i,Ae),oe=Qe.call(un,K)!==!1&&oe}}return oe&&!K.defaultPrevented}function Cn(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=g(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(m,T||0)}function Ft(m){m.g=Cn(()=>{m.g=null,m.i&&(m.i=!1,Ft(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class it extends F{constructor(T,D){super(),this.m=T,this.l=D,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(m){F.call(this),this.h=m,this.g={}}w(Zt,F);var Jt=[];function Oi(m){ee(m.g,function(T,D){this.g.hasOwnProperty(D)&&qe(T)},m),m.g={}}Zt.prototype.N=function(){Zt.Z.N.call(this),Oi(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=c.JSON.stringify,Wt=c.JSON.parse,An=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Mn(){}function Qn(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ve(){z.call(this,"d")}w(ve,z);function At(){z.call(this,"c")}w(At,z);var nt={},Mt=null;function _r(){return Mt=Mt||new Re}nt.Ia="serverreachability";function cs(m){z.call(this,nt.Ia,m)}w(cs,z);function vr(m){const T=_r();at(T,new cs(T))}nt.STAT_EVENT="statevent";function ct(m,T){z.call(this,nt.STAT_EVENT,m),this.stat=T}w(ct,z);function Ct(m){const T=_r();at(T,new ct(T,m))}nt.Ja="timingevent";function Cr(m,T){z.call(this,nt.Ja,m),this.size=T}w(Cr,z);function dr(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},T)}function en(){this.g=!0}en.prototype.ua=function(){this.g=!1};function Vs(m,T,D,K,oe,ge){m.info(function(){if(m.g)if(ge){var Ae="",Qe=ge.split("&");for(let bt=0;bt<Qe.length;bt++){var un=Qe[bt].split("=");if(un.length>1){const xn=un[0];un=un[1];const Vr=xn.split("_");Ae=Vr.length>=2&&Vr[1]=="type"?Ae+(xn+"="+un+"&"):Ae+(xn+"=redacted&")}}}else Ae=null;else Ae=ge;return"XMLHTTP REQ ("+K+") [attempt "+oe+"]: "+T+`
`+D+`
`+Ae})}function Bt(m,T,D,K,oe,ge,Ae){m.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+oe+"]: "+T+`
`+D+`
`+ge+" "+Ae})}function mn(m,T,D,K){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+ii(m,D)+(K?" "+K:"")})}function ja(m,T){m.info(function(){return"TIMEOUT: "+T})}en.prototype.info=function(){};function ii(m,T){if(!m.g)return T;if(!T)return null;try{const ge=JSON.parse(T);if(ge){for(m=0;m<ge.length;m++)if(Array.isArray(ge[m])){var D=ge[m];if(!(D.length<2)){var K=D[1];if(Array.isArray(K)&&!(K.length<1)){var oe=K[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Ae=1;Ae<K.length;Ae++)K[Ae]=""}}}}return Nt(ge)}catch{return T}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ba;function zn(){}w(zn,Mn),zn.prototype.g=function(){return new XMLHttpRequest},Ba=new zn;function Lr(m){return encodeURIComponent(String(m))}function Ar(m){var T=1;m=m.split(":");const D=[];for(;T>0&&m.length;)D.push(m.shift()),T--;return m.length&&D.push(m.join(":")),D}function Ne(m,T,D,K){this.j=m,this.i=T,this.l=D,this.S=K||1,this.V=new Zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new us}function us(){this.i=null,this.g="",this.h=!1}var Ua={},Hn={};function Li(m,T,D){m.M=1,m.A=Br(Ir(T)),m.u=D,m.R=!0,Ko(m,null)}function Ko(m,T){m.F=Date.now(),za(m),m.B=Ir(m.A);var D=m.B,K=m.S;Array.isArray(K)||(K=[String(K)]),Ut(D.i,"t",K),m.C=0,D=m.j.L,m.h=new us,m.g=Ya(m.j,D?T:null,!m.u),m.P>0&&(m.O=new it(g(m.Y,m,m.g),m.P)),T=m.V,D=m.g,K=m.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(Jt[0]=oe.toString()),oe=Jt);for(let ge=0;ge<oe.length;ge++){const Ae=ze(D,oe[ge],K||T.handleEvent,!1,T.h||T);if(!Ae)break;T.g[Ae.key]=Ae}T=m.J?fe(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),vr(),Vs(m.i,m.v,m.B,m.l,m.S,m.u)}Ne.prototype.ba=function(m){m=m.target;const T=this.O;T&&yi(m)==3?T.j():this.Y(m)},Ne.prototype.Y=function(m){try{if(m==this.g)e:{const Qe=yi(this.g),un=this.g.ya(),bt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Gs(this.g)))){this.K||Qe!=4||un==7||(un==8||bt<=0?vr(3):vr(2)),Ln(this);var T=this.g.ca();this.X=T;var D=Va(this);if(this.o=T==200,Bt(this.i,this.v,this.B,this.l,this.S,Qe,T),this.o){if(this.U&&!this.L){t:{if(this.g){var K,oe=this.g;if((K=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(K)){var ge=K;break t}}ge=null}if(m=ge)mn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,si(this,m);else{this.o=!1,this.m=3,Ct(12),ji(this),St(this);break e}}if(this.R){m=!0;let xn;for(;!this.K&&this.C<D.length;)if(xn=Vf(this,D),xn==Hn){Qe==4&&(this.m=4,Ct(14),m=!1),mn(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==Ua){this.m=4,Ct(15),mn(this.i,this.l,D,"[Invalid Chunk]"),m=!1;break}else mn(this.i,this.l,xn,null),si(this,xn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||D.length!=0||this.h.h||(this.m=1,Ct(16),m=!1),this.o=this.o&&m,!m)mn(this.i,this.l,D,"[Invalid Chunked Response]"),ji(this),St(this);else if(D.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),de(Ae),Ae.P=!0,Ct(11))}}else mn(this.i,this.l,D,null),si(this,D);Qe==4&&ji(this),this.o&&!this.K&&(Qe==4?ta(this.j,this):(this.o=!1,za(this)))}else Zo(this.g),T==400&&D.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),ji(this),St(this)}}}catch{}finally{}};function Va(m){if(!jr(m))return m.g.la();const T=Gs(m.g);if(T==="")return"";let D="";const K=T.length,oe=yi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ji(m),St(m),"";m.h.i=new c.TextDecoder}for(let ge=0;ge<K;ge++)m.h.h=!0,D+=m.h.i.decode(T[ge],{stream:!(oe&&ge==K-1)});return T.length=0,m.h.g+=D,m.C=0,m.h.g}function jr(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Vf(m,T){var D=m.C,K=T.indexOf(`
`,D);return K==-1?Hn:(D=Number(T.substring(D,K)),isNaN(D)?Ua:(K+=1,K+D>T.length?Hn:(T=T.slice(K,K+D),m.C=K+D,T)))}Ne.prototype.cancel=function(){this.K=!0,ji(this)};function za(m){m.T=Date.now()+m.H,Fr(m,m.H)}function Fr(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=dr(g(m.aa,m),T)}function Ln(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Ne.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ja(this.i,this.B),this.M!=2&&(vr(),Ct(17)),ji(this),this.m=2,St(this)):Fr(this,this.T-m)};function St(m){m.j.I==0||m.K||ta(m.j,m)}function ji(m){Ln(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Oi(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function si(m,T){try{var D=m.j;if(D.I!=0&&(D.g==m||Fi(D.h,m))){if(!m.L&&Fi(D.h,m)&&D.I==3){try{var K=D.Ba.g.parse(T)}catch{K=null}if(Array.isArray(K)&&K.length==3){var oe=K;if(oe[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<m.F)ln(D),Jo(D);else break e;dc(D),Ct(18)}}else D.xa=oe[1],0<D.xa-D.K&&oe[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=dr(g(D.Va,D),6e3));Gt(D.h)<=1&&D.ta&&(D.ta=void 0)}else gs(D,11)}else if((m.L||D.g==m)&&ln(D),!R(T))for(oe=D.Ba.g.parse(T),T=0;T<oe.length;T++){let bt=oe[T];const xn=bt[0];if(!(xn<=D.K))if(D.K=xn,bt=bt[1],D.I==2)if(bt[0]=="c"){D.M=bt[1],D.ba=bt[2];const Vr=bt[3];Vr!=null&&(D.ka=Vr,D.j.info("VER="+D.ka));const ps=bt[4];ps!=null&&(D.za=ps,D.j.info("SVER="+D.za));const gr=bt[5];gr!=null&&typeof gr=="number"&&gr>0&&(K=1.5*gr,D.O=K,D.j.info("backChannelRequestTimeoutMs_="+K)),K=D;const li=m.g;if(li){const Xa=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ge=K.h;ge.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(ic(ge,ge.h),ge.h=null))}if(K.G){const ms=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;ms&&(K.wa=ms,Ge(K.J,K.G,ms))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-m.F,D.j.info("Handshake RTT: "+D.T+"ms")),K=D;var Ae=m;if(K.na=ih(K,K.L?K.ba:null,K.W),Ae.L){Et(K.h,Ae);var Qe=Ae,un=K.O;un&&(Qe.H=un),Qe.D&&(Ln(Qe),za(Qe)),K.g=Ae}else wi(K);D.i.length>0&&qa(D)}else bt[0]!="stop"&&bt[0]!="close"||gs(D,7);else D.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?gs(D,7):Ga(D):bt[0]!="noop"&&D.l&&D.l.qa(bt),D.A=0)}}vr(4)}catch{}}var rc=class{constructor(m,T){this.g=m,this.map=T}};function we(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ju(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Gt(m){return m.h?1:m.g?m.g.size:0}function Fi(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function ic(m,T){m.g?m.g.add(T):m.h=T}function Et(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}we.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function mt(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const D of m.g.values())T=T.concat(D.G);return T}return b(m.i)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sc(m,T){if(m){m=m.split("&");for(let D=0;D<m.length;D++){const K=m[D].indexOf("=");let oe,ge=null;K>=0?(oe=m[D].substring(0,K),ge=m[D].substring(K+1)):oe=m[D],T(oe,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function oi(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof oi?(this.l=m.l,qt(this,m.j),this.o=m.o,this.g=m.g,br(this,m.u),this.h=m.h,oc(this,ac(m.i)),this.m=m.m):m&&(T=String(m).match(rt))?(this.l=!1,qt(this,T[1]||"",!0),this.o=Qo(T[2]||""),this.g=Qo(T[3]||"",!0),br(this,T[4]),this.h=Qo(T[5]||"",!0),oc(this,T[6]||"",!0),this.m=Qo(T[7]||"")):(this.l=!1,this.i=new Wn(null,this.l))}oi.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(ai(T,jn,!0),":");var D=this.g;return(D||T=="file")&&(m.push("//"),(T=this.o)&&m.push(ai(T,jn,!0),"@"),m.push(Lr(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&m.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&m.push("/"),m.push(ai(D,D.charAt(0)=="/"?Q:le,!0))),(D=this.i.toString())&&m.push("?",D),(D=this.m)&&m.push("#",ai(D,In)),m.join("")},oi.prototype.resolve=function(m){const T=Ir(this);let D=!!m.j;D?qt(T,m.j):D=!!m.o,D?T.o=m.o:D=!!m.g,D?T.g=m.g:D=m.u!=null;var K=m.h;if(D)br(T,m.u);else if(D=!!m.h){if(K.charAt(0)!="/")if(this.g&&!this.h)K="/"+K;else{var oe=T.h.lastIndexOf("/");oe!=-1&&(K=T.h.slice(0,oe+1)+K)}if(oe=K,oe==".."||oe==".")K="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){K=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const ge=[];for(let Ae=0;Ae<oe.length;){const Qe=oe[Ae++];Qe=="."?K&&Ae==oe.length&&ge.push(""):Qe==".."?((ge.length>1||ge.length==1&&ge[0]!="")&&ge.pop(),K&&Ae==oe.length&&ge.push("")):(ge.push(Qe),K=!0)}K=ge.join("/")}else K=oe}return D?T.h=K:D=m.i.toString()!=="",D?oc(T,ac(m.i)):D=!!m.m,D&&(T.m=m.m),T};function Ir(m){return new oi(m)}function qt(m,T,D){m.j=D?Qo(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function br(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function oc(m,T,D){T instanceof Wn?(m.i=T,lc(m.i,m.l)):(D||(T=ai(T,Le)),m.i=new Wn(T,m.l))}function Ge(m,T,D){m.i.set(T,D)}function Br(m){return Ge(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qo(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,T,D){return typeof m=="string"?(m=encodeURI(m).replace(T,Pt),D&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pt(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var jn=/[#\/\?@]/g,le=/[#\?:]/g,Q=/[#\?]/g,Le=/[#\?@]/g,In=/#/g;function Wn(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function hs(m){m.g||(m.g=new Map,m.h=0,m.i&&sc(m.i,function(T,D){m.add(decodeURIComponent(T.replace(/\+/g," ")),D)}))}t=Wn.prototype,t.add=function(m,T){hs(this),this.i=null,m=zs(this,m);let D=this.g.get(m);return D||this.g.set(m,D=[]),D.push(T),this.h+=1,this};function Ha(m,T){hs(m),T=zs(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function fr(m,T){return hs(m),T=zs(m,T),m.g.has(T)}t.forEach=function(m,T){hs(this),this.g.forEach(function(D,K){D.forEach(function(oe){m.call(T,oe,K,this)},this)},this)};function je(m,T){hs(m);let D=[];if(typeof T=="string")fr(m,T)&&(D=D.concat(m.g.get(zs(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)D=D.concat(m[T]);return D}t.set=function(m,T){return hs(this),this.i=null,m=zs(this,m),fr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},t.get=function(m,T){return m?(m=je(this,m),m.length>0?String(m[0]):T):T};function Ut(m,T,D){Ha(m,T),D.length>0&&(m.i=null,m.g.set(zs(m,T),b(D)),m.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let K=0;K<T.length;K++){var D=T[K];const oe=Lr(D);D=je(this,D);for(let ge=0;ge<D.length;ge++){let Ae=oe;D[ge]!==""&&(Ae+="="+Lr(D[ge])),m.push(Ae)}}return this.i=m.join("&")};function ac(m){const T=new Wn;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function zs(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function lc(m,T){T&&!m.j&&(hs(m),m.i=null,m.g.forEach(function(D,K){const oe=K.toLowerCase();K!=oe&&(Ha(this,K),Ut(this,oe,D))},m)),m.j=T}function Wa(m,T){const D=new en;if(c.Image){const K=new Image;K.onload=y(Bi,D,"TestLoadImage: loaded",!0,T,K),K.onerror=y(Bi,D,"TestLoadImage: error",!1,T,K),K.onabort=y(Bi,D,"TestLoadImage: abort",!1,T,K),K.ontimeout=y(Bi,D,"TestLoadImage: timeout",!1,T,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=m}else T(!1)}function cc(m,T){const D=new en,K=new AbortController,oe=setTimeout(()=>{K.abort(),Bi(D,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:K.signal}).then(ge=>{clearTimeout(oe),ge.ok?Bi(D,"TestPingServer: ok",!0,T):Bi(D,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(oe),Bi(D,"TestPingServer: error",!1,T)})}function Bi(m,T,D,K,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),K(D)}catch{}}function bn(){this.g=new An}function ds(m){this.i=m.Sb||null,this.h=m.ab||!1}w(ds,Mn),ds.prototype.g=function(){return new Ur(this.i,this.h)};function Ur(m,T){Re.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ur,Re),t=Ur.prototype,t.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,Xe(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Xe(this)),this.g&&(this.readyState=3,Xe(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?$o(this):Xe(this),this.readyState==3&&Ve(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,$o(this))},t.Na=function(m){this.g&&(this.response=m,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Xe(m)}t.setRequestHeader=function(m,T){this.A.append(m,T)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var D=T.next();!D.done;)D=D.value,m.push(D[0]+": "+D[1]),D=T.next();return m.join(`\r
`)};function Xe(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Tn(m){let T="";return ee(m,function(D,K){T+=K,T+=":",T+=D,T+=`\r
`}),T}function uc(m,T,D){e:{for(K in D){var K=!1;break e}K=!0}K||(D=Tn(D),typeof m=="string"?D!=null&&Lr(D):Ge(m,T,D))}function Vt(m){Re.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Vt,Re);var eh=/^https?$/i,fs=["POST","PUT"];t=Vt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,T,D,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ba.g(),this.g.onreadystatechange=v(g(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(ge){th(this,ge);return}if(m=D||"",D=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var oe in K)D.set(oe,K[oe]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ge of K.keys())D.set(ge,K.get(ge));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(D.keys()).find(ge=>ge.toLowerCase()=="content-type"),oe=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(fs,T,void 0)>=0)||K||oe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Ae]of D)this.g.setRequestHeader(ge,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ge){th(this,ge)}};function th(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,Hs(m),Ui(m)}function Hs(m){m.A||(m.A=!0,at(m,"complete"),at(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,at(this,"complete"),at(this,"abort"),Ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ws(this):this.Xa())},t.Xa=function(){Ws(this)};function Ws(m){if(m.h&&typeof o<"u"){if(m.v&&yi(m)==4)setTimeout(m.Ca.bind(m),0);else if(at(m,"readystatechange"),yi(m)==4){m.h=!1;try{const ge=m.ca();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var D;if(!(D=T)){var K;if(K=ge===0){let Ae=String(m.D).match(rt)[1]||null;!Ae&&c.self&&c.self.location&&(Ae=c.self.location.protocol.slice(0,-1)),K=!eh.test(Ae?Ae.toLowerCase():"")}D=K}if(D)at(m,"complete"),at(m,"success");else{m.o=6;try{var oe=yi(m)>2?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.ca()+"]",Hs(m)}}finally{Ui(m)}}}}function Ui(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const D=m.g;m.g=null,T||at(m,"ready");try{D.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function yi(m){return m.g?m.g.readyState:0}t.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Wt(T)}};function Gs(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Zo(m){const T={};m=(m.g&&yi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<m.length;K++){if(R(m[K]))continue;var D=Ar(m[K]);const oe=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ge=T[oe]||[];T[oe]=ge,ge.push(D)}ie(T,function(K){return K.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sn(m,T,D){return D&&D.internalChannelParams&&D.internalChannelParams[m]||T}function hc(m){this.za=0,this.i=[],this.j=new en,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sn("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sn("baseRetryDelayMs",5e3,m),this.Za=Sn("retryDelaySeedMs",1e4,m),this.Ta=Sn("forwardChannelMaxRetries",2,m),this.va=Sn("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new we(m&&m.concurrentRequestLimit),this.Ba=new bn,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=hc.prototype,t.ka=8,t.I=1,t.connect=function(m,T,D,K){Ct(0),this.W=m,this.H=T||{},D&&K!==void 0&&(this.H.OSID=D,this.H.OAID=K),this.F=this.X,this.J=ih(this,null,this.W),qa(this)};function Ga(m){if(nh(m),m.I==3){var T=m.V++,D=Ir(m.J);if(Ge(D,"SID",m.M),Ge(D,"RID",T),Ge(D,"TYPE","terminate"),qs(m,D),T=new Ne(m,m.j,T),T.M=2,T.A=Br(Ir(D)),D=!1,c.navigator&&c.navigator.sendBeacon)try{D=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!D&&c.Image&&(new Image().src=T.A,D=!0),D||(T.g=Ya(T.j,null),T.g.ea(T.A)),T.F=Date.now(),za(T)}rh(m)}function Jo(m){m.g&&(de(m),m.g.cancel(),m.g=null)}function nh(m){Jo(m),m.v&&(c.clearTimeout(m.v),m.v=null),ln(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function qa(m){if(!Ju(m.h)&&!m.m){m.m=!0;var T=m.Ea;J||A(),q||(J(),q=!0),k.add(T,m),m.D=0}}function zf(m,T){return Gt(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=dr(g(m.Ea,m,T),fc(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const oe=new Ne(this,this.j,m);let ge=this.o;if(this.U&&(ge?(ge=fe(ge),Ee(ge,this.U)):ge=this.U),this.u!==null||this.R||(oe.J=ge,ge=null),this.S)e:{for(var T=0,D=0;D<this.i.length;D++){t:{var K=this.i[D];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(T+=K,T>4096){T=D;break e}if(T===4096||D===this.i.length-1){T=D+1;break e}}T=1e3}else T=1e3;T=ea(this,oe,T),D=Ir(this.J),Ge(D,"RID",m),Ge(D,"CVER",22),this.G&&Ge(D,"X-HTTP-Session-Id",this.G),qs(this,D),ge&&(this.R?T="headers="+Lr(Tn(ge))+"&"+T:this.u&&uc(D,this.u,ge)),ic(this.h,oe),this.Ra&&Ge(D,"TYPE","init"),this.S?(Ge(D,"$req",T),Ge(D,"SID","null"),oe.U=!0,Li(oe,D,null)):Li(oe,D,T),this.I=2}}else this.I==3&&(m?It(this,m):this.i.length==0||Ju(this.h)||It(this))};function It(m,T){var D;T?D=T.l:D=m.V++;const K=Ir(m.J);Ge(K,"SID",m.M),Ge(K,"RID",D),Ge(K,"AID",m.K),qs(m,K),m.u&&m.o&&uc(K,m.u,m.o),D=new Ne(m,m.j,D,m.D+1),m.u===null&&(D.J=m.o),T&&(m.i=T.G.concat(m.i)),T=ea(m,D,1e3),D.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ic(m.h,D),Li(D,K,T)}function qs(m,T){m.H&&ee(m.H,function(D,K){Ge(T,K,D)}),m.l&&ee({},function(D,K){Ge(T,K,D)})}function ea(m,T,D){D=Math.min(m.i.length,D);const K=m.l?g(m.l.Ka,m.l,m):null;e:{var oe=m.i;let Qe=-1;for(;;){const un=["count="+D];Qe==-1?D>0?(Qe=oe[0].g,un.push("ofs="+Qe)):Qe=0:un.push("ofs="+Qe);let bt=!0;for(let xn=0;xn<D;xn++){var ge=oe[xn].g;const Vr=oe[xn].map;if(ge-=Qe,ge<0)Qe=Math.max(0,oe[xn].g-100),bt=!1;else try{ge="req"+ge+"_"||"";try{var Ae=Vr instanceof Map?Vr:Object.entries(Vr);for(const[ps,gr]of Ae){let li=gr;f(gr)&&(li=Nt(gr)),un.push(ge+ps+"="+encodeURIComponent(li))}}catch(ps){throw un.push(ge+"type="+encodeURIComponent("_badmap")),ps}}catch{K&&K(Vr)}}if(bt){Ae=un.join("&");break e}}Ae=void 0}return m=m.i.splice(0,D),T.G=m,Ae}function wi(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;J||A(),q||(J(),q=!0),k.add(T,m),m.A=0}}function dc(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=dr(g(m.Da,m),fc(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,$e(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=dr(g(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Jo(this),$e(this))};function de(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function $e(m){m.g=new Ne(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=Ir(m.na);Ge(T,"RID","rpc"),Ge(T,"SID",m.M),Ge(T,"AID",m.K),Ge(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ge(T,"TO",m.ia),Ge(T,"TYPE","xmlhttp"),qs(m,T),m.u&&m.o&&uc(T,m.u,m.o),m.O&&(m.g.H=m.O);var D=m.g;m=m.ba,D.M=1,D.A=Br(Ir(T)),D.u=null,D.R=!0,Ko(D,m)}t.Va=function(){this.C!=null&&(this.C=null,Jo(this),dc(this),Ct(19))};function ln(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ta(m,T){var D=null;if(m.g==T){ln(m),de(m),m.g=null;var K=2}else if(Fi(m.h,T))D=T.G,Et(m.h,T),K=1;else return;if(m.I!=0){if(T.o)if(K==1){D=T.u?T.u.length:0,T=Date.now()-T.F;var oe=m.D;K=_r(),at(K,new Cr(K,D)),qa(m)}else wi(m);else if(oe=T.m,oe==3||oe==0&&T.X>0||!(K==1&&zf(m,T)||K==2&&dc(m)))switch(D&&D.length>0&&(T=m.h,T.i=T.i.concat(D)),oe){case 1:gs(m,5);break;case 4:gs(m,10);break;case 3:gs(m,6);break;default:gs(m,2)}}}function fc(m,T){let D=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(D*=2),D*T}function gs(m,T){if(m.j.info("Error code "+T),T==2){var D=g(m.bb,m),K=m.Ua;const oe=!K;K=new oi(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qt(K,"https"),Br(K),oe?Wa(K.toString(),D):cc(K.toString(),D)}else Ct(2);m.I=0,m.l&&m.l.pa(T),rh(m),nh(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function rh(m){if(m.I=0,m.ja=[],m.l){const T=mt(m.h);(T.length!=0||m.i.length!=0)&&(S(m.ja,T),S(m.ja,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.oa()}}function ih(m,T,D){var K=D instanceof oi?Ir(D):new oi(D);if(K.g!="")T&&(K.g=T+"."+K.g),br(K,K.u);else{var oe=c.location;K=oe.protocol,T=T?T+"."+oe.hostname:oe.hostname,oe=+oe.port;const ge=new oi(null);K&&qt(ge,K),T&&(ge.g=T),oe&&br(ge,oe),D&&(ge.h=D),K=ge}return D=m.G,T=m.wa,D&&T&&Ge(K,D,T),Ge(K,"VER",m.ka),qs(m,K),K}function Ya(m,T,D){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new Vt(new ds({ab:D})):new Vt(m.ma),T.Fa(m.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cn(){}t=cn.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ys(){}Ys.prototype.g=function(m,T){return new ut(m,T)};function ut(m,T){Re.call(this),this.g=new hc(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!R(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!R(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new xt(this)}w(ut,Re),ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){Ga(this.g)},ut.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var D={};D.__data__=m,m=D}else this.v&&(D={},D.__data__=Nt(m),m=D);T.i.push(new rc(T.Ya++,m)),T.I==3&&qa(T)},ut.prototype.N=function(){this.g.l=null,delete this.j,Ga(this.g),delete this.g,ut.Z.N.call(this)};function na(m){ve.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const D in T){m=D;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}w(na,ve);function Vi(){At.call(this),this.status=1}w(Vi,At);function xt(m){this.g=m}w(xt,cn),xt.prototype.ra=function(){at(this.g,"a")},xt.prototype.qa=function(m){at(this.g,new na(m))},xt.prototype.pa=function(m){at(this.g,new Vi)},xt.prototype.oa=function(){at(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,Iv=function(){return new Ys},Av=function(){return _r()},Cv=nt,U1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,Xh=Fa,Mi.COMPLETE="complete",vv=Mi,Qn.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Re.prototype.listen=Re.prototype.J,Pc=Qn,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,_v=Vt}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.9.0";function SR(t){$l=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new dp("@firebase/firestore");function Za(){return Aa.logLevel}function De(t,...e){if(Aa.logLevel<=dt.DEBUG){const n=e.map(Cp);Aa.debug(`Firestore (${$l}): ${t}`,...n)}}function Ms(t,...e){if(Aa.logLevel<=dt.ERROR){const n=e.map(Cp);Aa.error(`Firestore (${$l}): ${t}`,...n)}}function Ia(t,...e){if(Aa.logLevel<=dt.WARN){const n=e.map(Cp);Aa.warn(`Firestore (${$l}): ${t}`,...n)}}function Cp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bv(t,r,n)}function bv(t,e,n){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ms(r),new Error(r)}function wt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bv(e,i,r)}function Ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lr.UNAUTHENTICATED))}shutdown(){}}class RR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DR{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let o=new is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new is,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},f=p=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new is)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new Tv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new lr(e)}}class PR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new PR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const r=o=>{o.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,De("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=MR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function ft(t,e){return t<e?-1:t>e?1:0}function V1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return b0(i)===b0(o)?ft(i,o):b0(i)?1:-1}return ft(t.length,e.length)}const LR=55296,jR=57343;function b0(t){const e=t.charCodeAt(0);return e>=LR&&e<=jR}function jl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="__name__";class Xi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Xi.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ft(e.length,n.length)}static compareSegments(e,n){const r=Xi.isNumericId(e),i=Xi.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xi.extractNumericId(e).compare(Xi.extractNumericId(n)):V1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class Ot extends Xi{construct(e,n,r){return new Ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ot(n)}static emptyPath(){return new Ot([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends Xi{construct(e,n,r){return new tr(e,n,r)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I2}static keyField(){return new tr([I2])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Se(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new Se(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else f==="`"?(c=!c,i++):f!=="."||c?(r+=f,i++):(o(),i++)}if(o(),c)throw new Se(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(n)}static emptyPath(){return new tr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Ot.fromString(e))}static fromName(e){return new Fe(Ot.fromString(e).popFirst(5))}static empty(){return new Fe(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e,n){if(!n)throw new Se(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BR(t,e,n,r){if(e===!0&&r===!0)throw new Se(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b2(t){if(!Fe.isDocumentKey(t))throw new Se(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T2(t){if(Fe.isDocumentKey(t))throw new Se(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function Mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(t);throw new Se(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UR(t,e){if(e<=0)throw new Se(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e){const n={typeString:t};return e&&(n.value=e),n}function zu(t,e){if(!Nv(t))throw new Se(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Se(xe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=-62135596800,N2=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*N2);return new Xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S2)throw new Se(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N2}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:On("string",Xt._jsonSchemaVersion),seconds:On("number"),nanoseconds:On("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Xt(0,0))}static max(){return new He(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function VR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new Xt(n+1,0):new Xt(n,r));return new ko(i,Fe.empty(),e)}function zR(t){return new ko(t.readTime,t.key,_u)}class ko{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ko(He.min(),Fe.empty(),_u)}static max(){return new ko(He.max(),Fe.empty(),_u)}}function HR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Fe.comparator(t.documentKey,e.documentKey),n!==0?n:ft(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==WR)throw t;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,r)=>{n(e)})}static reject(e){return new ye((n,r)=>{r(e)})}static waitFor(e){return new ye((n,r)=>{let i=0,o=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++o,c&&o===i&&n()},p=>r(p))}),c=!0,o===i&&n()})}static or(e){let n=ye.resolve(!1);for(const r of e)n=n.next(i=>i?ye.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ye((r,i)=>{const o=e.length,c=new Array(o);let f=0;for(let p=0;p<o;p++){const g=p;n(e[g]).next(y=>{c[g]=y,++f,f===o&&r(c)},y=>i(y))}})}static doWhile(e,n){return new ye((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function qR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Af.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Hu(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function YR(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="";function XR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R2(e)),e=KR(t.get(n),e);return R2(e)}function KR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Rv:n+="";break;default:n+=o}}return n}function R2(t){return t+Rv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.comparator=e,this.root=n||er.EMPTY}insert(e,n){return new an(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??er.RED,this.left=i??er.EMPTY,this.right=o??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new er(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1;er.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new er(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P2(this.data.getIterator())}getIteratorFrom(e){return new P2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vn(this.comparator);return n.data=e,n}}class P2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Qr([])}unionWith(e){let n=new Vn(tr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pv("Invalid base64 string: "+o):o}}(e);return new ir(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const QR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const n=QR.exec(t);if(wt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mo(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="server_timestamp",Ov="__type__",Mv="__previous_value__",Lv="__local_write_time__";function bp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ov])==null?void 0:r.stringValue)===kv}function If(t){const e=t.mapValue.fields[Mv];return bp(e)?If(e):e}function vu(t){const e=Oo(t.mapValue.fields[Lv].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,i,o,c,f,p,g,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=w}}const Od="(default)";class Cu{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}function ZR(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Se(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="__type__",JR="__max__",Th={mapValue:{}},Fv="__vector__",Md="value";function Lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bp(t)?4:t8(t)?9007199254740991:e8(t)?10:11:Ue(28295,{value:t})}function as(t,e){if(t===e)return!0;const n=Lo(t);if(n!==Lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Oo(i.timestampValue),f=Oo(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Mo(i.bytesValue).isEqual(Mo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return wn(i.geoPointValue.latitude)===wn(o.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return wn(i.integerValue)===wn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=wn(i.doubleValue),f=wn(o.doubleValue);return c===f?kd(c)===kd(f):isNaN(c)&&isNaN(f)}return!1}(t,e);case 9:return jl(t.arrayValue.values||[],e.arrayValue.values||[],as);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},f=o.mapValue.fields||{};if(D2(c)!==D2(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!as(c[p],f[p])))return!1;return!0}(t,e);default:return Ue(52216,{left:t})}}function Au(t,e){return(t.values||[]).find(n=>as(n,e))!==void 0}function Fl(t,e){if(t===e)return 0;const n=Lo(t),r=Lo(e);if(n!==r)return ft(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(t.booleanValue,e.booleanValue);case 2:return function(o,c){const f=wn(o.integerValue||o.doubleValue),p=wn(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(t,e);case 3:return k2(t.timestampValue,e.timestampValue);case 4:return k2(vu(t),vu(e));case 5:return V1(t.stringValue,e.stringValue);case 6:return function(o,c){const f=Mo(o),p=Mo(c);return f.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const f=o.split("/"),p=c.split("/");for(let g=0;g<f.length&&g<p.length;g++){const y=ft(f[g],p[g]);if(y!==0)return y}return ft(f.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const f=ft(wn(o.latitude),wn(c.latitude));return f!==0?f:ft(wn(o.longitude),wn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return O2(t.arrayValue,e.arrayValue);case 10:return function(o,c){var v,b,S,j;const f=o.fields||{},p=c.fields||{},g=(v=f[Md])==null?void 0:v.arrayValue,y=(b=p[Md])==null?void 0:b.arrayValue,w=ft(((S=g==null?void 0:g.values)==null?void 0:S.length)||0,((j=y==null?void 0:y.values)==null?void 0:j.length)||0);return w!==0?w:O2(g,y)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Th.mapValue&&c===Th.mapValue)return 0;if(o===Th.mapValue)return 1;if(c===Th.mapValue)return-1;const f=o.fields||{},p=Object.keys(f),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let w=0;w<p.length&&w<y.length;++w){const v=V1(p[w],y[w]);if(v!==0)return v;const b=Fl(f[p[w]],g[y[w]]);if(b!==0)return b}return ft(p.length,y.length)}(t.mapValue,e.mapValue);default:throw Ue(23264,{he:n})}}function k2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ft(t,e);const n=Oo(t),r=Oo(e),i=ft(n.seconds,r.seconds);return i!==0?i:ft(n.nanos,r.nanos)}function O2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Fl(n[i],r[i]);if(o)return o}return ft(n.length,r.length)}function Bl(t){return z1(t)}function z1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=z1(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${z1(n.fields[c])}`;return i+"}"}(t.mapValue):Ue(61005,{value:t})}function Kh(t){switch(Lo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(t);return e?16+Kh(e):16;case 5:return 2*t.stringValue.length;case 6:return Mo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Kh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Yo(r.fields,(o,c)=>{i+=o.length+Kh(c)}),i}(t.mapValue);default:throw Ue(13486,{value:t})}}function M2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H1(t){return!!t&&"integerValue"in t}function Tp(t){return!!t&&"arrayValue"in t}function L2(t){return!!t&&"nullValue"in t}function j2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qh(t){return!!t&&"mapValue"in t}function e8(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jv])==null?void 0:r.stringValue)===Fv}function Yc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(t.arrayValue.values[n]);return e}return{...t}}function t8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.value=e}static empty(){return new xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=tr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!n.isImmediateParentOf(f)){const p=this.getFieldsMap(n);this.applyChanges(p,r,i),r={},i=[],n=f.popLast()}c?r[f.lastSegment()]=Yc(c):i.push(f.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new xr(Yc(this.value))}}function Bv(t){const e=[];return Yo(t.fields,(n,r)=>{const i=new tr([n]);if(Qh(r)){const o=Bv(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,o,c,f){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Yn(e,0,He.min(),He.min(),He.min(),xr.empty(),0)}static newFoundDocument(e,n,r,i){return new Yn(e,1,n,He.min(),r,i,0)}static newNoDocument(e,n){return new Yn(e,2,n,He.min(),He.min(),xr.empty(),0)}static newUnknownDocument(e,n){return new Yn(e,3,n,He.min(),He.min(),xr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.position=e,this.inclusive=n}}function F2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=Fe.comparator(Fe.fromName(c.referenceValue),n.key):r=Fl(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function B2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!as(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function n8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{}class Pn extends Uv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i8(e,n,r):n==="array-contains"?new a8(e,r):n==="in"?new l8(e,r):n==="not-in"?new c8(e,r):n==="array-contains-any"?new u8(e,r):new Pn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s8(e,r):new o8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fl(n,this.value)):n!==null&&Lo(this.value)===Lo(n)&&this.matchesComparison(Fl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends Uv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ki(e,n)}matches(e){return Vv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vv(t){return t.op==="and"}function zv(t){return r8(t)&&Vv(t)}function r8(t){for(const e of t.filters)if(e instanceof ki)return!1;return!0}function W1(t){if(t instanceof Pn)return t.field.canonicalString()+t.op.toString()+Bl(t.value);if(zv(t))return t.filters.map(e=>W1(e)).join(",");{const e=t.filters.map(n=>W1(n)).join(",");return`${t.op}(${e})`}}function Hv(t,e){return t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.field.isEqual(i.field)&&as(r.value,i.value)}(t,e):t instanceof ki?function(r,i){return i instanceof ki&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,f)=>o&&Hv(c,i.filters[f]),!0):!1}(t,e):void Ue(19439)}function Wv(t){return t instanceof Pn?function(n){return`${n.field.canonicalString()} ${n.op} ${Bl(n.value)}`}(t):t instanceof ki?function(n){return n.op.toString()+" {"+n.getFilters().map(Wv).join(" ,")+"}"}(t):"Filter"}class i8 extends Pn{constructor(e,n,r){super(e,n,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const n=Fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class s8 extends Pn{constructor(e,n){super(e,"in",n),this.keys=Gv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class o8 extends Pn{constructor(e,n){super(e,"not-in",n),this.keys=Gv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class a8 extends Pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&Au(n.arrayValue,this.value)}}class l8 extends Pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}}class c8 extends Pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Au(this.value.arrayValue,n)}}class u8 extends Pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n=null,r=[],i=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function U2(t,e=null,n=[],r=[],i=null,o=null,c=null){return new h8(t,e,n,r,i,o,c)}function Sp(t){const e=Ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>W1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bl(r)).join(",")),e.Te=n}return e.Te}function Np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B2(t.startAt,e.startAt)&&B2(t.endAt,e.endAt)}function G1(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n=null,r=[],i=[],o=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function d8(t,e,n,r,i,o,c,f){return new ec(t,e,n,r,i,o,c,f)}function bf(t){return new ec(t)}function V2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f8(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function qv(t){return t.collectionGroup!==null}function Xc(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Vn(tr.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Iu(o,r))}),n.has(tr.keyField().canonicalString())||e.Ie.push(new Iu(tr.keyField(),r))}return e.Ie}function ss(t){const e=Ke(t);return e.Ee||(e.Ee=g8(e,Xc(t))),e.Ee}function g8(t,e){if(t.limitType==="F")return U2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Iu(i.field,o)});const n=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return U2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function q1(t,e){const n=t.filters.concat([e]);return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p8(t,e){const n=t.explicitOrderBy.concat([e]);return new ec(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function jd(t,e,n){return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tf(t,e){return Np(ss(t),ss(e))&&t.limitType===e.limitType}function Yv(t){return`${Sp(ss(t))}|lt:${t.limitType}`}function Ja(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wv(i)).join(", ")}]`),Hu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bl(i)).join(",")),`Target(${r})`}(ss(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Xc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,f,p){const g=F2(c,f,p);return c.inclusive?g<=0:g<0}(r.startAt,Xc(r),i)||r.endAt&&!function(c,f,p){const g=F2(c,f,p);return c.inclusive?g>=0:g>0}(r.endAt,Xc(r),i))}(t,e)}function m8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xv(t){return(e,n)=>{let r=!1;for(const i of Xc(t)){const o=x8(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function x8(t,e,n){const r=t.field.isKeyField()?Fe.comparator(e.key,n.key):function(o,c,f){const p=c.data.field(o),g=f.data.field(o);return p!==null&&g!==null?Fl(p,g):Ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=new an(Fe.comparator);function Ls(){return y8}const Kv=new an(Fe.comparator);function kc(...t){let e=Kv;for(const n of t)e=e.insert(n.key,n);return e}function Qv(t){let e=Kv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ca(){return Kc()}function $v(){return Kc()}function Kc(){return new Ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const w8=new an(Fe.comparator),E8=new Vn(Fe.comparator);function gt(...t){let e=E8;for(const n of t)e=e.add(n);return e}const _8=new Vn(ft);function v8(){return _8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function Zv(t){return{integerValue:""+t}}function Jv(t,e){return YR(e)?Zv(e):Rp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function C8(t,e,n){return t instanceof bu?function(i,o){const c={fields:{[Ov]:{stringValue:kv},[Lv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bp(o)&&(o=If(o)),o&&(c.fields[Mv]=o),{mapValue:c}}(n,e):t instanceof Tu?tC(t,e):t instanceof Su?nC(t,e):function(i,o){const c=eC(i,o),f=z2(c)+z2(i.Ae);return H1(c)&&H1(i.Ae)?Zv(f):Rp(i.serializer,f)}(t,e)}function A8(t,e,n){return t instanceof Tu?tC(t,e):t instanceof Su?nC(t,e):n}function eC(t,e){return t instanceof Nu?function(r){return H1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class bu extends Nf{}class Tu extends Nf{constructor(e){super(),this.elements=e}}function tC(t,e){const n=rC(e);for(const r of t.elements)n.some(i=>as(i,r))||n.push(r);return{arrayValue:{values:n}}}class Su extends Nf{constructor(e){super(),this.elements=e}}function nC(t,e){let n=rC(e);for(const r of t.elements)n=n.filter(i=>!as(i,r));return{arrayValue:{values:n}}}class Nu extends Nf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function z2(t){return wn(t.integerValue||t.doubleValue)}function rC(t){return Tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.field=e,this.transform=n}}function I8(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Tu&&i instanceof Tu||r instanceof Su&&i instanceof Su?jl(r.elements,i.elements,as):r instanceof Nu&&i instanceof Nu?as(r.Ae,i.Ae):r instanceof bu&&i instanceof bu}(t.transform,e.transform)}class b8{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rf{}function sC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Df(t.key,Xn.none()):new Wu(t.key,t.data,Xn.none());{const n=t.data,r=xr.empty();let i=new Vn(tr.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Xo(t.key,r,new Qr(i.toArray()),Xn.none())}}function T8(t,e,n){t instanceof Wu?function(i,o,c){const f=i.value.clone(),p=W2(i.fieldTransforms,o,c.transformResults);f.setAll(p),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):t instanceof Xo?function(i,o,c){if(!$h(i.precondition,o))return void o.convertToUnknownDocument(c.version);const f=W2(i.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(oC(i)),p.setAll(f),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Qc(t,e,n,r){return t instanceof Wu?function(o,c,f,p){if(!$h(o.precondition,c))return f;const g=o.value.clone(),y=G2(o.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xo?function(o,c,f,p){if(!$h(o.precondition,c))return f;const g=G2(o.fieldTransforms,p,c),y=c.data;return y.setAll(oC(o)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(o,c,f){return $h(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(t,e,n)}function S8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=eC(r.transform,i||null);o!=null&&(n===null&&(n=xr.empty()),n.set(r.field,o))}return n||null}function H2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jl(r,i,(o,c)=>I8(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wu extends Rf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xo extends Rf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function oC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function W2(t,e,n){const r=new Map;wt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,f=e.data.field(o.field);r.set(o.field,A8(c,f,n[i]))}return r}function G2(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,C8(o,c,e))}return r}class Df extends Rf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends Rf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&T8(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$v();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=n.has(i.key)?null:f;const p=sC(c,f);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(He.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gt())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,(n,r)=>H2(n,r))&&jl(this.baseMutations,e.baseMutations,(n,r)=>H2(n,r))}}class Dp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){wt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return w8}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new Dp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,yt;function lC(t){switch(t){case xe.OK:return Ue(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function cC(t){if(t===void 0)return Ms("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Rn.OK:return xe.OK;case Rn.CANCELLED:return xe.CANCELLED;case Rn.UNKNOWN:return xe.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return xe.INTERNAL;case Rn.UNAVAILABLE:return xe.UNAVAILABLE;case Rn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Rn.NOT_FOUND:return xe.NOT_FOUND;case Rn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Rn.ABORTED:return xe.ABORTED;case Rn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Rn.DATA_LOSS:return xe.DATA_LOSS;default:return Ue(39323,{code:t})}}(yt=Rn||(Rn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=new bo([4294967295,4294967295],0);function q2(t){const e=P8().encode(t),n=new Ev;return n.update(e),new Uint8Array(n.digest())}function Y2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bo([n,r],0),new bo([i,o],0)]}class Pp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oc(`Invalid padding: ${n}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(bo.fromNumber(r)));return i.compare(k8)===1&&(i=new bo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=q2(e),[r,i]=Y2(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Pp(o,i,n);return r.forEach(f=>c.insert(f)),c}insert(e){if(this.ge===0)return;const n=q2(e),[r,i]=Y2(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pf(He.min(),i,new an(ft),Ls(),gt())}}class Gu{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gu(r,n,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class uC{constructor(e,n){this.targetId=e,this.Ce=n}}class hC{constructor(e,n,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class X2{constructor(){this.ve=0,this.Fe=K2(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),n=gt(),r=gt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ue(38017,{changeType:o})}}),new Gu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=K2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class O8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ls(),this.He=Sh(),this.Je=Sh(),this.Ze=new an(ft)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(G1(o))if(r===0){const c=new Fe(o.path);this.et(n,c,Yn.newNoDocument(c,He.min()))}else wt(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,f;try{c=Mo(r).toUint8Array()}catch(p){if(p instanceof Pv)return Ia("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Pp(c,i,o)}catch(p){return Ia(p instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,c)=>{const f=this.ot(c);if(f){if(o.current&&G1(f.target)){const p=new Fe(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Yn.newNoDocument(p,e))}o.Be&&(n.set(c,o.ke()),o.Ke())}});let r=gt();this.Je.forEach((o,c)=>{let f=!0;c.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(r=r.add(o))}),this.je.forEach((o,c)=>c.setReadTime(e));const i=new Pf(e,n,this.Ze,this.je,r);return this.je=Ls(),this.He=Sh(),this.Je=Sh(),this.Ze=new an(ft),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new X2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Vn(ft),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Vn(ft),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||De("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X2),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sh(){return new an(Fe.comparator)}function K2(){return new an(Fe.comparator)}const M8={asc:"ASCENDING",desc:"DESCENDING"},L8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j8={and:"AND",or:"OR"};class F8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Y1(t,e){return t.useProto3Json||Hu(e)?e:{value:e}}function Fd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B8(t,e){return Fd(t,e.toTimestamp())}function Jr(t){return wt(!!t,49232),He.fromTimestamp(function(n){const r=Oo(n);return new Xt(r.seconds,r.nanos)}(t))}function kp(t,e){return X1(t,e).canonicalString()}function X1(t,e){const n=function(i){return new Ot(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fC(t){const e=Ot.fromString(t);return wt(wC(e),10190,{key:e.toString()}),e}function Bd(t,e){return kp(t.databaseId,e.path)}function $c(t,e){const n=fC(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fe(pC(n))}function gC(t,e){return kp(t.databaseId,e)}function U8(t){const e=fC(t);return e.length===4?Ot.emptyPath():pC(e)}function K1(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pC(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Q2(t,e,n){return{name:Bd(t,e),fields:n.value.mapValue.fields}}function V8(t,e){return"found"in e?function(r,i){wt(!!i.found,43571),i.found.name,i.found.updateTime;const o=$c(r,i.found.name),c=Jr(i.found.updateTime),f=i.found.createTime?Jr(i.found.createTime):He.min(),p=new xr({mapValue:{fields:i.found.fields}});return Yn.newFoundDocument(o,c,f,p)}(t,e):"missing"in e?function(r,i){wt(!!i.missing,3894),wt(!!i.readTime,22933);const o=$c(r,i.missing),c=Jr(i.readTime);return Yn.newNoDocument(o,c)}(t,e):Ue(7234,{result:e})}function z8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ue(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,y){return g.useProto3Json?(wt(y===void 0||typeof y=="string",58123),ir.fromBase64String(y||"")):(wt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ir.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const y=g.code===void 0?xe.UNKNOWN:cC(g.code);return new Se(y,g.message||"")}(c);n=new hC(r,i,o,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$c(t,r.document.name),o=Jr(r.document.updateTime),c=r.document.createTime?Jr(r.document.createTime):He.min(),f=new xr({mapValue:{fields:r.document.fields}}),p=Yn.newFoundDocument(i,o,c,f),g=r.targetIds||[],y=r.removedTargetIds||[];n=new Zh(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$c(t,r.document),o=r.readTime?Jr(r.readTime):He.min(),c=Yn.newNoDocument(i,o),f=r.removedTargetIds||[];n=new Zh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$c(t,r.document),o=r.removedTargetIds||[];n=new Zh([],o,i,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new D8(i,o),f=r.targetId;n=new uC(f,c)}}return n}function mC(t,e){let n;if(e instanceof Wu)n={update:Q2(t,e.key,e.value)};else if(e instanceof Df)n={delete:Bd(t,e.key)};else if(e instanceof Xo)n={update:Q2(t,e.key,e.data),updateMask:$8(e.fieldMask)};else{if(!(e instanceof aC))return Ue(16599,{dt:e.type});n={verify:Bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const f=c.transform;if(f instanceof bu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Tu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Nu)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ue(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:B8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)}(t,e.precondition)),n}function H8(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?Jr(i.updateTime):Jr(o);return c.isEqual(He.min())&&(c=Jr(o)),new b8(c,i.transformResults||[])}(n,e))):[]}function W8(t,e){return{documents:[gC(t,e.path)]}}function G8(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gC(t,i);const o=function(g){if(g.length!==0)return yC(ki.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(y=>function(v){return{field:el(v.field),direction:X8(v.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const f=Y1(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:n,parent:i}}function q8(t){let e=U8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wt(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(w){const v=xC(w);return v instanceof ki&&zv(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(w){return w.map(v=>function(S){return new Iu(tl(S.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let f=null;n.limit&&(f=function(w){let v;return v=typeof w=="object"?w.value:w,Hu(v)?null:v}(n.limit));let p=null;n.startAt&&(p=function(w){const v=!!w.before,b=w.values||[];return new Ld(b,v)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const v=!w.before,b=w.values||[];return new Ld(b,v)}(n.endAt)),d8(e,i,c,o,f,"F",p,g)}function Y8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=tl(n.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=tl(n.unaryFilter.field);return Pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=tl(n.unaryFilter.field);return Pn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=tl(n.unaryFilter.field);return Pn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pn.create(tl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ki.create(n.compositeFilter.filters.map(r=>xC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(n.compositeFilter.op))}(t):Ue(30097,{filter:t})}function X8(t){return M8[t]}function K8(t){return L8[t]}function Q8(t){return j8[t]}function el(t){return{fieldPath:t.canonicalString()}}function tl(t){return tr.fromServerFormat(t.fieldPath)}function yC(t){return t instanceof Pn?function(n){if(n.op==="=="){if(j2(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NAN"}};if(L2(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(j2(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NAN"}};if(L2(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(n.field),op:K8(n.op),value:n.value}}}(t):t instanceof ki?function(n){const r=n.getFilters().map(i=>yC(i));return r.length===1?r[0]:{compositeFilter:{op:Q8(n.op),filters:r}}}(t):Ue(54877,{filter:t})}function $8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function EC(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r,i,o=He.min(),c=He.min(),f=ir.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.yt=e}}function J8(t){const e=q8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.Sn=new t6}addToCollectionParentIndex(e,n){return this.Sn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(ko.min())}updateCollectionGroup(e,n,r){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class t6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vn(Ot.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_C=41943040;class Nr{static withCacheSize(e){return new Nr(e,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(_C,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ul(0)}static ar(){return new Ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="LruGarbageCollector",n6=1048576;function J2([t,e],[n,r]){const i=ft(t,n);return i===0?ft(e,r):i}class r6{constructor(e){this.Pr=e,this.buffer=new Vn(J2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();J2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class i6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){De(Z2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jl(n)?De(Z2,"Ignoring IndexedDB error during garbage collection: ",n):await Zl(n)}await this.Ar(3e5)})}}class s6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(Af.ce);const r=new r6(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve($2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$2):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,c,f,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,c=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,f=Date.now(),this.removeTargets(e,r,n))).next(w=>(o=w,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),Za()<=dt.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${i} in `+(f-c)+`ms
	Removed ${o} targets in `+(p-f)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:w})))}}function o6(t,e){return new s6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.changes=new Ma(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ye.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qc(r.mutation,i,Qr.empty(),Xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gt()){const i=ca();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=kc();return o.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=ca();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,f)=>{n.set(c,f)})})}computeViews(e,n,r,i){let o=Ls();const c=Kc(),f=function(){return Kc()}();return n.forEach((p,g)=>{const y=r.get(g.key);i.has(g.key)&&(y===void 0||y.mutation instanceof Xo)?o=o.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),Qc(y.mutation,g,y.mutation.getFieldMask(),Xt.now())):c.set(g.key,Qr.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((g,y)=>c.set(g,y)),n.forEach((g,y)=>f.set(g,new l6(y,c.get(g)??null))),f))}recalculateAndSaveOverlays(e,n){const r=Kc();let i=new an((c,f)=>c-f),o=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const f of c)f.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let y=r.get(p)||Qr.empty();y=f.applyToLocalView(g,y),r.set(p,y);const w=(i.get(f.batchId)||gt()).add(p);i=i.insert(f.batchId,w)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,y=p.value,w=$v();y.forEach(v=>{if(!o.has(v)){const b=sC(n.get(v),r.get(v));b!==null&&w.set(v,b),o=o.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ye.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return f8(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ye.resolve(ca());let f=_u,p=o;return c.next(g=>ye.forEach(g,(y,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),o.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(v=>{p=p.insert(y,v)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,p,g,gt())).next(y=>({batchId:f,changes:Qv(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Fe(n)).next(r=>{let i=kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=kc();return this.indexManager.getCollectionParents(e,o).next(f=>ye.forEach(f,p=>{const g=function(w,v){return new ec(v,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(y=>{y.forEach((w,v)=>{c=c.insert(w,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Yn.newInvalidDocument(y)))});let f=kc();return c.forEach((p,g)=>{const y=o.get(p);y!==void 0&&Qc(y.mutation,g,Qr.empty(),Xt.now()),Sf(n,g)&&(f=f.insert(p,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ye.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:J8(i.bundledQuery),readTime:Jr(i.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.overlays=new an(Fe.comparator),this.Lr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ca();return ye.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),ye.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),ye.resolve()}getOverlaysForCollection(e,n,r){const i=ca(),o=n.length+1,c=new Fe(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new an((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let y=o.get(g.largestBatchId);y===null&&(y=ca(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=ca(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,y)=>f.set(g,y)),!(f.size()>=i)););return ye.resolve(f)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new R8(n,r));let o=this.Lr.get(n);o===void 0&&(o=gt(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.kr=new Vn(Gn.Kr),this.qr=new Vn(Gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Gn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Gn(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Fe(new Ot([])),r=new Gn(n,e),i=new Gn(n,e+1),o=[];return this.qr.forEachInRange([r,i],c=>{this.Wr(c),o.push(c.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Fe(new Ot([])),r=new Gn(n,e),i=new Gn(n,e+1);let o=gt();return this.qr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new Gn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Fe.comparator(e.key,n.key)||ft(e.Hr,n.Hr)}static Ur(e,n){return ft(e.Hr,n.Hr)||Fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Vn(Gn.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new N8(o,n,r,i);this.mutationQueue.push(c);for(const f of i)this.Jr=this.Jr.add(new Gn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,n){return ye.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?Ip:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gn(n,0),i=new Gn(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],c=>{const f=this.Zr(c.Hr);o.push(f)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vn(ft);return n.forEach(i=>{const o=new Gn(i,0),c=new Gn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,c],f=>{r=r.add(f.Hr)})}),ye.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Fe.isDocumentKey(o)||(o=o.child(""));const c=new Gn(new Fe(o),0);let f=new Vn(ft);return this.Jr.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(f=f.add(p.Hr)),!0)},c),ye.resolve(this.Yr(f))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){wt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ye.forEach(n.mutations,i=>{const o=new Gn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Gn(n,0),i=this.Jr.firstAfterOrEqual(r);return ye.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.ti=e,this.docs=function(){return new an(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ye.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yn.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ls();const c=n.path,f=new Fe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||HR(zR(y),r)<=0||(i.has(y.key)||Sf(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return ye.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ue(9500)}ni(e,n){return ye.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new p6(this)}getSize(e){return ye.resolve(this.size)}}class p6 extends a6{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),ye.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.persistence=e,this.ri=new Ma(n=>Sp(n),Np),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.ii=0,this.si=new Op,this.targetCount=0,this.oi=Ul._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),ye.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ul(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.lr(n),ye.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ri.forEach((c,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ri.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return ye.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),ye.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ye.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return ye.resolve(r)}containsKey(e,n){return ye.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this._i={},this.overlays={},this.ai=new Af(0),this.ui=!1,this.ui=!0,this.ci=new d6,this.referenceDelegate=e(this),this.li=new m6(this),this.indexManager=new e6,this.remoteDocumentCache=function(i){return new g6(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Z8(n),this.Pi=new u6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new f6(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){De("MemoryPersistence","Starting transaction:",e);const i=new x6(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return ye.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class x6 extends GR{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.Ri=new Op,this.Ai=null}static Vi(e){return new Mp(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),ye.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,r=>{const i=Fe.fromPath(r);return this.mi(e,i).next(o=>{o||n.removeEntry(i,He.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return ye.or([()=>ye.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ud{constructor(e,n){this.persistence=e,this.fi=new Ma(r=>XR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=o6(this,n)}static Vi(e,n){return new Ud(e,n)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return ye.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?ye.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,c=>this.wr(e,c,n).next(f=>{f||(r++,o.removeEntry(c,He.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ye.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kh(e.data.value)),n}wr(e,n,r){return ye.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return ye.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=gt(),i=gt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Lp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return X3()?8:qR(hr())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.gs(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ps(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new y6;return this.ys(e,n,c).next(f=>{if(o.result=f,this.As)return this.ws(e,n,c,f.size)})}).next(()=>o.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Za()<=dt.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(Za()<=dt.DEBUG&&De("QueryEngine","Query:",Ja(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Za()<=dt.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):ye.resolve())}gs(e,n){if(V2(n))return ye.resolve(null);let r=ss(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jd(n,null,"F"),r=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=gt(...o);return this.fs.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.bs(n,f);return this.Ss(n,g,c,p.readTime)?this.gs(e,jd(n,null,"F")):this.Ds(e,g,n,p)}))})))}ps(e,n,r,i){return V2(n)||i.isEqual(He.min())?ye.resolve(null):this.fs.getDocuments(e,r).next(o=>{const c=this.bs(n,o);return this.Ss(n,c,r,i)?ye.resolve(null):(Za()<=dt.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ja(n)),this.Ds(e,c,n,VR(i,_u)).next(f=>f))})}bs(e,n){let r=new Vn(Xv(e));return n.forEach((i,o)=>{Sf(e,o)&&(r=r.add(o))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return Za()<=dt.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.fs.getDocumentsMatchingQuery(e,n,ko.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",E6=3e8;class _6{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new an(ft),this.Fs=new Ma(o=>Sp(o),Np),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c6(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function v6(t,e,n,r){return new _6(t,e,n,r)}async function CC(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],f=[];let p=gt();for(const g of i){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of o){f.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return n.localDocuments.getDocuments(r,p).next(g=>({Ns:g,removedBatchIds:c,addedBatchIds:f}))})})}function C6(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(f,p,g,y){const w=g.batch,v=w.keys();let b=ye.resolve();return v.forEach(S=>{b=b.next(()=>y.getEntry(p,S)).next(j=>{const V=g.docVersions.get(S);wt(V!==null,48541),j.version.compareTo(V)<0&&(w.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))})}),b.next(()=>f.mutationQueue.removeMutationBatch(p,w))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let p=gt();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function AC(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function A6(t,e){const n=Ke(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const f=[];e.targetChanges.forEach((y,w)=>{const v=i.get(w);if(!v)return;f.push(n.li.removeMatchingKeys(o,y.removedDocuments,w).next(()=>n.li.addMatchingKeys(o,y.addedDocuments,w)));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?b=b.withResumeToken(ir.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),i=i.insert(w,b),function(j,V,P){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=E6?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(v,b,y)&&f.push(n.li.updateTargetData(o,b))});let p=Ls(),g=gt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),f.push(I6(o,c,e.documentUpdates).next(y=>{p=y.Bs,g=y.Ls})),!r.isEqual(He.min())){const y=n.li.getLastRemoteSnapshotVersion(o).next(w=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(y)}return ye.waitFor(f).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,p,g)).next(()=>p)}).then(o=>(n.vs=i,o))}function I6(t,e,n){let r=gt(),i=gt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=Ls();return n.forEach((f,p)=>{const g=o.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(f)),p.isNoDocument()&&p.version.isEqual(He.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):De(jp,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)}),{Bs:c,Ls:i}})}function b6(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T6(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(o=>o?(i=o,ye.resolve(i)):n.li.allocateTargetId(r).next(c=>(i=new ho(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Q1(t,e,n){const r=Ke(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Jl(c))throw c;De(jp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function ey(t,e,n){const r=Ke(t);let i=He.min(),o=gt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,y){const w=Ke(p),v=w.Fs.get(y);return v!==void 0?ye.resolve(w.vs.get(v)):w.li.getTargetData(g,y)}(r,c,ss(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next(p=>{o=p})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:He.min(),n?o:gt())).next(f=>(S6(r,m8(e),f),{documents:f,ks:o})))}function S6(t,e,n){let r=t.Ms.get(e)||He.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ms.set(e,r)}class ty{constructor(){this.activeTargetIds=v8()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N6{constructor(){this.vo=new ty,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ty,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="ConnectivityMonitor";class ry{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){De(ny,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){De(ny,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function $1(){return Nh===null?Nh=function(){return 268435456+Math.round(2147483648*Math.random())}():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="RestConnection",D6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class P6{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const c=$1(),f=this.Qo(e,n.toUriEncodedString());De(T0,`Sending RPC '${e}' ${c}:`,f,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,i,o);const{host:g}=new URL(f),y=Wo(g);return this.zo(e,f,p,r,y).then(w=>(De(T0,`Received RPC '${e}' ${c}: `,w),w),w=>{throw Ia(T0,`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",r),w})}jo(e,n,r,i,o,c){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$l}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,n){const r=D6[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="WebChannelConnection",Ac=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class Tl extends P6{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Tl.c_){const e=Av();Ac(e,Cv.STAT_EVENT,n=>{n.stat===U1.PROXY?De(ar,"STAT_EVENT: detected buffering proxy"):n.stat===U1.NOPROXY&&De(ar,"STAT_EVENT: detected no buffering proxy")}),Tl.c_=!0}}zo(e,n,r,i,o){const c=$1();return new Promise((f,p)=>{const g=new _v;g.setWithCredentials(!0),g.listenOnce(vv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Xh.NO_ERROR:const w=g.getResponseJson();De(ar,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),f(w);break;case Xh.TIMEOUT:De(ar,`RPC '${e}' ${c} timed out`),p(new Se(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const v=g.getStatus();if(De(ar,`RPC '${e}' ${c} failed with status:`,v,"response text:",g.getResponseText()),v>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const j=function(P){const L=P.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(L)>=0?L:xe.UNKNOWN}(S.status);p(new Se(j,S.message))}else p(new Se(xe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Se(xe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{De(ar,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(i);De(ar,`RPC '${e}' ${c} sending request:`,i),g.send(n,"POST",y,r,15)})}T_(e,n,r){const i=$1(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const g=o.join("");De(ar,`Creating RPC '${e}' stream ${i}: ${g}`,f);const y=c.createWebChannel(g,f);this.I_(y);let w=!1,v=!1;const b=new k6({Ho:S=>{v?De(ar,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(w||(De(ar,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),De(ar,`RPC '${e}' stream ${i} sending:`,S),y.send(S))},Jo:()=>y.close()});return Ac(y,Pc.EventType.OPEN,()=>{v||(De(ar,`RPC '${e}' stream ${i} transport opened.`),b.i_())}),Ac(y,Pc.EventType.CLOSE,()=>{v||(v=!0,De(ar,`RPC '${e}' stream ${i} transport closed`),b.o_(),this.E_(y))}),Ac(y,Pc.EventType.ERROR,S=>{v||(v=!0,Ia(ar,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),b.o_(new Se(xe.UNAVAILABLE,"The operation could not be completed")))}),Ac(y,Pc.EventType.MESSAGE,S=>{var j;if(!v){const V=S.data[0];wt(!!V,16349);const P=V,L=(P==null?void 0:P.error)||((j=P[0])==null?void 0:j.error);if(L){De(ar,`RPC '${e}' stream ${i} received error:`,L);const M=L.status;let H=function(k){const A=Rn[k];if(A!==void 0)return cC(A)}(M),J=L.message;M==="NOT_FOUND"&&J.includes("database")&&J.includes("does not exist")&&J.includes(this.databaseId.database)&&Ia(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),H===void 0&&(H=xe.INTERNAL,J="Unknown error status: "+M+" with message "+L.message),v=!0,b.o_(new Se(H,J)),y.close()}else De(ar,`RPC '${e}' stream ${i} received:`,V),b.__(V)}}),Tl.u_(),setTimeout(()=>{b.s_()},0),b}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Iv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){return new Tl(t)}function S0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t){return new F8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.c_=!1;class Fp{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&De("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="PersistentStream";class IC{constructor(e,n,r,i,o,c,f,p){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Ms(n.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Se(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return De(iy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(De(iy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M6 extends IC{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z8(this.serializer,e),r=function(o){if(!("targetChange"in o))return He.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?Jr(c.readTime):He.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=K1(this.serializer),n.addTarget=function(o,c){let f;const p=c.target;if(f=G1(p)?{documents:W8(o,p)}:{query:G8(o,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=dC(o,c.resumeToken);const g=Y1(o,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(He.min())>0){f.readTime=Fd(o,c.snapshotVersion.toTimestamp());const g=Y1(o,c.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const r=Y8(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=K1(this.serializer),n.removeTarget=e,this.K_(n)}}class L6 extends IC{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=H8(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=K1(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mC(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{}class F6 extends j6{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Se(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,X1(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(xe.UNKNOWN,o.toString())})}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.jo(e,X1(n,r),i,c,f,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(xe.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function B6(t,e,n,r){return new F6(t,e,n,r)}class U6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ms(n),this.aa=!1):De("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class V6{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(c=>{r.enqueueAndForget(async()=>{La(this)&&(De(ba,"Restarting streams for network reachability change."),await async function(p){const g=Ke(p);g.Ea.add(4),await qu(g),g.Va.set("Unknown"),g.Ea.delete(4),await Of(g)}(this))})}),this.Va=new U6(r,i)}}async function Of(t){if(La(t))for(const e of t.Ra)await e(!0)}async function qu(t){for(const e of t.Ra)await e(!1)}function bC(t,e){const n=Ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zp(n)?Vp(n):tc(n).O_()&&Up(n,e))}function Bp(t,e){const n=Ke(t),r=tc(n);n.Ia.delete(e),r.O_()&&TC(n,e),n.Ia.size===0&&(r.O_()?r.L_():La(n)&&n.Va.set("Unknown"))}function Up(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tc(t).Z_(e)}function TC(t,e){t.da.$e(e),tc(t).X_(e)}function Vp(t){t.da=new O8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),tc(t).start(),t.Va.ua()}function zp(t){return La(t)&&!tc(t).x_()&&t.Ia.size>0}function La(t){return Ke(t).Ea.size===0}function SC(t){t.da=void 0}async function z6(t){t.Va.set("Online")}async function H6(t){t.Ia.forEach((e,n)=>{Up(t,e)})}async function W6(t,e){SC(t),zp(t)?(t.Va.ha(e),Vp(t)):t.Va.set("Unknown")}async function G6(t,e,n){if(t.Va.set("Online"),e instanceof hC&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const f of o.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,c),i.Ia.delete(f),i.da.removeTarget(f))}(t,e)}catch(r){De(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof Zh?t.da.Xe(e):e instanceof uC?t.da.st(e):t.da.tt(e),!n.isEqual(He.min()))try{const r=await AC(t.localStore);n.compareTo(r)>=0&&await function(o,c){const f=o.da.Tt(c);return f.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=o.Ia.get(g);y&&o.Ia.set(g,y.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,g)=>{const y=o.Ia.get(p);if(!y)return;o.Ia.set(p,y.withResumeToken(ir.EMPTY_BYTE_STRING,y.snapshotVersion)),TC(o,p);const w=new ho(y.target,p,g,y.sequenceNumber);Up(o,w)}),o.remoteSyncer.applyRemoteEvent(f)}(t,n)}catch(r){De(ba,"Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!Jl(e))throw e;t.Ea.add(1),await qu(t),t.Va.set("Offline"),n||(n=()=>AC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{De(ba,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Of(t)})}function NC(t,e){return e().catch(n=>Vd(t,n,e))}async function Mf(t){const e=Ke(t),n=jo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;q6(e);)try{const i=await b6(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Y6(e,i)}catch(i){await Vd(e,i)}RC(e)&&DC(e)}function q6(t){return La(t)&&t.Ta.length<10}function Y6(t,e){t.Ta.push(e);const n=jo(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function RC(t){return La(t)&&!jo(t).x_()&&t.Ta.length>0}function DC(t){jo(t).start()}async function X6(t){jo(t).ra()}async function K6(t){const e=jo(t);for(const n of t.Ta)e.ea(n.mutations)}async function Q6(t,e,n){const r=t.Ta.shift(),i=Dp.from(r,e,n);await NC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mf(t)}async function $6(t,e){e&&jo(t).Y_&&await async function(r,i){if(function(c){return lC(c)&&c!==xe.ABORTED}(i.code)){const o=r.Ta.shift();jo(r).B_(),await NC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Mf(r)}}(t,e),RC(t)&&DC(t)}async function sy(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),De(ba,"RemoteStore received new credentials");const r=La(n);n.Ea.add(3),await qu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Of(n)}async function Z6(t,e){const n=Ke(t);e?(n.Ea.delete(2),await Of(n)):e||(n.Ea.add(2),await qu(n),n.Va.set("Unknown"))}function tc(t){return t.ma||(t.ma=function(n,r,i){const o=Ke(n);return o.sa(),new M6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:z6.bind(null,t),Yo:H6.bind(null,t),t_:W6.bind(null,t),J_:G6.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),zp(t)?Vp(t):t.Va.set("Unknown")):(await t.ma.stop(),SC(t))})),t.ma}function jo(t){return t.fa||(t.fa=function(n,r,i){const o=Ke(n);return o.sa(),new L6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:X6.bind(null,t),t_:$6.bind(null,t),ta:K6.bind(null,t),na:Q6.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Mf(t)):(await t.fa.stop(),t.Ta.length>0&&(De(ba,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,f=new Hp(e,n,c,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(t,e){if(Ms("AsyncQueue",`${e}: ${t}`),Jl(t))return new Se(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Fe.comparator(n.key,r.key):(n,r)=>Fe.comparator(n.key,r.key),this.keyedMap=kc(),this.sortedSet=new an(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.ga=new an(Fe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vl{constructor(e,n,r,i,o,c,f,p,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(f=>{c.push({type:0,doc:f})}),new Vl(e,n,Sl.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class e5{constructor(){this.queries=ay(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ke(n),o=i.queries;i.queries=ay(),o.forEach((c,f)=>{for(const p of f.ba)p.onError(r)})})(this,new Se(xe.ABORTED,"Firestore shutting down"))}}function ay(){return new Ma(t=>Yv(t),Tf)}async function Gp(t,e){const n=Ke(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new J6,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const f=Wp(c,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(f)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Yp(n)}async function qp(t,e){const n=Ke(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.ba.indexOf(e);c>=0&&(o.ba.splice(c,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function t5(t,e){const n=Ke(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const f of c.ba)f.Fa(i)&&(r=!0);c.wa=i}}r&&Yp(n)}function n5(t,e,n){const r=Ke(t),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(e)}function Yp(t){t.Ca.forEach(e=>{e.next()})}var Z1,ly;(ly=Z1||(Z1={})).Ma="default",ly.Cache="cache";class Xp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Z1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.key=e}}class kC{constructor(e){this.key=e}}class r5{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=gt(),this.mutatedKeys=gt(),this.eu=Xv(e),this.tu=new Sl(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new oy,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,f=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,w)=>{const v=i.get(y),b=Sf(this.query,w)?w:null,S=!!v&&this.mutatedKeys.has(v.key),j=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let V=!1;v&&b?v.data.isEqual(b.data)?S!==j&&(r.track({type:3,doc:b}),V=!0):this.su(v,b)||(r.track({type:2,doc:b}),V=!0,(p&&this.eu(b,p)>0||g&&this.eu(b,g)<0)&&(f=!0)):!v&&b?(r.track({type:0,doc:b}),V=!0):v&&!b&&(r.track({type:1,doc:v}),V=!0,(p||g)&&(f=!0)),V&&(b?(c=c.add(b),o=j?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Ss:f,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((y,w)=>function(b,S){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:V})}};return j(b)-j(S)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(r),i=i??!1;const f=n&&!i?this._u():[],p=this.Ya.size===0&&this.current&&!i?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Vl(this.query,e.tu,o,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=gt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new kC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new PC(r))}),n}cu(e){this.Za=e.ks,this.Ya=gt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Kp="SyncEngine";class i5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class s5{constructor(e){this.key=e,this.hu=!1}}class o5{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ma(f=>Yv(f),Tf),this.Iu=new Map,this.Eu=new Set,this.Ru=new an(Fe.comparator),this.Au=new Map,this.Vu=new Op,this.du={},this.mu=new Map,this.fu=Ul.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a5(t,e,n=!0){const r=BC(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await OC(r,e,n,!0),i}async function l5(t,e){const n=BC(t);await OC(n,e,!0,!1)}async function OC(t,e,n,r){const i=await T6(t.localStore,ss(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let f;return r&&(f=await c5(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&bC(t.remoteStore,i),f}async function c5(t,e,n,r,i){t.pu=(w,v,b)=>async function(j,V,P,L){let M=V.view.ru(P);M.Ss&&(M=await ey(j.localStore,V.query,!1).then(({documents:k})=>V.view.ru(k,M)));const H=L&&L.targetChanges.get(V.targetId),J=L&&L.targetMismatches.get(V.targetId)!=null,q=V.view.applyChanges(M,j.isPrimaryClient,H,J);return uy(j,V.targetId,q.au),q.snapshot}(t,w,v,b);const o=await ey(t.localStore,e,!0),c=new r5(e,o.ks),f=c.ru(o.documents),p=Gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=c.applyChanges(f,t.isPrimaryClient,p);uy(t,n,g.au);const y=new i5(e,n,c);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),g.snapshot}async function u5(t,e,n){const r=Ke(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(c=>!Tf(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Q1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bp(r.remoteStore,i.targetId),J1(r,i.targetId)}).catch(Zl)):(J1(r,i.targetId),await Q1(r.localStore,i.targetId,!0))}async function h5(t,e){const n=Ke(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bp(n.remoteStore,r.targetId))}async function d5(t,e,n){const r=w5(t);try{const i=await function(c,f){const p=Ke(c),g=Xt.now(),y=f.reduce((b,S)=>b.add(S.key),gt());let w,v;return p.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Ls(),j=gt();return p.xs.getEntries(b,y).next(V=>{S=V,S.forEach((P,L)=>{L.isValidDocument()||(j=j.add(P))})}).next(()=>p.localDocuments.getOverlayedDocuments(b,S)).next(V=>{w=V;const P=[];for(const L of f){const M=S8(L,w.get(L.key).overlayedDocument);M!=null&&P.push(new Xo(L.key,M,Bv(M.value.mapValue),Xn.exists(!0)))}return p.mutationQueue.addMutationBatch(b,g,P,f)}).next(V=>{v=V;const P=V.applyToLocalDocumentSet(w,j);return p.documentOverlayCache.saveOverlays(b,V.batchId,P)})}).then(()=>({batchId:v.batchId,changes:Qv(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,f,p){let g=c.du[c.currentUser.toKey()];g||(g=new an(ft)),g=g.insert(f,p),c.du[c.currentUser.toKey()]=g}(r,i.batchId,n),await Yu(r,i.changes),await Mf(r.remoteStore)}catch(i){const o=Wp(i,"Failed to persist write");n.reject(o)}}async function MC(t,e){const n=Ke(t);try{const r=await A6(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Au.get(o);c&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?wt(c.hu,14607):i.removedDocuments.size>0&&(wt(c.hu,42227),c.hu=!1))}),await Yu(n,r,e)}catch(r){await Zl(r)}}function cy(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,c)=>{const f=c.view.va(e);f.snapshot&&i.push(f.snapshot)}),function(c,f){const p=Ke(c);p.onlineState=f;let g=!1;p.queries.forEach((y,w)=>{for(const v of w.ba)v.va(f)&&(g=!0)}),g&&Yp(p)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function f5(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new an(Fe.comparator);c=c.insert(o,Yn.newNoDocument(o,He.min()));const f=gt().add(o),p=new Pf(He.min(),new Map,new an(ft),c,f);await MC(r,p),r.Ru=r.Ru.remove(o),r.Au.delete(e),Qp(r)}else await Q1(r.localStore,e,!1).then(()=>J1(r,e,n)).catch(Zl)}async function g5(t,e){const n=Ke(t),r=e.batch.batchId;try{const i=await C6(n.localStore,e);jC(n,r,null),LC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yu(n,i)}catch(i){await Zl(i)}}async function p5(t,e,n){const r=Ke(t);try{const i=await function(c,f){const p=Ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return p.mutationQueue.lookupMutationBatch(g,f).next(w=>(wt(w!==null,37113),y=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>p.localDocuments.getDocuments(g,y))})}(r.localStore,e);jC(r,e,n),LC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yu(r,i)}catch(i){await Zl(i)}}function LC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jC(t,e,n){const r=Ke(t);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function J1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||FC(t,r)})}function FC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Bp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Qp(t))}function uy(t,e,n){for(const r of n)r instanceof PC?(t.Vu.addReference(r.key,e),m5(t,r)):r instanceof kC?(De(Kp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||FC(t,r.key)):Ue(19791,{wu:r})}function m5(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(De(Kp,"New document in limbo: "+n),t.Eu.add(r),Qp(t))}function Qp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Fe(Ot.fromString(e)),r=t.fu.next();t.Au.set(r,new s5(n)),t.Ru=t.Ru.insert(n,r),bC(t.remoteStore,new ho(ss(bf(n.path)),r,"TargetPurposeLimboResolution",Af.ce))}}async function Yu(t,e,n){const r=Ke(t),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((f,p)=>{c.push(r.pu(p,e,n).then(g=>{var y;if((g||n)&&r.isPrimaryClient){const w=g?!g.fromCache:(y=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){i.push(g);const w=Lp.Es(p.targetId,g);o.push(w)}}))}),await Promise.all(c),r.Pu.J_(i),await async function(p,g){const y=Ke(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ye.forEach(g,v=>ye.forEach(v.Ts,b=>y.persistence.referenceDelegate.addReference(w,v.targetId,b)).next(()=>ye.forEach(v.Is,b=>y.persistence.referenceDelegate.removeReference(w,v.targetId,b)))))}catch(w){if(!Jl(w))throw w;De(jp,"Failed to update sequence numbers: "+w)}for(const w of g){const v=w.targetId;if(!w.fromCache){const b=y.vs.get(v),S=b.snapshotVersion,j=b.withLastLimboFreeSnapshotVersion(S);y.vs=y.vs.insert(v,j)}}}(r.localStore,o))}async function x5(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){De(Kp,"User change. New user:",e.toKey());const r=await CC(n.localStore,e);n.currentUser=e,function(o,c){o.mu.forEach(f=>{f.forEach(p=>{p.reject(new Se(xe.CANCELLED,c))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yu(n,r.Ns)}}function y5(t,e){const n=Ke(t),r=n.Au.get(e);if(r&&r.hu)return gt().add(r.key);{let i=gt();const o=n.Iu.get(e);if(!o)return i;for(const c of o){const f=n.Tu.get(c);i=i.unionWith(f.view.nu)}return i}}function BC(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f5.bind(null,e),e.Pu.J_=t5.bind(null,e.eventManager),e.Pu.yu=n5.bind(null,e.eventManager),e}function w5(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p5.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v6(this.persistence,new w6,e.initialUser,this.serializer)}Cu(e){return new vC(Mp.Vi,this.serializer)}Du(e){return new N6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class E5 extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){wt(this.persistence.referenceDelegate instanceof Ud,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new i6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new vC(r=>Ud.Vi(r,n),this.serializer)}}class eg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x5.bind(null,this.syncEngine),await Z6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new e5}()}createDatastore(e){const n=kf(e.databaseInfo.databaseId),r=O6(e.databaseInfo);return B6(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,f){return new V6(r,i,o,c,f)}(this.localStore,this.datastore,e.asyncQueue,n=>cy(this.syncEngine,n,0),function(){return ry.v()?new ry:new R6}())}createSyncEngine(e,n){return function(i,o,c,f,p,g,y){const w=new o5(i,o,c,f,p,g);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ke(i);De(ba,"RemoteStore shutting down."),o.Ea.add(5),await qu(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}eg.provider={build:()=>new eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _5=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const c=Ke(i),f={documents:o.map(w=>Bd(c.serializer,w))},p=await c.jo("BatchGetDocuments",c.serializer.databaseId,Ot.emptyPath(),f,o.length),g=new Map;p.forEach(w=>{const v=V8(c.serializer,w);g.set(v.key.toString(),v)});const y=[];return o.forEach(w=>{const v=g.get(w.toString());wt(!!v,55234,{key:w}),y.push(v)}),y}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Df(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=Fe.fromPath(r);this.mutations.push(new aC(i,this.precondition(i)))}),await async function(r,i){const o=Ke(r),c={writes:i.map(f=>mC(o.serializer,f))};await o.Wo("Commit",o.serializer.databaseId,Ot.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ue(50498,{Gu:e.constructor.name});n=He.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Se(xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(He.min())?Xn.exists(!1):Xn.updateTime(n):Xn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(He.min()))throw new Se(xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(n)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Fp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new _5(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Zu(i)}))}).catch(r=>{this.Zu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Hu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="FirestoreClient";class C5{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{De(Fo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(De(Fo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function N0(t,e){t.asyncQueue.verifyOperationInProgress(),De(Fo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await A5(t);De(Fo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>sy(e.remoteStore,i)),t._onlineComponents=e}async function A5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){De(Fo,"Using user provided OfflineComponentProvider");try{await N0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ia("Error using user provided cache. Falling back to memory cache: "+n),await N0(t,new zd)}}else De(Fo,"Using default OfflineComponentProvider"),await N0(t,new E5(void 0));return t._offlineComponents}async function Zp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(De(Fo,"Using user provided OnlineComponentProvider"),await hy(t,t._uninitializedComponentsProvider._online)):(De(Fo,"Using default OnlineComponentProvider"),await hy(t,new eg))),t._onlineComponents}function I5(t){return Zp(t).then(e=>e.syncEngine)}function b5(t){return Zp(t).then(e=>e.datastore)}async function Hd(t){const e=await Zp(t),n=e.eventManager;return n.onListen=a5.bind(null,e.syncEngine),n.onUnlisten=u5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h5.bind(null,e.syncEngine),n}function T5(t,e,n,r){const i=new $p(r),o=new Xp(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>Gp(await Hd(t),o)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>qp(await Hd(t),o))}}function S5(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,f,p,g){const y=new $p({next:v=>{y.Nu(),c.enqueueAndForget(()=>qp(o,w));const b=v.docs.has(f);!b&&v.fromCache?g.reject(new Se(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&p&&p.source==="server"?g.reject(new Se(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(v)},error:v=>g.reject(v)}),w=new Xp(bf(f.path),y,{includeMetadataChanges:!0,Ka:!0});return Gp(o,w)}(await Hd(t),t.asyncQueue,e,n,r)),r.promise}function N5(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,f,p,g){const y=new $p({next:v=>{y.Nu(),c.enqueueAndForget(()=>qp(o,w)),v.fromCache&&p.source==="server"?g.reject(new Se(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(v)},error:v=>g.reject(v)}),w=new Xp(f,y,{includeMetadataChanges:!0,Ka:!0});return Gp(o,w)}(await Hd(t),t.asyncQueue,e,n,r)),r.promise}function R5(t,e){const n=new is;return t.asyncQueue.enqueueAndForget(async()=>d5(await I5(t),e,n)),n.promise}function D5(t,e,n){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>{const i=await b5(t);new v5(t.asyncQueue,i,n,e,r).ju()}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="ComponentProvider",dy=new Map;function k5(t,e,n,r,i){return new $R(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,UC(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="firestore.googleapis.com",fy=!0;class gy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VC,this.ssl=fy}else this.host=e.host,this.ssl=e.ssl??fy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_C;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n6)throw new Se(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NR;switch(r.type){case"firstParty":return new kR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dy.get(n);r&&(De(P5,"Removing Datastore"),dy.delete(n),r.terminate())}(this),Promise.resolve()}}function O5(t,e,n,r={}){var g;t=Mr(t,Lf);const i=Wo(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;i&&(up(`https://${f}`),hp("Firestore",!0)),o.host!==VC&&o.host!==f&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...o,host:f,ssl:i,emulatorOptions:r};if(!Ea(p,c)&&(t._setSettings(p),r.mockUserToken)){let y,w;if(typeof r.mockUserToken=="string")y=r.mockUserToken,w=lr.MOCK_USER;else{y=k_(r.mockUserToken,(g=t._app)==null?void 0:g.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Se(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new lr(v)}t._authCredentials=new RR(new Tv(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zu(n,rn._jsonSchema))return new rn(e,r||null,new Fe(Ot.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:On("string",rn._jsonSchemaVersion),referencePath:On("string")};class To extends Us{constructor(e,n,r){super(e,n,bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Fe(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function kn(t,e,...n){if(t=Ht(t),Sv("collection","path",e),t instanceof Lf){const r=Ot.fromString(e,...n);return T2(r),new To(t,null,r)}{if(!(t instanceof rn||t instanceof To))throw new Se(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return T2(r),new To(t.firestore,null,r)}}function Bn(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=Ap.newId()),Sv("doc","path",e),t instanceof Lf){const r=Ot.fromString(e,...n);return b2(r),new rn(t,null,new Fe(r))}{if(!(t instanceof rn||t instanceof To))throw new Se(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return b2(r),new rn(t.firestore,t instanceof To?t.converter:null,new Fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="AsyncQueue";class my{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fp(this,"async_queue_retry"),this._c=()=>{const r=S0();r&&De(py,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=S0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=S0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Jl(e))throw e;De(py,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ms("INTERNAL UNHANDLED ERROR: ",xy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Hp.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ue(47125,{Pc:xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class js extends Lf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new my,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new my(e),this._firestoreClient=void 0,await e}}}function M5(t,e){const n=typeof t=="object"?t:gp(),r=typeof t=="string"?t:Od,i=wf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=R_("firestore");o&&O5(i,...o)}return i}function nc(t){if(t._terminated)throw new Se(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||L5(t),t._firestoreClient}function L5(t){var r,i,o,c;const e=t._freezeSettings(),n=k5(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new C5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(ir.fromBase64String(e))}catch(n){throw new Se(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yr(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:On("string",Yr._jsonSchemaVersion),bytes:On("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(zu(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:On("string",os._jsonSchemaVersion),latitude:On("number"),longitude:On("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ni(e.vectorValues);throw new Se(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:On("string",Ni._jsonSchemaVersion),vectorValues:On("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/^__.*__$/;class F5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wu(e,this.data,n,this.fieldTransforms)}}class zC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:t})}}class Jp{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(HC(this.dataSource)&&j5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class B5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kf(e)}createContext(e,n,r,i=!1){return new Jp({dataSource:e,methodName:n,targetDoc:r,path:tr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(t){const e=t._freezeSettings(),n=kf(t._databaseId);return new B5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function em(t,e,n,r,i,o={}){const c=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);sm("Data must be an object, but it was:",c,r);const f=WC(r,c);let p,g;if(o.merge)p=new Qr(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const v=Ta(e,w,n);if(!c.contains(v))throw new Se(xe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YC(y,v)||y.push(v)}p=new Qr(y),g=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=c.fieldTransforms;return new F5(new xr(f),p,g)}class jf extends Ku{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}class tm extends Ku{_toFieldTransform(e){return new iC(e.path,new bu)}isEqual(e){return e instanceof tm}}class nm extends Ku{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Nu(e.serializer,Jv(e.serializer,this.Vc));return new iC(e.path,n)}isEqual(e){return e instanceof nm&&this.Vc===e.Vc}}function rm(t,e,n,r){const i=t.createContext(1,e,n);sm("Data must be an object, but it was:",i,r);const o=[],c=xr.empty();Yo(r,(p,g)=>{const y=qC(e,p,n);g=Ht(g);const w=i.childContextForFieldPath(y);if(g instanceof jf)o.push(y);else{const v=$u(g,w);v!=null&&(o.push(y),c.set(y,v))}});const f=new Qr(o);return new zC(c,f,i.fieldTransforms)}function im(t,e,n,r,i,o){const c=t.createContext(1,e,n),f=[Ta(e,r,n)],p=[i];if(o.length%2!=0)throw new Se(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)f.push(Ta(e,o[v])),p.push(o[v+1]);const g=[],y=xr.empty();for(let v=f.length-1;v>=0;--v)if(!YC(g,f[v])){const b=f[v];let S=p[v];S=Ht(S);const j=c.childContextForFieldPath(b);if(S instanceof jf)g.push(b);else{const V=$u(S,j);V!=null&&(g.push(b),y.set(b,V))}}const w=new Qr(g);return new zC(y,w,c.fieldTransforms)}function U5(t,e,n,r=!1){return $u(n,t.createContext(r?4:3,e))}function $u(t,e){if(GC(t=Ht(t)))return sm("Unsupported field value:",e,t),WC(t,e);if(t instanceof Ku)return function(r,i){if(!HC(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const f of r){let p=$u(f,i.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jv(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xt.fromDate(r);return{timestampValue:Fd(i.serializer,o)}}if(r instanceof Xt){const o=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fd(i.serializer,o)}}if(r instanceof os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:dC(i.serializer,r._byteString)};if(r instanceof rn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ni)return function(c,f){const p=c instanceof Ni?c.toArray():c;return{mapValue:{fields:{[jv]:{stringValue:Fv},[Md]:{arrayValue:{values:p.map(y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return Rp(f.serializer,y)})}}}}}}(r,i);if(EC(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Cf(r)}`)}(t,e)}function WC(t,e){const n={};return Dv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(r,i)=>{const o=$u(i,e.childContextForField(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function GC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof os||t instanceof Yr||t instanceof rn||t instanceof Ku||t instanceof Ni||EC(t))}function sm(t,e,n){if(!GC(n)||!Nv(n)){const r=Cf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ta(t,e,n){if((e=Ht(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return qC(t,e);throw Wd("Field path arguments must be of type string or ",t,!1,void 0,n)}const V5=new RegExp("[~\\*/\\[\\]]");function qC(t,e,n){if(e.search(V5)>=0)throw Wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw Wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wd(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Se(xe.INVALID_ARGUMENT,f+t+p)}function YC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{convertValue(e,n="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Md].arrayValue)==null?void 0:i.values)==null?void 0:o.map(c=>wn(c.doubleValue));return new Ni(n)}convertGeoPoint(e){return new os(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=If(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=Oo(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ot.fromString(e);wt(wC(r),9688,{name:e});const i=new Cu(r.get(1),r.get(3)),o=new Fe(r.popFirst(5));return i.isEqual(n)||Ms(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function fo(){return new tm("serverTimestamp")}function $s(t){return new nm("increment",t)}const yy="@firebase/firestore",wy="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Ta("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z5 extends Gd{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class am extends om{}function ei(t,e,...n){let r=[];e instanceof om&&r.push(e),r=r.concat(n),function(o){const c=o.filter(p=>p instanceof lm).length,f=o.filter(p=>p instanceof Bf).length;if(c>1||c>0&&f>0)throw new Se(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bf extends am{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=this._parse(e);return QC(e._query,n),new Us(e.firestore,e.converter,q1(e._query,n))}_parse(e){const n=Qu(e.firestore);return function(o,c,f,p,g,y,w){let v;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Se(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){vy(w,y);const S=[];for(const j of w)S.push(_y(p,o,j));v={arrayValue:{values:S}}}else v=_y(p,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||vy(w,y),v=U5(f,c,w,y==="in"||y==="not-in");return Pn.create(g,y,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ri(t,e,n){const r=e,i=Ta("where",t);return Bf._create(i,r,n)}class lm extends om{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ki.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const f=o.getFlattenedFilters();for(const p of f)QC(c,p),c=q1(c,p)}(e._query,n),new Us(e.firestore,e.converter,q1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cm extends am{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cm(e,n)}_apply(e){const n=function(i,o,c){if(i.startAt!==null)throw new Se(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Se(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(o,c)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,p8(e._query,n))}}function Zu(t,e="asc"){const n=e,r=Ta("orderBy",t);return cm._create(r,n)}class um extends am{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new um(e,n,r)}_apply(e){return new Us(e.firestore,e.converter,jd(e._query,this._limit,this._limitType))}}function tg(t){return UR("limit",t),um._create("limit",t,"F")}function _y(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Se(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&n.indexOf("/")!==-1)throw new Se(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ot.fromString(n));if(!Fe.isDocumentKey(r))throw new Se(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M2(t,new Fe(r))}if(n instanceof rn)return M2(t,n._key);throw new Se(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function vy(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QC(t,e){const n=function(i,o){for(const c of i)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Se(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class H5 extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}class pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends Gd{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ta("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=So._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:On("string",So._jsonSchemaVersion),bundleSource:On("string","DocumentSnapshot"),bundleName:On("string"),bundle:On("string")};class Jh extends So{data(e={}){return super.data(e)}}class fa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jh(this._firestore,this._userDataWriter,r.key,r,new pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(f=>{const p=new Jh(i._firestore,i._userDataWriter,f.doc.key,f.doc,new pl(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>o||f.type!==3).map(f=>{const p=new Jh(i._firestore,i._userDataWriter,f.doc.key,f.doc,new pl(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:W5(f.type),doc:p,oldIndex:g,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fa._jsonSchemaVersion="firestore/querySnapshot/1.0",fa._jsonSchema={type:On("string",fa._jsonSchemaVersion),bundleSource:On("string","QuerySnapshot"),bundleName:On("string"),bundle:On("string")};const G5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qu(e)}set(e,n,r){this._verifyNotCommitted();const i=go(e,this._firestore),o=hm(i.converter,n,r),c=em(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Xn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=go(e,this._firestore);let c;return c=typeof(n=Ht(n))=="string"||n instanceof Xu?im(this._dataReader,"WriteBatch.update",o._key,n,r,i):rm(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(c.toMutation(o._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=go(e,this._firestore);return this._mutations=this._mutations.concat(new Df(n._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function go(t,e){if((t=Ht(t)).firestore!==e)throw new Se(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Qu(e)}get(e){const n=go(e,this._firestore),r=new H5(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Ue(24041);const o=i[0];if(o.isFoundDocument())return new Gd(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Gd(this._firestore,r,n._key,null,n.converter);throw Ue(18433,{doc:o})})}set(e,n,r){const i=go(e,this._firestore),o=hm(i.converter,n,r),c=em(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,c),this}update(e,n,r,...i){const o=go(e,this._firestore);let c;return c=typeof(n=Ht(n))=="string"||n instanceof Xu?im(this._dataReader,"Transaction.update",o._key,n,r,i):rm(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(e){const n=go(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5 extends Y5{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=go(e,this._firestore),r=new Ff(this._firestore);return super.get(e).then(i=>new So(this._firestore,r,n._key,i._document,new pl(!1,!1),n.converter))}}function Cy(t,e,n){t=Mr(t,js);const r={...G5,...n};(function(c){if(c.maxAttempts<1)throw new Se(xe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=nc(t);return D5(i,o=>e(new X5(t,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){t=Mr(t,rn);const e=Mr(t.firestore,js),n=nc(e);return S5(n,t._key).then(r=>ZC(e,t,r))}function Ts(t){t=Mr(t,Us);const e=Mr(t.firestore,js),n=nc(e),r=new Ff(e);return KC(t._query),N5(n,t._query).then(i=>new fa(e,r,t,i))}function dm(t,e,n){t=Mr(t,rn);const r=Mr(t.firestore,js),i=hm(t.converter,e,n),o=Qu(r);return fm(r,[em(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xn.none())])}function $C(t,e,n,...r){t=Mr(t,rn);const i=Mr(t.firestore,js),o=Qu(i);let c;return c=typeof(e=Ht(e))=="string"||e instanceof Xu?im(o,"updateDoc",t._key,e,n,r):rm(o,"updateDoc",t._key,e),fm(i,[c.toMutation(t._key,Xn.exists(!0))])}function mi(t,...e){var g,y,w;t=Ht(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ey(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ey(e[r])){const v=e[r];e[r]=(g=v.next)==null?void 0:g.bind(v),e[r+1]=(y=v.error)==null?void 0:y.bind(v),e[r+2]=(w=v.complete)==null?void 0:w.bind(v)}let o,c,f;if(t instanceof rn)c=Mr(t.firestore,js),f=bf(t._key.path),o={next:v=>{e[r]&&e[r](ZC(c,t,v))},error:e[r+1],complete:e[r+2]};else{const v=Mr(t,Us);c=Mr(v.firestore,js),f=v._query;const b=new Ff(c);o={next:S=>{e[r]&&e[r](new fa(c,b,v,S))},error:e[r+1],complete:e[r+2]},KC(t._query)}const p=nc(c);return T5(p,f,i,o)}function fm(t,e){const n=nc(t);return R5(n,e)}function ZC(t,e,n){const r=n.docs.get(e._key),i=new Ff(t);return new So(t,i,e._key,r,new pl(n.hasPendingWrites,n.fromCache),e.converter)}function R0(t){return t=Mr(t,js),nc(t),new q5(t,e=>fm(t,e))}(function(e,n=!0){SR(ka),_a(new Po("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),f=new js(new DR(r.getProvider("auth-internal")),new OR(c,r.getProvider("app-check-internal")),ZR(c,i),c);return o={useFetchStreams:n,...o},f._setSettings(o),f},"PUBLIC").setMultipleInstances(!0)),ts(yy,wy,e),ts(yy,wy,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebasestorage.googleapis.com",eA="storageBucket",K5=2*60*1e3,Q5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends ls{constructor(e,n,r=0){super(D0(e),`Firebase Storage: ${n} (${D0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return D0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gn||(gn={}));function D0(t){return"storage/"+t}function gm(){const t="An unknown error occurred, please check the error payload for server response.";return new pn(gn.UNKNOWN,t)}function $5(t){return new pn(gn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z5(t){return new pn(gn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function J5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(gn.UNAUTHENTICATED,t)}function eD(){return new pn(gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tD(t){return new pn(gn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nD(){return new pn(gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rD(){return new pn(gn.CANCELED,"User canceled the upload/download.")}function iD(t){return new pn(gn.INVALID_URL,"Invalid URL '"+t+"'.")}function sD(t){return new pn(gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oD(){return new pn(gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eA+"' property when initializing the app?")}function aD(){return new pn(gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lD(){return new pn(gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cD(t){return new pn(gn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ng(t){return new pn(gn.INVALID_ARGUMENT,t)}function tA(){return new pn(gn.APP_DELETED,"The Firebase app was deleted.")}function uD(t){return new pn(gn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zc(t,e){return new pn(gn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ic(t){throw new pn(gn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$r.makeFromUrl(e,n)}catch{return new $r(e,"")}if(r.path==="")return r;throw sD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+i+c,"i"),p={bucket:1,path:3};function g(H){H.path_=decodeURIComponent(H.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${w}/${y}/b/${i}/o${v}`,"i"),S={bucket:1,path:3},j=n===JC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",P=new RegExp(`^https?://${j}/${i}/${V}`,"i"),M=[{regex:f,indices:p,postModify:o},{regex:b,indices:S,postModify:g},{regex:P,indices:{bucket:1,path:2},postModify:g}];for(let H=0;H<M.length;H++){const J=M[H],q=J.regex.exec(e);if(q){const k=q[J.indices.bucket];let A=q[J.indices.path];A||(A=""),r=new $r(k,A),J.postModify(r);break}}if(r==null)throw iD(e);return r}}class hD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e,n){let r=1,i=null,o=null,c=!1,f=0;function p(){return f===2}let g=!1;function y(...V){g||(g=!0,e.apply(null,V))}function w(V){i=setTimeout(()=>{i=null,t(b,p())},V)}function v(){o&&clearTimeout(o)}function b(V,...P){if(g){v();return}if(V){v(),y.call(null,V,...P);return}if(p()||c){v(),y.call(null,V,...P);return}r<64&&(r*=2);let M;f===1?(f=2,M=0):M=(r+Math.random())*1e3,w(M)}let S=!1;function j(V){S||(S=!0,v(),!g&&(i!==null?(V||(f=2),clearTimeout(i),w(0)):V||(f=1)))}return w(0),o=setTimeout(()=>{c=!0,j(!0)},n),j}function fD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){return t!==void 0}function pD(t){return typeof t=="object"&&!Array.isArray(t)}function pm(t){return typeof t=="string"||t instanceof String}function Ay(t){return mm()&&t instanceof Blob}function mm(){return typeof Blob<"u"}function Iy(t,e,n,r){if(r<e)throw ng(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ng(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ga;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ga||(ga={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,r,i,o,c,f,p,g,y,w,v=!0,b=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=w,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,j)=>{this.resolve_=S,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Rh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const p=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===ga.NO_ERROR,p=o.getStatus();if(!f||mD(p,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===ga.ABORT;r(!1,new Rh(!1,null,y));return}const g=this.successCodes_.indexOf(p)!==-1;r(!0,new Rh(g,o))})},n=(r,i)=>{const o=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());gD(p)?o(p):o()}catch(p){c(p)}else if(f!==null){const p=gm();p.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,p)):c(p)}else if(i.canceled){const p=this.appDelete_?tA():rD();c(p)}else{const p=nD();c(p)}};this.canceled_?n(!1,new Rh(!1,null,!0)):this.backoffId_=dD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function yD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ED(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _D(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vD(t,e,n,r,i,o,c=!0,f=!1){const p=nA(t.urlParams),g=t.url+p,y=Object.assign({},t.headers);return ED(y,e),yD(y,n),wD(y,o),_D(y,r),new xD(g,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AD(...t){const e=CD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(mm())return new Blob(t);throw new pn(gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ID(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){if(typeof atob>"u")throw cD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P0{constructor(e,n){this.data=e,this.contentType=n||null}}function TD(t,e){switch(t){case Zi.RAW:return new P0(rA(e));case Zi.BASE64:case Zi.BASE64URL:return new P0(iA(t,e));case Zi.DATA_URL:return new P0(ND(e),RD(e))}throw gm()}function rA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=t.charCodeAt(++n);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function SD(t){let e;try{e=decodeURIComponent(t)}catch{throw Zc(Zi.DATA_URL,"Malformed data URL.")}return rA(e)}function iA(t,e){switch(t){case Zi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Zc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Zc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bD(e)}catch(i){throw i.message.includes("polyfill")?i:Zc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class sA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zc(Zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=DD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ND(t){const e=new sA(t);return e.base64?iA(Zi.BASE64,e.rest):SD(e.rest)}function RD(t){return new sA(t).contentType}function DD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){let r=0,i="";Ay(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ay(this.data_)){const r=this.data_,i=ID(r,e,n);return i===null?null:new ao(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ao(r,!0)}}static getBlob(...e){if(mm()){const n=e.map(r=>r instanceof ao?r.data_:r);return new ao(AD.apply(null,n))}else{const n=e.map(c=>pm(c)?TD(Zi.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(c=>{for(let f=0;f<c.length;f++)i[o++]=c[f]}),new ao(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){let e;try{e=JSON.parse(t)}catch{return null}return pD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return e}class pr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||OD}}let Dh=null;function MD(t){return!pm(t)||t.length<2?t:aA(t)}function lA(){if(Dh)return Dh;const t=[];t.push(new pr("bucket")),t.push(new pr("generation")),t.push(new pr("metageneration")),t.push(new pr("name","fullPath",!0));function e(o,c){return MD(c)}const n=new pr("name");n.xform=e,t.push(n);function r(o,c){return c!==void 0?Number(c):c}const i=new pr("size");return i.xform=r,t.push(i),t.push(new pr("timeCreated")),t.push(new pr("updated")),t.push(new pr("md5Hash",null,!0)),t.push(new pr("cacheControl",null,!0)),t.push(new pr("contentDisposition",null,!0)),t.push(new pr("contentEncoding",null,!0)),t.push(new pr("contentLanguage",null,!0)),t.push(new pr("contentType",null,!0)),t.push(new pr("metadata","customMetadata",!0)),Dh=t,Dh}function LD(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new $r(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function jD(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const c=n[o];r[c.local]=c.xform(r,e[c.server])}return LD(r,t),r}function cA(t,e,n){const r=oA(e);return r===null?null:jD(t,r,n)}function FD(t,e,n,r){const i=oA(e);if(i===null||!pm(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const y=t.bucket,w=t.fullPath,v="/b/"+c(y)+"/o/"+c(w),b=xm(v,n,r),S=nA({alt:"media",token:g});return b+S})[0]}function BD(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class uA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){if(!t)throw gm()}function UD(t,e){function n(r,i){const o=cA(t,i,e);return hA(o!==null),o}return n}function VD(t,e){function n(r,i){const o=cA(t,i,e);return hA(o!==null),FD(o,i,t.host,t._protocol)}return n}function dA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=eD():i=J5():n.getStatus()===402?i=Z5(t.bucket):n.getStatus()===403?i=tD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zD(t){const e=dA(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=$5(t.path)),o.serverResponse=i.serverResponse,o}return n}function HD(t,e,n){const r=e.fullServerUrl(),i=xm(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,f=new uA(i,o,VD(t,n),c);return f.errorHandler=zD(e),f}function WD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=WD(null,e)),r}function qD(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let M="";for(let H=0;H<2;H++)M=M+Math.random().toString().slice(2);return M}const p=f();c["Content-Type"]="multipart/related; boundary="+p;const g=GD(e,r,i),y=BD(g,n),w="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,v=`\r
--`+p+"--",b=ao.getBlob(w,r,v);if(b===null)throw aD();const S={name:g.fullPath},j=xm(o,t.host,t._protocol),V="POST",P=t.maxUploadRetryTime,L=new uA(j,V,UD(t,n),P);return L.urlParams=S,L.headers=c,L.body=b.uploadData(),L.errorHandler=dA(e),L}class YD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ga.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ga.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ga.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Ic("cannot .send() more than once");if(Wo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XD extends YD{initXhr(){this.xhr_.responseType="text"}}function fA(){return new XD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this._service=e,n instanceof $r?this._location=n:this._location=$r.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sa(e,n)}get root(){const e=new $r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aA(this._location.path)}get storage(){return this._service}get parent(){const e=PD(this._location.path);if(e===null)return null;const n=new $r(this._location.bucket,e);return new Sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uD(e)}}function KD(t,e,n){t._throwIfRoot("uploadBytes");const r=qD(t.storage,t._location,lA(),new ao(e,!0),n);return t.storage.makeRequestWithTokens(r,fA).then(i=>({metadata:i,ref:t}))}function QD(t){t._throwIfRoot("getDownloadURL");const e=HD(t.storage,t._location,lA());return t.storage.makeRequestWithTokens(e,fA).then(n=>{if(n===null)throw lD();return n})}function $D(t,e){const n=kD(t._location.path,e),r=new $r(t._location.bucket,n);return new Sa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){return/^[A-Za-z]+:\/\//.test(t)}function JD(t,e){return new Sa(t,e)}function gA(t,e){if(t instanceof ym){const n=t;if(n._bucket==null)throw oD();const r=new Sa(n,n._bucket);return e!=null?gA(r,e):r}else return e!==void 0?$D(t,e):t}function eP(t,e){if(e&&ZD(e)){if(t instanceof ym)return JD(t,e);throw ng("To use ref(service, url), the first argument must be a Storage instance.")}else return gA(t,e)}function by(t,e){const n=e==null?void 0:e[eA];return n==null?null:$r.makeFromBucketSpec(n,t)}function tP(t,e,n,r={}){t.host=`${e}:${n}`;const i=Wo(e);i&&(up(`https://${t.host}/b`),hp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:k_(o,t.app.options.projectId))}class ym{constructor(e,n,r,i,o,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=JC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=K5,this._maxUploadRetryTime=Q5,this._requests=new Set,i!=null?this._bucket=$r.makeFromBucketSpec(i,this._host):this._bucket=by(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$r.makeFromBucketSpec(this._url,e):this._bucket=by(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Iy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Iy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sa(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new hD(tA());{const c=vD(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ty="@firebase/storage",Sy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="storage";function nP(t,e,n){return t=Ht(t),KD(t,e,n)}function rP(t){return t=Ht(t),QD(t)}function iP(t,e){return t=Ht(t),eP(t,e)}function sP(t=gp(),e){t=Ht(t);const r=wf(t,pA).getImmediate({identifier:e}),i=R_("storage");return i&&oP(r,...i),r}function oP(t,e,n,r={}){tP(t,e,n,r)}function aP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ym(n,r,i,e,ka)}function lP(){_a(new Po(pA,aP,"PUBLIC").setMultipleInstances(!0)),ts(Ty,Sy,""),ts(Ty,Sy,"esm2020")}lP();const cP={apiKey:"AIzaSyDmITm8NnBqL2NrV-xQsnxFm-hn5_BfPUk",authDomain:"r3pet-e3978.firebaseapp.com",projectId:"r3pet-e3978",storageBucket:"r3pet-e3978.firebasestorage.app",messagingSenderId:"841567121586",appId:"1:841567121586:web:2ec9f5067a1b375cb999ab",measurementId:"G-L5PYCT865H"},wm=L_(cP),Ki=bR(wm),Je=M5(wm),uP=sP(wm),hP="modulepreload",dP=function(t){return"/"+t},Ny={},mA=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(n.map(p=>{if(p=dP(p),p in Ny)return;Ny[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":hP,g||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),g)return new Promise((v,b)=>{w.addEventListener("load",v),w.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return i.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const fP=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(o,c)=>{n.platforms.set(o,c)},i=o=>{n.platforms.has(o)&&(n.currentPlatform=n.platforms.get(o))};return n.addPlatform=r,n.setPlatform=i,n},gP=t=>t.CapacitorPlatforms=fP(t),xA=gP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});xA.addPlatform;xA.setPlatform;var zl;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(zl||(zl={}));class k0 extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const pP=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},mP=t=>{var e,n,r,i,o;const c=t.CapacitorCustomPlatform||null,f=t.Capacitor||{},p=f.Plugins=f.Plugins||{},g=t.CapacitorPlatforms,y=()=>c!==null?c.name:pP(t),w=((e=g==null?void 0:g.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,v=()=>w()!=="web",b=((n=g==null?void 0:g.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||v,S=k=>{const A=H.get(k);return!!(A!=null&&A.platforms.has(w())||P(k))},j=((r=g==null?void 0:g.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||S,V=k=>{var A;return(A=f.PluginHeaders)===null||A===void 0?void 0:A.find(I=>I.name===k)},P=((i=g==null?void 0:g.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||V,L=k=>t.console.error(k),M=(k,A,I)=>Promise.reject(`${I} does not have an implementation of "${A}".`),H=new Map,J=(k,A={})=>{const I=H.get(k);if(I)return console.warn(`Capacitor plugin "${k}" already registered. Cannot register plugins twice.`),I.proxy;const F=w(),z=P(k);let O;const R=async()=>(!O&&F in A?O=typeof A[F]=="function"?O=await A[F]():O=A[F]:c!==null&&!O&&"web"in A&&(O=typeof A.web=="function"?O=await A.web():O=A.web),O),$=(ie,fe)=>{var he,Ee;if(z){const ue=z==null?void 0:z.methods.find(ce=>fe===ce.name);if(ue)return ue.rtype==="promise"?ce=>f.nativePromise(k,fe.toString(),ce):(ce,me)=>f.nativeCallback(k,fe.toString(),ce,me);if(ie)return(he=ie[fe])===null||he===void 0?void 0:he.bind(ie)}else{if(ie)return(Ee=ie[fe])===null||Ee===void 0?void 0:Ee.bind(ie);throw new k0(`"${k}" plugin is not implemented on ${F}`,zl.Unimplemented)}},Y=ie=>{let fe;const he=(...Ee)=>{const ue=R().then(ce=>{const me=$(ce,ie);if(me){const Me=me(...Ee);return fe=Me==null?void 0:Me.remove,Me}else throw new k0(`"${k}.${ie}()" is not implemented on ${F}`,zl.Unimplemented)});return ie==="addListener"&&(ue.remove=async()=>fe()),ue};return he.toString=()=>`${ie.toString()}() { [capacitor code] }`,Object.defineProperty(he,"name",{value:ie,writable:!1,configurable:!1}),he},X=Y("addListener"),G=Y("removeListener"),re=(ie,fe)=>{const he=X({eventName:ie},fe),Ee=async()=>{const ce=await he;G({eventName:ie,callbackId:ce},fe)},ue=new Promise(ce=>he.then(()=>ce({remove:Ee})));return ue.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Ee()},ue},ee=new Proxy({},{get(ie,fe){switch(fe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?re:X;case"removeListener":return G;default:return Y(fe)}}});return p[k]=ee,H.set(k,{name:k,proxy:ee,platforms:new Set([...Object.keys(A),...z?[F]:[]])}),ee},q=((o=g==null?void 0:g.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||J;return f.convertFileSrc||(f.convertFileSrc=k=>k),f.getPlatform=w,f.handleError=L,f.isNativePlatform=b,f.isPluginAvailable=j,f.pluginMethodNoop=M,f.registerPlugin=q,f.Exception=k0,f.DEBUG=!!f.DEBUG,f.isLoggingEnabled=!!f.isLoggingEnabled,f.platform=f.getPlatform(),f.isNative=f.isNativePlatform(),f},xP=t=>t.Capacitor=mP(t),qd=xP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Uf=qd.registerPlugin;qd.Plugins;class yA{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const o=async()=>this.removeListener(e,n),c=Promise.resolve({remove:o});return Object.defineProperty(c,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),c}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new qd.Exception(e,zl.Unimplemented)}unavailable(e="not available"){return new qd.Exception(e,zl.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Ry=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Dy=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class yP extends yA{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Dy(i).trim(),o=Dy(o).trim(),n[i]=o}),n}async setCookie(e){try{const n=Ry(e.key),r=Ry(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${o}; ${c};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Uf("CapacitorCookies",{web:()=>new yP});const wP=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),EP=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,c)=>(i[o]=t[e[c]],i),{})},_P=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[o,c]=i;let f,p;return Array.isArray(c)?(p="",c.forEach(g=>{f=e?encodeURIComponent(g):g,p+=`${o}=${f}&`}),p.slice(0,-1)):(f=e?encodeURIComponent(c):c,p=`${o}=${f}`),`${r}&${p}`},"").substr(1):null,vP=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=EP(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,f]of Object.entries(t.data||{}))o.set(c,f);n.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((f,p)=>{o.append(p,f)});else for(const f of Object.keys(t.data))o.append(f,t.data[f]);n.body=o;const c=new Headers(n.headers);c.delete("content-type"),n.headers=c}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class CP extends yA{async request(e){const n=vP(e,e.webFetchExtra),r=_P(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,n),c=o.headers.get("content-type")||"";let{responseType:f="text"}=o.ok?e:{};c.includes("application/json")&&(f="json");let p,g;switch(f){case"arraybuffer":case"blob":g=await o.blob(),p=await wP(g);break;case"json":p=await o.json();break;case"document":case"text":default:p=await o.text()}const y={};return o.headers.forEach((w,v)=>{y[v]=w}),{data:p,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Uf("CapacitorHttp",{web:()=>new CP});var kt;(function(t){t.Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E"})(kt||(kt={}));var Py;(function(t){t.CalendarEvent="CALENDAR_EVENT",t.ContactInfo="CONTACT_INFO",t.DriversLicense="DRIVERS_LICENSE",t.Email="EMAIL",t.Geo="GEO",t.Isbn="ISBN",t.Phone="PHONE",t.Product="PRODUCT",t.Sms="SMS",t.Text="TEXT",t.Url="URL",t.Wifi="WIFI",t.Unknown="UNKNOWN"})(Py||(Py={}));var ky;(function(t){t.Front="FRONT",t.Back="BACK"})(ky||(ky={}));var Oy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PENDING=1]="PENDING",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.CANCELED=3]="CANCELED",t[t.COMPLETED=4]="COMPLETED",t[t.FAILED=5]="FAILED",t[t.INSTALLING=6]="INSTALLING",t[t.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(Oy||(Oy={}));const Jn=Uf("BarcodeScanner",{web:()=>mA(()=>import("./web-CPbRW0SF.js"),[]).then(t=>new t.BarcodeScannerWeb)}),My=Uf("App",{web:()=>mA(()=>import("./web-CpgH5r8D.js"),[]).then(t=>new t.AppWeb)});var AP=Object.defineProperty,Yd=Object.getOwnPropertySymbols,wA=Object.prototype.hasOwnProperty,EA=Object.prototype.propertyIsEnumerable,Ly=(t,e,n)=>e in t?AP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rg=(t,e)=>{for(var n in e||(e={}))wA.call(e,n)&&Ly(t,n,e[n]);if(Yd)for(var n of Yd(e))EA.call(e,n)&&Ly(t,n,e[n]);return t},ig=(t,e)=>{var n={};for(var r in t)wA.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yd)for(var r of Yd(t))e.indexOf(r)<0&&EA.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Na;(t=>{const e=class st{constructor(p,g,y,w){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<st.MIN_VERSION||p>st.MAX_VERSION)throw new RangeError("Version value out of range");if(w<-1||w>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let v=[];for(let S=0;S<this.size;S++)v.push(!1);for(let S=0;S<this.size;S++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(y);if(this.drawCodewords(b),w==-1){let S=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const V=this.getPenaltyScore();V<S&&(w=j,S=V),this.applyMask(j)}}i(0<=w&&w<=7),this.mask=w,this.applyMask(w),this.drawFormatBits(w),this.isFunction=[]}static encodeText(p,g){const y=t.QrSegment.makeSegments(p);return st.encodeSegments(y,g)}static encodeBinary(p,g){const y=t.QrSegment.makeBytes(p);return st.encodeSegments([y],g)}static encodeSegments(p,g,y=1,w=40,v=-1,b=!0){if(!(st.MIN_VERSION<=y&&y<=w&&w<=st.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let S,j;for(S=y;;S++){const M=st.getNumDataCodewords(S,g)*8,H=c.getTotalBits(p,S);if(H<=M){j=H;break}if(S>=w)throw new RangeError("Data too long")}for(const M of[st.Ecc.MEDIUM,st.Ecc.QUARTILE,st.Ecc.HIGH])b&&j<=st.getNumDataCodewords(S,M)*8&&(g=M);let V=[];for(const M of p){n(M.mode.modeBits,4,V),n(M.numChars,M.mode.numCharCountBits(S),V);for(const H of M.getData())V.push(H)}i(V.length==j);const P=st.getNumDataCodewords(S,g)*8;i(V.length<=P),n(0,Math.min(4,P-V.length),V),n(0,(8-V.length%8)%8,V),i(V.length%8==0);for(let M=236;V.length<P;M^=253)n(M,8,V);let L=[];for(;L.length*8<V.length;)L.push(0);return V.forEach((M,H)=>L[H>>>3]|=M<<7-(H&7)),new st(S,g,L,v)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let y=0;y<g;y++)for(let w=0;w<g;w++)y==0&&w==0||y==0&&w==g-1||y==g-1&&w==0||this.drawAlignmentPattern(p[y],p[w]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let y=g;for(let v=0;v<10;v++)y=y<<1^(y>>>9)*1335;const w=(g<<10|y)^21522;i(w>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,r(w,v));this.setFunctionModule(8,7,r(w,6)),this.setFunctionModule(8,8,r(w,7)),this.setFunctionModule(7,8,r(w,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,r(w,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,r(w,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,r(w,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;i(g>>>18==0);for(let y=0;y<18;y++){const w=r(g,y),v=this.size-11+y%3,b=Math.floor(y/3);this.setFunctionModule(v,b,w),this.setFunctionModule(b,v,w)}}drawFinderPattern(p,g){for(let y=-4;y<=4;y++)for(let w=-4;w<=4;w++){const v=Math.max(Math.abs(w),Math.abs(y)),b=p+w,S=g+y;0<=b&&b<this.size&&0<=S&&S<this.size&&this.setFunctionModule(b,S,v!=2&&v!=4)}}drawAlignmentPattern(p,g){for(let y=-2;y<=2;y++)for(let w=-2;w<=2;w++)this.setFunctionModule(p+w,g+y,Math.max(Math.abs(w),Math.abs(y))!=1)}setFunctionModule(p,g,y){this.modules[g][p]=y,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,y=this.errorCorrectionLevel;if(p.length!=st.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const w=st.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],v=st.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],b=Math.floor(st.getNumRawDataModules(g)/8),S=w-b%w,j=Math.floor(b/w);let V=[];const P=st.reedSolomonComputeDivisor(v);for(let M=0,H=0;M<w;M++){let J=p.slice(H,H+j-v+(M<S?0:1));H+=J.length;const q=st.reedSolomonComputeRemainder(J,P);M<S&&J.push(0),V.push(J.concat(q))}let L=[];for(let M=0;M<V[0].length;M++)V.forEach((H,J)=>{(M!=j-v||J>=S)&&L.push(H[M])});return i(L.length==b),L}drawCodewords(p){if(p.length!=Math.floor(st.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let w=0;w<this.size;w++)for(let v=0;v<2;v++){const b=y-v,j=(y+1&2)==0?this.size-1-w:w;!this.isFunction[j][b]&&g<p.length*8&&(this.modules[j][b]=r(p[g>>>3],7-(g&7)),g++)}}i(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let w;switch(p){case 0:w=(y+g)%2==0;break;case 1:w=g%2==0;break;case 2:w=y%3==0;break;case 3:w=(y+g)%3==0;break;case 4:w=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:w=y*g%2+y*g%3==0;break;case 6:w=(y*g%2+y*g%3)%2==0;break;case 7:w=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&w&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let p=0;for(let v=0;v<this.size;v++){let b=!1,S=0,j=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[v][V]==b?(S++,S==5?p+=st.PENALTY_N1:S>5&&p++):(this.finderPenaltyAddHistory(S,j),b||(p+=this.finderPenaltyCountPatterns(j)*st.PENALTY_N3),b=this.modules[v][V],S=1);p+=this.finderPenaltyTerminateAndCount(b,S,j)*st.PENALTY_N3}for(let v=0;v<this.size;v++){let b=!1,S=0,j=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[V][v]==b?(S++,S==5?p+=st.PENALTY_N1:S>5&&p++):(this.finderPenaltyAddHistory(S,j),b||(p+=this.finderPenaltyCountPatterns(j)*st.PENALTY_N3),b=this.modules[V][v],S=1);p+=this.finderPenaltyTerminateAndCount(b,S,j)*st.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let b=0;b<this.size-1;b++){const S=this.modules[v][b];S==this.modules[v][b+1]&&S==this.modules[v+1][b]&&S==this.modules[v+1][b+1]&&(p+=st.PENALTY_N2)}let g=0;for(const v of this.modules)g=v.reduce((b,S)=>b+(S?1:0),g);const y=this.size*this.size,w=Math.ceil(Math.abs(g*20-y*10)/y)-1;return i(0<=w&&w<=9),p+=w*st.PENALTY_N4,i(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let w=this.size-7;y.length<p;w-=g)y.splice(1,0,w);return y}}static getNumRawDataModules(p){if(p<st.MIN_VERSION||p>st.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;g-=(25*y-10)*y-55,p>=7&&(g-=36)}return i(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(st.getNumRawDataModules(p)/8)-st.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*st.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let w=0;w<p-1;w++)g.push(0);g.push(1);let y=1;for(let w=0;w<p;w++){for(let v=0;v<g.length;v++)g[v]=st.reedSolomonMultiply(g[v],y),v+1<g.length&&(g[v]^=g[v+1]);y=st.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(p,g){let y=g.map(w=>0);for(const w of p){const v=w^y.shift();y.push(0),g.forEach((b,S)=>y[S]^=st.reedSolomonMultiply(b,v))}return y}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let w=7;w>=0;w--)y=y<<1^(y>>>7)*285,y^=(g>>>w&1)*p;return i(y>>>8==0),y}finderPenaltyCountPatterns(p){const g=p[1];i(g<=this.size*3);const y=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(y&&p[0]>=g*4&&p[6]>=g?1:0)+(y&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,y){return p&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(f,p,g){if(p<0||p>31||f>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)g.push(f>>>y&1)}function r(f,p){return(f>>>p&1)!=0}function i(f){if(!f)throw new Error("Assertion error")}const o=class hn{constructor(p,g,y){if(this.mode=p,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let g=[];for(const y of p)n(y,8,g);return new hn(hn.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!hn.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<p.length;){const w=Math.min(p.length-y,3);n(parseInt(p.substring(y,y+w),10),w*3+1,g),y+=w}return new hn(hn.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!hn.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=p.length;y+=2){let w=hn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;w+=hn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),n(w,11,g)}return y<p.length&&n(hn.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,g),new hn(hn.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:hn.isNumeric(p)?[hn.makeNumeric(p)]:hn.isAlphanumeric(p)?[hn.makeAlphanumeric(p)]:[hn.makeBytes(hn.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,g);else if(p<16384)n(2,2,g),n(p,14,g);else if(p<1e6)n(6,3,g),n(p,21,g);else throw new RangeError("ECI assignment value out of range");return new hn(hn.Mode.ECI,0,g)}static isNumeric(p){return hn.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return hn.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let y=0;for(const w of p){const v=w.mode.numCharCountBits(g);if(w.numChars>=1<<v)return 1/0;y+=4+v+w.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?g.push(p.charCodeAt(y)):(g.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return g}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=o;t.QrSegment=o})(Na||(Na={}));(t=>{(e=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Na||(Na={}));(t=>{(e=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Na||(Na={}));var ml=Na;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var IP={L:ml.QrCode.Ecc.LOW,M:ml.QrCode.Ecc.MEDIUM,Q:ml.QrCode.Ecc.QUARTILE,H:ml.QrCode.Ecc.HIGH},_A=128,vA="L",CA="#FFFFFF",AA="#000000",IA=!1,bA=1,bP=4,TP=0,SP=.1;function TA(t,e=0){const n=[];return t.forEach(function(r,i){let o=null;r.forEach(function(c,f){if(!c&&o!==null){n.push(`M${o+e} ${i+e}h${f-o}v1H${o+e}z`),o=null;return}if(f===r.length-1){if(!c)return;o===null?n.push(`M${f+e},${i+e} h1v1H${f+e}z`):n.push(`M${o+e},${i+e} h${f+1-o}v1H${o+e}z`);return}c&&o===null&&(o=f)})}),n.join("")}function SA(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,o)=>o<e.x||o>=e.x+e.w?i:!1))}function NP(t,e,n,r){if(r==null)return null;const i=t.length+n*2,o=Math.floor(e*SP),c=i/e,f=(r.width||o)*c,p=(r.height||o)*c,g=r.x==null?t.length/2-f/2:r.x*c,y=r.y==null?t.length/2-p/2:r.y*c,w=r.opacity==null?1:r.opacity;let v=null;if(r.excavate){let S=Math.floor(g),j=Math.floor(y),V=Math.ceil(f+g-S),P=Math.ceil(p+y-j);v={x:S,y:j,w:V,h:P}}const b=r.crossOrigin;return{x:g,y,h:p,w:f,excavation:v,opacity:w,crossOrigin:b}}function RP(t,e){return e!=null?Math.max(Math.floor(e),0):t?bP:TP}function NA({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:c,boostLevel:f}){let p=yn.useMemo(()=>{const S=(Array.isArray(t)?t:[t]).reduce((j,V)=>(j.push(...ml.QrSegment.makeSegments(V)),j),[]);return ml.QrCode.encodeSegments(S,IP[e],n,void 0,void 0,f)},[t,e,n,f]);const{cells:g,margin:y,numCells:w,calculatedImageSettings:v}=yn.useMemo(()=>{let b=p.getModules();const S=RP(r,i),j=b.length+S*2,V=NP(b,c,S,o);return{cells:b,margin:S,numCells:j,calculatedImageSettings:V}},[p,c,o,r,i]);return{qrcode:p,margin:y,cells:g,numCells:w,calculatedImageSettings:v}}var DP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Em=yn.forwardRef(function(e,n){const r=e,{value:i,size:o=_A,level:c=vA,bgColor:f=CA,fgColor:p=AA,includeMargin:g=IA,minVersion:y=bA,boostLevel:w,marginSize:v,imageSettings:b}=r,j=ig(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:V}=j,P=ig(j,["style"]),L=b==null?void 0:b.src,M=yn.useRef(null),H=yn.useRef(null),J=yn.useCallback($=>{M.current=$,typeof n=="function"?n($):n&&(n.current=$)},[n]),[q,k]=yn.useState(!1),{margin:A,cells:I,numCells:F,calculatedImageSettings:z}=NA({value:i,level:c,minVersion:y,boostLevel:w,includeMargin:g,marginSize:v,imageSettings:b,size:o});yn.useEffect(()=>{if(M.current!=null){const $=M.current,Y=$.getContext("2d");if(!Y)return;let X=I;const G=H.current,re=z!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;re&&z.excavation!=null&&(X=SA(I,z.excavation));const ee=window.devicePixelRatio||1;$.height=$.width=o*ee;const ie=o/F*ee;Y.scale(ie,ie),Y.fillStyle=f,Y.fillRect(0,0,F,F),Y.fillStyle=p,DP?Y.fill(new Path2D(TA(X,A))):I.forEach(function(fe,he){fe.forEach(function(Ee,ue){Ee&&Y.fillRect(ue+A,he+A,1,1)})}),z&&(Y.globalAlpha=z.opacity),re&&Y.drawImage(G,z.x+A,z.y+A,z.w,z.h)}}),yn.useEffect(()=>{k(!1)},[L]);const O=rg({height:o,width:o},V);let R=null;return L!=null&&(R=yn.createElement("img",{src:L,key:L,style:{display:"none"},onLoad:()=>{k(!0)},ref:H,crossOrigin:z==null?void 0:z.crossOrigin})),yn.createElement(yn.Fragment,null,yn.createElement("canvas",rg({style:O,height:o,width:o,ref:J,role:"img"},P)),R)});Em.displayName="QRCodeCanvas";var PP=yn.forwardRef(function(e,n){const r=e,{value:i,size:o=_A,level:c=vA,bgColor:f=CA,fgColor:p=AA,includeMargin:g=IA,minVersion:y=bA,boostLevel:w,title:v,marginSize:b,imageSettings:S}=r,j=ig(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:V,cells:P,numCells:L,calculatedImageSettings:M}=NA({value:i,level:c,minVersion:y,boostLevel:w,includeMargin:g,marginSize:b,imageSettings:S,size:o});let H=P,J=null;S!=null&&M!=null&&(M.excavation!=null&&(H=SA(P,M.excavation)),J=yn.createElement("image",{href:S.src,height:M.h,width:M.w,x:M.x+V,y:M.y+V,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const q=TA(H,V);return yn.createElement("svg",rg({height:o,width:o,viewBox:`0 0 ${L} ${L}`,ref:n,role:"img"},j),!!v&&yn.createElement("title",null,v),yn.createElement("path",{fill:f,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),yn.createElement("path",{fill:p,d:q,shapeRendering:"crispEdges"}),J)});PP.displayName="QRCodeSVG";var Pe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Pe||(Pe={}));var jy=new Map([[Pe.QR_CODE,"QR_CODE"],[Pe.AZTEC,"AZTEC"],[Pe.CODABAR,"CODABAR"],[Pe.CODE_39,"CODE_39"],[Pe.CODE_93,"CODE_93"],[Pe.CODE_128,"CODE_128"],[Pe.DATA_MATRIX,"DATA_MATRIX"],[Pe.MAXICODE,"MAXICODE"],[Pe.ITF,"ITF"],[Pe.EAN_13,"EAN_13"],[Pe.EAN_8,"EAN_8"],[Pe.PDF_417,"PDF_417"],[Pe.RSS_14,"RSS_14"],[Pe.RSS_EXPANDED,"RSS_EXPANDED"],[Pe.UPC_A,"UPC_A"],[Pe.UPC_E,"UPC_E"],[Pe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Fy||(Fy={}));function kP(t){return Object.values(Pe).includes(t)}var Bo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Bo||(Bo={}));var Ai=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Bo.SCAN_TYPE_CAMERA,Bo.SCAN_TYPE_FILE],t}(),RA=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!jy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,jy.get(e))},t}(),By=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),sg;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(sg||(sg={}));var DA=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:sg.UNKWOWN_ERROR}},t}(),PA=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Yi(t){return typeof t>"u"||t===null}function OP(t,e,n){return t>n?n:t<e?e:t}var xl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Rt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Uy=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),kA=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),f=0,p=c;f<p.length;f++){var g=p[f];if(o.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),og={exports:{}};(function(t,e){(function(n,r){r(e)})(pc,function(n){function r(B){return B==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,s){B.__proto__=s}||function(B,s){for(var a in s)s.hasOwnProperty(a)&&(B[a]=s[a])};function o(B,s){i(B,s);function a(){this.constructor=B}B.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function c(B,s){var a=Object.setPrototypeOf;a?a(B,s):B.__proto__=s}function f(B,s){s===void 0&&(s=B.constructor);var a=Error.captureStackTrace;a&&a(B,s)}var p=function(B){o(s,B);function s(a){var l=this.constructor,u=B.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),c(u,l.prototype),f(u),u}return s}(Error);class g extends p{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class y extends g{}y.kind="ArgumentException";class w extends g{}w.kind="IllegalArgumentException";class v{constructor(s){if(this.binarizer=s,s===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){const h=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new v(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends g{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class S{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(s,a,l,u,h){for(;h--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}class V extends g{}V.kind="IndexOutOfBoundsException";class P extends V{constructor(s=void 0,a=void 0){super(a),this.index=s,this.message=a}}P.kind="ArrayIndexOutOfBoundsException";class L{static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){L.rangeCheck(s.length,a,l);for(let h=a;h<l;h++)s[h]=u}static rangeCheck(s,a,l){if(a>l)throw new w("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new P(a);if(l>s)throw new P(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(h=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(h=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(const l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){const l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){const u=l-a,h=new Int32Array(u);return j.arraycopy(s,a,h,0,u),h}static binarySearch(s,a,l){l===void 0&&(l=L.numberComparator);let u=0,h=s.length-1;for(;u<=h;){const d=h+u>>1,x=l(a,s[d]);if(x>0)u=d+1;else if(x<0)h=d-1;else return d}return-u-1}static numberComparator(s,a){return s-a}}class M{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}M.MIN_VALUE_32_BITS=-2147483648,M.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=H.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const a=H.makeArray(s);j.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),h=l[u];h&=~((1<<(s&31))-1);const d=l.length;for(;h===0;){if(++u===d)return a;h=l[u]}const x=u*32+M.numberOfTrailingZeros(h);return x>a?a:x}getNextUnset(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),h=~l[u];h&=~((1<<(s&31))-1);const d=l.length;for(;h===0;){if(++u===d)return a;h=~l[u]}const x=u*32+M.numberOfTrailingZeros(h);return x>a?a:x}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new w;if(a===s)return;a--;const l=Math.floor(s/32),u=Math.floor(a/32),h=this.bits;for(let d=l;d<=u;d++){const x=d>l?0:s&31,C=(2<<(d<u?31:a&31))-(1<<x);h[d]|=C}}clear(){const s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new w;if(a===s)return!0;a--;const u=Math.floor(s/32),h=Math.floor(a/32),d=this.bits;for(let x=u;x<=h;x++){const _=x>u?0:s&31,N=(2<<(x<h?31:a&31))-(1<<_)&4294967295;if((d[x]&N)!==(l?N:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new w("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let h=0;h<u;h++){let d=0;for(let x=0;x<8;x++)this.get(s)&&(d|=1<<7-x),s++;a[l+h]=d}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let h=0;h<l;h++){let d=u[h];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,s[a-h]=d}if(this.size!==l*32){const h=l*32-this.size;let d=s[0]>>>h;for(let x=1;x<l;x++){const _=s[x];d|=_<<32-h,s[x-1]=d,d=_>>>h}s[l-1]=d}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof H))return!1;const a=s;return this.size===a.size&&L.equals(this.bits,a.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new H(this.size,this.bits.slice())}}var J;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(J||(J={}));var q=J;class k extends g{static getFormatInstance(){return new k}}k.kind="FormatException";var A;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(A||(A={}));class I{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,I.VALUE_IDENTIFIER_TO_ECI.set(s,this),I.NAME_TO_ECI.set(l,this);const h=this.values;for(let d=0,x=h.length;d!==x;d++){const _=h[d];I.VALUES_TO_ECI.set(_,this)}for(const d of u)I.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new k("incorect value");const a=I.VALUES_TO_ECI.get(s);if(a===void 0)throw new k("incorect value");return a}static getCharacterSetECIByName(s){const a=I.NAME_TO_ECI.get(s);if(a===void 0)throw new k("incorect value");return a}equals(s){if(!(s instanceof I))return!1;const a=s;return this.getName()===a.getName()}}I.VALUE_IDENTIFIER_TO_ECI=new Map,I.VALUES_TO_ECI=new Map,I.NAME_TO_ECI=new Map,I.Cp437=new I(A.Cp437,Int32Array.from([0,2]),"Cp437"),I.ISO8859_1=new I(A.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),I.ISO8859_2=new I(A.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),I.ISO8859_3=new I(A.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),I.ISO8859_4=new I(A.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),I.ISO8859_5=new I(A.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),I.ISO8859_6=new I(A.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),I.ISO8859_7=new I(A.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),I.ISO8859_8=new I(A.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),I.ISO8859_9=new I(A.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),I.ISO8859_10=new I(A.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),I.ISO8859_11=new I(A.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),I.ISO8859_13=new I(A.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),I.ISO8859_14=new I(A.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),I.ISO8859_15=new I(A.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),I.ISO8859_16=new I(A.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),I.SJIS=new I(A.SJIS,20,"SJIS","Shift_JIS"),I.Cp1250=new I(A.Cp1250,21,"Cp1250","windows-1250"),I.Cp1251=new I(A.Cp1251,22,"Cp1251","windows-1251"),I.Cp1252=new I(A.Cp1252,23,"Cp1252","windows-1252"),I.Cp1256=new I(A.Cp1256,24,"Cp1256","windows-1256"),I.UnicodeBigUnmarked=new I(A.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),I.UTF8=new I(A.UTF8,26,"UTF8","UTF-8"),I.ASCII=new I(A.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),I.Big5=new I(A.Big5,28,"Big5"),I.GB18030=new I(A.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),I.EUC_KR=new I(A.EUC_KR,30,"EUC_KR","EUC-KR");class F extends g{}F.kind="UnsupportedOperationException";class z{static decode(s,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!z.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof I?s:I.getCharacterSetECIByName(s)}static decodeFallback(s,a){const l=this.encodingCharacterSet(a);if(z.isDecodeFallbackSupported(l)){let u="";for(let h=0,d=s.length;h<d;h++){let x=s[h].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(I.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new F(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(I.UTF8)||s.equals(I.ISO8859_1)||s.equals(I.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let h=0;h<l.length;h++)u.push(l[h].charCodeAt(0));return new Uint8Array(u)}}class O{static castAsNonUtf8Char(s,a=null){const l=a?a.getName():this.ISO88591;return z.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(q.CHARACTER_SET)!==void 0)return a.get(q.CHARACTER_SET).toString();const l=s.length;let u=!0,h=!0,d=!0,x=0,_=0,C=0,N=0,U=0,W=0,Z=0,te=0,ne=0,ae=0,pe=0;const Ie=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let be=0;be<l&&(u||h||d);be++){const _e=s[be]&255;d&&(x>0?_e&128?x--:d=!1:_e&128&&(_e&64?(x++,_e&32?(x++,_e&16?(x++,_e&8?d=!1:N++):C++):_++):d=!1)),u&&(_e>127&&_e<160?u=!1:_e>159&&(_e<192||_e===215||_e===247)&&pe++),h&&(U>0?_e<64||_e===127||_e>252?h=!1:U--:_e===128||_e===160||_e>239?h=!1:_e>160&&_e<224?(W++,te=0,Z++,Z>ne&&(ne=Z)):_e>127?(U++,Z=0,te++,te>ae&&(ae=te)):(Z=0,te=0))}return d&&x>0&&(d=!1),h&&U>0&&(h=!1),d&&(Ie||_+C+N>0)?O.UTF8:h&&(O.ASSUME_SHIFT_JIS||ne>=3||ae>=3)?O.SHIFT_JIS:u&&h?ne===2&&W===2||pe*10>=l?O.SHIFT_JIS:O.ISO88591:u?O.ISO88591:h?O.SHIFT_JIS:d?O.UTF8:O.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(d,x,_,C,N,U){if(d==="%%")return"%";if(a[++l]===void 0)return;d=C?parseInt(C.substr(1)):void 0;let W=N?parseInt(N.substr(1)):void 0,Z;switch(U){case"s":Z=a[l];break;case"c":Z=a[l][0];break;case"f":Z=parseFloat(a[l]).toFixed(d);break;case"p":Z=parseFloat(a[l]).toPrecision(d);break;case"e":Z=parseFloat(a[l]).toExponential(d);break;case"x":Z=parseInt(a[l]).toString(W||16);break;case"d":Z=parseFloat(parseInt(a[l],W||10).toPrecision(d)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(W);let te=parseInt(_),ne=_&&_[0]+""=="0"?"0":" ";for(;Z.length<te;)Z=x!==void 0?Z+ne:ne+Z;return Z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,u)}static getBytes(s,a){return z.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}O.SHIFT_JIS=I.SJIS.getName(),O.GB2312="GB2312",O.ISO88591=I.ISO8859_1.getName(),O.EUC_JP="EUC_JP",O.UTF8=I.UTF8.getName(),O.PLATFORM_DEFAULT_ENCODING=O.UTF8,O.ASSUME_SHIFT_JIS=!1;class R{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=O.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class ${constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new w("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const a=s.length,l=s[0].length,u=new $(l,a);for(let h=0;h<a;h++){const d=s[h];for(let x=0;x<l;x++)d[x]&&u.set(x,h)}return u}static parseFromString(s,a,l){if(s===null)throw new w("stringRepresentation cannot be null");const u=new Array(s.length);let h=0,d=0,x=-1,_=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(h>d){if(x===-1)x=h-d;else if(h-d!==x)throw new w("row lengths do not match");d=h,_++}C++}else if(s.substring(C,C+a.length)===a)C+=a.length,u[h]=!0,h++;else if(s.substring(C,C+l.length)===l)C+=l.length,u[h]=!1,h++;else throw new w("illegal character encountered: "+s.substring(C));if(h>d){if(x===-1)x=h-d;else if(h-d!==x)throw new w("row lengths do not match");_++}const N=new $(x,_);for(let U=0;U<h;U++)u[U]&&N.set(Math.floor(U%x),Math.floor(U/x));return N}get(s,a){const l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new w("input matrix dimensions do not match");const a=new H(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let h=0,d=this.height;h<d;h++){const x=h*l,_=s.getRow(h,a).getBitArray();for(let C=0;C<l;C++)u[x+C]^=_[C]}}clear(){const s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new w("Left and top must be nonnegative");if(u<1||l<1)throw new w("Height and width must be at least 1");const h=s+l,d=a+u;if(d>this.height||h>this.width)throw new w("The region must fit inside the matrix");const x=this.rowSize,_=this.bits;for(let C=a;C<d;C++){const N=C*x;for(let U=s;U<h;U++)_[N+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new H(this.width):a.clear();const l=this.rowSize,u=this.bits,h=s*l;for(let d=0;d<l;d++)a.setBulk(d*32,u[h+d]);return a}setRow(s,a){j.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),a=this.getHeight();let l=new H(s),u=new H(s);for(let h=0,d=Math.floor((a+1)/2);h<d;h++)l=this.getRow(h,l),u=this.getRow(a-1-h,u),l.reverse(),u.reverse(),this.setRow(h,u),this.setRow(a-1-h,l)}getEnclosingRectangle(){const s=this.width,a=this.height,l=this.rowSize,u=this.bits;let h=s,d=a,x=-1,_=-1;for(let C=0;C<a;C++)for(let N=0;N<l;N++){const U=u[C*l+N];if(U!==0){if(C<d&&(d=C),C>_&&(_=C),N*32<h){let W=0;for(;!(U<<31-W&4294967295);)W++;N*32+W<h&&(h=N*32+W)}if(N*32+31>x){let W=31;for(;!(U>>>W);)W--;N*32+W>x&&(x=N*32+W)}}}return x<h||_<d?null:Int32Array.from([h,d,x-h+1,_-d+1])}getTopLeftOnBit(){const s=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/s;let h=l%s*32;const d=a[l];let x=0;for(;!(d<<31-x&4294967295);)x++;return h+=x,Int32Array.from([h,u])}getBottomRightOnBit(){const s=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/s);let h=Math.floor(l%s)*32;const d=a[l];let x=31;for(;!(d>>>x);)x--;return h+=x,Int32Array.from([h,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof $))return!1;const a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&L.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+L.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new R;for(let h=0,d=this.height;h<d;h++){for(let x=0,_=this.width;x<_;x++)u.append(this.get(x,h)?s:a);u.append(l)}return u.toString()}clone(){return new $(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends g{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class X extends S{constructor(s){super(s),this.luminances=X.EMPTY,this.buckets=new Int32Array(X.LUMINANCE_BUCKETS)}getBlackRow(s,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new H(u):a.clear(),this.initArrays(u);const h=l.getRow(s,this.luminances),d=this.buckets;for(let _=0;_<u;_++)d[(h[_]&255)>>X.LUMINANCE_SHIFT]++;const x=X.estimateBlackPoint(d);if(u<3)for(let _=0;_<u;_++)(h[_]&255)<x&&a.set(_);else{let _=h[0]&255,C=h[1]&255;for(let N=1;N<u-1;N++){const U=h[N+1]&255;(C*4-_-U)/2<x&&a.set(N),_=C,C=U}}return a}getBlackMatrix(){const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new $(a,l);this.initArrays(a);const h=this.buckets;for(let _=1;_<5;_++){const C=Math.floor(l*_/5),N=s.getRow(C,this.luminances),U=Math.floor(a*4/5);for(let W=Math.floor(a/5);W<U;W++){const Z=N[W]&255;h[Z>>X.LUMINANCE_SHIFT]++}}const d=X.estimateBlackPoint(h),x=s.getMatrix();for(let _=0;_<l;_++){const C=_*a;for(let N=0;N<a;N++)(x[C+N]&255)<d&&u.set(N,_)}return u}createBinarizer(s){return new X(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const a=this.buckets;for(let l=0;l<X.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){const a=s.length;let l=0,u=0,h=0;for(let N=0;N<a;N++)s[N]>h&&(u=N,h=s[N]),s[N]>l&&(l=s[N]);let d=0,x=0;for(let N=0;N<a;N++){const U=N-u,W=s[N]*U*U;W>x&&(d=N,x=W)}if(u>d){const N=u;u=d,d=N}if(d-u<=a/16)throw new Y;let _=d-1,C=-1;for(let N=d-1;N>u;N--){const U=N-u,W=U*U*(d-N)*(l-s[N]);W>C&&(_=N,C=W)}return _<<X.LUMINANCE_SHIFT}}X.LUMINANCE_BITS=5,X.LUMINANCE_SHIFT=8-X.LUMINANCE_BITS,X.LUMINANCE_BUCKETS=1<<X.LUMINANCE_BITS,X.EMPTY=Uint8ClampedArray.from([0]);class G extends X{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=G.MINIMUM_DIMENSION&&l>=G.MINIMUM_DIMENSION){const u=s.getMatrix();let h=a>>G.BLOCK_SIZE_POWER;a&G.BLOCK_SIZE_MASK&&h++;let d=l>>G.BLOCK_SIZE_POWER;l&G.BLOCK_SIZE_MASK&&d++;const x=G.calculateBlackPoints(u,h,d,a,l),_=new $(a,l);G.calculateThresholdForBlock(u,h,d,a,l,x,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new G(s)}static calculateThresholdForBlock(s,a,l,u,h,d,x){const _=h-G.BLOCK_SIZE,C=u-G.BLOCK_SIZE;for(let N=0;N<l;N++){let U=N<<G.BLOCK_SIZE_POWER;U>_&&(U=_);const W=G.cap(N,2,l-3);for(let Z=0;Z<a;Z++){let te=Z<<G.BLOCK_SIZE_POWER;te>C&&(te=C);const ne=G.cap(Z,2,a-3);let ae=0;for(let Ie=-2;Ie<=2;Ie++){const be=d[W+Ie];ae+=be[ne-2]+be[ne-1]+be[ne]+be[ne+1]+be[ne+2]}const pe=ae/25;G.thresholdBlock(s,te,U,pe,u,x)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,h,d){for(let x=0,_=l*h+a;x<G.BLOCK_SIZE;x++,_+=h)for(let C=0;C<G.BLOCK_SIZE;C++)(s[_+C]&255)<=u&&d.set(a+C,l+x)}static calculateBlackPoints(s,a,l,u,h){const d=h-G.BLOCK_SIZE,x=u-G.BLOCK_SIZE,_=new Array(l);for(let C=0;C<l;C++){_[C]=new Int32Array(a);let N=C<<G.BLOCK_SIZE_POWER;N>d&&(N=d);for(let U=0;U<a;U++){let W=U<<G.BLOCK_SIZE_POWER;W>x&&(W=x);let Z=0,te=255,ne=0;for(let pe=0,Ie=N*u+W;pe<G.BLOCK_SIZE;pe++,Ie+=u){for(let be=0;be<G.BLOCK_SIZE;be++){const _e=s[Ie+be]&255;Z+=_e,_e<te&&(te=_e),_e>ne&&(ne=_e)}if(ne-te>G.MIN_DYNAMIC_RANGE)for(pe++,Ie+=u;pe<G.BLOCK_SIZE;pe++,Ie+=u)for(let be=0;be<G.BLOCK_SIZE;be++)Z+=s[Ie+be]&255}let ae=Z>>G.BLOCK_SIZE_POWER*2;if(ne-te<=G.MIN_DYNAMIC_RANGE&&(ae=te/2,C>0&&U>0)){const pe=(_[C-1][U]+2*_[C][U-1]+_[C-1][U-1])/4;te<pe&&(ae=pe)}_[C][U]=ae}}return _}}G.BLOCK_SIZE_POWER=3,G.BLOCK_SIZE=1<<G.BLOCK_SIZE_POWER,G.BLOCK_SIZE_MASK=G.BLOCK_SIZE-1,G.MINIMUM_DIMENSION=G.BLOCK_SIZE*5,G.MIN_DYNAMIC_RANGE=24;class re{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let a=new R;for(let l=0;l<this.height;l++){const u=this.getRow(l,s);for(let h=0;h<this.width;h++){const d=u[h]&255;let x;d<64?x="#":d<128?x="+":d<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ee extends re{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){const l=this.delegate.getRow(s,a),u=this.getWidth();for(let h=0;h<u;h++)l[h]=255-(l[h]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new ee(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ee(this.delegate.rotateCounterClockwise45())}}class ie extends re{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=ie.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const a=s.getContext("2d").getImageData(0,0,s.width,s.height);return ie.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){const u=new Uint8ClampedArray(a*l);for(let h=0,d=0,x=s.length;h<x;h+=4,d++){let _;if(s[h+3]===0)_=255;else{const N=s[h],U=s[h+1],W=s[h+2];_=306*N+601*U+117*W+512>>10}u[d]=_}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*ie.DEGREE_TO_RADIANS,h=this.canvas.width,d=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*h+Math.abs(Math.sin(u))*d),_=Math.ceil(Math.abs(Math.sin(u))*h+Math.abs(Math.cos(u))*d);return a.width=x,a.height=_,l.translate(x/2,_/2),l.rotate(u),l.drawImage(this.canvas,h/-2,d/-2),this.buffer=ie.makeBufferFromCanvasImageData(a),this}invert(){return new ee(this)}}ie.DEGREE_TO_RADIANS=Math.PI/180;class fe{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||pc||self||window||void 0)&&(globalThis||pc||self||window||void 0).__awaiter||function(B,s,a,l){function u(h){return h instanceof a?h:new a(function(d){d(h)})}return new(a||(a=Promise))(function(h,d){function x(N){try{C(l.next(N))}catch(U){d(U)}}function _(N){try{C(l.throw(N))}catch(U){d(U)}}function C(N){N.done?h(N.value):u(N.value).then(x,_)}C((l=l.apply(B,s||[])).next())})};class Ee{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of s){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const h=l.deviceId||l.id,d=l.label||`Video device ${a.length+1}`,x=l.groupId,_={deviceId:h,label:d,kind:u,groupId:x};a.push(_)}return a})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new fe(a.deviceId,a.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return he(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return he(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return he(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return he(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const h={video:u};return yield this.decodeFromConstraints(h,a,l)})}decodeFromConstraints(s,a,l){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return he(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){const l=document.getElementById(s);if(!l)throw new y(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new y(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new y("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new y("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new y("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new y("An image element must be provided.");this.reset();const a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){const a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new y("A video element must be provided.");this.reset();const a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new y("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(h,d)=>{if(this._stopAsyncDecode){d(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(s);h(x)}catch(x){const _=a&&x instanceof Y,N=(x instanceof b||x instanceof k)&&l;if(_||N)return setTimeout(u,this._timeBetweenDecodingAttempts,h,d);d(x)}};return new Promise((h,d)=>u(h,d))}decodeContinuously(s,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const h=u instanceof b||u instanceof k,d=u instanceof Y;(h||d)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const a=this.getCaptureCanvas(s),l=new ie(a),u=new G(l);return new v(u)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class ue{constructor(s,a,l=a==null?0:8*a.length,u,h,d=j.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=h,this.timestamp=d,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=h,this.resultMetadata=null,d==null?this.timestamp=j.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(a.length+s.length);j.arraycopy(a,0,l,0,a.length),j.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ce;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ce||(ce={}));var me=ce,Me;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var Oe=Me;class ze{constructor(s,a,l,u,h=-1,d=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=d,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class tt{constructor(s,a){if(a.length===0)throw new w;this.field=s;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),j.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(s===1){l=0;for(let d=0,x=a.length;d!==x;d++){const _=a[d];l=et.addOrSubtract(l,_)}return l}l=a[0];const u=a.length,h=this.field;for(let d=1;d<u;d++)l=et.addOrSubtract(h.multiply(s,l),a[d]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){const d=a;a=l,l=d}let u=new Int32Array(l.length);const h=l.length-a.length;j.arraycopy(l,0,u,0,h);for(let d=h;d<l.length;d++)u[d]=et.addOrSubtract(a[d-h],l[d]);return new tt(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=s.coefficients,h=u.length,d=new Int32Array(l+h-1),x=this.field;for(let _=0;_<l;_++){const C=a[_];for(let N=0;N<h;N++)d[_+N]=et.addOrSubtract(d[_+N],x.multiply(C,u[N]))}return new tt(x,d)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),h=this.coefficients;for(let d=0;d<a;d++)u[d]=l.multiply(h[d],s);return new tt(l,u)}multiplyByMonomial(s,a){if(s<0)throw new w;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,h=new Int32Array(u+s),d=this.field;for(let x=0;x<u;x++)h[x]=d.multiply(l[x],a);return new tt(d,h)}divide(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new w("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const h=s.getCoefficient(s.getDegree()),d=a.inverse(h);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){const x=u.getDegree()-s.getDegree(),_=a.multiply(u.getCoefficient(u.getDegree()),d),C=s.multiplyByMonomial(x,_),N=a.buildMonomial(x,_);l=l.addOrSubtract(N),u=u.addOrSubtract(C)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}class Tt extends g{}Tt.kind="ArithmeticException";class qe extends et{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let h=1;for(let x=0;x<a;x++)u[x]=h,h*=2,h>=a&&(h^=s,h&=a-1);this.expTable=u;const d=new Int32Array(a);for(let x=0;x<a-1;x++)d[u[x]]=x;this.logTable=d,this.zero=new tt(this,Int32Array.from([0])),this.one=new tt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new w;if(a===0)return this.zero;const l=new Int32Array(s+1);return l[0]=a,new tt(this,l)}inverse(s){if(s===0)throw new Tt;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+M.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}qe.AZTEC_DATA_12=new qe(4201,4096,1),qe.AZTEC_DATA_10=new qe(1033,1024,1),qe.AZTEC_DATA_6=new qe(67,64,1),qe.AZTEC_PARAM=new qe(19,16,1),qe.QR_CODE_FIELD_256=new qe(285,256,0),qe.DATA_MATRIX_FIELD_256=new qe(301,256,1),qe.AZTEC_DATA_8=qe.DATA_MATRIX_FIELD_256,qe.MAXICODE_FIELD_64=qe.AZTEC_DATA_6;class vn extends g{}vn.kind="ReedSolomonException";class pt extends g{}pt.kind="IllegalStateException";class jt{constructor(s){this.field=s}decode(s,a){const l=this.field,u=new tt(l,s),h=new Int32Array(a);let d=!0;for(let Z=0;Z<a;Z++){const te=u.evaluateAt(l.exp(Z+l.getGeneratorBase()));h[h.length-1-Z]=te,te!==0&&(d=!1)}if(d)return;const x=new tt(l,h),_=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),C=_[0],N=_[1],U=this.findErrorLocations(C),W=this.findErrorMagnitudes(N,U);for(let Z=0;Z<U.length;Z++){const te=s.length-1-l.log(U[Z]);if(te<0)throw new vn("Bad error location");s[te]=qe.addOrSubtract(s[te],W[Z])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){const Z=s;s=a,a=Z}const u=this.field;let h=s,d=a,x=u.getZero(),_=u.getOne();for(;d.getDegree()>=(l/2|0);){let Z=h,te=x;if(h=d,x=_,h.isZero())throw new vn("r_{i-1} was zero");d=Z;let ne=u.getZero();const ae=h.getCoefficient(h.getDegree()),pe=u.inverse(ae);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){const Ie=d.getDegree()-h.getDegree(),be=u.multiply(d.getCoefficient(d.getDegree()),pe);ne=ne.addOrSubtract(u.buildMonomial(Ie,be)),d=d.addOrSubtract(h.multiplyByMonomial(Ie,be))}if(_=ne.multiply(x).addOrSubtract(te),d.getDegree()>=h.getDegree())throw new pt("Division algorithm failed to reduce polynomial?")}const C=_.getCoefficient(0);if(C===0)throw new vn("sigmaTilde(0) was zero");const N=u.inverse(C),U=_.multiplyScalar(N),W=d.multiplyScalar(N);return[U,W]}findErrorLocations(s){const a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const h=this.field;for(let d=1;d<h.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(l[u]=h.inverse(d),u++);if(u!==a)throw new vn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){const l=a.length,u=new Int32Array(l),h=this.field;for(let d=0;d<l;d++){const x=h.inverse(a[d]);let _=1;for(let C=0;C<l;C++)if(d!==C){const N=h.multiply(a[C],x),U=N&1?N&-2:N|1;_=h.multiply(_,U)}u[d]=h.multiply(s.evaluateAt(x),h.inverse(_)),h.getGeneratorBase()!==0&&(u[d]=h.multiply(u[d],x))}return u}}var Ye;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(Ye||(Ye={}));class Be{decode(s){this.ddata=s;let a=s.getBits(),l=this.extractBits(a),u=this.correctBits(l),h=Be.convertBoolArrayToByteArray(u),d=Be.getEncodedData(u),x=new ze(h,d,null,null);return x.setNumBits(u.length),x}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let a=s.length,l=Ye.UPPER,u=Ye.UPPER,h="",d=0;for(;d<a;)if(u===Ye.BINARY){if(a-d<5)break;let x=Be.readCode(s,d,5);if(d+=5,x===0){if(a-d<11)break;x=Be.readCode(s,d,11)+31,d+=11}for(let _=0;_<x;_++){if(a-d<8){d=a;break}const C=Be.readCode(s,d,8);h+=O.castAsNonUtf8Char(C),d+=8}u=l}else{let x=u===Ye.DIGIT?4:5;if(a-d<x)break;let _=Be.readCode(s,d,x);d+=x;let C=Be.getCharacter(u,_);C.startsWith("CTRL_")?(l=u,u=Be.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(h+=C,u=l)}return h}static getTable(s){switch(s){case"L":return Ye.LOWER;case"P":return Ye.PUNCT;case"M":return Ye.MIXED;case"D":return Ye.DIGIT;case"B":return Ye.BINARY;case"U":default:return Ye.UPPER}}static getCharacter(s,a){switch(s){case Ye.UPPER:return Be.UPPER_TABLE[a];case Ye.LOWER:return Be.LOWER_TABLE[a];case Ye.MIXED:return Be.MIXED_TABLE[a];case Ye.PUNCT:return Be.PUNCT_TABLE[a];case Ye.DIGIT:return Be.DIGIT_TABLE[a];default:throw new pt("Bad table")}}correctBits(s){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=qe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=qe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=qe.AZTEC_DATA_10):(l=12,a=qe.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),h=s.length/l;if(h<u)throw new k;let d=s.length%l,x=new Int32Array(h);for(let W=0;W<h;W++,d+=l)x[W]=Be.readCode(s,d,l);try{new jt(a).decode(x,h-u)}catch(W){throw new k(W)}let _=(1<<l)-1,C=0;for(let W=0;W<u;W++){let Z=x[W];if(Z===0||Z===_)throw new k;(Z===1||Z===_-1)&&C++}let N=new Array(u*l-C),U=0;for(let W=0;W<u;W++){let Z=x[W];if(Z===1||Z===_-1)N.fill(Z>1,U,U+l-1),U+=l-1;else for(let te=l-1;te>=0;--te)N[U++]=(Z&1<<te)!==0}return N}extractBits(s){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,h=new Int32Array(u),d=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<h.length;x++)h[x]=x;else{let x=u+1+2*M.truncDivision(M.truncDivision(u,2)-1,15),_=u/2,C=M.truncDivision(x,2);for(let N=0;N<_;N++){let U=N+M.truncDivision(N,15);h[_-N-1]=C-U-1,h[_+N]=C+U+1}}for(let x=0,_=0;x<l;x++){let C=(l-x)*4+(a?9:12),N=x*2,U=u-1-N;for(let W=0;W<C;W++){let Z=W*2;for(let te=0;te<2;te++)d[_+Z+te]=s.get(h[N+te],h[N+W]),d[_+2*C+Z+te]=s.get(h[N+W],h[U-te]),d[_+4*C+Z+te]=s.get(h[U-te],h[U-W]),d[_+6*C+Z+te]=s.get(h[U-W],h[N+te])}_+=C*8}return d}static readCode(s,a,l){let u=0;for(let h=a;h<a+l;h++)u<<=1,s[h]&&(u|=1);return u}static readByte(s,a){let l=s.length-a;return l>=8?Be.readCode(s,a,8):Be.readCode(s,a,l)<<8-l}static convertBoolArrayToByteArray(s){let a=new Uint8Array((s.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Be.readByte(s,8*l);return a}totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}Be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Re{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){const h=s-l,d=a-u;return Math.sqrt(h*h+d*d)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){const h=s[l];a+=h}return a}}class at{static floatToIntBits(s){return s}}at.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Te){const a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*at.floatToIntBits(this.x)+at.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]);let h,d,x;if(l>=a&&l>=u?(d=s[0],h=s[1],x=s[2]):u>=l&&u>=a?(d=s[1],h=s[0],x=s[2]):(d=s[2],h=s[0],x=s[1]),this.crossProductZ(h,d,x)<0){const _=h;h=x,x=_}s[0]=h,s[1]=d,s[2]=x}static distance(s,a){return Re.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){const u=a.x,h=a.y;return(l.x-u)*(s.y-h)-(l.y-h)*(s.x-u)}}class Cn{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Ft extends Cn{constructor(s,a,l,u,h){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(s,a,l,u){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),a==null&&(a=it.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),u==null&&(u=s.getHeight()/2|0);const h=a/2|0;if(this.leftInit=l-h,this.rightInit=l+h,this.upInit=u-h,this.downInit=u+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let s=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,h=!1,d=!0,x=!1,_=!1,C=!1,N=!1,U=!1;const W=this.width,Z=this.height;for(;d;){d=!1;let te=!0;for(;(te||!_)&&a<W;)te=this.containsBlackPoint(l,u,a,!1),te?(a++,d=!0,_=!0):_||a++;if(a>=W){h=!0;break}let ne=!0;for(;(ne||!C)&&u<Z;)ne=this.containsBlackPoint(s,a,u,!0),ne?(u++,d=!0,C=!0):C||u++;if(u>=Z){h=!0;break}let ae=!0;for(;(ae||!N)&&s>=0;)ae=this.containsBlackPoint(l,u,s,!1),ae?(s--,d=!0,N=!0):N||s--;if(s<0){h=!0;break}let pe=!0;for(;(pe||!U)&&l>=0;)pe=this.containsBlackPoint(s,a,l,!0),pe?(l--,d=!0,U=!0):U||l--;if(l<0){h=!0;break}d&&(x=!0)}if(!h&&x){const te=a-s;let ne=null;for(let be=1;ne===null&&be<te;be++)ne=this.getBlackPointOnSegment(s,u-be,s+be,u);if(ne==null)throw new Y;let ae=null;for(let be=1;ae===null&&be<te;be++)ae=this.getBlackPointOnSegment(s,l+be,s+be,l);if(ae==null)throw new Y;let pe=null;for(let be=1;pe===null&&be<te;be++)pe=this.getBlackPointOnSegment(a,l+be,a-be,l);if(pe==null)throw new Y;let Ie=null;for(let be=1;Ie===null&&be<te;be++)Ie=this.getBlackPointOnSegment(a,u-be,a-be,u);if(Ie==null)throw new Y;return this.centerEdges(Ie,ne,pe,ae)}else throw new Y}getBlackPointOnSegment(s,a,l,u){const h=Re.round(Re.distance(s,a,l,u)),d=(l-s)/h,x=(u-a)/h,_=this.image;for(let C=0;C<h;C++){const N=Re.round(s+C*d),U=Re.round(a+C*x);if(_.get(N,U))return new Te(N,U)}return null}centerEdges(s,a,l,u){const h=s.getX(),d=s.getY(),x=a.getX(),_=a.getY(),C=l.getX(),N=l.getY(),U=u.getX(),W=u.getY(),Z=it.CORR;return h<this.width/2?[new Te(U-Z,W+Z),new Te(x+Z,_+Z),new Te(C-Z,N-Z),new Te(h+Z,d-Z)]:[new Te(U+Z,W+Z),new Te(x+Z,_-Z),new Te(C-Z,N+Z),new Te(h-Z,d-Z)]}containsBlackPoint(s,a,l,u){const h=this.image;if(u){for(let d=s;d<=a;d++)if(h.get(d,l))return!0}else for(let d=s;d<=a;d++)if(h.get(l,d))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class Zt{static checkAndNudgePoints(s,a){const l=s.getWidth(),u=s.getHeight();let h=!0;for(let d=0;d<a.length&&h;d+=2){const x=Math.floor(a[d]),_=Math.floor(a[d+1]);if(x<-1||x>l||_<-1||_>u)throw new Y;h=!1,x===-1?(a[d]=0,h=!0):x===l&&(a[d]=l-1,h=!0),_===-1?(a[d+1]=0,h=!0):_===u&&(a[d+1]=u-1,h=!0)}h=!0;for(let d=a.length-2;d>=0&&h;d-=2){const x=Math.floor(a[d]),_=Math.floor(a[d+1]);if(x<-1||x>l||_<-1||_>u)throw new Y;h=!1,x===-1?(a[d]=0,h=!0):x===l&&(a[d]=l-1,h=!0),_===-1?(a[d+1]=0,h=!0):_===u&&(a[d+1]=u-1,h=!0)}}}class Jt{constructor(s,a,l,u,h,d,x,_,C){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=h,this.a32=d,this.a13=x,this.a23=_,this.a33=C}static quadrilateralToQuadrilateral(s,a,l,u,h,d,x,_,C,N,U,W,Z,te,ne,ae){const pe=Jt.quadrilateralToSquare(s,a,l,u,h,d,x,_);return Jt.squareToQuadrilateral(C,N,U,W,Z,te,ne,ae).times(pe)}transformPoints(s){const a=s.length,l=this.a11,u=this.a12,h=this.a13,d=this.a21,x=this.a22,_=this.a23,C=this.a31,N=this.a32,U=this.a33;for(let W=0;W<a;W+=2){const Z=s[W],te=s[W+1],ne=h*Z+_*te+U;s[W]=(l*Z+d*te+C)/ne,s[W+1]=(u*Z+x*te+N)/ne}}transformPointsWithValues(s,a){const l=this.a11,u=this.a12,h=this.a13,d=this.a21,x=this.a22,_=this.a23,C=this.a31,N=this.a32,U=this.a33,W=s.length;for(let Z=0;Z<W;Z++){const te=s[Z],ne=a[Z],ae=h*te+_*ne+U;s[Z]=(l*te+d*ne+C)/ae,a[Z]=(u*te+x*ne+N)/ae}}static squareToQuadrilateral(s,a,l,u,h,d,x,_){const C=s-l+h-x,N=a-u+d-_;if(C===0&&N===0)return new Jt(l-s,h-l,s,u-a,d-u,a,0,0,1);{const U=l-h,W=x-h,Z=u-d,te=_-d,ne=U*te-W*Z,ae=(C*te-W*N)/ne,pe=(U*N-C*Z)/ne;return new Jt(l-s+ae*l,x-s+pe*x,s,u-a+ae*u,_-a+pe*_,a,ae,pe,1)}}static quadrilateralToSquare(s,a,l,u,h,d,x,_){return Jt.squareToQuadrilateral(s,a,l,u,h,d,x,_).buildAdjoint()}buildAdjoint(){return new Jt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Jt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Oi extends Zt{sampleGrid(s,a,l,u,h,d,x,_,C,N,U,W,Z,te,ne,ae,pe,Ie,be){const _e=Jt.quadrilateralToQuadrilateral(u,h,d,x,_,C,N,U,W,Z,te,ne,ae,pe,Ie,be);return this.sampleGridWithTransform(s,a,l,_e)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new Y;const h=new $(a,l),d=new Float32Array(2*a);for(let x=0;x<l;x++){const _=d.length,C=x+.5;for(let N=0;N<_;N+=2)d[N]=N/2+.5,d[N+1]=C;u.transformPoints(d),Zt.checkAndNudgePoints(s,d);try{for(let N=0;N<_;N+=2)s.get(Math.floor(d[N]),Math.floor(d[N+1]))&&h.set(N/2,x)}catch{throw new Y}}return h}}class Nt{static setGridSampler(s){Nt.gridSampler=s}static getInstance(){return Nt.gridSampler}}Nt.gridSampler=new Oi;class Wt{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class An{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let d=l[0];l[0]=l[2],l[2]=d}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),h=this.getMatrixCornerPoints(l);return new Ft(u,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new Y;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let d=0;d<4;d++){let x=l[(this.shift+d)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let h=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,h,d)=>{let x=(u>>a-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(M.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new Y}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let h=l-u,d=new Int32Array(l);for(let _=l-1;_>=0;--_)d[_]=s&15,s>>=4;try{new jt(qe.AZTEC_PARAM).decode(d,h)}catch{throw new Y}let x=0;for(let _=0;_<u;_++)x=(x<<4)+d[_];return x}getBullsEyeCorners(s){let a=s,l=s,u=s,h=s,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(a,d,1,-1),W=this.getFirstDifferent(l,d,1,1),Z=this.getFirstDifferent(u,d,-1,1),te=this.getFirstDifferent(h,d,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(te,U)*this.nbCenterLayers/(this.distancePoint(h,a)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(U,W,Z,te))break}a=U,l=W,u=Z,h=te,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let x=new Te(a.getX()+.5,a.getY()-.5),_=new Te(l.getX()+.5,l.getY()+.5),C=new Te(u.getX()-.5,u.getY()+.5),N=new Te(h.getX()-.5,h.getY()-.5);return this.expandSquare([x,_,C,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let x=new it(this.image).detect();s=x[0],a=x[1],l=x[2],u=x[3]}catch{let _=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Wt(_+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Wt(_+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Wt(_-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Wt(_-7,C-7),!1,-1,-1).toResultPoint()}let h=Re.round((s.getX()+u.getX()+a.getX()+l.getX())/4),d=Re.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let x=new it(this.image,15,h,d).detect();s=x[0],a=x[1],l=x[2],u=x[3]}catch{s=this.getFirstDifferent(new Wt(h+7,d-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Wt(h+7,d+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Wt(h-7,d+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Wt(h-7,d-7),!1,-1,-1).toResultPoint()}return h=Re.round((s.getX()+u.getX()+a.getX()+l.getX())/4),d=Re.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Wt(h,d)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,h){let d=Nt.getInstance(),x=this.getDimension(),_=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return d.sampleGrid(s,x,x,_,_,C,_,C,C,_,C,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),h.getX(),h.getY())}sampleLine(s,a,l){let u=0,h=this.distanceResultPoint(s,a),d=h/l,x=s.getX(),_=s.getY(),C=d*(a.getX()-s.getX())/h,N=d*(a.getY()-s.getY())/h;for(let U=0;U<l;U++)this.image.get(Re.round(x+U*C),Re.round(_+U*N))&&(u|=1<<l-U-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let h=3;s=new Wt(s.getX()-h,s.getY()+h),a=new Wt(a.getX()-h,a.getY()-h),l=new Wt(l.getX()+h,l.getY()-h),u=new Wt(u.getX()+h,u.getY()+h);let d=this.getColor(u,s);if(d===0)return!1;let x=this.getColor(s,a);return x!==d||(x=this.getColor(a,l),x!==d)?!1:(x=this.getColor(l,u),x===d)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,h=(a.getY()-s.getY())/l,d=0,x=s.getX(),_=s.getY(),C=this.image.get(s.getX(),s.getY()),N=Math.ceil(l);for(let W=0;W<N;W++)x+=u,_+=h,this.image.get(Re.round(x),Re.round(_))!==C&&d++;let U=d/l;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(s,a,l,u){let h=s.getX()+l,d=s.getY()+u;for(;this.isValid(h,d)&&this.image.get(h,d)===a;)h+=l,d+=u;for(h-=l,d-=u;this.isValid(h,d)&&this.image.get(h,d)===a;)h+=l;for(h-=l;this.isValid(h,d)&&this.image.get(h,d)===a;)d+=u;return d-=u,new Wt(h,d)}expandSquare(s,a,l){let u=l/(2*a),h=s[0].getX()-s[2].getX(),d=s[0].getY()-s[2].getY(),x=(s[0].getX()+s[2].getX())/2,_=(s[0].getY()+s[2].getY())/2,C=new Te(x+u*h,_+u*d),N=new Te(x-u*h,_-u*d);h=s[1].getX()-s[3].getX(),d=s[1].getY()-s[3].getY(),x=(s[1].getX()+s[3].getX())/2,_=(s[1].getY()+s[3].getY())/2;let U=new Te(x+u*h,_+u*d),W=new Te(x-u*h,_-u*d);return[C,U,N,W]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=Re.round(s.getX()),l=Re.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return Re.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return Re.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(M.truncDivision(this.nbLayers-4,8)+1)+15}}class Mn{decode(s,a=null){let l=null,u=new An(s.getBlackMatrix()),h=null,d=null;try{let N=u.detectMirror(!1);h=N.getPoints(),this.reportFoundResultPoints(a,h),d=new Be().decode(N)}catch(N){l=N}if(d==null)try{let N=u.detectMirror(!0);h=N.getPoints(),this.reportFoundResultPoints(a,h),d=new Be().decode(N)}catch(N){throw l??N}let x=new ue(d.getText(),d.getRawBytes(),d.getNumBits(),h,me.AZTEC,j.currentTimeMillis()),_=d.getByteSegments();_!=null&&x.putMetadata(Oe.BYTE_SEGMENTS,_);let C=d.getECLevel();return C!=null&&x.putMetadata(Oe.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(q.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,h,d)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Qn extends Ee{constructor(s=500){super(new Mn,s)}}class lt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(q.TRY_HARDER)===!0&&s.isRotateSupported()){const h=s.rotateCounterClockwise(),d=this.doDecode(h,a),x=d.getResultMetadata();let _=270;x!==null&&x.get(Oe.ORIENTATION)===!0&&(_=_+x.get(Oe.ORIENTATION)%360),d.putMetadata(Oe.ORIENTATION,_);const C=d.getResultPoints();if(C!==null){const N=h.getHeight();for(let U=0;U<C.length;U++)C[U]=new Te(N-C[U].getY()-1,C[U].getX())}return d}else throw new Y}}reset(){}doDecode(s,a){const l=s.getWidth(),u=s.getHeight();let h=new H(l);const d=a&&a.get(q.TRY_HARDER)===!0,x=Math.max(1,u>>(d?8:5));let _;d?_=u:_=15;const C=Math.trunc(u/2);for(let N=0;N<_;N++){const U=Math.trunc((N+1)/2),W=(N&1)===0,Z=C+x*(W?U:-U);if(Z<0||Z>=u)break;try{h=s.getBlackRow(Z,h)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(h.reverse(),a&&a.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;a.forEach((ae,pe)=>ne.set(pe,ae)),ne.delete(q.NEED_RESULT_POINT_CALLBACK),a=ne}try{const ne=this.decodeRow(Z,h,a);if(te===1){ne.putMetadata(Oe.ORIENTATION,180);const ae=ne.getResultPoints();ae!==null&&(ae[0]=new Te(l-ae[0].getX()-1,ae[0].getY()),ae[1]=new Te(l-ae[1].getX()-1,ae[1].getY()))}return ne}catch{}}}throw new Y}static recordPattern(s,a,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const h=s.getSize();if(a>=h)throw new Y;let d=!s.get(a),x=0,_=a;for(;_<h;){if(s.get(_)!==d)l[x]++;else{if(++x===u)break;l[x]=1,d=!d}_++}if(!(x===u||x===u-1&&_===h))throw new Y}static recordPatternInReverse(s,a,l){let u=l.length,h=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==h&&(u--,h=!h);if(u>=0)throw new Y;lt.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){const u=s.length;let h=0,d=0;for(let C=0;C<u;C++)h+=s[C],d+=a[C];if(h<d)return Number.POSITIVE_INFINITY;const x=h/d;l*=x;let _=0;for(let C=0;C<u;C++){const N=s[C],U=a[C]*x,W=N>U?N-U:U-N;if(W>l)return Number.POSITIVE_INFINITY;_+=W}return _/h}}class ve extends lt{static findStartPattern(s){const a=s.getSize(),l=s.getNextSet(0);let u=0,h=Int32Array.from([0,0,0,0,0,0]),d=l,x=!1;const _=6;for(let C=l;C<a;C++)if(s.get(C)!==x)h[u]++;else{if(u===_-1){let N=ve.MAX_AVG_VARIANCE,U=-1;for(let W=ve.CODE_START_A;W<=ve.CODE_START_C;W++){const Z=lt.patternMatchVariance(h,ve.CODE_PATTERNS[W],ve.MAX_INDIVIDUAL_VARIANCE);Z<N&&(N=Z,U=W)}if(U>=0&&s.isRange(Math.max(0,d-(C-d)/2),d,!1))return Int32Array.from([d,C,U]);d+=h[0]+h[1],h=h.slice(2,h.length-1),h[u-1]=0,h[u]=0,u--}else u++;h[u]=1,x=!x}throw new Y}static decodeCode(s,a,l){lt.recordPattern(s,l,a);let u=ve.MAX_AVG_VARIANCE,h=-1;for(let d=0;d<ve.CODE_PATTERNS.length;d++){const x=ve.CODE_PATTERNS[d],_=this.patternMatchVariance(a,x,ve.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,h=d)}if(h>=0)return h;throw new Y}decodeRow(s,a,l){const u=l&&l.get(q.ASSUME_GS1)===!0,h=ve.findStartPattern(a),d=h[2];let x=0;const _=new Uint8Array(20);_[x++]=d;let C;switch(d){case ve.CODE_START_A:C=ve.CODE_CODE_A;break;case ve.CODE_START_B:C=ve.CODE_CODE_B;break;case ve.CODE_START_C:C=ve.CODE_CODE_C;break;default:throw new k}let N=!1,U=!1,W="",Z=h[0],te=h[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ae=0,pe=0,Ie=d,be=0,_e=!0,ht=!1,Ze=!1;for(;!N;){const Qa=U;switch(U=!1,ae=pe,pe=ve.decodeCode(a,ne,te),_[x++]=pe,pe!==ve.CODE_STOP&&(_e=!0),pe!==ve.CODE_STOP&&(be++,Ie+=be*pe),Z=te,te+=ne.reduce((zA,HA)=>zA+HA,0),pe){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new k}switch(C){case ve.CODE_CODE_A:if(pe<64)Ze===ht?W+=String.fromCharCode(32+pe):W+=String.fromCharCode(32+pe+128),Ze=!1;else if(pe<96)Ze===ht?W+=String.fromCharCode(pe-64):W+=String.fromCharCode(pe+64),Ze=!1;else switch(pe!==ve.CODE_STOP&&(_e=!1),pe){case ve.CODE_FNC_1:u&&(W.length===0?W+="]C1":W+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!ht&&Ze?(ht=!0,Ze=!1):ht&&Ze?(ht=!1,Ze=!1):Ze=!0;break;case ve.CODE_SHIFT:U=!0,C=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:C=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:C=ve.CODE_CODE_C;break;case ve.CODE_STOP:N=!0;break}break;case ve.CODE_CODE_B:if(pe<96)Ze===ht?W+=String.fromCharCode(32+pe):W+=String.fromCharCode(32+pe+128),Ze=!1;else switch(pe!==ve.CODE_STOP&&(_e=!1),pe){case ve.CODE_FNC_1:u&&(W.length===0?W+="]C1":W+="");break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!ht&&Ze?(ht=!0,Ze=!1):ht&&Ze?(ht=!1,Ze=!1):Ze=!0;break;case ve.CODE_SHIFT:U=!0,C=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:C=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:C=ve.CODE_CODE_C;break;case ve.CODE_STOP:N=!0;break}break;case ve.CODE_CODE_C:if(pe<100)pe<10&&(W+="0"),W+=pe;else switch(pe!==ve.CODE_STOP&&(_e=!1),pe){case ve.CODE_FNC_1:u&&(W.length===0?W+="]C1":W+="");break;case ve.CODE_CODE_A:C=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:C=ve.CODE_CODE_B;break;case ve.CODE_STOP:N=!0;break}break}Qa&&(C=C===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const Tr=te-Z;if(te=a.getNextUnset(te),!a.isRange(te,Math.min(a.getSize(),te+(te-Z)/2),!1))throw new Y;if(Ie-=be*ae,Ie%103!==ae)throw new b;const Ei=W.length;if(Ei===0)throw new Y;Ei>0&&_e&&(C===ve.CODE_CODE_C?W=W.substring(0,Ei-2):W=W.substring(0,Ei-1));const Sr=(h[1]+h[0])/2,Lt=Z+Tr/2,$n=_.length,zr=new Uint8Array($n);for(let Qa=0;Qa<$n;Qa++)zr[Qa]=_[Qa];const Ka=[new Te(Sr,s),new Te(Lt,s)];return new ue(W,zr,0,Ka,me.CODE_128,new Date().getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class At extends lt{constructor(s=!1,a=!1){super(),this.usingCheckDigit=s,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let h=At.findAsteriskPattern(a,u),d=a.getNextSet(h[1]),x=a.getSize(),_,C;do{At.recordPattern(a,d,u);let ne=At.toNarrowWidePattern(u);if(ne<0)throw new Y;_=At.patternToChar(ne),this.decodeRowResult+=_,C=d;for(let ae of u)d+=ae;d=a.getNextSet(d)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let ne of u)N+=ne;let U=d-C-N;if(d!==x&&U*2<N)throw new Y;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ae=0;for(let pe=0;pe<ne;pe++)ae+=At.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(ne)!==At.ALPHABET_STRING.charAt(ae%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new Y;let W;this.extendedMode?W=At.decodeExtended(this.decodeRowResult):W=this.decodeRowResult;let Z=(h[1]+h[0])/2,te=C+N/2;return new ue(W,null,0,[new Te(Z,s),new Te(te,s)],me.CODE_39,new Date().getTime())}static findAsteriskPattern(s,a){let l=s.getSize(),u=s.getNextSet(0),h=0,d=u,x=!1,_=a.length;for(let C=u;C<l;C++)if(s.get(C)!==x)a[h]++;else{if(h===_-1){if(this.toNarrowWidePattern(a)===At.ASTERISK_ENCODING&&s.isRange(Math.max(0,d-Math.floor((C-d)/2)),d,!1))return[d,C];d+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,x=!x}throw new Y}static toNarrowWidePattern(s){let a=s.length,l=0,u;do{let h=2147483647;for(let _ of s)_<h&&_>l&&(h=_);l=h,u=0;let d=0,x=0;for(let _=0;_<a;_++){let C=s[_];C>l&&(x|=1<<a-1-_,u++,d+=C)}if(u===3){for(let _=0;_<a&&u>0;_++){let C=s[_];if(C>l&&(u--,C*2>=d))return-1}return x}}while(u>3);return-1}static patternToChar(s){for(let a=0;a<At.CHARACTER_ENCODINGS.length;a++)if(At.CHARACTER_ENCODINGS[a]===s)return At.ALPHABET_STRING.charAt(a);if(s===At.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(s){let a=s.length,l="";for(let u=0;u<a;u++){let h=s.charAt(u);if(h==="+"||h==="$"||h==="%"||h==="/"){let d=s.charAt(u+1),x="\0";switch(h){case"+":if(d>="A"&&d<="Z")x=String.fromCharCode(d.charCodeAt(0)+32);else throw new k;break;case"$":if(d>="A"&&d<="Z")x=String.fromCharCode(d.charCodeAt(0)-64);else throw new k;break;case"%":if(d>="A"&&d<="E")x=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")x=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")x=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")x=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")x="\0";else if(d==="V")x="@";else if(d==="W")x="`";else if(d==="X"||d==="Y"||d==="Z")x="";else throw new k;break;case"/":if(d>="A"&&d<="O")x=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")x=":";else throw new k;break}l+=x,u++}else l+=h}return l}}At.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",At.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],At.ASTERISK_ENCODING=148;class nt extends lt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),h=this.decodeEnd(a),d=new R;nt.decodeMiddle(a,u[1],h[0],d);let x=d.toString(),_=null;l!=null&&(_=l.get(q.ALLOWED_LENGTHS)),_==null&&(_=nt.DEFAULT_ALLOWED_LENGTHS);let C=x.length,N=!1,U=0;for(let te of _){if(C===te){N=!0;break}te>U&&(U=te)}if(!N&&C>U&&(N=!0),!N)throw new k;const W=[new Te(u[1],s),new Te(h[0],s)];return new ue(x,null,0,W,me.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let h=new Int32Array(10),d=new Int32Array(5),x=new Int32Array(5);for(h.fill(0),d.fill(0),x.fill(0);a<l;){lt.recordPattern(s,a,h);for(let C=0;C<5;C++){let N=2*C;d[C]=h[N],x[C]=h[N+1]}let _=nt.decodeDigit(d);u.append(_.toString()),_=this.decodeDigit(x),u.append(_.toString()),h.forEach(function(C){a+=C})}}decodeStart(s){let a=nt.skipWhiteSpace(s),l=nt.findGuardPattern(s,a,nt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new Y}static skipWhiteSpace(s){const a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new Y;return l}decodeEnd(s){s.reverse();try{let a=nt.skipWhiteSpace(s),l;try{l=nt.findGuardPattern(s,a,nt.END_PATTERN_REVERSED[0])}catch(h){h instanceof Y&&(l=nt.findGuardPattern(s,a,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,h=new Int32Array(u),d=s.getSize(),x=!1,_=0,C=a;h.fill(0);for(let N=a;N<d;N++)if(s.get(N)!==x)h[_]++;else{if(_===u-1){if(lt.patternMatchVariance(h,l,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[C,N];C+=h[0]+h[1],j.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,x=!x}throw new Y}static decodeDigit(s){let a=nt.MAX_AVG_VARIANCE,l=-1,u=nt.PATTERNS.length;for(let h=0;h<u;h++){let d=nt.PATTERNS[h],x=lt.patternMatchVariance(s,d,nt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=h):x===a&&(l=-1)}if(l>=0)return l%10;throw new Y}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Mt extends lt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,h=Int32Array.from([0,0,0]);for(;!a;){h=Int32Array.from([0,0,0]),l=Mt.findGuardPattern(s,u,!1,this.START_END_PATTERN,h);let d=l[0];u=l[1];let x=d-(u-d);x>=0&&(a=s.isRange(x,d,!1))}return l}static checkChecksum(s){return Mt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Mt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}static decodeEnd(s,a){return Mt.findGuardPattern(s,a,!1,Mt.START_END_PATTERN,new Int32Array(Mt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,h){let d=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let x=0,_=a,C=u.length,N=l;for(let U=a;U<d;U++)if(s.get(U)!==N)h[x]++;else{if(x===C-1){if(lt.patternMatchVariance(h,u,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return Int32Array.from([_,U]);_+=h[0]+h[1];let W=h.slice(2,h.length-1);for(let Z=0;Z<x-1;Z++)h[Z]=W[Z];h[x-1]=0,h[x]=0,x--}else x++;h[x]=1,N=!N}throw new Y}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let h=this.MAX_AVG_VARIANCE,d=-1,x=u.length;for(let _=0;_<x;_++){let C=u[_],N=lt.patternMatchVariance(a,C,Mt.MAX_INDIVIDUAL_VARIANCE);N<h&&(h=N,d=_)}if(d>=0)return d;throw new Y}}Mt.MAX_AVG_VARIANCE=.48,Mt.MAX_INDIVIDUAL_VARIANCE=.7,Mt.START_END_PATTERN=Int32Array.from([1,1,1]),Mt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Mt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _r{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),d=u.toString(),x=_r.parseExtensionString(d),_=[new Te((l[0]+l[1])/2,s),new Te(h,s)],C=new ue(d,null,0,_,me.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),d=a[1],x=0;for(let C=0;C<5&&d<h;C++){let N=Mt.decodeDigit(s,u,d,Mt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let U of u)d+=U;N>=10&&(x|=1<<4-C),C!==4&&(d=s.getNextSet(d),d=s.getNextUnset(d))}if(l.length!==5)throw new Y;let _=this.determineCheckDigit(x);if(_r.extensionChecksum(l.toString())!==_)throw new Y;return d}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new Y}static parseExtensionString(s){if(s.length!==5)return null;let a=_r.parseExtension5String(s);return a==null?null:new Map([[Oe.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),h=l%100,d=h<10?"0"+h:h.toString();return a+u+"."+d}}class cs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),d=u.toString(),x=cs.parseExtensionString(d),_=[new Te((l[0]+l[1])/2,s),new Te(h,s)],C=new ue(d,null,0,_,me.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),d=a[1],x=0;for(let _=0;_<2&&d<h;_++){let C=Mt.decodeDigit(s,u,d,Mt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let N of u)d+=N;C>=10&&(x|=1<<1-_),_!==1&&(d=s.getNextSet(d),d=s.getNextUnset(d))}if(l.length!==2)throw new Y;if(parseInt(l.toString())%4!==x)throw new Y;return d}static parseExtensionString(s){return s.length!==2?null:new Map([[Oe.ISSUE_NUMBER,parseInt(s)]])}}class vr{static decodeRow(s,a,l){let u=Mt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _r().decodeRow(s,a,u)}catch{return new cs().decodeRow(s,a,u)}}}vr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ct extends Mt{constructor(){super(),this.decodeRowStringBuffer="",ct.L_AND_G_PATTERNS=ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=ct.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];ct.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=ct.findStartGuardPattern(a),h=l==null?null:l.get(q.NEED_RESULT_POINT_CALLBACK);if(h!=null){const _e=new Te((u[0]+u[1])/2,s);h.foundPossibleResultPoint(_e)}let d=this.decodeMiddle(a,u,this.decodeRowStringBuffer),x=d.rowOffset,_=d.resultString;if(h!=null){const _e=new Te(x,s);h.foundPossibleResultPoint(_e)}let C=this.decodeEnd(a,x);if(h!=null){const _e=new Te((C[0]+C[1])/2,s);h.foundPossibleResultPoint(_e)}let N=C[1],U=N+(N-C[0]);if(U>=a.getSize()||!a.isRange(N,U,!1))throw new Y;let W=_.toString();if(W.length<8)throw new k;if(!ct.checkChecksum(W))throw new b;let Z=(u[1]+u[0])/2,te=(C[1]+C[0])/2,ne=this.getBarcodeFormat(),ae=[new Te(Z,s),new Te(te,s)],pe=new ue(W,null,0,ae,ne,new Date().getTime()),Ie=0;try{let _e=vr.decodeRow(s,a,C[1]);pe.putMetadata(Oe.UPC_EAN_EXTENSION,_e.getText()),pe.putAllMetadata(_e.getResultMetadata()),pe.addResultPoints(_e.getResultPoints()),Ie=_e.getText().length}catch{}let be=l==null?null:l.get(q.ALLOWED_EAN_EXTENSIONS);if(be!=null){let _e=!1;for(let ht in be)if(Ie.toString()===ht){_e=!0;break}if(!_e)throw new Y}return pe}decodeEnd(s,a){return ct.findGuardPattern(s,a,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return ct.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=s.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}}class Ct extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),d=a[1],x=0;for(let C=0;C<6&&d<h;C++){let N=ct.decodeDigit(s,u,d,ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let U of u)d+=U;N>=10&&(x|=1<<5-C)}l=Ct.determineFirstDigit(l,x),d=ct.findGuardPattern(s,d,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&d<h;C++){let N=ct.decodeDigit(s,u,d,ct.L_PATTERNS);l+=String.fromCharCode(48+N);for(let U of u)d+=U}return{rowOffset:d,resultString:l}}getBarcodeFormat(){return me.EAN_13}static determineFirstDigit(s,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new Y}}Ct.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Cr extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),d=a[1];for(let _=0;_<4&&d<h;_++){let C=ct.decodeDigit(s,u,d,ct.L_PATTERNS);l+=String.fromCharCode(48+C);for(let N of u)d+=N}d=ct.findGuardPattern(s,d,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&d<h;_++){let C=ct.decodeDigit(s,u,d,ct.L_PATTERNS);l+=String.fromCharCode(48+C);for(let N of u)d+=N}return{rowOffset:d,resultString:l}}getBarcodeFormat(){return me.EAN_8}}class dr extends ct{constructor(){super(...arguments),this.ean13Reader=new Ct}getBarcodeFormat(){return me.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new ue(a.substring(1),null,null,s.getResultPoints(),me.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new Y}reset(){this.ean13Reader.reset()}}class en extends ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const h=s.getSize();let d=a[1],x=0;for(let C=0;C<6&&d<h;C++){const N=en.decodeDigit(s,u,d,en.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let U of u)d+=U;N>=10&&(x|=1<<5-C)}let _=en.determineNumSysAndCheckDigit(l,x);return{rowOffset:d,resultString:_}}decodeEnd(s,a){return en.findGuardPatternWithoutCounters(s,a,!0,en.MIDDLE_END_PATTERN)}checkChecksum(s){return ct.checkChecksum(en.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let h=String.fromCharCode(48+l),d=String.fromCharCode(48+u);return h+s+d}throw Y.getNotFoundInstance()}getBarcodeFormat(){return me.UPC_E}static convertUPCEtoUPCA(s){const a=s.slice(1,7).split("").map(h=>h.charCodeAt(0)),l=new R;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}en.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),en.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Vs extends lt{constructor(s){super();let a=s==null?null:s.get(q.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new Ct),l.push(new dr),l.push(new Cr),l.push(new en)):(a.indexOf(me.EAN_13)>-1&&l.push(new Ct),a.indexOf(me.UPC_A)>-1&&l.push(new dr),a.indexOf(me.EAN_8)>-1&&l.push(new Cr),a.indexOf(me.UPC_E)>-1&&l.push(new en)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{const h=u.decodeRow(s,a,l),d=h.getBarcodeFormat()===me.EAN_13&&h.getText().charAt(0)==="0",x=l==null?null:l.get(q.POSSIBLE_FORMATS),_=x==null||x.includes(me.UPC_A);if(d&&_){const C=h.getRawBytes(),N=new ue(h.getText().substring(1),C,C?C.length:null,h.getResultPoints(),me.UPC_A);return N.putAllMetadata(h.getResultMetadata()),N}return h}catch{}throw new Y}reset(){for(let s of this.readers)s.reset()}}class Bt extends lt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,a){for(let l=0;l<a.length;l++)if(lt.patternMatchVariance(s,a[l],Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return l;throw new Y}static count(s){return Re.sum(new Int32Array(s))}static increment(s,a){let l=0,u=a[0];for(let h=1;h<s.length;h++)a[h]>u&&(u=a[h],l=h);s[l]++}static decrement(s,a){let l=0,u=a[0];for(let h=1;h<s.length;h++)a[h]<u&&(u=a[h],l=h);s[l]--}static isFinderPattern(s){let a=s[0]+s[1],l=a+s[2]+s[3],u=a/l;if(u>=Bt.MIN_FINDER_PATTERN_RATIO&&u<=Bt.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let x of s)x>d&&(d=x),x<h&&(h=x);return d<10*h}return!1}}Bt.MAX_AVG_VARIANCE=.2,Bt.MAX_INDIVIDUAL_VARIANCE=.45,Bt.MIN_FINDER_PATTERN_RATIO=9.5/12,Bt.MAX_FINDER_PATTERN_RATIO=12.5/14;class mn{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof mn))return!1;const a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ja{constructor(s,a,l,u,h){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Te(l,h)),this.resultPoints.push(new Te(u,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof ja))return!1;const a=s;return this.value===a.value}hashCode(){return this.value}}class ii{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let _ of s)u+=_;let h=0,d=0,x=s.length;for(let _=0;_<x-1;_++){let C;for(C=1,d|=1<<_;C<s[_];C++,d&=~(1<<_)){let N=ii.combins(u-C-1,x-_-2);if(l&&d===0&&u-C-(x-_-1)>=x-_-1&&(N-=ii.combins(u-C-(x-_),x-_-2)),x-_-1>1){let U=0;for(let W=u-C-(x-_-2);W>a;W--)U+=ii.combins(u-C-W-1,x-_-3);N-=U*(x-1-_)}else u-C>a&&N--;h+=N}u-=C}return h}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let h=1,d=1;for(let x=s;x>l;x--)h*=x,d<=u&&(h/=d,d++);for(;d<=u;)h/=d,d++;return h}}class Fa{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new H(l),h=0,x=s[0].getRightChar().getValue();for(let _=11;_>=0;--_)x&1<<_&&u.set(h),h++;for(let _=1;_<s.length;++_){let C=s[_],N=C.getLeftChar().getValue();for(let U=11;U>=0;--U)N&1<<U&&u.set(h),h++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let W=11;W>=0;--W)U&1<<W&&u.set(h),h++}}return u}}class Mi{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ba{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class zn extends Ba{constructor(s,a){super(s),this.value=a}getValue(){return this.value}isFNC1(){return this.value===zn.FNC1}}zn.FNC1="$";class Lr extends Ba{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ar extends Ba{constructor(s,a,l){if(super(s),a<0||a>10||l<0||l>10)throw new k;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ar.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ar.FNC1}isAnyFNC1(){return this.firstDigit===Ar.FNC1||this.secondDigit===Ar.FNC1}}Ar.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new Y;let a=s.substring(0,2);for(let h of Ne.TWO_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,h[2],s):Ne.processFixedAI(2,h[1],s);if(s.length<3)throw new Y;let l=s.substring(0,3);for(let h of Ne.THREE_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,h[2],s):Ne.processFixedAI(3,h[1],s);for(let h of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,h[2],s):Ne.processFixedAI(4,h[1],s);if(s.length<4)throw new Y;let u=s.substring(0,4);for(let h of Ne.FOUR_DIGIT_DATA_LENGTH)if(h[0]===u)return h[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,h[2],s):Ne.processFixedAI(4,h[1],s);throw new Y}static processFixedAI(s,a,l){if(l.length<s)throw new Y;let u=l.substring(0,s);if(l.length<s+a)throw new Y;let h=l.substring(s,s+a),d=l.substring(s+a),x="("+u+")"+h,_=Ne.parseFieldsInGeneralPurpose(d);return _==null?x:x+_}static processVariableAI(s,a,l){let u=l.substring(0,s),h;l.length<s+a?h=l.length:h=s+a;let d=l.substring(s,h),x=l.substring(h),_="("+u+")"+d,C=Ne.parseFieldsInGeneralPurpose(x);return C==null?_:_+C}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class us{constructor(s){this.buffer=new R,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let h=this.decodeGeneralPurposeField(l,u),d=Ne.parseFieldsInGeneralPurpose(h.getNewString());if(d!=null&&s.append(d),h.isRemaining()?u=""+h.getRemainingValue():u=null,l===h.getNewPosition())break;l=h.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(s,4);return h===0?new Ar(this.information.getSize(),Ar.FNC1,Ar.FNC1):new Ar(this.information.getSize(),h-1,Ar.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new Ar(s+7,l,u)}extractNumericValueFromBitArray(s,a){return us.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let h=0;h<l;++h)s.get(a+h)&&(u|=1<<l-h-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Lr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Lr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new Lr(this.current.getPosition(),this.buffer.toString()):a=new Lr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Mi(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new Lr(this.current.getPosition(),this.buffer.toString());return new Mi(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Lr(this.current.getPosition(),this.buffer.toString());return new Mi(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Lr(this.current.getPosition(),this.buffer.toString());return new Mi(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mi(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new zn(s+5,zn.FNC1);if(a>=5&&a<15)return new zn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new zn(s+7,""+(l+1));if(l>=90&&l<116)return new zn(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),h;switch(u){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new k}return new zn(s+8,h)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new zn(s+5,zn.FNC1);if(a>=5&&a<15)return new zn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new zn(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new pt("Decoding invalid alphanumeric value: "+l)}return new zn(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Ua{constructor(s){this.information=s,this.generalDecoder=new us(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Hn extends Ua{constructor(s){super(s)}encodeCompressedGtin(s,a){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,a,l)}encodeCompressedGtinWithoutAI(s,a,l){for(let u=0;u<4;++u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);h/100===0&&s.append("0"),h/10===0&&s.append("0"),s.append(h)}Hn.appendCheckDigit(s,l)}static appendCheckDigit(s,a){let l=0;for(let u=0;u<13;u++){let h=s.charAt(u+a).charCodeAt(0)-48;l+=u&1?h:3*h}l=10-l%10,l===10&&(l=0),s.append(l)}}Hn.GTIN_SIZE=40;class Li extends Hn{constructor(s){super(s)}parseInformation(){let s=new R;s.append("(01)");let a=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Li.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,Li.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(s,Li.HEADER_SIZE+44)}}Li.HEADER_SIZE=4;class Ko extends Ua{constructor(s){super(s)}parseInformation(){let s=new R;return this.getGeneralDecoder().decodeAllCodes(s,Ko.HEADER_SIZE)}}Ko.HEADER_SIZE=5;class Va extends Hn{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let h=this.checkWeight(u),d=1e5;for(let x=0;x<5;++x)h/d===0&&s.append("0"),d/=10;s.append(h)}}class jr extends Va{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=jr.HEADER_SIZE+Va.GTIN_SIZE+jr.WEIGHT_SIZE)throw new Y;let s=new R;return this.encodeCompressedGtin(s,jr.HEADER_SIZE),this.encodeCompressedWeight(s,jr.HEADER_SIZE+Va.GTIN_SIZE,jr.WEIGHT_SIZE),s.toString()}}jr.HEADER_SIZE=5,jr.WEIGHT_SIZE=15;class Vf extends jr{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class za extends jr{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Fr extends Hn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Fr.HEADER_SIZE+Hn.GTIN_SIZE)throw new Y;let s=new R;this.encodeCompressedGtin(s,Fr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Fr.HEADER_SIZE+Hn.GTIN_SIZE,Fr.LAST_DIGIT_SIZE);s.append("(392"),s.append(a),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Fr.HEADER_SIZE+Hn.GTIN_SIZE+Fr.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}Fr.HEADER_SIZE=8,Fr.LAST_DIGIT_SIZE=2;class Ln extends Hn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+Hn.GTIN_SIZE)throw new Y;let s=new R;this.encodeCompressedGtin(s,Ln.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Hn.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);s.append("(393"),s.append(a),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Hn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+Hn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return s.append(u.getNewString()),s.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class St extends Va{constructor(s,a,l){super(s),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new Y;let s=new R;return this.encodeCompressedGtin(s,St.HEADER_SIZE),this.encodeCompressedWeight(s,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(s,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,St.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let u=l%32;l/=32;let h=l%12+1;l/=12;let d=l;d/10==0&&s.append("0"),s.append(d),h/10==0&&s.append("0"),s.append(h),u/10==0&&s.append("0"),s.append(u)}addWeightCode(s,a){s.append("("),s.append(this.firstAIdigits),s.append(a/1e5),s.append(")")}checkWeight(s){return s%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function ji(B){try{if(B.get(1))return new Li(B);if(!B.get(2))return new Ko(B);switch(us.extractNumericValueFromBitArray(B,1,4)){case 4:return new Vf(B);case 5:return new za(B)}switch(us.extractNumericValueFromBitArray(B,1,5)){case 12:return new Fr(B);case 13:return new Ln(B)}switch(us.extractNumericValueFromBitArray(B,1,7)){case 56:return new St(B,"310","11");case 57:return new St(B,"320","11");case 58:return new St(B,"310","13");case 59:return new St(B,"320","13");case 60:return new St(B,"310","15");case 61:return new St(B,"320","15");case 62:return new St(B,"310","17");case 63:return new St(B,"320","17")}}catch(s){throw console.log(s),new pt("unknown decoder: "+B)}}class si{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof si?si.equalsOrNull(s.leftchar,a.leftchar)&&si.equalsOrNull(s.rightchar,a.rightchar)&&si.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:si.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class rc{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof rc?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,h)=>{a.forEach(d=>{u.getLeftChar().getValue()===d.getLeftChar().getValue()&&u.getRightChar().getValue()===d.getRightChar().getValue()&&u.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(l=!0)})}),l}}class we extends Bt{constructor(s){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(h){if(h instanceof Y){if(!this.pairs.length)throw new Y;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new Y}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let d of s)this.pairs.push(d.getPairs());if(this.pairs.push(u.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(s);h.push(u);try{return this.checkRows(h,l+1)}catch(d){this.verbose&&console.log(d)}}throw new Y}static isValidSequence(s){for(let a of we.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,h=!1;for(;l<this.rows.length;){let d=this.rows[l];if(d.getRowNumber()>s){h=d.isEquivalent(this.pairs);break}u=d.isEquivalent(this.pairs),l++}h||u||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new rc(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let h of s)if(si.equals(u,h))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let h of s){let d=!1;for(let x of l.getPairs())if(h.equals(x)){d=!0;break}if(!d){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=Fa.buildBitArray(s),u=ji(a).parseInformation(),h=s[0].getFinderPattern().getResultPoints(),d=s[s.length-1].getFinderPattern().getResultPoints(),x=[h[0],h[1],d[0],d[1]];return new ue(u,null,null,x,me.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),h=2;for(let x=1;x<this.pairs.size();++x){let _=this.pairs.get(x);u+=_.getLeftChar().getChecksumPortion(),h++;let C=_.getRightChar();C!=null&&(u+=C.getChecksumPortion(),h++)}return u%=211,211*(h-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let h,d=!0,x=-1;do this.findNextPair(s,a,x),h=this.parseFoundFinderPattern(s,l,u),h==null?x=we.getNextSecondBar(s,this.startEnd[0]):d=!1;while(d);let _=this.decodeDataCharacter(s,h,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new Y;let C;try{C=this.decodeDataCharacter(s,h,u,!1)}catch(N){C=null,this.verbose&&console.log(N)}return new si(_,C,h,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=s.getSize(),d;l>=0?d=l:this.isEmptyPair(a)?d=0:d=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let _=!1;for(;d<h&&(_=!s.get(d),!!_);)d++;let C=0,N=d;for(let U=d;U<h;U++)if(s.get(U)!=_)u[C]++;else{if(C==3){if(x&&we.reverseCounters(u),we.isFinderPattern(u)){this.startEnd[0]=N,this.startEnd[1]=U;return}x&&we.reverseCounters(u),N+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,_=!_}throw new Y}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,h,d;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,u=this.startEnd[0]-C,h=C,d=this.startEnd[1]}else h=this.startEnd[0],d=s.getNextUnset(this.startEnd[1]+1),u=d-this.startEnd[1];let x=this.getDecodeFinderCounters();j.arraycopy(x,0,x,1,x.length-1),x[0]=u;let _;try{_=this.parseFinderValue(x,we.FINDER_PATTERNS)}catch{return null}return new ja(_,[h,d],h,d,a)}decodeDataCharacter(s,a,l,u){let h=this.getDataCharacterCounters();for(let Lt=0;Lt<h.length;Lt++)h[Lt]=0;if(u)we.recordPatternInReverse(s,a.getStartEnd()[0],h);else{we.recordPattern(s,a.getStartEnd()[1],h);for(let Lt=0,$n=h.length-1;Lt<$n;Lt++,$n--){let zr=h[Lt];h[Lt]=h[$n],h[$n]=zr}}let d=17,x=Re.sum(new Int32Array(h))/d,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new Y;let C=this.getOddCounts(),N=this.getEvenCounts(),U=this.getOddRoundingErrors(),W=this.getEvenRoundingErrors();for(let Lt=0;Lt<h.length;Lt++){let $n=1*h[Lt]/x,zr=$n+.5;if(zr<1){if($n<.3)throw new Y;zr=1}else if(zr>8){if($n>8.7)throw new Y;zr=8}let Ka=Lt/2;Lt&1?(N[Ka]=zr,W[Ka]=$n-zr):(C[Ka]=zr,U[Ka]=$n-zr)}this.adjustOddEvenCounts(d);let Z=4*a.getValue()+(l?0:2)+(u?0:1)-1,te=0,ne=0;for(let Lt=C.length-1;Lt>=0;Lt--){if(we.isNotA1left(a,l,u)){let $n=we.WEIGHTS[Z][2*Lt];ne+=C[Lt]*$n}te+=C[Lt]}let ae=0;for(let Lt=N.length-1;Lt>=0;Lt--)if(we.isNotA1left(a,l,u)){let $n=we.WEIGHTS[Z][2*Lt+1];ae+=N[Lt]*$n}let pe=ne+ae;if(te&1||te>13||te<4)throw new Y;let Ie=(13-te)/2,be=we.SYMBOL_WIDEST[Ie],_e=9-be,ht=ii.getRSSvalue(C,be,!0),Ze=ii.getRSSvalue(N,_e,!1),Tr=we.EVEN_TOTAL_SUBSET[Ie],Ei=we.GSUM[Ie],Sr=ht*Tr+Ze+Ei;return new mn(Sr,pe)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=Re.sum(new Int32Array(this.getOddCounts())),l=Re.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1;a>13?h=!0:a<4&&(u=!0);let d=!1,x=!1;l>13?x=!0:l<4&&(d=!0);let _=a+l-s,C=(a&1)==1,N=(l&1)==0;if(_==1)if(C){if(N)throw new Y;h=!0}else{if(!N)throw new Y;x=!0}else if(_==-1)if(C){if(N)throw new Y;u=!0}else{if(!N)throw new Y;d=!0}else if(_==0){if(C){if(!N)throw new Y;a<l?(u=!0,x=!0):(h=!0,d=!0)}else if(N)throw new Y}else throw new Y;if(u){if(h)throw new Y;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(x)throw new Y;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class Ju extends mn{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends Bt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){const u=this.decodePair(a,!1,s,l);Gt.addOrTally(this.possibleLeftPairs,u),a.reverse();let h=this.decodePair(a,!0,s,l);Gt.addOrTally(this.possibleRightPairs,h),a.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Gt.checkChecksum(d,x))return Gt.constructResult(d,x)}throw new Y}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),h=new R;for(let C=13-u.length;C>0;C--)h.append("0");h.append(u);let d=0;for(let C=0;C<13;C++){let N=h.charAt(C).charCodeAt(0)-48;d+=C&1?N:3*N}d=10-d%10,d===10&&(d=0),h.append(d.toString());let x=s.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new ue(h.toString(),null,0,[x[0],x[1],_[0],_[1]],me.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let h=this.findFinderPattern(s,a),d=this.parseFoundFinderPattern(s,l,a,h),x=u==null?null:u.get(q.NEED_RESULT_POINT_CALLBACK);if(x!=null){let N=(h[0]+h[1])/2;a&&(N=s.getSize()-1-N),x.foundPossibleResultPoint(new Te(N,l))}let _=this.decodeDataCharacter(s,d,!0),C=this.decodeDataCharacter(s,d,!1);return new Ju(1597*_.getValue()+C.getValue(),_.getChecksumPortion()+4*C.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let ae=0;ae<u.length;ae++)u[ae]=0;if(l)lt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{lt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let ae=0,pe=u.length-1;ae<pe;ae++,pe--){let Ie=u[ae];u[ae]=u[pe],u[pe]=Ie}}let h=l?16:15,d=Re.sum(new Int32Array(u))/h,x=this.getOddCounts(),_=this.getEvenCounts(),C=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let ae=0;ae<u.length;ae++){let pe=u[ae]/d,Ie=Math.floor(pe+.5);Ie<1?Ie=1:Ie>8&&(Ie=8);let be=Math.floor(ae/2);ae&1?(_[be]=Ie,N[be]=pe-Ie):(x[be]=Ie,C[be]=pe-Ie)}this.adjustOddEvenCounts(l,h);let U=0,W=0;for(let ae=x.length-1;ae>=0;ae--)W*=9,W+=x[ae],U+=x[ae];let Z=0,te=0;for(let ae=_.length-1;ae>=0;ae--)Z*=9,Z+=_[ae],te+=_[ae];let ne=W+3*Z;if(l){if(U&1||U>12||U<4)throw new Y;let ae=(12-U)/2,pe=Gt.OUTSIDE_ODD_WIDEST[ae],Ie=9-pe,be=ii.getRSSvalue(x,pe,!1),_e=ii.getRSSvalue(_,Ie,!0),ht=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[ae],Ze=Gt.OUTSIDE_GSUM[ae];return new mn(be*ht+_e+Ze,ne)}else{if(te&1||te>10||te<4)throw new Y;let ae=(10-te)/2,pe=Gt.INSIDE_ODD_WIDEST[ae],Ie=9-pe,be=ii.getRSSvalue(x,pe,!0),_e=ii.getRSSvalue(_,Ie,!1),ht=Gt.INSIDE_ODD_TOTAL_SUBSET[ae],Ze=Gt.INSIDE_GSUM[ae];return new mn(_e*ht+be+Ze,ne)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),h=!1,d=0;for(;d<u&&(h=!s.get(d),a!==h);)d++;let x=0,_=d;for(let C=d;C<u;C++)if(s.get(C)!==h)l[x]++;else{if(x===3){if(Bt.isFinderPattern(l))return[_,C];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,h=!h}throw new Y}parseFoundFinderPattern(s,a,l,u){let h=s.get(u[0]),d=u[0]-1;for(;d>=0&&h!==s.get(d);)d--;d++;const x=u[0]-d,_=this.getDecodeFinderCounters(),C=new Int32Array(_.length);j.arraycopy(_,0,C,1,_.length-1),C[0]=x;const N=this.parseFinderValue(C,Gt.FINDER_PATTERNS);let U=d,W=u[1];return l&&(U=s.getSize()-1-U,W=s.getSize()-1-W),new ja(N,[d,u[1]],U,W,a)}adjustOddEvenCounts(s,a){let l=Re.sum(new Int32Array(this.getOddCounts())),u=Re.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1,x=!1,_=!1;s?(l>12?d=!0:l<4&&(h=!0),u>12?_=!0:u<4&&(x=!0)):(l>11?d=!0:l<5&&(h=!0),u>10?_=!0:u<4&&(x=!0));let C=l+u-a,N=(l&1)===(s?1:0),U=(u&1)===1;if(C===1)if(N){if(U)throw new Y;d=!0}else{if(!U)throw new Y;_=!0}else if(C===-1)if(N){if(U)throw new Y;h=!0}else{if(!U)throw new Y;x=!0}else if(C===0){if(N){if(!U)throw new Y;l<u?(h=!0,_=!0):(d=!0,x=!0)}else if(U)throw new Y}else throw new Y;if(h){if(d)throw new Y;Bt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Bt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new Y;Bt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Bt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Fi extends lt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;const l=s?s.get(q.POSSIBLE_FORMATS):null,u=s&&s.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(me.EAN_13)||l.includes(me.UPC_A)||l.includes(me.EAN_8)||l.includes(me.UPC_E))&&this.readers.push(new Vs(s)),l.includes(me.CODE_39)&&this.readers.push(new At(u)),l.includes(me.CODE_128)&&this.readers.push(new ve),l.includes(me.ITF)&&this.readers.push(new nt),l.includes(me.RSS_14)&&this.readers.push(new Gt),l.includes(me.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new Vs(s)),this.readers.push(new At),this.readers.push(new Vs(s)),this.readers.push(new ve),this.readers.push(new nt),this.readers.push(new Gt),this.readers.push(new we(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new Y}reset(){this.readers.forEach(s=>s.reset())}}class ic extends Ee{constructor(s=500,a){super(new Fi(a),s,a)}}class Et{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class mt{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class rt{constructor(s,a,l,u,h,d){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=h,this.ecBlocks=d;let x=0;const _=d.getECCodewords(),C=d.getECBlocks();for(let N of C)x+=N.getCount()*(N.getDataCodewords()+_);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new k;for(let l of rt.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new rt(1,10,10,8,8,new Et(5,new mt(1,3))),new rt(2,12,12,10,10,new Et(7,new mt(1,5))),new rt(3,14,14,12,12,new Et(10,new mt(1,8))),new rt(4,16,16,14,14,new Et(12,new mt(1,12))),new rt(5,18,18,16,16,new Et(14,new mt(1,18))),new rt(6,20,20,18,18,new Et(18,new mt(1,22))),new rt(7,22,22,20,20,new Et(20,new mt(1,30))),new rt(8,24,24,22,22,new Et(24,new mt(1,36))),new rt(9,26,26,24,24,new Et(28,new mt(1,44))),new rt(10,32,32,14,14,new Et(36,new mt(1,62))),new rt(11,36,36,16,16,new Et(42,new mt(1,86))),new rt(12,40,40,18,18,new Et(48,new mt(1,114))),new rt(13,44,44,20,20,new Et(56,new mt(1,144))),new rt(14,48,48,22,22,new Et(68,new mt(1,174))),new rt(15,52,52,24,24,new Et(42,new mt(2,102))),new rt(16,64,64,14,14,new Et(56,new mt(2,140))),new rt(17,72,72,16,16,new Et(36,new mt(4,92))),new rt(18,80,80,18,18,new Et(48,new mt(4,114))),new rt(19,88,88,20,20,new Et(56,new mt(4,144))),new rt(20,96,96,22,22,new Et(68,new mt(4,174))),new rt(21,104,104,24,24,new Et(56,new mt(6,136))),new rt(22,120,120,18,18,new Et(68,new mt(6,175))),new rt(23,132,132,20,20,new Et(62,new mt(8,163))),new rt(24,144,144,22,22,new Et(62,new mt(8,156),new mt(2,155))),new rt(25,8,18,6,16,new Et(7,new mt(1,5))),new rt(26,8,32,6,14,new Et(11,new mt(1,10))),new rt(27,12,26,10,24,new Et(14,new mt(1,16))),new rt(28,12,36,10,16,new Et(18,new mt(1,22))),new rt(29,16,36,14,16,new Et(24,new mt(1,32))),new rt(30,16,48,14,22,new Et(28,new mt(1,49)))]}}rt.VERSIONS=rt.buildVersions();class sc{constructor(s){const a=s.getHeight();if(a<8||a>144||a&1)throw new k;this.version=sc.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new $(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const a=s.getHeight(),l=s.getWidth();return rt.getVersionForDimensions(a,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const h=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let x=!1,_=!1,C=!1,N=!1;do if(l===h&&u===0&&!x)s[a++]=this.readCorner1(h,d)&255,l-=2,u+=2,x=!0;else if(l===h-2&&u===0&&d&3&&!_)s[a++]=this.readCorner2(h,d)&255,l-=2,u+=2,_=!0;else if(l===h+4&&u===2&&!(d&7)&&!C)s[a++]=this.readCorner3(h,d)&255,l-=2,u+=2,C=!0;else if(l===h-2&&u===0&&(d&7)===4&&!N)s[a++]=this.readCorner4(h,d)&255,l-=2,u+=2,N=!0;else{do l<h&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,h,d)&255),l-=2,u+=2;while(l>=0&&u<d);l+=1,u+=3;do l>=0&&u<d&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,h,d)&255),l+=2,u-=2;while(l<h&&u>=0);l+=3,u+=1}while(l<h||u<d);if(a!==this.version.getTotalCodewords())throw new k;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let h=0;return this.readModule(s-2,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s-2,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s-1,a,l,u)&&(h|=1),h<<=1,this.readModule(s,a-2,l,u)&&(h|=1),h<<=1,this.readModule(s,a-1,l,u)&&(h|=1),h<<=1,this.readModule(s,a,l,u)&&(h|=1),h}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new w("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),d=a/u|0,x=l/h|0,_=d*u,C=x*h,N=new $(C,_);for(let U=0;U<d;++U){const W=U*u;for(let Z=0;Z<x;++Z){const te=Z*h;for(let ne=0;ne<u;++ne){const ae=U*(u+2)+1+ne,pe=W+ne;for(let Ie=0;Ie<h;++Ie){const be=Z*(h+2)+1+Ie;if(s.get(be,ae)){const _e=te+Ie;N.set(_e,pe)}}}}}return N}}class oi{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){const l=a.getECBlocks();let u=0;const h=l.getECBlocks();for(let ne of h)u+=ne.getCount();const d=new Array(u);let x=0;for(let ne of h)for(let ae=0;ae<ne.getCount();ae++){const pe=ne.getDataCodewords(),Ie=l.getECCodewords()+pe;d[x++]=new oi(pe,new Uint8Array(Ie))}const C=d[0].codewords.length-l.getECCodewords(),N=C-1;let U=0;for(let ne=0;ne<N;ne++)for(let ae=0;ae<x;ae++)d[ae].codewords[ne]=s[U++];const W=a.getVersionNumber()===24,Z=W?8:x;for(let ne=0;ne<Z;ne++)d[ne].codewords[C-1]=s[U++];const te=d[0].codewords.length;for(let ne=C;ne<te;ne++)for(let ae=0;ae<x;ae++){const pe=W?(ae+8)%x:ae,Ie=W&&pe>7?ne-1:ne;d[pe].codewords[Ie]=s[U++]}if(U!==s.length)throw new w;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ir{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new w(""+s);let a=0,l=this.bitOffset,u=this.byteOffset;const h=this.bytes;if(l>0){const d=8-l,x=s<d?s:d,_=d-x,C=255>>8-x<<_;a=(h[u]&C)>>_,s-=x,l+=x,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|h[u]&255,u++,s-=8;if(s>0){const d=8-s,x=255>>d<<d;a=a<<s|(h[u]&x)>>d,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class br{static decode(s){const a=new Ir(s),l=new R,u=new R,h=new Array;let d=qt.ASCII_ENCODE;do if(d===qt.ASCII_ENCODE)d=this.decodeAsciiSegment(a,l,u);else{switch(d){case qt.C40_ENCODE:this.decodeC40Segment(a,l);break;case qt.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(a,l,h);break;default:throw new k}d=qt.ASCII_ENCODE}while(d!==qt.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new ze(s,l.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let h=s.readBits(8);if(h===0)throw new k;if(h<=128)return u&&(h+=128),a.append(String.fromCharCode(h-1)),qt.ASCII_ENCODE;if(h===129)return qt.PAD_ENCODE;if(h<=229){const d=h-130;d<10&&a.append("0"),a.append(""+d)}else switch(h){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(h!==254||s.available()!==0)throw new k;break}}while(s.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1;const u=[];let h=0;do{if(s.available()===8)return;const d=s.readBits(8);if(d===254)return;this.parseTwoBytes(d,s.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(h){case 0:if(_<3)h=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:l?(a.append(String.fromCharCode(_+224)),l=!1):a.append(String.fromCharCode(_+96)),h=0;break;default:throw new k}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],h=0;do{if(s.available()===8)return;const d=s.readBits(8);if(d===254)return;this.parseTwoBytes(d,s.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(h){case 0:if(_<3)h=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),h=0}else throw new k;break;default:throw new k}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){const l=[];do{if(s.available()===8)return;const u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let h=0;h<3;h++){const d=l[h];switch(d){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(d<14)a.append(String.fromCharCode(d+44));else if(d<40)a.append(String.fromCharCode(d+51));else throw new k;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,h=Math.floor(u/1600);l[0]=h,u-=h*1600,h=Math.floor(u/40),l[1]=h,l[2]=u-h*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){const h=8-s.getBitOffset();h!==8&&s.readBits(h);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset();const h=this.unrandomize255State(s.readBits(8),u++);let d;if(h===0?d=s.available()/8|0:h<250?d=h:d=250*(h-249)+this.unrandomize255State(s.readBits(8),u++),d<0)throw new k;const x=new Uint8Array(d);for(let _=0;_<d;_++){if(s.available()<8)throw new k;x[_]=this.unrandomize255State(s.readBits(8),u++)}l.push(x);try{a.append(z.decode(x,O.ISO88591))}catch(_){throw new pt("Platform does not support required encoding: "+_.message)}}static unrandomize255State(s,a){const l=149*a%255+1,u=s-l;return u>=0?u:u+256}}br.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],br.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],br.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],br.TEXT_SHIFT2_SET_CHARS=br.C40_SHIFT2_SET_CHARS,br.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class oc{constructor(){this.rsDecoder=new jt(qe.DATA_MATRIX_FIELD_256)}decode(s){const a=new sc(s),l=a.getVersion(),u=a.readCodewords(),h=oi.getDataBlocks(u,l);let d=0;for(let C of h)d+=C.getNumDataCodewords();const x=new Uint8Array(d),_=h.length;for(let C=0;C<_;C++){const N=h[C],U=N.getCodewords(),W=N.getNumDataCodewords();this.correctErrors(U,W);for(let Z=0;Z<W;Z++)x[Z*_+C]=U[Z]}return br.decode(x)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class Ge{constructor(s){this.image=s,this.rectangleDetector=new it(this.image)}detect(){const s=this.rectangleDetector.detect();let a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new Y;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],h=a[2],d=a[3];let x=this.transitionsBetween(l,d)+1,_=this.transitionsBetween(h,d)+1;(x&1)===1&&(x+=1),(_&1)===1&&(_+=1),4*x<7*_&&4*_<7*x&&(x=_=Math.max(x,_));let C=Ge.sampleGrid(this.image,l,u,h,d,x,_);return new Cn(C,[l,u,h,d])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),h=(a.getY()-s.getY())/(l+1);return new Te(s.getX()+u,s.getY()+h)}static moveAway(s,a,l){let u=s.getX(),h=s.getY();return u<a?u-=1:u+=1,h<l?h-=1:h+=1,new Te(u,h)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],h=s[2],d=this.transitionsBetween(a,l),x=this.transitionsBetween(l,u),_=this.transitionsBetween(u,h),C=this.transitionsBetween(h,a),N=d,U=[h,a,l,u];return N>x&&(N=x,U[0]=a,U[1]=l,U[2]=u,U[3]=h),N>_&&(N=_,U[0]=l,U[1]=u,U[2]=h,U[3]=a),N>C&&(U[0]=u,U[1]=h,U[2]=a,U[3]=l),U}detectSolid2(s){let a=s[0],l=s[1],u=s[2],h=s[3],d=this.transitionsBetween(a,h),x=Ge.shiftPoint(l,u,(d+1)*4),_=Ge.shiftPoint(u,l,(d+1)*4),C=this.transitionsBetween(x,a),N=this.transitionsBetween(_,h);return C<N?(s[0]=a,s[1]=l,s[2]=u,s[3]=h):(s[0]=l,s[1]=u,s[2]=h,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],h=s[3],d=this.transitionsBetween(a,h),x=this.transitionsBetween(l,h),_=Ge.shiftPoint(a,l,(x+1)*4),C=Ge.shiftPoint(u,l,(d+1)*4);d=this.transitionsBetween(_,h),x=this.transitionsBetween(C,h);let N=new Te(h.getX()+(u.getX()-l.getX())/(d+1),h.getY()+(u.getY()-l.getY())/(d+1)),U=new Te(h.getX()+(a.getX()-l.getX())/(x+1),h.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(N))return this.isValid(U)?U:null;if(!this.isValid(U))return N;let W=this.transitionsBetween(_,N)+this.transitionsBetween(C,N),Z=this.transitionsBetween(_,U)+this.transitionsBetween(C,U);return W>Z?N:U}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],h=s[3],d=this.transitionsBetween(a,h)+1,x=this.transitionsBetween(u,h)+1,_=Ge.shiftPoint(a,l,x*4),C=Ge.shiftPoint(u,l,d*4);d=this.transitionsBetween(_,h)+1,x=this.transitionsBetween(C,h)+1,(d&1)===1&&(d+=1),(x&1)===1&&(x+=1);let N=(a.getX()+l.getX()+u.getX()+h.getX())/4,U=(a.getY()+l.getY()+u.getY()+h.getY())/4;a=Ge.moveAway(a,N,U),l=Ge.moveAway(l,N,U),u=Ge.moveAway(u,N,U),h=Ge.moveAway(h,N,U);let W,Z;return _=Ge.shiftPoint(a,l,x*4),_=Ge.shiftPoint(_,h,d*4),W=Ge.shiftPoint(l,a,x*4),W=Ge.shiftPoint(W,u,d*4),C=Ge.shiftPoint(u,h,x*4),C=Ge.shiftPoint(C,l,d*4),Z=Ge.shiftPoint(h,u,x*4),Z=Ge.shiftPoint(Z,a,d*4),[_,W,C,Z]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,h,d,x){return Nt.getInstance().sampleGrid(s,d,x,.5,.5,d-.5,.5,d-.5,x-.5,.5,x-.5,a.getX(),a.getY(),h.getX(),h.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),h=Math.trunc(a.getX()),d=Math.trunc(a.getY()),x=Math.abs(d-u)>Math.abs(h-l);if(x){let ne=l;l=u,u=ne,ne=h,h=d,d=ne}let _=Math.abs(h-l),C=Math.abs(d-u),N=-_/2,U=u<d?1:-1,W=l<h?1:-1,Z=0,te=this.image.get(x?u:l,x?l:u);for(let ne=l,ae=u;ne!==h;ne+=W){let pe=this.image.get(x?ae:ne,x?ne:ae);if(pe!==te&&(Z++,te=pe),N+=C,N>0){if(ae===d)break;ae+=U,N-=_}}return Z}}class Br{constructor(){this.decoder=new oc}decode(s,a=null){let l,u;if(a!=null&&a.has(q.PURE_BARCODE)){const C=Br.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(C),u=Br.NO_POINTS}else{const C=new Ge(s.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const h=l.getRawBytes(),d=new ue(l.getText(),h,8*h.length,u,me.DATA_MATRIX,j.currentTimeMillis()),x=l.getByteSegments();x!=null&&d.putMetadata(Oe.BYTE_SEGMENTS,x);const _=l.getECLevel();return _!=null&&d.putMetadata(Oe.ERROR_CORRECTION_LEVEL,_),d}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a==null||l==null)throw new Y;const u=this.moduleSize(a,s);let h=a[1];const d=l[1];let x=a[0];const C=(l[0]-x+1)/u,N=(d-h+1)/u;if(C<=0||N<=0)throw new Y;const U=u/2;h+=U,x+=U;const W=new $(C,N);for(let Z=0;Z<N;Z++){const te=h+Z*u;for(let ne=0;ne<C;ne++)s.get(x+ne*u,te)&&W.set(ne,Z)}return W}static moduleSize(s,a){const l=a.getWidth();let u=s[0];const h=s[1];for(;u<l&&a.get(u,h);)u++;if(u===l)throw new Y;const d=u-s[0];if(d===0)throw new Y;return d}}Br.NO_POINTS=[];class Qo extends Ee{constructor(s=500){super(new Br,s)}}var ai;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(ai||(ai={}));class Pt{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,Pt.FOR_BITS.set(l,this),Pt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Pt.L;case"M":return Pt.M;case"Q":return Pt.Q;case"H":return Pt.H;default:throw new y(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Pt))return!1;const a=s;return this.value===a.value}static forBits(s){if(s<0||s>=Pt.FOR_BITS.size)throw new w;return Pt.FOR_BITS.get(s)}}Pt.FOR_BITS=new Map,Pt.FOR_VALUE=new Map,Pt.L=new Pt(ai.L,"L",1),Pt.M=new Pt(ai.M,"M",0),Pt.Q=new Pt(ai.Q,"Q",3),Pt.H=new Pt(ai.H,"H",2);class jn{constructor(s){this.errorCorrectionLevel=Pt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return M.bitCount(s^a)}static decodeFormatInformation(s,a){const l=jn.doDecodeFormatInformation(s,a);return l!==null?l:jn.doDecodeFormatInformation(s^jn.FORMAT_INFO_MASK_QR,a^jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const h of jn.FORMAT_INFO_DECODE_LOOKUP){const d=h[0];if(d===s||d===a)return new jn(h[1]);let x=jn.numBitsDiffering(s,d);x<l&&(u=h[1],l=x),s!==a&&(x=jn.numBitsDiffering(a,d),x<l&&(u=h[1],l=x))}return l<=3?new jn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof jn))return!1;const a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}jn.FORMAT_INFO_MASK_QR=21522,jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const a=this.ecBlocks;for(const l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const h=l[0].getECCodewordsPerBlock(),d=l[0].getECBlocks();for(const x of d)u+=x.getCount()*(x.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new k;try{return this.getVersionForNumber((s-17)/4)}catch{throw new k}}static getVersionForNumber(s){if(s<1||s>40)throw new w;return Le.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Le.VERSION_DECODE_INFO.length;u++){const h=Le.VERSION_DECODE_INFO[u];if(h===s)return Le.getVersionForNumber(u+7);const d=jn.numBitsDiffering(s,h);d<a&&(l=u+7,a=d)}return a<=3?Le.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),a=new $(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const h=this.alignmentPatternCenters[u]-2;for(let d=0;d<l;d++)u===0&&(d===0||d===l-1)||u===l-1&&d===0||a.setRegion(this.alignmentPatternCenters[d]-2,h,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}Le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Le.VERSIONS=[new Le(1,new Int32Array(0),new le(7,new Q(1,19)),new le(10,new Q(1,16)),new le(13,new Q(1,13)),new le(17,new Q(1,9))),new Le(2,Int32Array.from([6,18]),new le(10,new Q(1,34)),new le(16,new Q(1,28)),new le(22,new Q(1,22)),new le(28,new Q(1,16))),new Le(3,Int32Array.from([6,22]),new le(15,new Q(1,55)),new le(26,new Q(1,44)),new le(18,new Q(2,17)),new le(22,new Q(2,13))),new Le(4,Int32Array.from([6,26]),new le(20,new Q(1,80)),new le(18,new Q(2,32)),new le(26,new Q(2,24)),new le(16,new Q(4,9))),new Le(5,Int32Array.from([6,30]),new le(26,new Q(1,108)),new le(24,new Q(2,43)),new le(18,new Q(2,15),new Q(2,16)),new le(22,new Q(2,11),new Q(2,12))),new Le(6,Int32Array.from([6,34]),new le(18,new Q(2,68)),new le(16,new Q(4,27)),new le(24,new Q(4,19)),new le(28,new Q(4,15))),new Le(7,Int32Array.from([6,22,38]),new le(20,new Q(2,78)),new le(18,new Q(4,31)),new le(18,new Q(2,14),new Q(4,15)),new le(26,new Q(4,13),new Q(1,14))),new Le(8,Int32Array.from([6,24,42]),new le(24,new Q(2,97)),new le(22,new Q(2,38),new Q(2,39)),new le(22,new Q(4,18),new Q(2,19)),new le(26,new Q(4,14),new Q(2,15))),new Le(9,Int32Array.from([6,26,46]),new le(30,new Q(2,116)),new le(22,new Q(3,36),new Q(2,37)),new le(20,new Q(4,16),new Q(4,17)),new le(24,new Q(4,12),new Q(4,13))),new Le(10,Int32Array.from([6,28,50]),new le(18,new Q(2,68),new Q(2,69)),new le(26,new Q(4,43),new Q(1,44)),new le(24,new Q(6,19),new Q(2,20)),new le(28,new Q(6,15),new Q(2,16))),new Le(11,Int32Array.from([6,30,54]),new le(20,new Q(4,81)),new le(30,new Q(1,50),new Q(4,51)),new le(28,new Q(4,22),new Q(4,23)),new le(24,new Q(3,12),new Q(8,13))),new Le(12,Int32Array.from([6,32,58]),new le(24,new Q(2,92),new Q(2,93)),new le(22,new Q(6,36),new Q(2,37)),new le(26,new Q(4,20),new Q(6,21)),new le(28,new Q(7,14),new Q(4,15))),new Le(13,Int32Array.from([6,34,62]),new le(26,new Q(4,107)),new le(22,new Q(8,37),new Q(1,38)),new le(24,new Q(8,20),new Q(4,21)),new le(22,new Q(12,11),new Q(4,12))),new Le(14,Int32Array.from([6,26,46,66]),new le(30,new Q(3,115),new Q(1,116)),new le(24,new Q(4,40),new Q(5,41)),new le(20,new Q(11,16),new Q(5,17)),new le(24,new Q(11,12),new Q(5,13))),new Le(15,Int32Array.from([6,26,48,70]),new le(22,new Q(5,87),new Q(1,88)),new le(24,new Q(5,41),new Q(5,42)),new le(30,new Q(5,24),new Q(7,25)),new le(24,new Q(11,12),new Q(7,13))),new Le(16,Int32Array.from([6,26,50,74]),new le(24,new Q(5,98),new Q(1,99)),new le(28,new Q(7,45),new Q(3,46)),new le(24,new Q(15,19),new Q(2,20)),new le(30,new Q(3,15),new Q(13,16))),new Le(17,Int32Array.from([6,30,54,78]),new le(28,new Q(1,107),new Q(5,108)),new le(28,new Q(10,46),new Q(1,47)),new le(28,new Q(1,22),new Q(15,23)),new le(28,new Q(2,14),new Q(17,15))),new Le(18,Int32Array.from([6,30,56,82]),new le(30,new Q(5,120),new Q(1,121)),new le(26,new Q(9,43),new Q(4,44)),new le(28,new Q(17,22),new Q(1,23)),new le(28,new Q(2,14),new Q(19,15))),new Le(19,Int32Array.from([6,30,58,86]),new le(28,new Q(3,113),new Q(4,114)),new le(26,new Q(3,44),new Q(11,45)),new le(26,new Q(17,21),new Q(4,22)),new le(26,new Q(9,13),new Q(16,14))),new Le(20,Int32Array.from([6,34,62,90]),new le(28,new Q(3,107),new Q(5,108)),new le(26,new Q(3,41),new Q(13,42)),new le(30,new Q(15,24),new Q(5,25)),new le(28,new Q(15,15),new Q(10,16))),new Le(21,Int32Array.from([6,28,50,72,94]),new le(28,new Q(4,116),new Q(4,117)),new le(26,new Q(17,42)),new le(28,new Q(17,22),new Q(6,23)),new le(30,new Q(19,16),new Q(6,17))),new Le(22,Int32Array.from([6,26,50,74,98]),new le(28,new Q(2,111),new Q(7,112)),new le(28,new Q(17,46)),new le(30,new Q(7,24),new Q(16,25)),new le(24,new Q(34,13))),new Le(23,Int32Array.from([6,30,54,78,102]),new le(30,new Q(4,121),new Q(5,122)),new le(28,new Q(4,47),new Q(14,48)),new le(30,new Q(11,24),new Q(14,25)),new le(30,new Q(16,15),new Q(14,16))),new Le(24,Int32Array.from([6,28,54,80,106]),new le(30,new Q(6,117),new Q(4,118)),new le(28,new Q(6,45),new Q(14,46)),new le(30,new Q(11,24),new Q(16,25)),new le(30,new Q(30,16),new Q(2,17))),new Le(25,Int32Array.from([6,32,58,84,110]),new le(26,new Q(8,106),new Q(4,107)),new le(28,new Q(8,47),new Q(13,48)),new le(30,new Q(7,24),new Q(22,25)),new le(30,new Q(22,15),new Q(13,16))),new Le(26,Int32Array.from([6,30,58,86,114]),new le(28,new Q(10,114),new Q(2,115)),new le(28,new Q(19,46),new Q(4,47)),new le(28,new Q(28,22),new Q(6,23)),new le(30,new Q(33,16),new Q(4,17))),new Le(27,Int32Array.from([6,34,62,90,118]),new le(30,new Q(8,122),new Q(4,123)),new le(28,new Q(22,45),new Q(3,46)),new le(30,new Q(8,23),new Q(26,24)),new le(30,new Q(12,15),new Q(28,16))),new Le(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new Q(3,117),new Q(10,118)),new le(28,new Q(3,45),new Q(23,46)),new le(30,new Q(4,24),new Q(31,25)),new le(30,new Q(11,15),new Q(31,16))),new Le(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new Q(7,116),new Q(7,117)),new le(28,new Q(21,45),new Q(7,46)),new le(30,new Q(1,23),new Q(37,24)),new le(30,new Q(19,15),new Q(26,16))),new Le(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new Q(5,115),new Q(10,116)),new le(28,new Q(19,47),new Q(10,48)),new le(30,new Q(15,24),new Q(25,25)),new le(30,new Q(23,15),new Q(25,16))),new Le(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new Q(13,115),new Q(3,116)),new le(28,new Q(2,46),new Q(29,47)),new le(30,new Q(42,24),new Q(1,25)),new le(30,new Q(23,15),new Q(28,16))),new Le(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new Q(17,115)),new le(28,new Q(10,46),new Q(23,47)),new le(30,new Q(10,24),new Q(35,25)),new le(30,new Q(19,15),new Q(35,16))),new Le(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new Q(17,115),new Q(1,116)),new le(28,new Q(14,46),new Q(21,47)),new le(30,new Q(29,24),new Q(19,25)),new le(30,new Q(11,15),new Q(46,16))),new Le(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new Q(13,115),new Q(6,116)),new le(28,new Q(14,46),new Q(23,47)),new le(30,new Q(44,24),new Q(7,25)),new le(30,new Q(59,16),new Q(1,17))),new Le(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new Q(12,121),new Q(7,122)),new le(28,new Q(12,47),new Q(26,48)),new le(30,new Q(39,24),new Q(14,25)),new le(30,new Q(22,15),new Q(41,16))),new Le(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new Q(6,121),new Q(14,122)),new le(28,new Q(6,47),new Q(34,48)),new le(30,new Q(46,24),new Q(10,25)),new le(30,new Q(2,15),new Q(64,16))),new Le(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new Q(17,122),new Q(4,123)),new le(28,new Q(29,46),new Q(14,47)),new le(30,new Q(49,24),new Q(10,25)),new le(30,new Q(24,15),new Q(46,16))),new Le(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new Q(4,122),new Q(18,123)),new le(28,new Q(13,46),new Q(32,47)),new le(30,new Q(48,24),new Q(14,25)),new le(30,new Q(42,15),new Q(32,16))),new Le(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new Q(20,117),new Q(4,118)),new le(28,new Q(40,47),new Q(7,48)),new le(30,new Q(43,24),new Q(22,25)),new le(30,new Q(10,15),new Q(67,16))),new Le(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new Q(19,118),new Q(6,119)),new le(28,new Q(18,47),new Q(31,48)),new le(30,new Q(34,24),new Q(34,25)),new le(30,new Q(20,15),new Q(61,16)))];var In;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(In||(In={}));class Wn{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}Wn.values=new Map([[In.DATA_MASK_000,new Wn(In.DATA_MASK_000,(B,s)=>(B+s&1)===0)],[In.DATA_MASK_001,new Wn(In.DATA_MASK_001,(B,s)=>(B&1)===0)],[In.DATA_MASK_010,new Wn(In.DATA_MASK_010,(B,s)=>s%3===0)],[In.DATA_MASK_011,new Wn(In.DATA_MASK_011,(B,s)=>(B+s)%3===0)],[In.DATA_MASK_100,new Wn(In.DATA_MASK_100,(B,s)=>(Math.floor(B/2)+Math.floor(s/3)&1)===0)],[In.DATA_MASK_101,new Wn(In.DATA_MASK_101,(B,s)=>B*s%6===0)],[In.DATA_MASK_110,new Wn(In.DATA_MASK_110,(B,s)=>B*s%6<3)],[In.DATA_MASK_111,new Wn(In.DATA_MASK_111,(B,s)=>(B+s+B*s%3&1)===0)]]);class hs{constructor(s){const a=s.getHeight();if(a<21||(a&3)!==1)throw new k;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let h=0;h<6;h++)s=this.copyBit(h,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let h=5;h>=0;h--)s=this.copyBit(8,h,s);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let h=a-1;h>=u;h--)l=this.copyBit(8,h,l);for(let h=a-8;h<a;h++)l=this.copyBit(h,8,l);if(this.parsedFormatInfo=jn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return Le.getVersionForNumber(a);let l=0;const u=s-11;for(let d=5;d>=0;d--)for(let x=s-9;x>=u;x--)l=this.copyBit(x,d,l);let h=Le.decodeVersionInformation(l);if(h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;l=0;for(let d=5;d>=0;d--)for(let x=s-9;x>=u;x--)l=this.copyBit(d,x,l);if(h=Le.decodeVersionInformation(l),h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;throw new k}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),a=this.readVersion(),l=Wn.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const h=a.buildFunctionPattern();let d=!0;const x=new Uint8Array(a.getTotalCodewords());let _=0,C=0,N=0;for(let U=u-1;U>0;U-=2){U===6&&U--;for(let W=0;W<u;W++){const Z=d?u-1-W:W;for(let te=0;te<2;te++)h.get(U-te,Z)||(N++,C<<=1,this.bitMatrix.get(U-te,Z)&&(C|=1),N===8&&(x[_++]=C,N=0,C=0))}d=!d}if(_!==a.getTotalCodewords())throw new k;return x}remask(){if(this.parsedFormatInfo===null)return;const s=Wn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,h=s.getHeight();u<h;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class Ha{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new w;const u=a.getECBlocksForLevel(l);let h=0;const d=u.getECBlocks();for(const te of d)h+=te.getCount();const x=new Array(h);let _=0;for(const te of d)for(let ne=0;ne<te.getCount();ne++){const ae=te.getDataCodewords(),pe=u.getECCodewordsPerBlock()+ae;x[_++]=new Ha(ae,new Uint8Array(pe))}const C=x[0].codewords.length;let N=x.length-1;for(;N>=0&&x[N].codewords.length!==C;)N--;N++;const U=C-u.getECCodewordsPerBlock();let W=0;for(let te=0;te<U;te++)for(let ne=0;ne<_;ne++)x[ne].codewords[te]=s[W++];for(let te=N;te<_;te++)x[te].codewords[U]=s[W++];const Z=x[0].codewords.length;for(let te=U;te<Z;te++)for(let ne=0;ne<_;ne++){const ae=ne<N?te:te+1;x[ne].codewords[ae]=s[W++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var fr;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(fr||(fr={}));class je{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,je.FOR_BITS.set(u,this),je.FOR_VALUE.set(s,this)}static forBits(s){const a=je.FOR_BITS.get(s);if(a===void 0)throw new w;return a}getCharacterCountBits(s){const a=s.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof je))return!1;const a=s;return this.value===a.value}toString(){return this.stringValue}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.TERMINATOR=new je(fr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),je.NUMERIC=new je(fr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),je.ALPHANUMERIC=new je(fr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),je.STRUCTURED_APPEND=new je(fr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),je.BYTE=new je(fr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),je.ECI=new je(fr.ECI,"ECI",Int32Array.from([0,0,0]),7),je.KANJI=new je(fr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),je.FNC1_FIRST_POSITION=new je(fr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),je.FNC1_SECOND_POSITION=new je(fr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),je.HANZI=new je(fr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ut{static decode(s,a,l,u){const h=new Ir(s);let d=new R;const x=new Array;let _=-1,C=-1;try{let N=null,U=!1,W;do{if(h.available()<4)W=je.TERMINATOR;else{const Z=h.readBits(4);W=je.forBits(Z)}switch(W){case je.TERMINATOR:break;case je.FNC1_FIRST_POSITION:case je.FNC1_SECOND_POSITION:U=!0;break;case je.STRUCTURED_APPEND:if(h.available()<16)throw new k;_=h.readBits(8),C=h.readBits(8);break;case je.ECI:const Z=Ut.parseECIValue(h);if(N=I.getCharacterSetECIByValue(Z),N===null)throw new k;break;case je.HANZI:const te=h.readBits(4),ne=h.readBits(W.getCharacterCountBits(a));te===Ut.GB2312_SUBSET&&Ut.decodeHanziSegment(h,d,ne);break;default:const ae=h.readBits(W.getCharacterCountBits(a));switch(W){case je.NUMERIC:Ut.decodeNumericSegment(h,d,ae);break;case je.ALPHANUMERIC:Ut.decodeAlphanumericSegment(h,d,ae,U);break;case je.BYTE:Ut.decodeByteSegment(h,d,ae,N,x,u);break;case je.KANJI:Ut.decodeKanjiSegment(h,d,ae);break;default:throw new k}break}}while(W!==je.TERMINATOR)}catch{throw new k}return new ze(s,d.toString(),x.length===0?null:x,l===null?null:l.toString(),_,C)}static decodeHanziSegment(s,a,l){if(l*13>s.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const d=s.readBits(13);let x=d/96<<8&4294967295|d%96;x<959?x+=41377:x+=42657,u[h]=x>>8&255,u[h+1]=x&255,h+=2,l--}try{a.append(z.decode(u,O.GB2312))}catch(d){throw new k(d)}}static decodeKanjiSegment(s,a,l){if(l*13>s.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const d=s.readBits(13);let x=d/192<<8&4294967295|d%192;x<7936?x+=33088:x+=49472,u[h]=x>>8,u[h+1]=x,h+=2,l--}try{a.append(z.decode(u,O.SHIFT_JIS))}catch(d){throw new k(d)}}static decodeByteSegment(s,a,l,u,h,d){if(8*l>s.available())throw new k;const x=new Uint8Array(l);for(let C=0;C<l;C++)x[C]=s.readBits(8);let _;u===null?_=O.guessEncoding(x,d):_=u.getName();try{a.append(z.decode(x,_))}catch(C){throw new k(C)}h.push(x)}static toAlphaNumericChar(s){if(s>=Ut.ALPHANUMERIC_CHARS.length)throw new k;return Ut.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,a,l,u){const h=a.length();for(;l>1;){if(s.available()<11)throw new k;const d=s.readBits(11);a.append(Ut.toAlphaNumericChar(Math.floor(d/45))),a.append(Ut.toAlphaNumericChar(d%45)),l-=2}if(l===1){if(s.available()<6)throw new k;a.append(Ut.toAlphaNumericChar(s.readBits(6)))}if(u)for(let d=h;d<a.length();d++)a.charAt(d)==="%"&&(d<a.length()-1&&a.charAt(d+1)==="%"?a.deleteCharAt(d+1):a.setCharAt(d,""))}static decodeNumericSegment(s,a,l){for(;l>=3;){if(s.available()<10)throw new k;const u=s.readBits(10);if(u>=1e3)throw new k;a.append(Ut.toAlphaNumericChar(Math.floor(u/100))),a.append(Ut.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Ut.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(s.available()<7)throw new k;const u=s.readBits(7);if(u>=100)throw new k;a.append(Ut.toAlphaNumericChar(Math.floor(u/10))),a.append(Ut.toAlphaNumericChar(u%10))}else if(l===1){if(s.available()<4)throw new k;const u=s.readBits(4);if(u>=10)throw new k;a.append(Ut.toAlphaNumericChar(u))}}static parseECIValue(s){const a=s.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=s.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=s.readBits(16);return(a&31)<<16&4294967295|l}throw new k}}Ut.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ut.GB2312_SUBSET=1;class ac{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const a=s[0];s[0]=s[2],s[2]=a}}class zs{constructor(){this.rsDecoder=new jt(qe.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix($.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){const l=new hs(s);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(h){u=h}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const h=this.decodeBitMatrixParser(l,a);return h.setOther(new ac(!0)),h}catch(h){throw u!==null?u:h}}decodeBitMatrixParser(s,a){const l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),h=s.readCodewords(),d=Ha.getDataBlocks(h,l,u);let x=0;for(const N of d)x+=N.getNumDataCodewords();const _=new Uint8Array(x);let C=0;for(const N of d){const U=N.getCodewords(),W=N.getNumDataCodewords();this.correctErrors(U,W);for(let Z=0;Z<W;Z++)_[C++]=U[Z]}return Ut.decode(_,l,u,a)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class lc extends Te{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=(this.getX()+a)/2,h=(this.getY()+s)/2,d=(this.estimatedModuleSize+l)/2;return new lc(u,h,d)}}class Wa{constructor(s,a,l,u,h,d,x){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=h,this.moduleSize=d,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,a=this.height,l=this.width,u=s+l,h=this.startY+a/2,d=new Int32Array(3),x=this.image;for(let _=0;_<a;_++){const C=h+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));d[0]=0,d[1]=0,d[2]=0;let N=s;for(;N<u&&!x.get(N,C);)N++;let U=0;for(;N<u;){if(x.get(N,C))if(U===1)d[1]++;else if(U===2){if(this.foundPatternCross(d)){const W=this.handlePossibleCenter(d,C,N);if(W!==null)return W}d[0]=d[2],d[1]=1,d[2]=0,U=1}else d[++U]++;else U===1&&U++,d[U]++;N++}if(this.foundPatternCross(d)){const W=this.handlePossibleCenter(d,C,u);if(W!==null)return W}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){const h=this.image,d=h.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let _=s;for(;_>=0&&h.get(a,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&!h.get(a,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=s+1;_<d&&h.get(a,_)&&x[1]<=l;)x[1]++,_++;if(_===d||x[1]>l)return NaN;for(;_<d&&!h.get(a,_)&&x[2]<=l;)x[2]++,_++;if(x[2]>l)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(x)?Wa.centerFromEnd(x,_):NaN}handlePossibleCenter(s,a,l){const u=s[0]+s[1]+s[2],h=Wa.centerFromEnd(s,l),d=this.crossCheckVertical(a,h,2*s[1],u);if(!isNaN(d)){const x=(s[0]+s[1]+s[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,d,h))return C.combineEstimate(d,h,x);const _=new lc(h,d,x);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class cc extends Te{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=this.count+1,h=(this.count*this.getX()+a)/u,d=(this.count*this.getY()+s)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new cc(h,d,x,u)}}class Bi{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class bn{constructor(s,a){this.image=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const a=s!=null&&s.get(q.TRY_HARDER)!==void 0,l=s!=null&&s.get(q.PURE_BARCODE)!==void 0,u=this.image,h=u.getHeight(),d=u.getWidth();let x=Math.floor(3*h/(4*bn.MAX_MODULES));(x<bn.MIN_SKIP||a)&&(x=bn.MIN_SKIP);let _=!1;const C=new Int32Array(5);for(let U=x-1;U<h&&!_;U+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let W=0;for(let Z=0;Z<d;Z++)if(u.get(Z,U))(W&1)===1&&W++,C[W]++;else if(W&1)C[W]++;else if(W===4)if(bn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,Z,l)===!0)if(x=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>C[2]&&(U+=ne-C[2]-x,Z=d-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,W=3;continue}W=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,W=3;else C[++W]++;bn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,d,l)===!0&&(x=C[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Te.orderBestPatterns(N),new Bi(N)}static centerFromEnd(s,a){return a-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let a=0;for(let h=0;h<5;h++){const d=s[h];if(d===0)return!1;a+=d}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-s[0])<u&&Math.abs(l-s[1])<u&&Math.abs(3*l-s[2])<3*u&&Math.abs(l-s[3])<u&&Math.abs(l-s[4])<u}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,a,l,u){const h=this.getCrossCheckStateCount();let d=0;const x=this.image;for(;s>=d&&a>=d&&x.get(a-d,s-d);)h[2]++,d++;if(s<d||a<d)return!1;for(;s>=d&&a>=d&&!x.get(a-d,s-d)&&h[1]<=l;)h[1]++,d++;if(s<d||a<d||h[1]>l)return!1;for(;s>=d&&a>=d&&x.get(a-d,s-d)&&h[0]<=l;)h[0]++,d++;if(h[0]>l)return!1;const _=x.getHeight(),C=x.getWidth();for(d=1;s+d<_&&a+d<C&&x.get(a+d,s+d);)h[2]++,d++;if(s+d>=_||a+d>=C)return!1;for(;s+d<_&&a+d<C&&!x.get(a+d,s+d)&&h[3]<l;)h[3]++,d++;if(s+d>=_||a+d>=C||h[3]>=l)return!1;for(;s+d<_&&a+d<C&&x.get(a+d,s+d)&&h[4]<l;)h[4]++,d++;if(h[4]>=l)return!1;const N=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(N-u)<2*u&&bn.foundPatternCross(h)}crossCheckVertical(s,a,l,u){const h=this.image,d=h.getHeight(),x=this.getCrossCheckStateCount();let _=s;for(;_>=0&&h.get(a,_);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(a,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&h.get(a,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=s+1;_<d&&h.get(a,_);)x[2]++,_++;if(_===d)return NaN;for(;_<d&&!h.get(a,_)&&x[3]<l;)x[3]++,_++;if(_===d||x[3]>=l)return NaN;for(;_<d&&h.get(a,_)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=2*u?NaN:bn.foundPatternCross(x)?bn.centerFromEnd(x,_):NaN}crossCheckHorizontal(s,a,l,u){const h=this.image,d=h.getWidth(),x=this.getCrossCheckStateCount();let _=s;for(;_>=0&&h.get(_,a);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(_,a)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&h.get(_,a)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=s+1;_<d&&h.get(_,a);)x[2]++,_++;if(_===d)return NaN;for(;_<d&&!h.get(_,a)&&x[3]<l;)x[3]++,_++;if(_===d||x[3]>=l)return NaN;for(;_<d&&h.get(_,a)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=u?NaN:bn.foundPatternCross(x)?bn.centerFromEnd(x,_):NaN}handlePossibleCenter(s,a,l,u){const h=s[0]+s[1]+s[2]+s[3]+s[4];let d=bn.centerFromEnd(s,l),x=this.crossCheckVertical(a,Math.floor(d),s[2],h);if(!isNaN(x)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(x),s[2],h),!isNaN(d)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(d),s[2],h)))){const _=h/7;let C=!1;const N=this.possibleCenters;for(let U=0,W=N.length;U<W;U++){const Z=N[U];if(Z.aboutEquals(_,x,d)){N[U]=Z.combineEstimate(x,d,_),C=!0;break}}if(!C){const U=new cc(d,x,_);N.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=bn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,a=0;const l=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=bn.CENTER_QUORUM&&(s++,a+=d.getEstimatedModuleSize());if(s<3)return!1;const u=a/l;let h=0;for(const d of this.possibleCenters)h+=Math.abs(d.getEstimatedModuleSize()-u);return h<=.05*a}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new Y;const a=this.possibleCenters;let l;if(s>3){let u=0,h=0;for(const _ of this.possibleCenters){const C=_.getEstimatedModuleSize();u+=C,h+=C*C}l=u/s;let d=Math.sqrt(h/s-l*l);a.sort((_,C)=>{const N=Math.abs(C.getEstimatedModuleSize()-l),U=Math.abs(_.getEstimatedModuleSize()-l);return N<U?-1:N>U?1:0});const x=Math.max(.2*l,d);for(let _=0;_<a.length&&a.length>3;_++){const C=a[_];Math.abs(C.getEstimatedModuleSize()-l)>x&&(a.splice(_,1),_--)}}if(a.length>3){let u=0;for(const h of a)u+=h.getEstimatedModuleSize();l=u/a.length,a.sort((h,d)=>{if(d.getCount()===h.getCount()){const x=Math.abs(d.getEstimatedModuleSize()-l),_=Math.abs(h.getEstimatedModuleSize()-l);return x<_?1:x>_?-1:0}else return d.getCount()-h.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}bn.CENTER_QUORUM=2,bn.MIN_SKIP=3,bn.MAX_MODULES=57;class ds{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(q.NEED_RESULT_POINT_CALLBACK);const l=new bn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),h=this.calculateModuleSize(a,l,u);if(h<1)throw new Y("No pattern found in proccess finder.");const d=ds.computeDimension(a,l,u,h),x=Le.getProvisionalVersionForDimension(d),_=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const Z=l.getX()-a.getX()+u.getX(),te=l.getY()-a.getY()+u.getY(),ne=1-3/_,ae=Math.floor(a.getX()+ne*(Z-a.getX())),pe=Math.floor(a.getY()+ne*(te-a.getY()));for(let Ie=4;Ie<=16;Ie<<=1)try{C=this.findAlignmentInRegion(h,ae,pe,Ie);break}catch(be){if(!(be instanceof Y))throw be}}const N=ds.createTransform(a,l,u,C,d),U=ds.sampleGrid(this.image,N,d);let W;return C===null?W=[u,a,l]:W=[u,a,l,C],new Cn(U,W)}static createTransform(s,a,l,u,h){const d=h-3.5;let x,_,C,N;return u!==null?(x=u.getX(),_=u.getY(),C=d-3,N=C):(x=a.getX()-s.getX()+l.getX(),_=a.getY()-s.getY()+l.getY(),C=d,N=d),Jt.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,C,N,3.5,d,s.getX(),s.getY(),a.getX(),a.getY(),x,_,l.getX(),l.getY())}static sampleGrid(s,a,l){return Nt.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){const h=Re.round(Te.distance(s,a)/u),d=Re.round(Te.distance(s,l)/u);let x=Math.floor((h+d)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new Y("Dimensions could be not found.")}return x}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let h=this.sizeOfBlackWhiteBlackRun(s,a,l,u),d=1,x=s-(l-s);x<0?(d=s/(s-x),x=0):x>=this.image.getWidth()&&(d=(this.image.getWidth()-1-s)/(x-s),x=this.image.getWidth()-1);let _=Math.floor(a-(u-a)*d);return d=1,_<0?(d=a/(a-_),_=0):_>=this.image.getHeight()&&(d=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),x=Math.floor(s+(x-s)*d),h+=this.sizeOfBlackWhiteBlackRun(s,a,x,_),h-1}sizeOfBlackWhiteBlackRun(s,a,l,u){const h=Math.abs(u-a)>Math.abs(l-s);if(h){let Z=s;s=a,a=Z,Z=l,l=u,u=Z}const d=Math.abs(l-s),x=Math.abs(u-a);let _=-d/2;const C=s<l?1:-1,N=a<u?1:-1;let U=0;const W=l+C;for(let Z=s,te=a;Z!==W;Z+=C){const ne=h?te:Z,ae=h?Z:te;if(U===1===this.image.get(ne,ae)){if(U===2)return Re.distance(Z,te,s,a);U++}if(_+=x,_>0){if(te===u)break;te+=N,_-=d}}return U===2?Re.distance(l+C,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){const h=Math.floor(u*s),d=Math.max(0,a-h),x=Math.min(this.image.getWidth()-1,a+h);if(x-d<s*3)throw new Y("Alignment top exceeds estimated module size.");const _=Math.max(0,l-h),C=Math.min(this.image.getHeight()-1,l+h);if(C-_<s*3)throw new Y("Alignment bottom exceeds estimated module size.");return new Wa(this.image,d,_,x-d,C-_,s,this.resultPointCallback).find()}}class Ur{constructor(){this.decoder=new zs}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(q.PURE_BARCODE)!==void 0){const _=Ur.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,a),u=Ur.NO_POINTS}else{const _=new ds(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(_.getBits(),a),u=_.getPoints()}l.getOther()instanceof ac&&l.getOther().applyMirroredCorrection(u);const h=new ue(l.getText(),l.getRawBytes(),void 0,u,me.QR_CODE,void 0),d=l.getByteSegments();d!==null&&h.putMetadata(Oe.BYTE_SEGMENTS,d);const x=l.getECLevel();return x!==null&&h.putMetadata(Oe.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(h.putMetadata(Oe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),h.putMetadata(Oe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),h}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new Y;const u=this.moduleSize(a,s);let h=a[1],d=l[1],x=a[0],_=l[0];if(x>=_||h>=d)throw new Y;if(d-h!==_-x&&(_=x+(d-h),_>=s.getWidth()))throw new Y;const C=Math.round((_-x+1)/u),N=Math.round((d-h+1)/u);if(C<=0||N<=0)throw new Y;if(N!==C)throw new Y;const U=Math.floor(u/2);h+=U,x+=U;const W=x+Math.floor((C-1)*u)-_;if(W>0){if(W>U)throw new Y;x-=W}const Z=h+Math.floor((N-1)*u)-d;if(Z>0){if(Z>U)throw new Y;h-=Z}const te=new $(C,N);for(let ne=0;ne<N;ne++){const ae=h+Math.floor(ne*u);for(let pe=0;pe<C;pe++)s.get(x+Math.floor(pe*u),ae)&&te.set(pe,ne)}return te}static moduleSize(s,a){const l=a.getHeight(),u=a.getWidth();let h=s[0],d=s[1],x=!0,_=0;for(;h<u&&d<l;){if(x!==a.get(h,d)){if(++_===5)break;x=!x}h++,d++}if(h===u||d===l)throw new Y;return(h-s[0])/7}}Ur.NO_POINTS=new Array;class Ve{PDF417Common(){}static getBitCountSum(s){return Re.sum(s)}static toIntArray(s){if(s==null||!s.length)return Ve.EMPTY_INT_ARRAY;const a=new Int32Array(s.length);let l=0;for(const u of s)a[l++]=u;return a}static getCodeword(s){const a=L.binarySearch(Ve.SYMBOL_TABLE,s&262143);return a<0?-1:(Ve.CODEWORD_TABLE[a]-1)%Ve.NUMBER_OF_CODEWORDS}}Ve.NUMBER_OF_CODEWORDS=929,Ve.MAX_CODEWORDS_IN_BARCODE=Ve.NUMBER_OF_CODEWORDS-1,Ve.MIN_ROWS_IN_BARCODE=3,Ve.MAX_ROWS_IN_BARCODE=90,Ve.MODULES_IN_CODEWORD=17,Ve.MODULES_IN_STOP_PATTERN=18,Ve.BARS_IN_MODULE=8,Ve.EMPTY_INT_ARRAY=new Int32Array([]),Ve.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ve.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class $o{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Xe{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),h=Xe.detect(l,u);return h.length||(u=u.clone(),u.rotate180(),h=Xe.detect(l,u)),new $o(u,h)}static detect(s,a){const l=new Array;let u=0,h=0,d=!1;for(;u<a.getHeight();){const x=Xe.findVertices(a,u,h);if(x[0]==null&&x[3]==null){if(!d)break;d=!1,h=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=Xe.ROW_STEP;continue}if(d=!0,l.push(x),!s)break;x[2]!=null?(h=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(h=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(s,a,l){const u=s.getHeight(),h=s.getWidth(),d=new Array(8);return Xe.copyToResult(d,Xe.findRowsWithPattern(s,u,h,a,l,Xe.START_PATTERN),Xe.INDEXES_START_PATTERN),d[4]!=null&&(l=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY())),Xe.copyToResult(d,Xe.findRowsWithPattern(s,u,h,a,l,Xe.STOP_PATTERN),Xe.INDEXES_STOP_PATTERN),d}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,h,d){const x=new Array(4);let _=!1;const C=new Int32Array(d.length);for(;u<a;u+=Xe.ROW_STEP){let U=Xe.findGuardPattern(s,h,u,l,!1,d,C);if(U!=null){for(;u>0;){const W=Xe.findGuardPattern(s,h,--u,l,!1,d,C);if(W!=null)U=W;else{u++;break}}x[0]=new Te(U[0],u),x[1]=new Te(U[1],u),_=!0;break}}let N=u+1;if(_){let U=0,W=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;N<a;N++){const Z=Xe.findGuardPattern(s,W[0],N,l,!1,d,C);if(Z!=null&&Math.abs(W[0]-Z[0])<Xe.MAX_PATTERN_DRIFT&&Math.abs(W[1]-Z[1])<Xe.MAX_PATTERN_DRIFT)W=Z,U=0;else{if(U>Xe.SKIPPED_ROW_COUNT_MAX)break;U++}}N-=U+1,x[2]=new Te(W[0],N),x[3]=new Te(W[1],N)}return N-u<Xe.BARCODE_MIN_HEIGHT&&L.fill(x,null),x}static findGuardPattern(s,a,l,u,h,d,x){L.fillWithin(x,0,x.length,0);let _=a,C=0;for(;s.get(_,l)&&_>0&&C++<Xe.MAX_PIXEL_DRIFT;)_--;let N=_,U=0,W=d.length;for(let Z=h;N<u;N++)if(s.get(N,l)!==Z)x[U]++;else{if(U===W-1){if(Xe.patternMatchVariance(x,d,Xe.MAX_INDIVIDUAL_VARIANCE)<Xe.MAX_AVG_VARIANCE)return new Int32Array([_,N]);_+=x[0]+x[1],j.arraycopy(x,2,x,0,U-1),x[U-1]=0,x[U]=0,U--}else U++;x[U]=1,Z=!Z}return U===W-1&&Xe.patternMatchVariance(x,d,Xe.MAX_INDIVIDUAL_VARIANCE)<Xe.MAX_AVG_VARIANCE?new Int32Array([_,N-1]):null}static patternMatchVariance(s,a,l){let u=s.length,h=0,d=0;for(let C=0;C<u;C++)h+=s[C],d+=a[C];if(h<d)return 1/0;let x=h/d;l*=x;let _=0;for(let C=0;C<u;C++){let N=s[C],U=a[C]*x,W=N>U?N-U:U-N;if(W>l)return 1/0;_+=W}return _/h}}Xe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Xe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Xe.MAX_AVG_VARIANCE=.42,Xe.MAX_INDIVIDUAL_VARIANCE=.8,Xe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Xe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Xe.MAX_PIXEL_DRIFT=3,Xe.MAX_PATTERN_DRIFT=5,Xe.SKIPPED_ROW_COUNT_MAX=25,Xe.ROW_STEP=5,Xe.BARCODE_MIN_HEIGHT=10;class Tn{constructor(s,a){if(a.length===0)throw new w;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),j.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let h of this.coefficients)u=this.field.add(u,h);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let d=a;a=l,l=d}let u=new Int32Array(l.length),h=l.length-a.length;j.arraycopy(l,0,u,0,h);for(let d=h;d<l.length;d++)u[d]=this.field.add(a[d-h],l[d]);return new Tn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Tn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Tn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,h=u.length,d=new Int32Array(l+h-1);for(let x=0;x<l;x++){let _=a[x];for(let C=0;C<h;C++)d[x+C]=this.field.add(d[x+C],this.field.multiply(_,u[C]))}return new Tn(this.field,d)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Tn(this.field,a)}multiplyScalar(s){if(s===0)return new Tn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new Tn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new w;if(a===0)return new Tn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let h=0;h<l;h++)u[h]=this.field.multiply(this.coefficients[h],a);return new Tn(this.field,u)}toString(){let s=new R;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class uc{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}inverse(s){if(s===0)throw new Tt;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Vt extends uc{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Tn(this,new Int32Array([0])),this.one=new Tn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new w;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new Tn(this,l)}}Vt.PDF417_GF=new Vt(Ve.NUMBER_OF_CODEWORDS,3);class eh{constructor(){this.field=Vt.PDF417_GF}decode(s,a,l){let u=new Tn(this.field,s),h=new Int32Array(a),d=!1;for(let te=a;te>0;te--){let ne=u.evaluateAt(this.field.exp(te));h[a-te]=ne,ne!==0&&(d=!0)}if(!d)return 0;let x=this.field.getOne();if(l!=null)for(const te of l){let ne=this.field.exp(s.length-1-te),ae=new Tn(this.field,new Int32Array([this.field.subtract(0,ne),1]));x=x.multiply(ae)}let _=new Tn(this.field,h),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),N=C[0],U=C[1],W=this.findErrorLocations(N),Z=this.findErrorMagnitudes(U,N,W);for(let te=0;te<W.length;te++){let ne=s.length-1-this.field.log(W[te]);if(ne<0)throw b.getChecksumInstance();s[ne]=this.field.subtract(s[ne],Z[te])}return W.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let W=s;s=a,a=W}let u=s,h=a,d=this.field.getZero(),x=this.field.getOne();for(;h.getDegree()>=Math.round(l/2);){let W=u,Z=d;if(u=h,d=x,u.isZero())throw b.getChecksumInstance();h=W;let te=this.field.getZero(),ne=u.getCoefficient(u.getDegree()),ae=this.field.inverse(ne);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){let pe=h.getDegree()-u.getDegree(),Ie=this.field.multiply(h.getCoefficient(h.getDegree()),ae);te=te.add(this.field.buildMonomial(pe,Ie)),h=h.subtract(u.multiplyByMonomial(pe,Ie))}x=te.multiply(d).subtract(Z).negative()}let _=x.getCoefficient(0);if(_===0)throw b.getChecksumInstance();let C=this.field.inverse(_),N=x.multiply(C),U=h.multiply(C);return[N,U]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let h=1;h<this.field.getSize()&&u<a;h++)s.evaluateAt(h)===0&&(l[u]=this.field.inverse(h),u++);if(u!==a)throw b.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),h=new Int32Array(u);for(let C=1;C<=u;C++)h[u-C]=this.field.multiply(C,a.getCoefficient(C));let d=new Tn(this.field,h),x=l.length,_=new Int32Array(x);for(let C=0;C<x;C++){let N=this.field.inverse(l[C]),U=this.field.subtract(0,s.evaluateAt(N)),W=this.field.inverse(d.evaluateAt(N));_[C]=this.field.multiply(U,W)}return _}}class fs{constructor(s,a,l,u,h){s instanceof fs?this.constructor_2(s):this.constructor_1(s,a,l,u,h)}constructor_1(s,a,l,u,h){const d=a==null||l==null,x=u==null||h==null;if(d&&x)throw new Y;d?(a=new Te(0,u.getY()),l=new Te(0,h.getY())):x&&(u=new Te(s.getWidth()-1,a.getY()),h=new Te(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=h,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),h.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),h.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new fs(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,h=this.bottomLeft,d=this.topRight,x=this.bottomRight;if(s>0){let _=l?this.topLeft:this.topRight,C=Math.trunc(_.getY()-s);C<0&&(C=0);let N=new Te(_.getX(),C);l?u=N:d=N}if(a>0){let _=l?this.bottomLeft:this.bottomRight,C=Math.trunc(_.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let N=new Te(_.getX(),C);l?h=N:x=N}return new fs(this.image,u,h,d,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class th{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Hs{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(d,x,_,C,N,U){if(d==="%%")return"%";if(a[++l]===void 0)return;d=C?parseInt(C.substr(1)):void 0;let W=N?parseInt(N.substr(1)):void 0,Z;switch(U){case"s":Z=a[l];break;case"c":Z=a[l][0];break;case"f":Z=parseFloat(a[l]).toFixed(d);break;case"p":Z=parseFloat(a[l]).toPrecision(d);break;case"e":Z=parseFloat(a[l]).toExponential(d);break;case"x":Z=parseInt(a[l]).toString(W||16);break;case"d":Z=parseFloat(parseInt(a[l],W||10).toPrecision(d)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(W);let te=parseInt(_),ne=_&&_[0]+""=="0"?"0":" ";for(;Z.length<te;)Z=x!==void 0?Z+ne:ne+Z;return Z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,u)}format(s,...a){this.buffer+=Hs.form(s,a)}toString(){return this.buffer}}class Ws{constructor(s){this.boundingBox=new fs(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let a=this.getCodeword(s);if(a!=null)return a;for(let l=1;l<Ws.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(s)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(s)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,a){this.codewords[this.imageRowToCodewordIndex(s)]=a}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new Hs;let a=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",a++);continue}s.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return s.toString()}}Ws.MAX_NEARBY_DISTANCE=5;class Ui{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(const[l,u]of this.values.entries()){const h={getKey:()=>l,getValue:()=>u};h.getValue()>s?(s=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===s&&a.push(h.getKey())}return Ve.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class yi extends Ws{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),_=-1,C=1,N=0;for(let U=d;U<x;U++){if(a[U]==null)continue;let W=a[U],Z=W.getRowNumber()-_;if(Z===0)N++;else if(Z===1)C=Math.max(C,N),N=1,_=W.getRowNumber();else if(Z<0||W.getRowNumber()>=s.getRowCount()||Z>U)a[U]=null;else{let te;C>2?te=(C-2)*Z:te=Z;let ne=te>=U;for(let ae=1;ae<=te&&!ne;ae++)ne=a[U-ae]!=null;ne?a[U]=null:(_=W.getRowNumber(),N=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),_=-1;for(let C=h;C<d;C++){if(x[C]==null)continue;let N=x[C];N.setRowNumberAsRowIndicatorColumn();let U=N.getRowNumber()-_;U===0||(U===1?_=N.getRowNumber():N.getRowNumber()>=s.getRowCount()?x[C]=null:_=N.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new Ui,l=new Ui,u=new Ui,h=new Ui;for(let x of s){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let _=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(_*3+1);break;case 1:h.setValue(_/3),u.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||h.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ve.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ve.MAX_ROWS_IN_BARCODE)return null;let d=new th(a.getValue()[0],l.getValue()[0],u.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(s,d),d}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let h=u.getValue()%30,d=u.getRowNumber();if(d>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:h*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(h/3)!==a.getErrorCorrectionLevel()||h%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:h+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gs{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Ve.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let h=this.detectionResultColumns[u].getCodewords()[l];h!=null&&(h.setRowNumber(s[l].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let d=this.barcodeColumnCount+1;d>0&&h<this.ADJUST_ROW_NUMBER_SKIP;d--){let x=this.detectionResultColumns[d].getCodewords()[l];x!=null&&(h=Gs.adjustRowNumberIfValid(u,h,x),x.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let d=1;d<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;d++){let x=this.detectionResultColumns[d].getCodewords()[l];x!=null&&(h=Gs.adjustRowNumberIfValid(u,h,x),x.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],h=this.detectionResultColumns[s-1].getCodewords(),d=h;this.detectionResultColumns[s+1]!=null&&(d=this.detectionResultColumns[s+1].getCodewords());let x=new Array(14);x[2]=h[a],x[3]=d[a],a>0&&(x[0]=l[a-1],x[4]=h[a-1],x[5]=d[a-1]),a>1&&(x[8]=l[a-2],x[10]=h[a-2],x[11]=d[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=h[a+1],x[7]=d[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=h[a+2],x[13]=d[a+2]);for(let _ of x)if(Gs.adjustRowNumber(u,_))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Hs;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let h=this.detectionResultColumns[u].getCodewords()[l];if(h==null){a.format("    |   ");continue}a.format(" %3d|%3d",h.getRowNumber(),h.getValue())}a.format("%n")}return a.toString()}}class Zo{constructor(s,a,l,u){this.rowNumber=Zo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Zo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Zo.BARCODE_ROW_UNKNOWN=-1;class Sn{static initialize(){for(let s=0;s<Ve.SYMBOL_TABLE.length;s++){let a=Ve.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<Ve.BARS_IN_MODULE;u++){let h=0;for(;(a&1)===l;)h+=1,a>>=1;l=a&1,Sn.RATIOS_TABLE[s]||(Sn.RATIOS_TABLE[s]=new Array(Ve.BARS_IN_MODULE)),Sn.RATIOS_TABLE[s][Ve.BARS_IN_MODULE-u-1]=Math.fround(h/Ve.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=Sn.getDecodedCodewordValue(Sn.sampleBitCounts(s));return a!==-1?a:Sn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=Re.sum(s),l=new Int32Array(Ve.BARS_IN_MODULE),u=0,h=0;for(let d=0;d<Ve.MODULES_IN_CODEWORD;d++){let x=a/(2*Ve.MODULES_IN_CODEWORD)+d*a/Ve.MODULES_IN_CODEWORD;h+s[u]<=x&&(h+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=Sn.getBitValue(s);return Ve.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=Re.sum(s),l=new Array(Ve.BARS_IN_MODULE);if(a>1)for(let d=0;d<l.length;d++)l[d]=Math.fround(s[d]/a);let u=at.MAX_VALUE,h=-1;this.bSymbolTableReady||Sn.initialize();for(let d=0;d<Sn.RATIOS_TABLE.length;d++){let x=0,_=Sn.RATIOS_TABLE[d];for(let C=0;C<Ve.BARS_IN_MODULE;C++){let N=Math.fround(_[C]-l[C]);if(x+=Math.fround(N*N),x>=u)break}x<u&&(u=x,h=Ve.SYMBOL_TABLE[d])}return h}}Sn.bSymbolTableReady=!1,Sn.RATIOS_TABLE=new Array(Ve.SYMBOL_TABLE.length).map(B=>new Array(Ve.BARS_IN_MODULE));class hc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Ga{static parseLong(s,a=void 0){return parseInt(s,a)}}class Jo extends g{}Jo.kind="NullPointerException";class nh{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new Jo;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new V;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class qa extends g{}class zf extends nh{constructor(s=32){if(super(),this.count=0,s<0)throw new w("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new qa;l=M.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new V;this.ensureCapacity(this.count+l),j.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var It;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(It||(It={}));function qs(){if(typeof window<"u")return window.BigInt||null;if(typeof pc<"u")return pc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ea;function wi(B){if(typeof ea>"u"&&(ea=qs()),ea===null)throw new Error("BigInt is not supported!");return ea(B)}function dc(){let B=[];B[0]=wi(1);let s=wi(900);B[1]=s;for(let a=2;a<16;a++)B[a]=B[a-1]*s;return B}class de{static decode(s,a){let l=new R(""),u=I.ISO8859_1;l.enableDecoding(u);let h=1,d=s[h++],x=new hc;for(;h<s[0];){switch(d){case de.TEXT_COMPACTION_MODE_LATCH:h=de.textCompaction(s,h,l);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:h=de.byteCompaction(d,s,u,h,l);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:h=de.numericCompaction(s,h,l);break;case de.ECI_CHARSET:I.getCharacterSetECIByValue(s[h++]);break;case de.ECI_GENERAL_PURPOSE:h+=2;break;case de.ECI_USER_DEFINED:h++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=de.decodeMacroBlock(s,h,x);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new k;default:h--,h=de.textCompaction(s,h,l);break}if(h<s.length)d=s[h++];else throw k.getFormatInstance()}if(l.length()===0)throw k.getFormatInstance();let _=new ze(null,l.toString(),null,a);return _.setOther(x),_}static decodeMacroBlock(s,a,l){if(a+de.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw k.getFormatInstance();let u=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<de.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)u[x]=s[a];l.setSegmentIndex(M.parseInt(de.decodeBase900toBase10(u,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new R;a=de.textCompaction(s,a,h),l.setFileId(h.toString());let d=-1;for(s[a]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=a+1);a<s[0];)switch(s[a]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new R;a=de.textCompaction(s,a+1,x),l.setFileName(x.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new R;a=de.textCompaction(s,a+1,_),l.setSender(_.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new R;a=de.textCompaction(s,a+1,C),l.setAddressee(C.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new R;a=de.numericCompaction(s,a+1,N),l.setSegmentCount(M.parseInt(N.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new R;a=de.numericCompaction(s,a+1,U),l.setTimestamp(Ga.parseLong(U.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let W=new R;a=de.numericCompaction(s,a+1,W),l.setChecksum(M.parseInt(W.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new R;a=de.numericCompaction(s,a+1,Z),l.setFileSize(Ga.parseLong(Z.toString()));break;default:throw k.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(d!==-1){let x=a-d;l.isLastSegment()&&x--,l.setOptionalData(L.copyOfRange(s,d,d+x))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),h=new Int32Array((s[0]-a)*2),d=0,x=!1;for(;a<s[0]&&!x;){let _=s[a++];if(_<de.TEXT_COMPACTION_MODE_LATCH)u[d]=_/30,u[d+1]=_%30,d+=2;else switch(_){case de.TEXT_COMPACTION_MODE_LATCH:u[d++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[d]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=s[a++],h[d]=_,d++;break}}return de.decodeTextCompaction(u,h,d,l),a}static decodeTextCompaction(s,a,l,u){let h=It.ALPHA,d=It.ALPHA,x=0;for(;x<l;){let _=s[x],C="";switch(h){case It.ALPHA:if(_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case de.LL:h=It.LOWER;break;case de.ML:h=It.MIXED;break;case de.PS:d=h,h=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break;case It.LOWER:if(_<26)C=String.fromCharCode(97+_);else switch(_){case 26:C=" ";break;case de.AS:d=h,h=It.ALPHA_SHIFT;break;case de.ML:h=It.MIXED;break;case de.PS:d=h,h=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break;case It.MIXED:if(_<de.PL)C=de.MIXED_CHARS[_];else switch(_){case de.PL:h=It.PUNCT;break;case 26:C=" ";break;case de.LL:h=It.LOWER;break;case de.AL:h=It.ALPHA;break;case de.PS:d=h,h=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break;case It.PUNCT:if(_<de.PAL)C=de.PUNCT_CHARS[_];else switch(_){case de.PAL:h=It.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break;case It.ALPHA_SHIFT:if(h=d,_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break;case It.PUNCT_SHIFT:if(h=d,_<de.PAL)C=de.PUNCT_CHARS[_];else switch(_){case de.PAL:h=It.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case de.TEXT_COMPACTION_MODE_LATCH:h=It.ALPHA;break}break}C!==""&&u.append(C),x++}}static byteCompaction(s,a,l,u,h){let d=new zf,x=0,_=0,C=!1;switch(s){case de.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),U=a[u++];for(;u<a[0]&&!C;)switch(N[x++]=U,_=900*_+U,U=a[u++],U){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(x%5===0&&x>0){for(let W=0;W<6;++W)d.write(Number(wi(_)>>wi(8*(5-W))));_=0,x=0}break}u===a[0]&&U<de.TEXT_COMPACTION_MODE_LATCH&&(N[x++]=U);for(let W=0;W<x;W++)d.write(N[W]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!C;){let W=a[u++];if(W<de.TEXT_COMPACTION_MODE_LATCH)x++,_=900*_+W;else switch(W){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(x%5===0&&x>0){for(let Z=0;Z<6;++Z)d.write(Number(wi(_)>>wi(8*(5-Z))));_=0,x=0}}break}return h.append(z.decode(d.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,h=!1,d=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!h;){let x=s[a++];if(a===s[0]&&(h=!0),x<de.TEXT_COMPACTION_MODE_LATCH)d[u]=x,u++;else switch(x){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:a--,h=!0;break}(u%de.MAX_NUMERIC_CODEWORDS===0||x===de.NUMERIC_COMPACTION_MODE_LATCH||h)&&u>0&&(l.append(de.decodeBase900toBase10(d,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=wi(0);for(let h=0;h<a;h++)l+=de.EXP900[a-h-1]*wi(s[h]);let u=l.toString();if(u.charAt(0)!=="1")throw new k;return u.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=qs()?dc():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class $e{constructor(){}static decode(s,a,l,u,h,d,x){let _=new fs(s,a,l,u,h),C=null,N=null,U;for(let te=!0;;te=!1){if(a!=null&&(C=$e.getRowIndicatorColumn(s,_,a,!0,d,x)),u!=null&&(N=$e.getRowIndicatorColumn(s,_,u,!1,d,x)),U=$e.merge(C,N),U==null)throw Y.getNotFoundInstance();let ne=U.getBoundingBox();if(te&&ne!=null&&(ne.getMinY()<_.getMinY()||ne.getMaxY()>_.getMaxY()))_=ne;else break}U.setBoundingBox(_);let W=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(W,N);let Z=C!=null;for(let te=1;te<=W;te++){let ne=Z?te:W-te;if(U.getDetectionResultColumn(ne)!==void 0)continue;let ae;ne===0||ne===W?ae=new yi(_,ne===0):ae=new Ws(_),U.setDetectionResultColumn(ne,ae);let pe=-1,Ie=pe;for(let be=_.getMinY();be<=_.getMaxY();be++){if(pe=$e.getStartColumn(U,ne,be,Z),pe<0||pe>_.getMaxX()){if(Ie===-1)continue;pe=Ie}let _e=$e.detectCodeword(s,_.getMinX(),_.getMaxX(),Z,pe,be,d,x);_e!=null&&(ae.setCodeword(be,_e),Ie=pe,d=Math.min(d,_e.getWidth()),x=Math.max(x,_e.getWidth()))}}return $e.createDecoderResult(U)}static merge(s,a){if(s==null&&a==null)return null;let l=$e.getBarcodeMetadata(s,a);if(l==null)return null;let u=fs.merge($e.adjustBoundingBox(s),$e.adjustBoundingBox(a));return new Gs(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=$e.getMax(a),u=0;for(let x of a)if(u+=l-x,x>0)break;let h=s.getCodewords();for(let x=0;u>0&&h[x]==null;x++)u--;let d=0;for(let x=a.length-1;x>=0&&(d+=l-a[x],!(a[x]>0));x--);for(let x=h.length-1;d>0&&h[x]==null;x--)d--;return s.getBoundingBox().addMissingRows(u,d,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,h,d){let x=new yi(a,u);for(let _=0;_<2;_++){let C=_===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let U=Math.trunc(Math.trunc(l.getY()));U<=a.getMaxY()&&U>=a.getMinY();U+=C){let W=$e.detectCodeword(s,0,s.getWidth(),u,N,U,h,d);W!=null&&(x.setCodeword(U,W),u?N=W.getStartX():N=W.getEndX())}}return x}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),h=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-$e.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(h<1||h>Ve.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();l.setValue(h)}else u[0]!==h&&l.setValue(h)}static createDecoderResult(s){let a=$e.createBarcodeMatrix(s);$e.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),h=[],d=new Array;for(let _=0;_<s.getBarcodeRowCount();_++)for(let C=0;C<s.getBarcodeColumnCount();C++){let N=a[_][C+1].getValue(),U=_*s.getBarcodeColumnCount()+C;N.length===0?l.push(U):N.length===1?u[U]=N[0]:(d.push(U),h.push(N))}let x=new Array(h.length);for(let _=0;_<x.length;_++)x[_]=h[_];return $e.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,Ve.toIntArray(l),Ve.toIntArray(d),x)}static createDecoderResultFromAmbiguousValues(s,a,l,u,h){let d=new Int32Array(u.length),x=100;for(;x-- >0;){for(let _=0;_<d.length;_++)a[u[_]]=h[_][d[_]];try{return $e.decodeCodewords(a,s,l)}catch(_){if(!(_ instanceof b))throw _}if(d.length===0)throw b.getChecksumInstance();for(let _=0;_<d.length;_++)if(d[_]<h[_].length-1){d[_]++;break}else if(d[_]=0,_===d.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let h=0;h<a[u].length;h++)a[u][h]=new Ui;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let h of u.getCodewords())if(h!=null){let d=h.getRowNumber();if(d>=0){if(d>=a.length)continue;a[d][l].setValue(h.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let h=u?1:-1,d=null;if($e.isValidBarcodeColumn(s,a-h)&&(d=s.getDetectionResultColumn(a-h).getCodeword(l)),d!=null)return u?d.getEndX():d.getStartX();if(d=s.getDetectionResultColumn(a).getCodewordNearby(l),d!=null)return u?d.getStartX():d.getEndX();if($e.isValidBarcodeColumn(s,a-h)&&(d=s.getDetectionResultColumn(a-h).getCodewordNearby(l)),d!=null)return u?d.getEndX():d.getStartX();let x=0;for(;$e.isValidBarcodeColumn(s,a-h);){a-=h;for(let _ of s.getDetectionResultColumn(a).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+h*x*(_.getEndX()-_.getStartX());x++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,h,d,x,_){h=$e.adjustCodewordStartColumn(s,a,l,u,h,d);let C=$e.getModuleBitCount(s,a,l,u,h,d);if(C==null)return null;let N,U=Re.sum(C);if(u)N=h+U;else{for(let te=0;te<C.length/2;te++){let ne=C[te];C[te]=C[C.length-1-te],C[C.length-1-te]=ne}N=h,h=N-U}if(!$e.checkCodewordSkew(U,x,_))return null;let W=Sn.getDecodedValue(C),Z=Ve.getCodeword(W);return Z===-1?null:new Zo(h,N,$e.getCodewordBucketNumber(W),Z)}static getModuleBitCount(s,a,l,u,h,d){let x=h,_=new Int32Array(8),C=0,N=u?1:-1,U=u;for(;(u?x<l:x>=a)&&C<_.length;)s.get(x,d)===U?(_[C]++,x+=N):(C++,U=!U);return C===_.length||x===(u?l:a)&&C===_.length-1?_:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,h,d){let x=h,_=u?-1:1;for(let C=0;C<2;C++){for(;(u?x>=a:x<l)&&u===s.get(x,d);){if(Math.abs(h-x)>$e.CODEWORD_SKEW_SIZE)return h;x+=_}_=-_,u=!u}return x}static checkCodewordSkew(s,a,l){return a-$e.CODEWORD_SKEW_SIZE<=s&&s<=l+$e.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw k.getFormatInstance();let u=1<<a+1,h=$e.correctErrors(s,l,u);$e.verifyCodewordCount(s,u);let d=de.decode(s,""+a);return d.setErrorsCorrected(h),d.setErasures(l.length),d}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+$e.MAX_ERRORS||l<0||l>$e.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return $e.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw k.getFormatInstance();let l=s[0];if(l>s.length)throw k.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw k.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return $e.getCodewordBucketNumber($e.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new Hs;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let h=s[l][u];h.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}a.format("%n")}return a.toString()}}$e.CODEWORD_SKEW_SIZE=2,$e.MAX_ERRORS=3,$e.MAX_EC_CODEWORDS=512,$e.errorCorrection=new eh;class ln{decode(s,a=null){let l=ln.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw Y.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return ln.decode(s,a,!0)}catch(l){throw l instanceof k||l instanceof b?Y.getNotFoundInstance():l}}static decode(s,a,l){const u=new Array,h=Xe.detectMultiple(s,a,l);for(const d of h.getPoints()){const x=$e.decode(h.getBits(),d[4],d[5],d[6],d[7],ln.getMinCodewordWidth(d),ln.getMaxCodewordWidth(d)),_=new ue(x.getText(),x.getRawBytes(),void 0,d,me.PDF_417);_.putMetadata(Oe.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&_.putMetadata(Oe.PDF417_EXTRA_METADATA,C),u.push(_)}return u.map(d=>d)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?M.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(ln.getMaxWidth(s[0],s[4]),ln.getMaxWidth(s[6],s[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.max(ln.getMaxWidth(s[1],s[5]),ln.getMaxWidth(s[7],s[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(ln.getMinWidth(s[0],s[4]),ln.getMinWidth(s[6],s[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.min(ln.getMinWidth(s[1],s[5]),ln.getMinWidth(s[7],s[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))}reset(){}}class ta extends g{}ta.kind="ReaderException";class fc{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const a=!r(s)&&s.get(q.TRY_HARDER)===!0,l=r(s)?null:s.get(q.POSSIBLE_FORMATS),u=new Array;if(!r(l)){const h=l.some(d=>d===me.UPC_A||d===me.UPC_E||d===me.EAN_13||d===me.EAN_8||d===me.CODABAR||d===me.CODE_39||d===me.CODE_93||d===me.CODE_128||d===me.ITF||d===me.RSS_14||d===me.RSS_EXPANDED);h&&!a&&u.push(new Fi(s,this.verbose)),l.includes(me.QR_CODE)&&u.push(new Ur),l.includes(me.DATA_MATRIX)&&u.push(new Br),l.includes(me.AZTEC)&&u.push(new Mn),l.includes(me.PDF_417)&&u.push(new ln),h&&a&&u.push(new Fi(s,this.verbose))}u.length===0&&(a||u.push(new Fi(s,this.verbose)),u.push(new Ur),u.push(new Br),u.push(new Mn),u.push(new ln),a&&u.push(new Fi(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new ta("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof ta)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class gs extends Ee{constructor(s=null,a=500){const l=new fc;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class rh extends Ee{constructor(s=500){super(new ln,s)}}class ih extends Ee{constructor(s=500){super(new Ur,s)}}var Ya;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(Ya||(Ya={}));var cn=Ya;class Ys{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new tt(s,Int32Array.from([1])))}buildGenerator(s){const a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1];const u=this.field;for(let h=a.length;h<=s;h++){const d=l.multiply(new tt(u,Int32Array.from([1,u.exp(h-1+u.getGeneratorBase())])));a.push(d),l=d}}return a[s]}encode(s,a){if(a===0)throw new w("No error correction bytes");const l=s.length-a;if(l<=0)throw new w("No data bytes provided");const u=this.buildGenerator(a),h=new Int32Array(l);j.arraycopy(s,0,h,0,l);let d=new tt(this.field,h);d=d.multiplyByMonomial(a,1);const _=d.divide(u)[1].getCoefficients(),C=a-_.length;for(let N=0;N<C;N++)s[l+N]=0;j.arraycopy(_,0,s,l+C,_.length)}}class ut{constructor(){}static applyMaskPenaltyRule1(s){return ut.applyMaskPenaltyRule1Internal(s,!0)+ut.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let d=0;d<h-1;d++){const x=l[d];for(let _=0;_<u-1;_++){const C=x[_];C===x[_+1]&&C===l[d+1][_]&&C===l[d+1][_+1]&&a++}}return ut.N2*a}static applyMaskPenaltyRule3(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let d=0;d<h;d++)for(let x=0;x<u;x++){const _=l[d];x+6<u&&_[x]===1&&_[x+1]===0&&_[x+2]===1&&_[x+3]===1&&_[x+4]===1&&_[x+5]===0&&_[x+6]===1&&(ut.isWhiteHorizontal(_,x-4,x)||ut.isWhiteHorizontal(_,x+7,x+11))&&a++,d+6<h&&l[d][x]===1&&l[d+1][x]===0&&l[d+2][x]===1&&l[d+3][x]===1&&l[d+4][x]===1&&l[d+5][x]===0&&l[d+6][x]===1&&(ut.isWhiteVertical(l,x,d-4,d)||ut.isWhiteVertical(l,x,d+7,d+11))&&a++}return a*ut.N3}static isWhiteHorizontal(s,a,l){a=Math.max(a,0),l=Math.min(l,s.length);for(let u=a;u<l;u++)if(s[u]===1)return!1;return!0}static isWhiteVertical(s,a,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let h=l;h<u;h++)if(s[h][a]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let a=0;const l=s.getArray(),u=s.getWidth(),h=s.getHeight();for(let _=0;_<h;_++){const C=l[_];for(let N=0;N<u;N++)C[N]===1&&a++}const d=s.getHeight()*s.getWidth();return Math.floor(Math.abs(a*2-d)*10/d)*ut.N4}static getDataMaskBit(s,a,l){let u,h;switch(s){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:h=l*a,u=(h&1)+h%3;break;case 6:h=l*a,u=(h&1)+h%3&1;break;case 7:h=l*a,u=h%3+(l+a&1)&1;break;default:throw new w("Invalid mask pattern: "+s)}return u===0}static applyMaskPenaltyRule1Internal(s,a){let l=0;const u=a?s.getHeight():s.getWidth(),h=a?s.getWidth():s.getHeight(),d=s.getArray();for(let x=0;x<u;x++){let _=0,C=-1;for(let N=0;N<h;N++){const U=a?d[x][N]:d[N][x];U===C?_++:(_>=5&&(l+=ut.N1+(_-5)),_=1,C=U)}_>=5&&(l+=ut.N1+(_-5))}return l}}ut.N1=3,ut.N2=3,ut.N3=40,ut.N4=10;class na{constructor(s,a){this.width=s,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(const a of this.bytes)L.fill(a,s)}equals(s){if(!(s instanceof na))return!1;const a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const h=this.bytes[l],d=a.bytes[l];for(let x=0,_=this.width;x<_;++x)if(h[x]!==d[x])return!1}return!0}toString(){const s=new R;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let h=0,d=this.width;h<d;++h)switch(u[h]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Vi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new R;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Vi.NUM_MASK_PATTERNS}}Vi.NUM_MASK_PATTERNS=8;class xt extends g{}xt.kind="WriterException";class m{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,h){m.clearMatrix(h),m.embedBasicPatterns(l,h),m.embedTypeInfo(a,u,h),m.maybeEmbedVersionInfo(l,h),m.embedDataBits(s,u,h)}static embedBasicPatterns(s,a){m.embedPositionDetectionPatternsAndSeparators(a),m.embedDarkDotAtLeftBottomCorner(a),m.maybeEmbedPositionAdjustmentPatterns(s,a),m.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){const u=new H;m.makeTypeInfoBits(s,a,u);for(let h=0,d=u.getSize();h<d;++h){const x=u.get(u.getSize()-1-h),_=m.TYPE_INFO_COORDINATES[h],C=_[0],N=_[1];if(l.setBoolean(C,N,x),h<8){const U=l.getWidth()-h-1;l.setBoolean(U,8,x)}else{const W=l.getHeight()-7+(h-8);l.setBoolean(8,W,x)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;const l=new H;m.makeVersionInfoBits(s,l);let u=6*3-1;for(let h=0;h<6;++h)for(let d=0;d<3;++d){const x=l.get(u);u--,a.setBoolean(h,a.getHeight()-11+d,x),a.setBoolean(a.getHeight()-11+d,h,x)}}static embedDataBits(s,a,l){let u=0,h=-1,d=l.getWidth()-1,x=l.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);x>=0&&x<l.getHeight();){for(let _=0;_<2;++_){const C=d-_;if(!m.isEmpty(l.get(C,x)))continue;let N;u<s.getSize()?(N=s.get(u),++u):N=!1,a!==255&&ut.getDataMaskBit(a,C,x)&&(N=!N),l.setBoolean(C,x,N)}x+=h}h=-h,x+=h,d-=2}if(u!==s.getSize())throw new xt("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-M.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new w("0 polynomial");const l=m.findMSBSet(a);for(s<<=l-1;m.findMSBSet(s)>=l;)s^=a<<m.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!Vi.isValidMaskPattern(a))throw new xt("Invalid mask pattern");const u=s.getBits()<<3|a;l.appendBits(u,5);const h=m.calculateBCHCode(u,m.TYPE_INFO_POLY);l.appendBits(h,10);const d=new H;if(d.appendBits(m.TYPE_INFO_MASK_PATTERN,15),l.xor(d),l.getSize()!==15)throw new xt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);const l=m.calculateBCHCode(s.getVersionNumber(),m.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new xt("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){const l=(a+1)%2;m.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),m.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new xt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!m.isEmpty(l.get(s+u,a)))throw new xt;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!m.isEmpty(l.get(s,a+u)))throw new xt;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){const h=m.POSITION_ADJUSTMENT_PATTERN[u];for(let d=0;d<5;++d)l.setNumber(s+d,a+u,h[d])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){const h=m.POSITION_DETECTION_PATTERN[u];for(let d=0;d<7;++d)l.setNumber(s+d,a+u,h[d])}}static embedPositionDetectionPatternsAndSeparators(s){const a=m.POSITION_DETECTION_PATTERN[0].length;m.embedPositionDetectionPattern(0,0,s),m.embedPositionDetectionPattern(s.getWidth()-a,0,s),m.embedPositionDetectionPattern(0,s.getWidth()-a,s);const l=8;m.embedHorizontalSeparationPattern(0,l-1,s),m.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),m.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const u=7;m.embedVerticalSeparationPattern(u,0,s),m.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),m.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,u=m.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let h=0,d=u.length;h!==d;h++){const x=u[h];if(x>=0)for(let _=0;_!==d;_++){const C=u[_];C>=0&&m.isEmpty(a.get(C,x))&&m.embedPositionAdjustmentPattern(C-2,x-2,a)}}}}m.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),m.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),m.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),m.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),m.VERSION_INFO_POLY=7973,m.TYPE_INFO_POLY=1335,m.TYPE_INFO_MASK_PATTERN=21522;class T{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(s){return ut.applyMaskPenaltyRule1(s)+ut.applyMaskPenaltyRule2(s)+ut.applyMaskPenaltyRule3(s)+ut.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=D.DEFAULT_BYTE_MODE_ENCODING;const h=l!==null&&l.get(cn.CHARACTER_SET)!==void 0;h&&(u=l.get(cn.CHARACTER_SET).toString());const d=this.chooseMode(s,u),x=new H;if(d===je.BYTE&&(h||D.DEFAULT_BYTE_MODE_ENCODING!==u)){const be=I.getCharacterSetECIByName(u);be!==void 0&&this.appendECI(be,x)}this.appendModeInfo(d,x);const _=new H;this.appendBytes(s,d,_,u);let C;if(l!==null&&l.get(cn.QR_VERSION)!==void 0){const be=Number.parseInt(l.get(cn.QR_VERSION).toString(),10);C=Le.getVersionForNumber(be);const _e=this.calculateBitsNeeded(d,x,_,C);if(!this.willFit(_e,C,a))throw new xt("Data too big for requested version")}else C=this.recommendVersion(a,d,x,_);const N=new H;N.appendBitArray(x);const U=d===je.BYTE?_.getSizeInBytes():s.length;this.appendLengthInfo(U,C,d,N),N.appendBitArray(_);const W=C.getECBlocksForLevel(a),Z=C.getTotalCodewords()-W.getTotalECCodewords();this.terminateBits(Z,N);const te=this.interleaveWithECBytes(N,C.getTotalCodewords(),Z,W.getNumBlocks()),ne=new Vi;ne.setECLevel(a),ne.setMode(d),ne.setVersion(C);const ae=C.getDimensionForVersion(),pe=new na(ae,ae),Ie=this.chooseMaskPattern(te,a,C,pe);return ne.setMaskPattern(Ie),m.buildMatrix(te,a,C,Ie,pe),ne.setMatrix(pe),ne}static recommendVersion(s,a,l,u){const h=this.calculateBitsNeeded(a,l,u,Le.getVersionForNumber(1)),d=this.chooseVersion(h,s),x=this.calculateBitsNeeded(a,l,u,d);return this.chooseVersion(x,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(I.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return je.KANJI;let l=!1,u=!1;for(let h=0,d=s.length;h<d;++h){const x=s.charAt(h);if(D.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return je.BYTE}return u?je.ALPHANUMERIC:l?je.NUMERIC:je.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=z.encode(s,I.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const h=a[u]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let h=Number.MAX_SAFE_INTEGER,d=-1;for(let x=0;x<Vi.NUM_MASK_PATTERNS;x++){m.buildMatrix(s,a,l,x,u);let _=this.calculateMaskPenalty(u);_<h&&(h=_,d=x)}return d}static chooseVersion(s,a){for(let l=1;l<=40;l++){const u=Le.getVersionForNumber(l);if(D.willFit(s,u,a))return u}throw new xt("Data too big")}static willFit(s,a,l){const u=a.getTotalCodewords(),d=a.getECBlocksForLevel(l).getTotalECCodewords(),x=u-d,_=(s+7)/8;return x>=_}static terminateBits(s,a){const l=s*8;if(a.getSize()>l)throw new xt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let d=0;d<4&&a.getSize()<l;++d)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let d=u;d<8;d++)a.appendBit(!1);const h=s-a.getSizeInBytes();for(let d=0;d<h;++d)a.appendBits(d&1?17:236,8);if(a.getSize()!==l)throw new xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,h,d){if(u>=l)throw new xt("Block ID too large");const x=s%l,_=l-x,C=Math.floor(s/l),N=C+1,U=Math.floor(a/l),W=U+1,Z=C-U,te=N-W;if(Z!==te)throw new xt("EC bytes mismatch");if(l!==_+x)throw new xt("RS blocks mismatch");if(s!==(U+Z)*_+(W+te)*x)throw new xt("Total bytes mismatch");u<_?(h[0]=U,d[0]=Z):(h[0]=W,d[0]=te)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new xt("Number of bits and data bytes does not match");let h=0,d=0,x=0;const _=new Array;for(let N=0;N<u;++N){const U=new Int32Array(1),W=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,u,N,U,W);const Z=U[0],te=new Uint8Array(Z);s.toBytes(8*h,te,0,Z);const ne=D.generateECBytes(te,W[0]);_.push(new T(te,ne)),d=Math.max(d,Z),x=Math.max(x,ne.length),h+=U[0]}if(l!==h)throw new xt("Data bytes does not match offset");const C=new H;for(let N=0;N<d;++N)for(const U of _){const W=U.getDataBytes();N<W.length&&C.appendBits(W[N],8)}for(let N=0;N<x;++N)for(const U of _){const W=U.getErrorCorrectionBytes();N<W.length&&C.appendBits(W[N],8)}if(a!==C.getSizeInBytes())throw new xt("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,a){const l=s.length,u=new Int32Array(l+a);for(let d=0;d<l;d++)u[d]=s[d]&255;new Ys(qe.QR_CODE_FIELD_256).encode(u,a);const h=new Uint8Array(a);for(let d=0;d<a;d++)h[d]=u[l+d];return h}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){const h=l.getCharacterCountBits(a);if(s>=1<<h)throw new xt(s+" is bigger than "+((1<<h)-1));u.appendBits(s,h)}static appendBytes(s,a,l,u){switch(a){case je.NUMERIC:D.appendNumericBytes(s,l);break;case je.ALPHANUMERIC:D.appendAlphanumericBytes(s,l);break;case je.BYTE:D.append8BitBytes(s,l,u);break;case je.KANJI:D.appendKanjiBytes(s,l);break;default:throw new xt("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const a=D.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const h=D.getDigit(s.charAt(u));if(u+2<l){const d=D.getDigit(s.charAt(u+1)),x=D.getDigit(s.charAt(u+2));a.appendBits(h*100+d*10+x,10),u+=3}else if(u+1<l){const d=D.getDigit(s.charAt(u+1));a.appendBits(h*10+d,7),u+=2}else a.appendBits(h,4),u++}}static appendAlphanumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const h=D.getAlphanumericCode(s.charCodeAt(u));if(h===-1)throw new xt;if(u+1<l){const d=D.getAlphanumericCode(s.charCodeAt(u+1));if(d===-1)throw new xt;a.appendBits(h*45+d,11),u+=2}else a.appendBits(h,6),u++}}static append8BitBytes(s,a,l){let u;try{u=z.encode(s,l)}catch(h){throw new xt(h)}for(let h=0,d=u.length;h!==d;h++){const x=u[h];a.appendBits(x,8)}}static appendKanjiBytes(s,a){let l;try{l=z.encode(s,I.SJIS)}catch(h){throw new xt(h)}const u=l.length;for(let h=0;h<u;h+=2){const d=l[h]&255,x=l[h+1]&255,_=d<<8&4294967295|x;let C=-1;if(_>=33088&&_<=40956?C=_-33088:_>=57408&&_<=60351&&(C=_-49472),C===-1)throw new xt("Invalid byte sequence");const N=(C>>8)*192+(C&255);a.appendBits(N,13)}}static appendECI(s,a){a.appendBits(je.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=I.UTF8.getName();class K{write(s,a,l,u=null){if(s.length===0)throw new w("Found empty contents");if(a<0||l<0)throw new w("Requested dimensions are too small: "+a+"x"+l);let h=Pt.L,d=K.QUIET_ZONE_SIZE;u!==null&&(u.get(cn.ERROR_CORRECTION)!==void 0&&(h=Pt.fromString(u.get(cn.ERROR_CORRECTION).toString())),u.get(cn.MARGIN)!==void 0&&(d=Number.parseInt(u.get(cn.MARGIN).toString(),10)));const x=D.encode(s,h,u);return this.renderResult(x,a,l,d)}writeToDom(s,a,l,u,h=null){typeof s=="string"&&(s=document.querySelector(s));const d=this.write(a,l,u,h);s&&s.appendChild(d)}renderResult(s,a,l,u){const h=s.getMatrix();if(h===null)throw new pt;const d=h.getWidth(),x=h.getHeight(),_=d+u*2,C=x+u*2,N=Math.max(a,_),U=Math.max(l,C),W=Math.min(Math.floor(N/_),Math.floor(U/C)),Z=Math.floor((N-d*W)/2),te=Math.floor((U-x*W)/2),ne=this.createSVGElement(N,U);for(let ae=0,pe=te;ae<x;ae++,pe+=W)for(let Ie=0,be=Z;Ie<d;Ie++,be+=W)if(h.get(Ie,ae)===1){const _e=this.createSvgRectElement(be,pe,W,W);ne.appendChild(_e)}return ne}createSVGElement(s,a){const l=document.createElementNS(K.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(s,a,l,u){const h=document.createElementNS(K.SVG_NS,"rect");return h.setAttributeNS(null,"x",s.toString()),h.setAttributeNS(null,"y",a.toString()),h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",u.toString()),h.setAttributeNS(null,"fill","#000000"),h}}K.QUIET_ZONE_SIZE=4,K.SVG_NS="http://www.w3.org/2000/svg";class oe{encode(s,a,l,u,h){if(s.length===0)throw new w("Found empty contents");if(a!==me.QR_CODE)throw new w("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new w(`Requested dimensions are too small: ${l}x${u}`);let d=Pt.L,x=oe.QUIET_ZONE_SIZE;h!==null&&(h.get(cn.ERROR_CORRECTION)!==void 0&&(d=Pt.fromString(h.get(cn.ERROR_CORRECTION).toString())),h.get(cn.MARGIN)!==void 0&&(x=Number.parseInt(h.get(cn.MARGIN).toString(),10)));const _=D.encode(s,d,h);return oe.renderResult(_,l,u,x)}static renderResult(s,a,l,u){const h=s.getMatrix();if(h===null)throw new pt;const d=h.getWidth(),x=h.getHeight(),_=d+u*2,C=x+u*2,N=Math.max(a,_),U=Math.max(l,C),W=Math.min(Math.floor(N/_),Math.floor(U/C)),Z=Math.floor((N-d*W)/2),te=Math.floor((U-x*W)/2),ne=new $(N,U);for(let ae=0,pe=te;ae<x;ae++,pe+=W)for(let Ie=0,be=Z;Ie<d;Ie++,be+=W)h.get(Ie,ae)===1&&ne.setRegion(be,pe,W,W);return ne}}oe.QUIET_ZONE_SIZE=4;class ge{encode(s,a,l,u,h){let d;switch(a){case me.QR_CODE:d=new oe;break;default:throw new w("No encoder available for format "+a)}return d.encode(s,a,l,u,h)}}class Ae extends re{constructor(s,a,l,u,h,d,x,_){if(super(d,x),this.yuvData=s,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=h,u+d>a||h+x>l)throw new w("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(d,x)}getRow(s,a){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=s*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.yuvData,h,u,0,l),u;for(let d=0;d<a;d++){const x=d*s;j.arraycopy(this.yuvData,h,u,x,s),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Ae(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+a,l,u,!1)}renderThumbnail(){const s=this.getWidth()/Ae.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Ae.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*a),u=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let d=0;d<a;d++){const x=d*s;for(let _=0;_<s;_++){const C=u[h+_*Ae.THUMBNAIL_SCALE_FACTOR]&255;l[x+_]=4278190080|C*65793}h+=this.dataWidth*Ae.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ae.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ae.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,a){const l=this.yuvData;for(let u=0,h=this.top*this.dataWidth+this.left;u<a;u++,h+=this.dataWidth){const d=h+s/2;for(let x=h,_=h+s-1;x<d;x++,_--){const C=l[x];l[x]=l[_],l[_]=C}}}invert(){return new ee(this)}}Ae.THUMBNAIL_SCALE_FACTOR=2;class Qe extends re{constructor(s,a,l,u,h,d,x){if(super(a,l),this.dataWidth=u,this.dataHeight=h,this.left=d,this.top=x,s.BYTES_PER_ELEMENT===4){const _=a*l,C=new Uint8ClampedArray(_);for(let N=0;N<_;N++){const U=s[N],W=U>>16&255,Z=U>>7&510,te=U&255;C[N]=(W+Z+te)/4&255}this.luminances=C}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),h===void 0&&(this.dataHeight=l),d===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=s*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return j.arraycopy(this.luminances,h,u,0,l),u;for(let d=0;d<a;d++){const x=d*s;j.arraycopy(this.luminances,h,u,x,s),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Qe(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new ee(this)}}class un extends I{static forName(s){return this.getCharacterSetECIByName(s)}}class bt{}bt.ISO_8859_1=I.ISO8859_1;class xn{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Vr{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class ps{constructor(s){this.previous=s}getPrevious(){return this.previous}}class gr extends ps{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new gr(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new gr(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+M.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class li extends gr{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new li(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Xa(B,s,a){return new li(B,s,a)}function ms(B,s,a){return new gr(B,s,a)}const FA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xs=0,sh=1,ci=2,Im=3,zi=4,BA=new gr(null,0,0),Hf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function UA(B){for(let s of B)L.fill(s,-1);return B[Xs][zi]=0,B[sh][zi]=0,B[sh][Xs]=28,B[Im][zi]=0,B[ci][zi]=0,B[ci][Xs]=15,B}const bm=UA(L.createInt32Array(6,6));class Hi{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let d=Hf[this.mode][s];u=ms(u,d&65535,d>>16),l+=d>>16}let h=s===ci?4:5;return u=ms(u,a,h),new Hi(u,s,0,l+h)}shiftAndAppend(s,a){let l=this.token,u=this.mode===ci?4:5;return l=ms(l,bm[this.mode][s],u),l=ms(l,a,5),new Hi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===zi||this.mode===ci){let x=Hf[l][Xs];a=ms(a,x&65535,x>>16),u+=x>>16,l=Xs}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Hi(a,l,this.binaryShiftByteCount+1,u+h);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(s+1)),d}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Xa(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Hf[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=Hi.calculateBinaryShiftCost(s)-Hi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new H;for(const u of a)u.appendTo(l,s);return l}toString(){return O.format("%s bits=%d bytes=%d",FA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Hi.INITIAL_STATE=new Hi(BA,Xs,0,0);function VA(B){const s=O.getCharCode(" "),a=O.getCharCode("."),l=O.getCharCode(",");B[Xs][s]=1;const u=O.getCharCode("Z"),h=O.getCharCode("A");for(let W=h;W<=u;W++)B[Xs][W]=W-h+2;B[sh][s]=1;const d=O.getCharCode("z"),x=O.getCharCode("a");for(let W=x;W<=d;W++)B[sh][W]=W-x+2;B[ci][s]=1;const _=O.getCharCode("9"),C=O.getCharCode("0");for(let W=C;W<=_;W++)B[ci][W]=W-C+2;B[ci][l]=12,B[ci][a]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let W=0;W<N.length;W++)B[Im][O.getCharCode(N[W])]=W;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let W=0;W<U.length;W++)O.getCharCode(U[W])>0&&(B[zi][O.getCharCode(U[W])]=W);return B}const Wf=VA(L.createInt32Array(5,256));class gc{constructor(s){this.text=s}encode(){const s=O.getCharCode(" "),a=O.getCharCode(`
`);let l=Vr.singletonList(Hi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let d,x=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case O.getCharCode("\r"):d=x===a?2:0;break;case O.getCharCode("."):d=x===s?3:0;break;case O.getCharCode(","):d=x===s?4:0;break;case O.getCharCode(":"):d=x===s?5:0;break;default:d=0}d>0?(l=gc.updateStateListForPair(l,h,d),h++):l=this.updateStateListForChar(l,h)}return Vr.min(l,(h,d)=>h.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){const l=[];for(let u of s)this.updateStateForChar(u,a,l);return gc.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,h=Wf[s.getMode()][u]>0,d=null;for(let x=0;x<=zi;x++){let _=Wf[x][u];if(_>0){if(d==null&&(d=s.endBinaryShift(a)),!h||x===s.getMode()||x===ci){const C=d.latchAndAppend(x,_);l.push(C)}if(!h&&bm[s.getMode()][x]>=0){const C=d.shiftAndAppend(x,_);l.push(C)}}}if(s.getBinaryShiftByteCount()>0||Wf[s.getMode()][u]===0){let x=s.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(s,a,l){const u=[];for(let h of s)this.updateStateForPair(h,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let h=s.endBinaryShift(a);if(u.push(h.latchAndAppend(zi,l)),s.getMode()!==zi&&u.push(h.shiftAndAppend(zi,l)),l===3||l===4){let d=h.latchAndAppend(ci,16-l).latchAndAppend(ci,1);u.push(d)}if(s.getBinaryShiftByteCount()>0){let d=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(d)}}static simplifyStates(s){let a=[];for(const l of s){let u=!0;for(const h of a){if(h.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(h)&&(a=a.filter(d=>d!==h))}u&&a.push(l)}return a}}class _t{constructor(){}static encodeBytes(s){return _t.encode(s,_t.DEFAULT_EC_PERCENT,_t.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new gc(s).encode(),h=M.truncDivision(u.getSize()*a,100)+11,d=u.getSize()+h,x,_,C,N,U;if(l!==_t.DEFAULT_AZTEC_LAYERS){if(x=l<0,_=Math.abs(l),_>(x?_t.MAX_NB_BITS_COMPACT:_t.MAX_NB_BITS))throw new w(O.format("Illegal value %s for layers",l));C=_t.totalBitsInLayer(_,x),N=_t.WORD_SIZE[_];let _e=C-C%N;if(U=_t.stuffBits(u,N),U.getSize()+h>_e)throw new w("Data to large for user specified layer");if(x&&U.getSize()>N*64)throw new w("Data to large for user specified layer")}else{N=0,U=null;for(let _e=0;;_e++){if(_e>_t.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(x=_e<=3,_=x?_e+1:_e,C=_t.totalBitsInLayer(_,x),d>C)continue;(U==null||N!==_t.WORD_SIZE[_])&&(N=_t.WORD_SIZE[_],U=_t.stuffBits(u,N));let ht=C-C%N;if(!(x&&U.getSize()>N*64)&&U.getSize()+h<=ht)break}}let W=_t.generateCheckWords(U,C,N),Z=U.getSize()/N,te=_t.generateModeMessage(x,_,Z),ne=(x?11:14)+_*4,ae=new Int32Array(ne),pe;if(x){pe=ne;for(let _e=0;_e<ae.length;_e++)ae[_e]=_e}else{pe=ne+1+2*M.truncDivision(M.truncDivision(ne,2)-1,15);let _e=M.truncDivision(ne,2),ht=M.truncDivision(pe,2);for(let Ze=0;Ze<_e;Ze++){let Tr=Ze+M.truncDivision(Ze,15);ae[_e-Ze-1]=ht-Tr-1,ae[_e+Ze]=ht+Tr+1}}let Ie=new $(pe);for(let _e=0,ht=0;_e<_;_e++){let Ze=(_-_e)*4+(x?9:12);for(let Tr=0;Tr<Ze;Tr++){let Ei=Tr*2;for(let Sr=0;Sr<2;Sr++)W.get(ht+Ei+Sr)&&Ie.set(ae[_e*2+Sr],ae[_e*2+Tr]),W.get(ht+Ze*2+Ei+Sr)&&Ie.set(ae[_e*2+Tr],ae[ne-1-_e*2-Sr]),W.get(ht+Ze*4+Ei+Sr)&&Ie.set(ae[ne-1-_e*2-Sr],ae[ne-1-_e*2-Tr]),W.get(ht+Ze*6+Ei+Sr)&&Ie.set(ae[ne-1-_e*2-Tr],ae[_e*2+Sr])}ht+=Ze*8}if(_t.drawModeMessage(Ie,x,pe,te),x)_t.drawBullsEye(Ie,M.truncDivision(pe,2),5);else{_t.drawBullsEye(Ie,M.truncDivision(pe,2),7);for(let _e=0,ht=0;_e<M.truncDivision(ne,2)-1;_e+=15,ht+=16)for(let Ze=M.truncDivision(pe,2)&1;Ze<pe;Ze+=2)Ie.set(M.truncDivision(pe,2)-ht,Ze),Ie.set(M.truncDivision(pe,2)+ht,Ze),Ie.set(Ze,M.truncDivision(pe,2)-ht),Ie.set(Ze,M.truncDivision(pe,2)+ht)}let be=new xn;return be.setCompact(x),be.setSize(pe),be.setLayers(_),be.setCodeWords(Z),be.setMatrix(Ie),be}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let h=a-u;h<=a+u;h++)s.set(h,a-u),s.set(h,a+u),s.set(a-u,h),s.set(a+u,h);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new H;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=_t.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=_t.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let h=M.truncDivision(l,2);if(a)for(let d=0;d<7;d++){let x=h-3+d;u.get(d)&&s.set(x,h-5),u.get(d+7)&&s.set(h+5,x),u.get(20-d)&&s.set(x,h+5),u.get(27-d)&&s.set(h-5,x)}else for(let d=0;d<10;d++){let x=h-5+d+M.truncDivision(d,5);u.get(d)&&s.set(x,h-7),u.get(d+10)&&s.set(h+7,x),u.get(29-d)&&s.set(x,h+7),u.get(39-d)&&s.set(h-7,x)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,h=new Ys(_t.getGF(l)),d=M.truncDivision(a,l),x=_t.bitsToWords(s,l,d);h.encode(x,d-u);let _=a%l,C=new H;C.appendBits(0,_);for(const N of Array.from(x))C.appendBits(N,l);return C}static bitsToWords(s,a,l){let u=new Int32Array(l),h,d;for(h=0,d=s.getSize()/a;h<d;h++){let x=0;for(let _=0;_<a;_++)x|=s.get(h*a+_)?1<<a-_-1:0;u[h]=x}return u}static getGF(s){switch(s){case 4:return qe.AZTEC_PARAM;case 6:return qe.AZTEC_DATA_6;case 8:return qe.AZTEC_DATA_8;case 10:return qe.AZTEC_DATA_10;case 12:return qe.AZTEC_DATA_12;default:throw new w("Unsupported word size "+s)}}static stuffBits(s,a){let l=new H,u=s.getSize(),h=(1<<a)-2;for(let d=0;d<u;d+=a){let x=0;for(let _=0;_<a;_++)(d+_>=u||s.get(d+_))&&(x|=1<<a-1-_);(x&h)===h?(l.appendBits(x&h,a),d--):x&h?l.appendBits(x,a):(l.appendBits(x|1,a),d--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}_t.DEFAULT_EC_PERCENT=33,_t.DEFAULT_AZTEC_LAYERS=0,_t.MAX_NB_BITS=32,_t.MAX_NB_BITS_COMPACT=4,_t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class oh{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,h){let d=bt.ISO_8859_1,x=_t.DEFAULT_EC_PERCENT,_=_t.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(cn.CHARACTER_SET)&&(d=un.forName(h.get(cn.CHARACTER_SET).toString())),h.has(cn.ERROR_CORRECTION)&&(x=M.parseInt(h.get(cn.ERROR_CORRECTION).toString())),h.has(cn.AZTEC_LAYERS)&&(_=M.parseInt(h.get(cn.AZTEC_LAYERS).toString()))),oh.encodeLayers(s,a,l,u,d,x,_)}static encodeLayers(s,a,l,u,h,d,x){if(a!==me.AZTEC)throw new w("Can only encode AZTEC, but got "+a);let _=_t.encode(O.getBytes(s,h),d,x);return oh.renderResult(_,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new pt;let h=u.getWidth(),d=u.getHeight(),x=Math.max(a,h),_=Math.max(l,d),C=Math.min(x/h,_/d),N=(x-h*C)/2,U=(_-d*C)/2,W=new $(x,_);for(let Z=0,te=U;Z<d;Z++,te+=C)for(let ne=0,ae=N;ne<h;ne++,ae+=C)u.get(ne,Z)&&W.setRegion(ae,te,C,C);return W}}n.AbstractExpandedDecoder=Ua,n.ArgumentException=y,n.ArithmeticException=Tt,n.AztecCode=xn,n.AztecCodeReader=Mn,n.AztecCodeWriter=oh,n.AztecDecoder=Be,n.AztecDetector=An,n.AztecDetectorResult=Ft,n.AztecEncoder=_t,n.AztecHighLevelEncoder=gc,n.AztecPoint=Wt,n.BarcodeFormat=me,n.Binarizer=S,n.BinaryBitmap=v,n.BitArray=H,n.BitMatrix=$,n.BitSource=Ir,n.BrowserAztecCodeReader=Qn,n.BrowserBarcodeReader=ic,n.BrowserCodeReader=Ee,n.BrowserDatamatrixCodeReader=Qo,n.BrowserMultiFormatReader=gs,n.BrowserPDF417Reader=rh,n.BrowserQRCodeReader=ih,n.BrowserQRCodeSvgWriter=K,n.CharacterSetECI=I,n.ChecksumException=b,n.Code128Reader=ve,n.Code39Reader=At,n.DataMatrixDecodedBitStreamParser=br,n.DataMatrixReader=Br,n.DecodeHintType=q,n.DecoderResult=ze,n.DefaultGridSampler=Oi,n.DetectorResult=Cn,n.EAN13Reader=Ct,n.EncodeHintType=cn,n.Exception=g,n.FormatException=k,n.GenericGF=qe,n.GenericGFPoly=tt,n.GlobalHistogramBinarizer=X,n.GridSampler=Zt,n.GridSamplerInstance=Nt,n.HTMLCanvasElementLuminanceSource=ie,n.HybridBinarizer=G,n.ITFReader=nt,n.IllegalArgumentException=w,n.IllegalStateException=pt,n.InvertedLuminanceSource=ee,n.LuminanceSource=re,n.MathUtils=Re,n.MultiFormatOneDReader=Fi,n.MultiFormatReader=fc,n.MultiFormatWriter=ge,n.NotFoundException=Y,n.OneDReader=lt,n.PDF417DecodedBitStreamParser=de,n.PDF417DecoderErrorCorrection=eh,n.PDF417Reader=ln,n.PDF417ResultMetadata=hc,n.PerspectiveTransform=Jt,n.PlanarYUVLuminanceSource=Ae,n.QRCodeByteMatrix=na,n.QRCodeDataMask=Wn,n.QRCodeDecodedBitStreamParser=Ut,n.QRCodeDecoderErrorCorrectionLevel=Pt,n.QRCodeDecoderFormatInformation=jn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=Vi,n.QRCodeMaskUtil=ut,n.QRCodeMatrixUtil=m,n.QRCodeMode=je,n.QRCodeReader=Ur,n.QRCodeVersion=Le,n.QRCodeWriter=oe,n.RGBLuminanceSource=Qe,n.RSS14Reader=Gt,n.RSSExpandedReader=we,n.ReaderException=ta,n.ReedSolomonDecoder=jt,n.ReedSolomonEncoder=Ys,n.ReedSolomonException=vn,n.Result=ue,n.ResultMetadataType=Oe,n.ResultPoint=Te,n.StringUtils=O,n.UnsupportedOperationException=F,n.VideoInputDevice=fe,n.WhiteRectangleDetector=it,n.WriterException=xt,n.ZXingArrays=L,n.ZXingCharset=un,n.ZXingInteger=M,n.ZXingStandardCharsets=bt,n.ZXingStringBuilder=R,n.ZXingStringEncoding=z,n.ZXingSystem=j,n.createAbstractExpandedDecoder=ji,Object.defineProperty(n,"__esModule",{value:!0})})})(og,og.exports);var tn=og.exports;const MP=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Vy=function(){function t(e,n,r){if(this.formatMap=new Map([[Pe.QR_CODE,tn.BarcodeFormat.QR_CODE],[Pe.AZTEC,tn.BarcodeFormat.AZTEC],[Pe.CODABAR,tn.BarcodeFormat.CODABAR],[Pe.CODE_39,tn.BarcodeFormat.CODE_39],[Pe.CODE_93,tn.BarcodeFormat.CODE_93],[Pe.CODE_128,tn.BarcodeFormat.CODE_128],[Pe.DATA_MATRIX,tn.BarcodeFormat.DATA_MATRIX],[Pe.MAXICODE,tn.BarcodeFormat.MAXICODE],[Pe.ITF,tn.BarcodeFormat.ITF],[Pe.EAN_13,tn.BarcodeFormat.EAN_13],[Pe.EAN_8,tn.BarcodeFormat.EAN_8],[Pe.PDF_417,tn.BarcodeFormat.PDF_417],[Pe.RSS_14,tn.BarcodeFormat.RSS_14],[Pe.RSS_EXPANDED,tn.BarcodeFormat.RSS_EXPANDED],[Pe.UPC_A,tn.BarcodeFormat.UPC_A],[Pe.UPC_E,tn.BarcodeFormat.UPC_E],[Pe.UPC_EAN_EXTENSION,tn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!MP)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(tn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(tn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new tn.MultiFormatReader(this.verbose,this.hints),r=new tn.HTMLCanvasElementLuminanceSource(e),i=new tn.BinaryBitmap(new tn.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:RA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),LP=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},jP=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},zy=function(){function t(e,n,r){if(this.formatMap=new Map([[Pe.QR_CODE,"qr_code"],[Pe.AZTEC,"aztec"],[Pe.CODABAR,"codabar"],[Pe.CODE_39,"code_39"],[Pe.CODE_93,"code_93"],[Pe.CODE_128,"code_128"],[Pe.DATA_MATRIX,"data_matrix"],[Pe.ITF,"itf"],[Pe.EAN_13,"ean_13"],[Pe.EAN_8,"ean_8"],[Pe.PDF_417,"pdf417"],[Pe.UPC_A,"upc_a"],[Pe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return LP(this,void 0,void 0,function(){var n,r;return jP(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:RA.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],f=c.boundingBox.width*c.boundingBox.height;f>r&&(r=f,n=c)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Hy=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},Wy=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},FP=function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&zy.isSupported()?(this.primaryDecoder=new zy(e,r,i),this.secondaryDecoder=new Vy(e,r,i)):this.primaryDecoder=new Vy(e,r,i)}return t.prototype.decodeAsync=function(e){return Hy(this,void 0,void 0,function(){var n;return Wy(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Hy(this,void 0,void 0,function(){var n,r;return Wy(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),_m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xd=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},Kd=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},OA=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),BP=function(t){_m(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(OA),UP=function(t){_m(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(BP),VP=function(t){_m(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(OA),zP=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new UP(this.track)},t.prototype.torchFeature=function(){return new VP(this.track)},t}(),HP=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return Xd(this,void 0,void 0,function(){var o,c;return Kd(this,function(f){switch(f.label){case 0:return o=new t(e,n,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:f.sent(),f.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Xd(this,void 0,void 0,function(){return Kd(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new zP(this.getFirstTrackOrFail())},t}(),WP=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return Xd(this,void 0,void 0,function(){return Kd(this,function(i){return[2,HP.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return Xd(this,void 0,void 0,function(){var n,r;return Kd(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t}(),Gy=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},qy=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},GP=function(){function t(){}return t.failIfNotSupported=function(){return Gy(this,void 0,void 0,function(){return qy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Gy(this,void 0,void 0,function(){return qy(this,function(n){return[2,WP.create(e)]})})},t}(),qP=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},YP=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},XP=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=xl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=xl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return qP(this,void 0,void 0,function(){var e,n,r,i,o,c,f;return YP(this,function(p){switch(p.label){case 0:return e=function(g){for(var y=g.getVideoTracks(),w=0,v=y;w<v.length;w++){var b=v[w];b.enabled=!1,b.stop(),g.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=p.sent(),i=[],o=0,c=r;o<c.length;o++)f=c[o],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var c=[],f=0,p=o;f<p.length;f++){var g=p[f];g.kind==="video"&&c.push({id:g.id,label:g.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},t}(),dn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(dn||(dn={}));var KP=function(){function t(){this.state=dn.NOT_STARTED,this.onGoingTransactionNewState=dn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===dn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=dn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===dn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=dn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==dn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case dn.UNKNOWN:throw"Transition from unknown is not allowed";case dn.NOT_STARTED:this.failIfNewStateIs(e,[dn.PAUSED]);break;case dn.SCANNING:break;case dn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),QP=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===dn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==dn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===dn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===dn.PAUSED},t}(),$P=function(){function t(){}return t.create=function(){return new QP(new KP)},t}(),ZP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hr=function(t){ZP(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ai),JP=function(){function t(e,n){this.logger=n,this.fps=Hr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Hr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?kA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Yi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Yy=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new PA(this.verbose),this.qrcode=new FP(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=$P.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var f=JP.create(n,this.logger);this.clearElement();var p=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=p,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Hr.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var w=this,v=this.stateManagerProxy.startTransition(dn.SCANNING);return new Promise(function(b,S){var j=g?f.videoConstraints:w.createVideoConstraints(e);if(!j){v.cancel(),S("videoConstraints should be defined");return}var V={};(!g||f.aspectRatio)&&(V.aspectRatio=f.aspectRatio);var P={onRenderSurfaceReady:function(L,M){w.setupUi(L,M,f),w.isScanning=!0,w.foreverScan(f,r,c)}};GP.failIfNotSupported().then(function(L){L.create(j).then(function(M){return M.render(o.element,V,P).then(function(H){w.renderedCamera=H,v.execute(),b(null)}).catch(function(H){v.cancel(),S(H)})}).catch(function(M){v.cancel(),S(xl.errorGettingUserMedia(M))})}).catch(function(L){v.cancel(),S(xl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(dn.PAUSED),this.showPausedState(),(Yi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(dn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(dn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(Hr.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Yi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var f=c.width,p=c.height,g=document.getElementById(r.elementId),y=g.clientWidth?g.clientWidth:Hr.DEFAULT_WIDTH,w=Math.max(g.clientHeight?g.clientHeight:p,Hr.FILE_SCAN_MIN_HEIGHT),v=r.computeCanvasDrawConfig(f,p,y,w);if(n){var b=r.createCanvasElement(y,w,"qr-canvas-visible");b.style.display="inline-block",g.appendChild(b);var S=b.getContext("2d");if(!S)throw"Unable to get 2d context from canvas";S.canvas.width=y,S.canvas.height=w,S.drawImage(c,0,0,f,p,v.x,v.y,v.width,v.height)}var j=Hr.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(c.width,v.width),P=Math.max(c.height,v.height),L=V+2*j,M=P+2*j,H=r.createCanvasElement(L,M);g.appendChild(H);var J=H.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=L,J.canvas.height=M,J.drawImage(c,0,0,f,p,j,j,V,P);try{r.qrcode.decodeRobustlyAsync(H).then(function(q){i(By.createFromQrcodeResult(q))}).catch(o)}catch(q){o("QR code parse error, error = ".concat(q))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return XP.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!kA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Pe.QR_CODE,Pe.AZTEC,Pe.CODABAR,Pe.CODE_39,Pe.CODE_93,Pe.CODE_128,Pe.DATA_MATRIX,Pe.MAXICODE,Pe.ITF,Pe.EAN_13,Pe.EAN_8,Pe.PDF_417,Pe.RSS_14,Pe.RSS_EXPANDED,Pe.UPC_A,Pe.UPC_E,Pe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];kP(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Yi(e))return!0;if(!Yi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Yi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Yi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,n,o),f=function(g){if(g<Hr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hr.MIN_QR_BOX_SIZE,"px.")},p=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};f(c.width),f(c.height),c.width=p(c.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=Yi(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=n,f={x:0,y:0,width:e,height:n},p=c?this.getShadedRegionBounds(e,n,o):f,g=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},w=g.getContext("2d",y);w.canvas.width=p.width,w.canvas.height=p.height,this.element.append(g),c&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=w,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=xl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,By.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=xl.codeParseError(i);return n(o,DA.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,f=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*c,g=this.qrRegion.height*f,y=this.qrRegion.x*c,w=this.qrRegion.y*f;this.context.drawImage(o,y,w,p,g,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(b){!b&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){v()})):v()}).catch(function(b){i.logger.logError("Error happend while scanning context",b),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(S){if(S in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(S,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var p=Object.keys(e)[0];if(p!==n&&p!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var g=e.facingMode;if(typeof g=="string"){if(c(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(c(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var y=typeof g;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var w=e.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var v=typeof w;throw"Invalid type of 'deviceId' = ".concat(v)}}}var b=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,c=(i-n)/2;return{x:o,y:c,width:e,height:n}}else{var f=e,p=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(p)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Hr.BORDER_SHADER_MATCH_COLOR:Hr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Yi(r)?"qr-canvas":r,c},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(n-i.width)/2,f=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Hr.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var p=5,g=40;this.insertShaderBorders(o,g,p,-p,null,0,!0),this.insertShaderBorders(o,g,p,-p,null,0,!1),this.insertShaderBorders(o,g,p,null,-p,0,!0),this.insertShaderBorders(o,g,p,null,-p,0,!1),this.insertShaderBorders(o,p,g+p,-p,null,-p,!0),this.insertShaderBorders(o,p,g+p,null,-p,-p,!0),this.insertShaderBorders(o,p,g+p,-p,null,-p,!1),this.insertShaderBorders(o,p,g+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,c,f){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Hr.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(r,"px"),i!==null&&(p.style.top="".concat(i,"px")),o!==null&&(p.style.bottom="".concat(o,"px")),f?p.style.left="".concat(c,"px"):p.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),vm="data:image/svg+xml;base64,",ek=vm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",tk=vm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Xy=vm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",nk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Ky=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),rk=function(){function t(){this.data=Ky.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Ky.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),ik=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=Uy.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),sk=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Xy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=nk,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Xy,this.infoIcon.style.opacity="0.6")},t}(),ok=function(){function t(){var e=this;this.infoDiv=new ik,this.infoIcon=new sk(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),ak=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},lk=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Qy=function(){function t(){}return t.hasPermissions=function(){return ak(this,void 0,void 0,function(){var e,n,r,i;return lk(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=o.sent(),n=0,r=e;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},t}(),Zs=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Bo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Bo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Ai.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Ai.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=e;r<i.length;r++){var o=i[r];if(!Ai.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return e},t}(),Xr=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Cs=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Xr.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),MA=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(y){try{g(r.next(y))}catch(w){c(w)}}function p(y){try{g(r.throw(y))}catch(w){c(w)}}function g(y){y.done?o(y.value):i(y.value).then(f,p)}g((r=r.apply(t,e||[])).next())})},LA=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(y){return p([g,y])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},$y=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return MA(this,void 0,void 0,function(){var e,n;return LA(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Rt.torchOffButton():Rt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?Rt.torchOnFailedMessage():Rt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),ck=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Cs.createElement("button",Xr.TORCH_BUTTON_ID),this.torchController=new $y(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=Rt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return MA(r,void 0,void 0,function(){return LA(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Xr.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Xr.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Xr.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Xr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new $y(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Rt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var o=new t(n,i);return o.render(e,r),o},t}(),uk=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=Cs.createElement("button",Xr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(f){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=Cs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(f){if(!(f==null||f.target==null)){var p=f.target;if(!(p.files&&p.files.length===0)){var g=p.files,y=g[0],w=y.name;o.setImageNameToButton(w),r(y)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(f){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(f){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(f){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(f){f.stopPropagation(),f.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var p=f.dataTransfer;if(p){var g=p.files;if(!g||g.length===0)return;for(var y=!1,w=0;w<g.length;++w){var v=g.item(w);if(v){var b=/image.*/;if(v.type.match(b)){y=!0;var S=v.name;o.setImageNameToButton(S),r(v),c.innerText=Rt.dragAndDropMessage();break}}}y||(c.innerText=Rt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Rt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),i=e.length,o=e.substring(i-8,i);e="".concat(r,"....").concat(o)}var c=Rt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=c},t.prototype.setInitialValueToButton=function(){var e=Rt.fileSelectionChooseImage()+" - "+Rt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t}(),hk=function(){function t(e){this.selectElement=Cs.createElement("select",Xr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=Rt.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,c=0,f=this.cameras;c<f.length;c++){var p=f[c],g=p.id,y=p.label==null?g:p.label;(!y||y==="")&&(y=[Rt.anonymousCameraPrefix(),o++].join(" "));var w=document.createElement("option");w.value=g,w.innerText=y,this.options.push(w),this.selectElement.appendChild(w)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),dk=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Cs.createElement("input",Xr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Rt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,i){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),Wr;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Wr||(Wr={}));function fk(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function gk(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var pk=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Zs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new PA(this.verbose),this.persistedDataManager=new rk,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,c){if(e)e(o,c);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(Rt.lastMatch(o),Wr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,c){n&&n(o,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Yy(this.getScanRegionId(),gk(this.config,this.verbose))},t.prototype.pause=function(e){(Yi(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(o){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(o){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ai.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ai.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ai.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ai.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ai.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ai.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ai.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Zs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new ok;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Rt.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(e,n)};Yy.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(e.removeChild(n),i.renderCameraSelection(c)):(i.setHeaderMessage(Rt.noCameraFound(),Wr.STATUS_WARNING),o())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(c,Wr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,i=Cs.createElement("button",this.getCameraPermissionButtonId());i.innerText=Rt.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(e,n,i)}),n.appendChild(i)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Zs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Qy.hasPermissions().then(function(i){i?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Zs.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Zs.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Zs.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Rt.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,Wr.STATUS_WARNING),r.qrCodeErrorCallback(c,DA.createFrom(c))}))};this.fileSelectionUi=uk.create(e,n,i)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=dk.create(i,!1),c=function(j){var V=j.zoomFeature();if(V.isSupported()){o.setOnCameraZoomValueChangeCallback(function(L){V.apply(L)});var P=1;n.config.defaultZoomValueIfSupported&&(P=n.config.defaultZoomValueIfSupported),P=OP(P,V.min(),V.max()),o.setValues(V.min(),V.max(),P,V.step()),o.show()}},f=hk.create(i,e),p=document.createElement("span"),g=Cs.createElement("button",Xr.CAMERA_START_BUTTON_ID);g.innerText=Rt.scanButtonStartScanningText(),p.appendChild(g);var y=Cs.createElement("button",Xr.CAMERA_STOP_BUTTON_ID);y.innerText=Rt.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,p.appendChild(y);var w,v=function(j){if(!j.torchFeature().isSupported()){w&&w.hide();return}w?w.updateTorchCapability(j.torchFeature()):w=ck.create(p,j.torchFeature(),{display:"none",marginLeft:"5px"},function(V){r.setHeaderMessage(V,Wr.STATUS_WARNING)}),w.show()};i.appendChild(p);var b=function(j){j||(g.style.display="none"),g.innerText=Rt.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,j&&(g.style.display="inline-block")};if(g.addEventListener("click",function(j){g.innerText=Rt.scanButtonScanningStarting(),f.disable(),g.disabled=!0,g.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var V=f.getValue();r.persistedDataManager.setLastUsedCameraId(V),r.html5Qrcode.start(V,fk(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(P){y.disabled=!1,y.style.display="inline-block",b(!1);var L=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&v(L),n.config.showZoomSliderIfSupported===!0&&c(L)}).catch(function(P){r.showHideScanTypeSwapLink(!0),f.enable(),b(!0),r.setHeaderMessage(P,Wr.STATUS_WARNING)})}),f.hasSingleItem()&&g.click(),y.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,r.html5Qrcode.stop().then(function(V){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),f.enable(),g.disabled=!1,y.style.display="none",g.style.display="inline-block",w&&(w.reset(),w.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(V){y.disabled=!1,r.setHeaderMessage(V,Wr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var S=r.persistedDataManager.getLastUsedCameraId();f.hasValue(S)?(f.setValue(S),g.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=Rt.textIfCameraScanSelected(),r=Rt.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var c=Cs.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Zs.isCameraScanType(this.currentScanType)?n:r,c.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Zs.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),c.innerText=r,e.currentScanType=Bo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),c.innerText=n,e.currentScanType=Bo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),o.appendChild(c),i.appendChild(o)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Qy.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Wr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case Wr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Wr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Wr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ek,this.cameraScanImage.alt=Rt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=tk,this.fileScanImage.alt=Rt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Xr.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Xr.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const Zy={admin:"ring-purple-500 bg-purple-100 text-purple-600",registrar:"ring-blue-500 bg-blue-100 text-blue-600",student:"ring-green-500 bg-green-100 text-green-600",default:"ring-gray-200 bg-gray-100 text-gray-400"},Jy={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-24 h-24 text-xl","2xl":"w-32 h-32 text-2xl"};function mk({user:t,size:e="md",showEditButton:n=!1,onEditClick:r,className:i=""}){const o=Zy[t==null?void 0:t.role]||Zy.default,c=Jy[e]||Jy.md,f=!!(t!=null&&t.avatar_url),p=()=>t!=null&&t.full_name?t.full_name.split(" ").map(g=>g[0]).slice(0,2).join("").toUpperCase():"?";return E.jsxs("div",{className:`relative group ${i}`,children:[E.jsxs("div",{className:`
                    ${c} rounded-full flex items-center justify-center 
                    overflow-hidden border-2 border-white shadow-sm ring-2 
                    ${f?"ring-gray-100":o}
                    transition-all duration-300 relative
                `,children:[f?E.jsx("img",{src:t.avatar_url,alt:t.full_name||"Avatar",className:"w-full h-full object-cover"}):E.jsx("span",{className:"font-bold tracking-wider",children:p()}),n&&E.jsx("button",{onClick:g=>{g.stopPropagation(),r()},className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer hover:bg-black/50",title:"Cambiar foto de perfil",children:E.jsx(qx,{className:"text-white opacity-80",size:24})})]}),n&&e!=="sm"&&E.jsx("div",{onClick:r,className:"absolute bottom-0 right-0 bg-white p-1.5 rounded-full shadow-lg border border-gray-100 text-gray-600 cursor-pointer hover:text-blue-600 hover:scale-110 transition-all md:hidden",children:E.jsx(qx,{size:14})})]})}function xk(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var Qd={},yk={get exports(){return Qd},set exports(t){Qd=t}};(function(t){var e,n,r={};yk.exports=r,r.parse=function(i,o){for(var c=r.bin.readUshort,f=r.bin.readUint,p=0,g={},y=new Uint8Array(i),w=y.length-4;f(y,w)!=101010256;)w--;p=w,p+=4;var v=c(y,p+=4);c(y,p+=2);var b=f(y,p+=2),S=f(y,p+=4);p+=4,p=S;for(var j=0;j<v;j++){f(y,p),p+=4,p+=4,p+=4,f(y,p+=4),b=f(y,p+=4);var V=f(y,p+=4),P=c(y,p+=4),L=c(y,p+2),M=c(y,p+4);p+=6;var H=f(y,p+=8);p+=4,p+=P+L+M,r._readLocal(y,H,g,b,V,o)}return g},r._readLocal=function(i,o,c,f,p,g){var y=r.bin.readUshort,w=r.bin.readUint;w(i,o),y(i,o+=4),y(i,o+=2);var v=y(i,o+=2);w(i,o+=2),w(i,o+=4),o+=4;var b=y(i,o+=8),S=y(i,o+=2);o+=2;var j=r.bin.readUTF8(i,o,b);if(o+=b,o+=S,g)c[j]={size:p,csize:f};else{var V=new Uint8Array(i.buffer,o);if(v==0)c[j]=new Uint8Array(V.buffer.slice(o,o+f));else{if(v!=8)throw"unknown compression method: "+v;var P=new Uint8Array(p);r.inflateRaw(V,P),c[j]=P}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var c=0,f=new Uint8Array(50+Math.floor(1.1*i.length));f[c]=120,f[c+1]=156,c+=2,c=r.F.deflateRaw(i,f,c,o.level);var p=r.adler(i,0,i.length);return f[c+0]=p>>>24&255,f[c+1]=p>>>16&255,f[c+2]=p>>>8&255,f[c+3]=p>>>0&255,new Uint8Array(f.buffer,0,c+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),f=r.F.deflateRaw(i,c,f,o.level);return new Uint8Array(c.buffer,0,f)},r.encode=function(i,o){o==null&&(o=!1);var c=0,f=r.bin.writeUint,p=r.bin.writeUshort,g={};for(var y in i){var w=!r._noNeed(y)&&!o,v=i[y],b=r.crc.crc(v,0,v.length);g[y]={cpr:w,usize:v.length,crc:b,file:w?r.deflateRaw(v):v}}for(var y in g)c+=g[y].file.length+30+46+2*r.bin.sizeUTF8(y);c+=22;var S=new Uint8Array(c),j=0,V=[];for(var y in g){var P=g[y];V.push(j),j=r._writeHeader(S,j,y,P,0)}var L=0,M=j;for(var y in g)P=g[y],V.push(j),j=r._writeHeader(S,j,y,P,1,V[L++]);var H=j-M;return f(S,j,101010256),j+=4,p(S,j+=4,L),p(S,j+=2,L),f(S,j+=2,H),f(S,j+=4,M),j+=4,j+=2,S.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,c,f,p,g){var y=r.bin.writeUint,w=r.bin.writeUshort,v=f.file;return y(i,o,p==0?67324752:33639248),o+=4,p==1&&(o+=2),w(i,o,20),w(i,o+=2,0),w(i,o+=2,f.cpr?8:0),y(i,o+=2,0),y(i,o+=4,f.crc),y(i,o+=4,v.length),y(i,o+=4,f.usize),w(i,o+=4,r.bin.sizeUTF8(c)),w(i,o+=2,0),o+=2,p==1&&(o+=2,o+=2,y(i,o+=6,g),o+=4),o+=r.bin.writeUTF8(i,o,c),p==0&&(i.set(v,o),o+=v.length),o},r.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var c=o,f=0;f<8;f++)1&c?c=3988292384^c>>>1:c>>>=1;i[o]=c}return i}(),update:function(i,o,c,f){for(var p=0;p<f;p++)i=r.crc.table[255&(i^o[c+p])]^i>>>8;return i},crc:function(i,o,c){return 4294967295^r.crc.update(4294967295,i,o,c)}},r.adler=function(i,o,c){for(var f=1,p=0,g=o,y=o+c;g<y;){for(var w=Math.min(g+5552,y);g<w;)p+=f+=i[g++];f%=65521,p%=65521}return p<<16|f},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255,i[o+2]=c>>16&255,i[o+3]=c>>24&255},readASCII:function(i,o,c){for(var f="",p=0;p<c;p++)f+=String.fromCharCode(i[o+p]);return f},writeASCII:function(i,o,c){for(var f=0;f<c.length;f++)i[o+f]=c.charCodeAt(f)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,c){for(var f,p="",g=0;g<c;g++)p+="%"+r.bin.pad(i[o+g].toString(16));try{f=decodeURIComponent(p)}catch{return r.bin.readASCII(i,o,c)}return f},writeUTF8:function(i,o,c){for(var f=c.length,p=0,g=0;g<f;g++){var y=c.charCodeAt(g);if(!(4294967168&y))i[o+p]=y,p++;else if(!(4294965248&y))i[o+p]=192|y>>6,i[o+p+1]=128|y>>0&63,p+=2;else if(!(4294901760&y))i[o+p]=224|y>>12,i[o+p+1]=128|y>>6&63,i[o+p+2]=128|y>>0&63,p+=3;else{if(4292870144&y)throw"e";i[o+p]=240|y>>18,i[o+p+1]=128|y>>12&63,i[o+p+2]=128|y>>6&63,i[o+p+3]=128|y>>0&63,p+=4}}return p},sizeUTF8:function(i){for(var o=i.length,c=0,f=0;f<o;f++){var p=i.charCodeAt(f);if(!(4294967168&p))c++;else if(!(4294965248&p))c+=2;else if(!(4294901760&p))c+=3;else{if(4292870144&p)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(i,o,c,f){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],g=r.F.U,y=r.F._goodIndex;r.F._hash;var w=r.F._putsE,v=0,b=c<<3,S=0,j=i.length;if(f==0){for(;v<j;)w(o,b,v+(z=Math.min(65535,j-v))==j?1:0),b=r.F._copyExact(i,v,z,o,b+8),v+=z;return b>>>3}var V=g.lits,P=g.strt,L=g.prev,M=0,H=0,J=0,q=0,k=0,A=0;for(j>2&&(P[A=r.F._hash(i,0)]=0),v=0;v<j;v++){if(k=A,v+1<j-2){A=r.F._hash(i,v+1);var I=v+1&32767;L[I]=P[A],P[A]=I}if(S<=v){(M>14e3||H>26697)&&j-v>100&&(S<v&&(V[M]=v-S,M+=2,S=v),b=r.F._writeBlock(v==j-1||S==j?1:0,V,M,q,i,J,v-J,o,b),M=H=q=0,J=v);var F=0;v<j-2&&(F=r.F._bestMatch(i,v,L,k,Math.min(p[2],j-v),p[3]));var z=F>>>16,O=65535&F;if(F!=0){O=65535&F;var R=y(z=F>>>16,g.of0);g.lhst[257+R]++;var $=y(O,g.df0);g.dhst[$]++,q+=g.exb[R]+g.dxb[$],V[M]=z<<23|v-S,V[M+1]=O<<16|R<<8|$,M+=2,S=v+z}else g.lhst[i[v]]++;H++}}for(J==v&&i.length!=0||(S<v&&(V[M]=v-S,M+=2,S=v),b=r.F._writeBlock(1,V,M,q,i,J,v-J,o,b),M=0,H=0,M=H=q=0,J=v);7&b;)b++;return b>>>3},r.F._bestMatch=function(i,o,c,f,p,g){var y=32767&o,w=c[y],v=y-w+32768&32767;if(w==y||f!=r.F._hash(i,o-v))return 0;for(var b=0,S=0,j=Math.min(32767,o);v<=j&&--g!=0&&w!=y;){if(b==0||i[o+b]==i[o+b-v]){var V=r.F._howLong(i,o,v);if(V>b){if(S=v,(b=V)>=p)break;v+2<V&&(V=v+2);for(var P=0,L=0;L<V-2;L++){var M=o-v+L+32768&32767,H=M-c[M]+32768&32767;H>P&&(P=H,w=M)}}}v+=(y=w)-(w=c[y])+32768&32767}return b<<16|S},r.F._howLong=function(i,o,c){if(i[o]!=i[o-c]||i[o+1]!=i[o+1-c]||i[o+2]!=i[o+2-c])return 0;var f=o,p=Math.min(i.length,o+258);for(o+=3;o<p&&i[o]==i[o-c];)o++;return o-f},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,c,f,p,g,y,w,v){var b,S,j,V,P,L,M,H,J,q=r.F.U,k=r.F._putsF,A=r.F._putsE;q.lhst[256]++,S=(b=r.F.getTrees())[0],j=b[1],V=b[2],P=b[3],L=b[4],M=b[5],H=b[6],J=b[7];var I=32+(v+3&7?8-(v+3&7):0)+(y<<3),F=f+r.F.contSize(q.fltree,q.lhst)+r.F.contSize(q.fdtree,q.dhst),z=f+r.F.contSize(q.ltree,q.lhst)+r.F.contSize(q.dtree,q.dhst);z+=14+3*M+r.F.contSize(q.itree,q.ihst)+(2*q.ihst[16]+3*q.ihst[17]+7*q.ihst[18]);for(var O=0;O<286;O++)q.lhst[O]=0;for(O=0;O<30;O++)q.dhst[O]=0;for(O=0;O<19;O++)q.ihst[O]=0;var R=I<F&&I<z?0:F<z?1:2;if(k(w,v,i),k(w,v+1,R),v+=3,R==0){for(;7&v;)v++;v=r.F._copyExact(p,g,y,w,v)}else{var $,Y;if(R==1&&($=q.fltree,Y=q.fdtree),R==2){r.F.makeCodes(q.ltree,S),r.F.revCodes(q.ltree,S),r.F.makeCodes(q.dtree,j),r.F.revCodes(q.dtree,j),r.F.makeCodes(q.itree,V),r.F.revCodes(q.itree,V),$=q.ltree,Y=q.dtree,A(w,v,P-257),A(w,v+=5,L-1),A(w,v+=5,M-4),v+=4;for(var X=0;X<M;X++)A(w,v+3*X,q.itree[1+(q.ordr[X]<<1)]);v+=3*M,v=r.F._codeTiny(H,q.itree,w,v),v=r.F._codeTiny(J,q.itree,w,v)}for(var G=g,re=0;re<c;re+=2){for(var ee=o[re],ie=ee>>>23,fe=G+(8388607&ee);G<fe;)v=r.F._writeLit(p[G++],$,w,v);if(ie!=0){var he=o[re+1],Ee=he>>16,ue=he>>8&255,ce=255&he;A(w,v=r.F._writeLit(257+ue,$,w,v),ie-q.of0[ue]),v+=q.exb[ue],k(w,v=r.F._writeLit(ce,Y,w,v),Ee-q.df0[ce]),v+=q.dxb[ce],G+=ie}}v=r.F._writeLit(256,$,w,v)}return v},r.F._copyExact=function(i,o,c,f,p){var g=p>>>3;return f[g]=c,f[g+1]=c>>>8,f[g+2]=255-f[g],f[g+3]=255-f[g+1],g+=4,f.set(new Uint8Array(i.buffer,o,c),g),p+(c+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),c=r.F._hufTree(i.dhst,i.dtree,15),f=[],p=r.F._lenCodes(i.ltree,f),g=[],y=r.F._lenCodes(i.dtree,g),w=0;w<f.length;w+=2)i.ihst[f[w]]++;for(w=0;w<g.length;w+=2)i.ihst[g[w]]++;for(var v=r.F._hufTree(i.ihst,i.itree,7),b=19;b>4&&i.itree[1+(i.ordr[b-1]<<1)]==0;)b--;return[o,c,v,p,y,b,f,g]},r.F.getSecond=function(i){for(var o=[],c=0;c<i.length;c+=2)o.push(i[c+1]);return o},r.F.nonZero=function(i){for(var o="",c=0;c<i.length;c+=2)i[c+1]!=0&&(o+=(c>>1)+",");return o},r.F.contSize=function(i,o){for(var c=0,f=0;f<o.length;f++)c+=o[f]*i[1+(f<<1)];return c},r.F._codeTiny=function(i,o,c,f){for(var p=0;p<i.length;p+=2){var g=i[p],y=i[p+1];f=r.F._writeLit(g,o,c,f);var w=g==16?2:g==17?3:7;g>15&&(r.F._putsE(c,f,y,w),f+=w)}return f},r.F._lenCodes=function(i,o){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var f=0;f<c;f+=2){var p=i[f+1],g=f+3<c?i[f+3]:-1,y=f+5<c?i[f+5]:-1,w=f==0?-1:i[f-1];if(p==0&&g==p&&y==p){for(var v=f+5;v+2<c&&i[v+2]==p;)v+=2;(b=Math.min(v+1-f>>>1,138))<11?o.push(17,b-3):o.push(18,b-11),f+=2*b-2}else if(p==w&&g==p&&y==p){for(v=f+5;v+2<c&&i[v+2]==p;)v+=2;var b=Math.min(v+1-f>>>1,6);o.push(16,b-3),f+=2*b-2}else o.push(p,0)}return c>>>1},r.F._hufTree=function(i,o,c){var f=[],p=i.length,g=o.length,y=0;for(y=0;y<g;y+=2)o[y]=0,o[y+1]=0;for(y=0;y<p;y++)i[y]!=0&&f.push({lit:y,f:i[y]});var w=f.length,v=f.slice(0);if(w==0)return 0;if(w==1){var b=f[0].lit;return v=b==0?1:0,o[1+(b<<1)]=1,o[1+(v<<1)]=1,1}f.sort(function(H,J){return H.f-J.f});var S=f[0],j=f[1],V=0,P=1,L=2;for(f[0]={lit:-1,f:S.f+j.f,l:S,r:j,d:0};P!=w-1;)S=V!=P&&(L==w||f[V].f<f[L].f)?f[V++]:f[L++],j=V!=P&&(L==w||f[V].f<f[L].f)?f[V++]:f[L++],f[P++]={lit:-1,f:S.f+j.f,l:S,r:j};var M=r.F.setDepth(f[P-1],0);for(M>c&&(r.F.restrictDepth(v,c,M),M=c),y=0;y<w;y++)o[1+(v[y].lit<<1)]=v[y].d;return M},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,c){var f=0,p=1<<c-o,g=0;for(i.sort(function(w,v){return v.d==w.d?w.f-v.f:v.d-w.d}),f=0;f<i.length&&i[f].d>o;f++){var y=i[f].d;i[f].d=o,g+=p-(1<<c-y)}for(g>>>=c-o;g>0;)(y=i[f].d)<o?(i[f].d++,g-=1<<o-y-1):f++;for(;f>=0;f--)i[f].d==o&&g<0&&(i[f].d--,g++);g!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var c=0;return o[16|c]<=i&&(c|=16),o[8|c]<=i&&(c|=8),o[4|c]<=i&&(c|=4),o[2|c]<=i&&(c|=2),o[1|c]<=i&&(c|=1),c},r.F._writeLit=function(i,o,c,f){return r.F._putsF(c,f,o[i<<1]),f+o[1+(i<<1)]},r.F.inflate=function(i,o){var c=Uint8Array;if(i[0]==3&&i[1]==0)return o||new c(0);var f=r.F,p=f._bitsF,g=f._bitsE,y=f._decodeTiny,w=f.makeCodes,v=f.codes2map,b=f._get17,S=f.U,j=o==null;j&&(o=new c(i.length>>>2<<3));for(var V,P,L=0,M=0,H=0,J=0,q=0,k=0,A=0,I=0,F=0;L==0;)if(L=p(i,F,1),M=p(i,F+1,2),F+=3,M!=0){if(j&&(o=r.F._check(o,I+(1<<17))),M==1&&(V=S.flmap,P=S.fdmap,k=511,A=31),M==2){H=g(i,F,5)+257,J=g(i,F+5,5)+1,q=g(i,F+10,4)+4,F+=14;for(var z=0;z<38;z+=2)S.itree[z]=0,S.itree[z+1]=0;var O=1;for(z=0;z<q;z++){var R=g(i,F+3*z,3);S.itree[1+(S.ordr[z]<<1)]=R,R>O&&(O=R)}F+=3*q,w(S.itree,O),v(S.itree,O,S.imap),V=S.lmap,P=S.dmap,F=y(S.imap,(1<<O)-1,H+J,i,F,S.ttree);var $=f._copyOut(S.ttree,0,H,S.ltree);k=(1<<$)-1;var Y=f._copyOut(S.ttree,H,J,S.dtree);A=(1<<Y)-1,w(S.ltree,$),v(S.ltree,$,V),w(S.dtree,Y),v(S.dtree,Y,P)}for(;;){var X=V[b(i,F)&k];F+=15&X;var G=X>>>4;if(!(G>>>8))o[I++]=G;else{if(G==256)break;var re=I+G-254;if(G>264){var ee=S.ldef[G-257];re=I+(ee>>>3)+g(i,F,7&ee),F+=7&ee}var ie=P[b(i,F)&A];F+=15&ie;var fe=ie>>>4,he=S.ddef[fe],Ee=(he>>>4)+p(i,F,15&he);for(F+=15&he,j&&(o=r.F._check(o,I+(1<<17)));I<re;)o[I]=o[I++-Ee],o[I]=o[I++-Ee],o[I]=o[I++-Ee],o[I]=o[I++-Ee];I=re}}}else{7&F&&(F+=8-(7&F));var ue=4+(F>>>3),ce=i[ue-4]|i[ue-3]<<8;j&&(o=r.F._check(o,I+ce)),o.set(new c(i.buffer,i.byteOffset+ue,ce),I),F=ue+ce<<3,I+=ce}return o.length==I?o:o.slice(0,I)},r.F._check=function(i,o){var c=i.length;if(o<=c)return i;var f=new Uint8Array(Math.max(c<<1,o));return f.set(i,0),f},r.F._decodeTiny=function(i,o,c,f,p,g){for(var y=r.F._bitsE,w=r.F._get17,v=0;v<c;){var b=i[w(f,p)&o];p+=15&b;var S=b>>>4;if(S<=15)g[v]=S,v++;else{var j=0,V=0;S==16?(V=3+y(f,p,2),p+=2,j=g[v-1]):S==17?(V=3+y(f,p,3),p+=3):S==18&&(V=11+y(f,p,7),p+=7);for(var P=v+V;v<P;)g[v]=j,v++}}return p},r.F._copyOut=function(i,o,c,f){for(var p=0,g=0,y=f.length>>>1;g<c;){var w=i[g+o];f[g<<1]=0,f[1+(g<<1)]=w,w>p&&(p=w),g++}for(;g<y;)f[g<<1]=0,f[1+(g<<1)]=0,g++;return p},r.F.makeCodes=function(i,o){for(var c,f,p,g,y=r.F.U,w=i.length,v=y.bl_count,b=0;b<=o;b++)v[b]=0;for(b=1;b<w;b+=2)v[i[b]]++;var S=y.next_code;for(c=0,v[0]=0,f=1;f<=o;f++)c=c+v[f-1]<<1,S[f]=c;for(p=0;p<w;p+=2)(g=i[p+1])!=0&&(i[p]=S[g],S[g]++)},r.F.codes2map=function(i,o,c){for(var f=i.length,p=r.F.U.rev15,g=0;g<f;g+=2)if(i[g+1]!=0)for(var y=g>>1,w=i[g+1],v=y<<4|w,b=o-w,S=i[g]<<b,j=S+(1<<b);S!=j;)c[p[S]>>>15-o]=v,S++},r.F.revCodes=function(i,o){for(var c=r.F.U.rev15,f=15-o,p=0;p<i.length;p+=2){var g=i[p]<<o-i[p+1];i[p]=c[g]>>>f}},r.F._putsE=function(i,o,c){c<<=7&o;var f=o>>>3;i[f]|=c,i[f+1]|=c>>>8},r.F._putsF=function(i,o,c){c<<=7&o;var f=o>>>3;i[f]|=c,i[f+1]|=c>>>8,i[f+2]|=c>>>16},r.F._bitsE=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},r.F._bitsF=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[o]=(c>>>16|c<<16)>>>17}function f(p,g,y){for(;g--!=0;)p.push(0,y)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];f(i.fltree,144,8),f(i.fltree,112,9),f(i.fltree,24,7),f(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),f(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),f(i.itree,19,0),f(i.ltree,286,0),f(i.dtree,30,0),f(i.ttree,320,0)}()})();var wk=xk({__proto__:null,default:Qd},[Qd]);const Gi=function(){var t={nextZero(y,w){for(;y[w]!=0;)w++;return w},readUshort:(y,w)=>y[w]<<8|y[w+1],writeUshort(y,w,v){y[w]=v>>8&255,y[w+1]=255&v},readUint:(y,w)=>16777216*y[w]+(y[w+1]<<16|y[w+2]<<8|y[w+3]),writeUint(y,w,v){y[w]=v>>24&255,y[w+1]=v>>16&255,y[w+2]=v>>8&255,y[w+3]=255&v},readASCII(y,w,v){let b="";for(let S=0;S<v;S++)b+=String.fromCharCode(y[w+S]);return b},writeASCII(y,w,v){for(let b=0;b<v.length;b++)y[w+b]=v.charCodeAt(b)},readBytes(y,w,v){const b=[];for(let S=0;S<v;S++)b.push(y[w+S]);return b},pad:y=>y.length<2?`0${y}`:y,readUTF8(y,w,v){let b,S="";for(let j=0;j<v;j++)S+=`%${t.pad(y[w+j].toString(16))}`;try{b=decodeURIComponent(S)}catch{return t.readASCII(y,w,v)}return b}};function e(y,w,v,b){const S=w*v,j=o(b),V=Math.ceil(w*j/8),P=new Uint8Array(4*S),L=new Uint32Array(P.buffer),{ctype:M}=b,{depth:H}=b,J=t.readUshort;if(M==6){const ee=S<<2;if(H==8)for(var q=0;q<ee;q+=4)P[q]=y[q],P[q+1]=y[q+1],P[q+2]=y[q+2],P[q+3]=y[q+3];if(H==16)for(q=0;q<ee;q++)P[q]=y[q<<1]}else if(M==2){const ee=b.tabs.tRNS;if(ee==null){if(H==8)for(q=0;q<S;q++){var k=3*q;L[q]=255<<24|y[k+2]<<16|y[k+1]<<8|y[k]}if(H==16)for(q=0;q<S;q++)k=6*q,L[q]=255<<24|y[k+4]<<16|y[k+2]<<8|y[k]}else{var A=ee[0];const ie=ee[1],fe=ee[2];if(H==8)for(q=0;q<S;q++){var I=q<<2;k=3*q,L[q]=255<<24|y[k+2]<<16|y[k+1]<<8|y[k],y[k]==A&&y[k+1]==ie&&y[k+2]==fe&&(P[I+3]=0)}if(H==16)for(q=0;q<S;q++)I=q<<2,k=6*q,L[q]=255<<24|y[k+4]<<16|y[k+2]<<8|y[k],J(y,k)==A&&J(y,k+2)==ie&&J(y,k+4)==fe&&(P[I+3]=0)}}else if(M==3){const ee=b.tabs.PLTE,ie=b.tabs.tRNS,fe=ie?ie.length:0;if(H==1)for(var F=0;F<v;F++){var z=F*V,O=F*w;for(q=0;q<w;q++){I=O+q<<2;var R=3*($=y[z+(q>>3)]>>7-((7&q)<<0)&1);P[I]=ee[R],P[I+1]=ee[R+1],P[I+2]=ee[R+2],P[I+3]=$<fe?ie[$]:255}}if(H==2)for(F=0;F<v;F++)for(z=F*V,O=F*w,q=0;q<w;q++)I=O+q<<2,R=3*($=y[z+(q>>2)]>>6-((3&q)<<1)&3),P[I]=ee[R],P[I+1]=ee[R+1],P[I+2]=ee[R+2],P[I+3]=$<fe?ie[$]:255;if(H==4)for(F=0;F<v;F++)for(z=F*V,O=F*w,q=0;q<w;q++)I=O+q<<2,R=3*($=y[z+(q>>1)]>>4-((1&q)<<2)&15),P[I]=ee[R],P[I+1]=ee[R+1],P[I+2]=ee[R+2],P[I+3]=$<fe?ie[$]:255;if(H==8)for(q=0;q<S;q++){var $;I=q<<2,R=3*($=y[q]),P[I]=ee[R],P[I+1]=ee[R+1],P[I+2]=ee[R+2],P[I+3]=$<fe?ie[$]:255}}else if(M==4){if(H==8)for(q=0;q<S;q++){I=q<<2;var Y=y[X=q<<1];P[I]=Y,P[I+1]=Y,P[I+2]=Y,P[I+3]=y[X+1]}if(H==16)for(q=0;q<S;q++){var X;I=q<<2,Y=y[X=q<<2],P[I]=Y,P[I+1]=Y,P[I+2]=Y,P[I+3]=y[X+2]}}else if(M==0)for(A=b.tabs.tRNS?b.tabs.tRNS:-1,F=0;F<v;F++){const ee=F*V,ie=F*w;if(H==1)for(var G=0;G<w;G++){var re=(Y=255*(y[ee+(G>>>3)]>>>7-(7&G)&1))==255*A?0:255;L[ie+G]=re<<24|Y<<16|Y<<8|Y}else if(H==2)for(G=0;G<w;G++)re=(Y=85*(y[ee+(G>>>2)]>>>6-((3&G)<<1)&3))==85*A?0:255,L[ie+G]=re<<24|Y<<16|Y<<8|Y;else if(H==4)for(G=0;G<w;G++)re=(Y=17*(y[ee+(G>>>1)]>>>4-((1&G)<<2)&15))==17*A?0:255,L[ie+G]=re<<24|Y<<16|Y<<8|Y;else if(H==8)for(G=0;G<w;G++)re=(Y=y[ee+G])==A?0:255,L[ie+G]=re<<24|Y<<16|Y<<8|Y;else if(H==16)for(G=0;G<w;G++)Y=y[ee+(G<<1)],re=J(y,ee+(G<<1))==A?0:255,L[ie+G]=re<<24|Y<<16|Y<<8|Y}return P}function n(y,w,v,b){const S=o(y),j=Math.ceil(v*S/8),V=new Uint8Array((j+1+y.interlace)*b);return w=y.tabs.CgBI?i(w,V):r(w,V),y.interlace==0?w=c(w,y,0,v,b):y.interlace==1&&(w=function(L,M){const H=M.width,J=M.height,q=o(M),k=q>>3,A=Math.ceil(H*q/8),I=new Uint8Array(J*A);let F=0;const z=[0,0,4,0,2,0,1],O=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],$=[8,8,4,4,2,2,1];let Y=0;for(;Y<7;){const G=R[Y],re=$[Y];let ee=0,ie=0,fe=z[Y];for(;fe<J;)fe+=G,ie++;let he=O[Y];for(;he<H;)he+=re,ee++;const Ee=Math.ceil(ee*q/8);c(L,M,F,ee,ie);let ue=0,ce=z[Y];for(;ce<J;){let me=O[Y],Me=F+ue*Ee<<3;for(;me<H;){var X;if(q==1&&(X=(X=L[Me>>3])>>7-(7&Me)&1,I[ce*A+(me>>3)]|=X<<7-((7&me)<<0)),q==2&&(X=(X=L[Me>>3])>>6-(7&Me)&3,I[ce*A+(me>>2)]|=X<<6-((3&me)<<1)),q==4&&(X=(X=L[Me>>3])>>4-(7&Me)&15,I[ce*A+(me>>1)]|=X<<4-((1&me)<<2)),q>=8){const Oe=ce*A+me*k;for(let ze=0;ze<k;ze++)I[Oe+ze]=L[(Me>>3)+ze]}Me+=q,me+=re}ue++,ce+=G}ee*ie!=0&&(F+=ie*(1+Ee)),Y+=1}return I}(w,y)),w}function r(y,w){return i(new Uint8Array(y.buffer,2,y.length-6),w)}var i=function(){const y={H:{}};return y.H.N=function(w,v){const b=Uint8Array;let S,j,V=0,P=0,L=0,M=0,H=0,J=0,q=0,k=0,A=0;if(w[0]==3&&w[1]==0)return v||new b(0);const I=y.H,F=I.b,z=I.e,O=I.R,R=I.n,$=I.A,Y=I.Z,X=I.m,G=v==null;for(G&&(v=new b(w.length>>>2<<5));V==0;)if(V=F(w,A,1),P=F(w,A+1,2),A+=3,P!=0){if(G&&(v=y.H.W(v,k+(1<<17))),P==1&&(S=X.J,j=X.h,J=511,q=31),P==2){L=z(w,A,5)+257,M=z(w,A+5,5)+1,H=z(w,A+10,4)+4,A+=14;let ee=1;for(var re=0;re<38;re+=2)X.Q[re]=0,X.Q[re+1]=0;for(re=0;re<H;re++){const he=z(w,A+3*re,3);X.Q[1+(X.X[re]<<1)]=he,he>ee&&(ee=he)}A+=3*H,R(X.Q,ee),$(X.Q,ee,X.u),S=X.w,j=X.d,A=O(X.u,(1<<ee)-1,L+M,w,A,X.v);const ie=I.V(X.v,0,L,X.C);J=(1<<ie)-1;const fe=I.V(X.v,L,M,X.D);q=(1<<fe)-1,R(X.C,ie),$(X.C,ie,S),R(X.D,fe),$(X.D,fe,j)}for(;;){const ee=S[Y(w,A)&J];A+=15&ee;const ie=ee>>>4;if(!(ie>>>8))v[k++]=ie;else{if(ie==256)break;{let fe=k+ie-254;if(ie>264){const me=X.q[ie-257];fe=k+(me>>>3)+z(w,A,7&me),A+=7&me}const he=j[Y(w,A)&q];A+=15&he;const Ee=he>>>4,ue=X.c[Ee],ce=(ue>>>4)+F(w,A,15&ue);for(A+=15&ue;k<fe;)v[k]=v[k++-ce],v[k]=v[k++-ce],v[k]=v[k++-ce],v[k]=v[k++-ce];k=fe}}}}else{7&A&&(A+=8-(7&A));const ee=4+(A>>>3),ie=w[ee-4]|w[ee-3]<<8;G&&(v=y.H.W(v,k+ie)),v.set(new b(w.buffer,w.byteOffset+ee,ie),k),A=ee+ie<<3,k+=ie}return v.length==k?v:v.slice(0,k)},y.H.W=function(w,v){const b=w.length;if(v<=b)return w;const S=new Uint8Array(b<<1);return S.set(w,0),S},y.H.R=function(w,v,b,S,j,V){const P=y.H.e,L=y.H.Z;let M=0;for(;M<b;){const H=w[L(S,j)&v];j+=15&H;const J=H>>>4;if(J<=15)V[M]=J,M++;else{let q=0,k=0;J==16?(k=3+P(S,j,2),j+=2,q=V[M-1]):J==17?(k=3+P(S,j,3),j+=3):J==18&&(k=11+P(S,j,7),j+=7);const A=M+k;for(;M<A;)V[M]=q,M++}}return j},y.H.V=function(w,v,b,S){let j=0,V=0;const P=S.length>>>1;for(;V<b;){const L=w[V+v];S[V<<1]=0,S[1+(V<<1)]=L,L>j&&(j=L),V++}for(;V<P;)S[V<<1]=0,S[1+(V<<1)]=0,V++;return j},y.H.n=function(w,v){const b=y.H.m,S=w.length;let j,V,P,L;const M=b.j;for(var H=0;H<=v;H++)M[H]=0;for(H=1;H<S;H+=2)M[w[H]]++;const J=b.K;for(j=0,M[0]=0,V=1;V<=v;V++)j=j+M[V-1]<<1,J[V]=j;for(P=0;P<S;P+=2)L=w[P+1],L!=0&&(w[P]=J[L],J[L]++)},y.H.A=function(w,v,b){const S=w.length,j=y.H.m.r;for(let V=0;V<S;V+=2)if(w[V+1]!=0){const P=V>>1,L=w[V+1],M=P<<4|L,H=v-L;let J=w[V]<<H;const q=J+(1<<H);for(;J!=q;)b[j[J]>>>15-v]=M,J++}},y.H.l=function(w,v){const b=y.H.m.r,S=15-v;for(let j=0;j<w.length;j+=2){const V=w[j]<<v-w[j+1];w[j]=b[V]>>>S}},y.H.M=function(w,v,b){b<<=7&v;const S=v>>>3;w[S]|=b,w[S+1]|=b>>>8},y.H.I=function(w,v,b){b<<=7&v;const S=v>>>3;w[S]|=b,w[S+1]|=b>>>8,w[S+2]|=b>>>16},y.H.e=function(w,v,b){return(w[v>>>3]|w[1+(v>>>3)]<<8)>>>(7&v)&(1<<b)-1},y.H.b=function(w,v,b){return(w[v>>>3]|w[1+(v>>>3)]<<8|w[2+(v>>>3)]<<16)>>>(7&v)&(1<<b)-1},y.H.Z=function(w,v){return(w[v>>>3]|w[1+(v>>>3)]<<8|w[2+(v>>>3)]<<16)>>>(7&v)},y.H.i=function(w,v){return(w[v>>>3]|w[1+(v>>>3)]<<8|w[2+(v>>>3)]<<16|w[3+(v>>>3)]<<24)>>>(7&v)},y.H.m=function(){const w=Uint16Array,v=Uint32Array;return{K:new w(16),j:new w(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new w(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new w(512),_:[],h:new w(32),$:[],w:new w(32768),C:[],v:[],d:new w(32768),D:[],u:new w(512),Q:[],r:new w(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new w(65536),g:new w(32768)}}(),function(){const w=y.H.m;for(var v=0;v<32768;v++){let S=v;S=(2863311530&S)>>>1|(1431655765&S)<<1,S=(3435973836&S)>>>2|(858993459&S)<<2,S=(4042322160&S)>>>4|(252645135&S)<<4,S=(4278255360&S)>>>8|(16711935&S)<<8,w.r[v]=(S>>>16|S<<16)>>>17}function b(S,j,V){for(;j--!=0;)S.push(0,V)}for(v=0;v<32;v++)w.q[v]=w.S[v]<<3|w.T[v],w.c[v]=w.p[v]<<4|w.z[v];b(w._,144,8),b(w._,112,9),b(w._,24,7),b(w._,8,8),y.H.n(w._,9),y.H.A(w._,9,w.J),y.H.l(w._,9),b(w.$,32,5),y.H.n(w.$,5),y.H.A(w.$,5,w.h),y.H.l(w.$,5),b(w.Q,19,0),b(w.C,286,0),b(w.D,30,0),b(w.v,320,0)}(),y.H.N}();function o(y){return[1,null,3,1,2,null,4][y.ctype]*y.depth}function c(y,w,v,b,S){let j=o(w);const V=Math.ceil(b*j/8);let P,L;j=Math.ceil(j/8);let M=y[v],H=0;if(M>1&&(y[v]=[0,0,1][M-2]),M==3)for(H=j;H<V;H++)y[H+1]=y[H+1]+(y[H+1-j]>>>1)&255;for(let J=0;J<S;J++)if(P=v+J*V,L=P+J+1,M=y[L-1],H=0,M==0)for(;H<V;H++)y[P+H]=y[L+H];else if(M==1){for(;H<j;H++)y[P+H]=y[L+H];for(;H<V;H++)y[P+H]=y[L+H]+y[P+H-j]}else if(M==2)for(;H<V;H++)y[P+H]=y[L+H]+y[P+H-V];else if(M==3){for(;H<j;H++)y[P+H]=y[L+H]+(y[P+H-V]>>>1);for(;H<V;H++)y[P+H]=y[L+H]+(y[P+H-V]+y[P+H-j]>>>1)}else{for(;H<j;H++)y[P+H]=y[L+H]+f(0,y[P+H-V],0);for(;H<V;H++)y[P+H]=y[L+H]+f(y[P+H-j],y[P+H-V],y[P+H-j-V])}return y}function f(y,w,v){const b=y+w-v,S=b-y,j=b-w,V=b-v;return S*S<=j*j&&S*S<=V*V?y:j*j<=V*V?w:v}function p(y,w,v){v.width=t.readUint(y,w),w+=4,v.height=t.readUint(y,w),w+=4,v.depth=y[w],w++,v.ctype=y[w],w++,v.compress=y[w],w++,v.filter=y[w],w++,v.interlace=y[w],w++}function g(y,w,v,b,S,j,V,P,L){const M=Math.min(w,S),H=Math.min(v,j);let J=0,q=0;for(let Y=0;Y<H;Y++)for(let X=0;X<M;X++)if(V>=0&&P>=0?(J=Y*w+X<<2,q=(P+Y)*S+V+X<<2):(J=(-P+Y)*w-V+X<<2,q=Y*S+X<<2),L==0)b[q]=y[J],b[q+1]=y[J+1],b[q+2]=y[J+2],b[q+3]=y[J+3];else if(L==1){var k=y[J+3]*.00392156862745098,A=y[J]*k,I=y[J+1]*k,F=y[J+2]*k,z=b[q+3]*(1/255),O=b[q]*z,R=b[q+1]*z,$=b[q+2]*z;const G=1-k,re=k+z*G,ee=re==0?0:1/re;b[q+3]=255*re,b[q+0]=(A+O*G)*ee,b[q+1]=(I+R*G)*ee,b[q+2]=(F+$*G)*ee}else if(L==2)k=y[J+3],A=y[J],I=y[J+1],F=y[J+2],z=b[q+3],O=b[q],R=b[q+1],$=b[q+2],k==z&&A==O&&I==R&&F==$?(b[q]=0,b[q+1]=0,b[q+2]=0,b[q+3]=0):(b[q]=A,b[q+1]=I,b[q+2]=F,b[q+3]=k);else if(L==3){if(k=y[J+3],A=y[J],I=y[J+1],F=y[J+2],z=b[q+3],O=b[q],R=b[q+1],$=b[q+2],k==z&&A==O&&I==R&&F==$)continue;if(k<220&&z>20)return!1}return!0}return{decode:function(w){const v=new Uint8Array(w);let b=8;const S=t,j=S.readUshort,V=S.readUint,P={tabs:{},frames:[]},L=new Uint8Array(v.length);let M,H=0,J=0;const q=[137,80,78,71,13,10,26,10];for(var k=0;k<8;k++)if(v[k]!=q[k])throw"The input is not a PNG file!";for(;b<v.length;){const Y=S.readUint(v,b);b+=4;const X=S.readASCII(v,b,4);if(b+=4,X=="IHDR")p(v,b,P);else if(X=="iCCP"){for(var A=b;v[A]!=0;)A++;S.readASCII(v,b,A-b),v[A+1];const G=v.slice(A+2,b+Y);let re=null;try{re=r(G)}catch{re=i(G)}P.tabs[X]=re}else if(X=="CgBI")P.tabs[X]=v.slice(b,b+4);else if(X=="IDAT"){for(k=0;k<Y;k++)L[H+k]=v[b+k];H+=Y}else if(X=="acTL")P.tabs[X]={num_frames:V(v,b),num_plays:V(v,b+4)},M=new Uint8Array(v.length);else if(X=="fcTL"){J!=0&&(($=P.frames[P.frames.length-1]).data=n(P,M.slice(0,J),$.rect.width,$.rect.height),J=0);const G={x:V(v,b+12),y:V(v,b+16),width:V(v,b+4),height:V(v,b+8)};let re=j(v,b+22);re=j(v,b+20)/(re==0?100:re);const ee={rect:G,delay:Math.round(1e3*re),dispose:v[b+24],blend:v[b+25]};P.frames.push(ee)}else if(X=="fdAT"){for(k=0;k<Y-4;k++)M[J+k]=v[b+k+4];J+=Y-4}else if(X=="pHYs")P.tabs[X]=[S.readUint(v,b),S.readUint(v,b+4),v[b+8]];else if(X=="cHRM")for(P.tabs[X]=[],k=0;k<8;k++)P.tabs[X].push(S.readUint(v,b+4*k));else if(X=="tEXt"||X=="zTXt"){P.tabs[X]==null&&(P.tabs[X]={});var I=S.nextZero(v,b),F=S.readASCII(v,b,I-b),z=b+Y-I-1;if(X=="tEXt")R=S.readASCII(v,I+1,z);else{var O=r(v.slice(I+2,I+2+z));R=S.readUTF8(O,0,O.length)}P.tabs[X][F]=R}else if(X=="iTXt"){P.tabs[X]==null&&(P.tabs[X]={}),I=0,A=b,I=S.nextZero(v,A),F=S.readASCII(v,A,I-A);const G=v[A=I+1];var R;v[A+1],A+=2,I=S.nextZero(v,A),S.readASCII(v,A,I-A),A=I+1,I=S.nextZero(v,A),S.readUTF8(v,A,I-A),z=Y-((A=I+1)-b),G==0?R=S.readUTF8(v,A,z):(O=r(v.slice(A,A+z)),R=S.readUTF8(O,0,O.length)),P.tabs[X][F]=R}else if(X=="PLTE")P.tabs[X]=S.readBytes(v,b,Y);else if(X=="hIST"){const G=P.tabs.PLTE.length/3;for(P.tabs[X]=[],k=0;k<G;k++)P.tabs[X].push(j(v,b+2*k))}else if(X=="tRNS")P.ctype==3?P.tabs[X]=S.readBytes(v,b,Y):P.ctype==0?P.tabs[X]=j(v,b):P.ctype==2&&(P.tabs[X]=[j(v,b),j(v,b+2),j(v,b+4)]);else if(X=="gAMA")P.tabs[X]=S.readUint(v,b)/1e5;else if(X=="sRGB")P.tabs[X]=v[b];else if(X=="bKGD")P.ctype==0||P.ctype==4?P.tabs[X]=[j(v,b)]:P.ctype==2||P.ctype==6?P.tabs[X]=[j(v,b),j(v,b+2),j(v,b+4)]:P.ctype==3&&(P.tabs[X]=v[b]);else if(X=="IEND")break;b+=Y,S.readUint(v,b),b+=4}var $;return J!=0&&(($=P.frames[P.frames.length-1]).data=n(P,M.slice(0,J),$.rect.width,$.rect.height)),P.data=n(P,L,P.width,P.height),delete P.compress,delete P.interlace,delete P.filter,P},toRGBA8:function(w){const v=w.width,b=w.height;if(w.tabs.acTL==null)return[e(w.data,v,b,w).buffer];const S=[];w.frames[0].data==null&&(w.frames[0].data=w.data);const j=v*b*4,V=new Uint8Array(j),P=new Uint8Array(j),L=new Uint8Array(j);for(let H=0;H<w.frames.length;H++){const J=w.frames[H],q=J.rect.x,k=J.rect.y,A=J.rect.width,I=J.rect.height,F=e(J.data,A,I,w);if(H!=0)for(var M=0;M<j;M++)L[M]=V[M];if(J.blend==0?g(F,A,I,V,v,b,q,k,0):J.blend==1&&g(F,A,I,V,v,b,q,k,1),S.push(V.buffer.slice(0)),J.dispose!=0){if(J.dispose==1)g(P,A,I,V,v,b,q,k,0);else if(J.dispose==2)for(M=0;M<j;M++)V[M]=L[M]}}return S},_paeth:f,_copyTile:g,_bin:t}}();(function(){const{_copyTile:t}=Gi,{_bin:e}=Gi,n=Gi._paeth;var r={table:function(){const A=new Uint32Array(256);for(let I=0;I<256;I++){let F=I;for(let z=0;z<8;z++)1&F?F=3988292384^F>>>1:F>>>=1;A[I]=F}return A}(),update(A,I,F,z){for(let O=0;O<z;O++)A=r.table[255&(A^I[F+O])]^A>>>8;return A},crc:(A,I,F)=>4294967295^r.update(4294967295,A,I,F)};function i(A,I,F,z){I[F]+=A[0]*z>>4,I[F+1]+=A[1]*z>>4,I[F+2]+=A[2]*z>>4,I[F+3]+=A[3]*z>>4}function o(A){return Math.max(0,Math.min(255,A))}function c(A,I){const F=A[0]-I[0],z=A[1]-I[1],O=A[2]-I[2],R=A[3]-I[3];return F*F+z*z+O*O+R*R}function f(A,I,F,z,O,R,$){$==null&&($=1);const Y=z.length,X=[];for(var G=0;G<Y;G++){const ce=z[G];X.push([ce>>>0&255,ce>>>8&255,ce>>>16&255,ce>>>24&255])}for(G=0;G<Y;G++){let ce=4294967295;for(var re=0,ee=0;ee<Y;ee++){var ie=c(X[G],X[ee]);ee!=G&&ie<ce&&(ce=ie,re=ee)}}const fe=new Uint32Array(O.buffer),he=new Int16Array(I*F*4),Ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(G=0;G<Ee.length;G++)Ee[G]=255*((Ee[G]+.5)/16-.5);for(let ce=0;ce<F;ce++)for(let me=0;me<I;me++){var ue;G=4*(ce*I+me),$!=2?ue=[o(A[G]+he[G]),o(A[G+1]+he[G+1]),o(A[G+2]+he[G+2]),o(A[G+3]+he[G+3])]:(ie=Ee[4*(3&ce)+(3&me)],ue=[o(A[G]+ie),o(A[G+1]+ie),o(A[G+2]+ie),o(A[G+3]+ie)]),re=0;let Me=16777215;for(ee=0;ee<Y;ee++){const et=c(ue,X[ee]);et<Me&&(Me=et,re=ee)}const Oe=X[re],ze=[ue[0]-Oe[0],ue[1]-Oe[1],ue[2]-Oe[2],ue[3]-Oe[3]];$==1&&(me!=I-1&&i(ze,he,G+4,7),ce!=F-1&&(me!=0&&i(ze,he,G+4*I-4,3),i(ze,he,G+4*I,5),me!=I-1&&i(ze,he,G+4*I+4,1))),R[G>>2]=re,fe[G>>2]=z[re]}}function p(A,I,F,z,O){O==null&&(O={});const{crc:R}=r,$=e.writeUint,Y=e.writeUshort,X=e.writeASCII;let G=8;const re=A.frames.length>1;let ee,ie=!1,fe=33+(re?20:0);if(O.sRGB!=null&&(fe+=13),O.pHYs!=null&&(fe+=21),O.iCCP!=null&&(ee=pako.deflate(O.iCCP),fe+=21+ee.length+4),A.ctype==3){for(var he=A.plte.length,Ee=0;Ee<he;Ee++)A.plte[Ee]>>>24!=255&&(ie=!0);fe+=8+3*he+4+(ie?8+1*he+4:0)}for(var ue=0;ue<A.frames.length;ue++)re&&(fe+=38),fe+=(Oe=A.frames[ue]).cimg.length+12,ue!=0&&(fe+=4);fe+=12;const ce=new Uint8Array(fe),me=[137,80,78,71,13,10,26,10];for(Ee=0;Ee<8;Ee++)ce[Ee]=me[Ee];if($(ce,G,13),G+=4,X(ce,G,"IHDR"),G+=4,$(ce,G,I),G+=4,$(ce,G,F),G+=4,ce[G]=A.depth,G++,ce[G]=A.ctype,G++,ce[G]=0,G++,ce[G]=0,G++,ce[G]=0,G++,$(ce,G,R(ce,G-17,17)),G+=4,O.sRGB!=null&&($(ce,G,1),G+=4,X(ce,G,"sRGB"),G+=4,ce[G]=O.sRGB,G++,$(ce,G,R(ce,G-5,5)),G+=4),O.iCCP!=null){const ze=13+ee.length;$(ce,G,ze),G+=4,X(ce,G,"iCCP"),G+=4,X(ce,G,"ICC profile"),G+=11,G+=2,ce.set(ee,G),G+=ee.length,$(ce,G,R(ce,G-(ze+4),ze+4)),G+=4}if(O.pHYs!=null&&($(ce,G,9),G+=4,X(ce,G,"pHYs"),G+=4,$(ce,G,O.pHYs[0]),G+=4,$(ce,G,O.pHYs[1]),G+=4,ce[G]=O.pHYs[2],G++,$(ce,G,R(ce,G-13,13)),G+=4),re&&($(ce,G,8),G+=4,X(ce,G,"acTL"),G+=4,$(ce,G,A.frames.length),G+=4,$(ce,G,O.loop!=null?O.loop:0),G+=4,$(ce,G,R(ce,G-12,12)),G+=4),A.ctype==3){for($(ce,G,3*(he=A.plte.length)),G+=4,X(ce,G,"PLTE"),G+=4,Ee=0;Ee<he;Ee++){const ze=3*Ee,et=A.plte[Ee],tt=255&et,Tt=et>>>8&255,qe=et>>>16&255;ce[G+ze+0]=tt,ce[G+ze+1]=Tt,ce[G+ze+2]=qe}if(G+=3*he,$(ce,G,R(ce,G-3*he-4,3*he+4)),G+=4,ie){for($(ce,G,he),G+=4,X(ce,G,"tRNS"),G+=4,Ee=0;Ee<he;Ee++)ce[G+Ee]=A.plte[Ee]>>>24&255;G+=he,$(ce,G,R(ce,G-he-4,he+4)),G+=4}}let Me=0;for(ue=0;ue<A.frames.length;ue++){var Oe=A.frames[ue];re&&($(ce,G,26),G+=4,X(ce,G,"fcTL"),G+=4,$(ce,G,Me++),G+=4,$(ce,G,Oe.rect.width),G+=4,$(ce,G,Oe.rect.height),G+=4,$(ce,G,Oe.rect.x),G+=4,$(ce,G,Oe.rect.y),G+=4,Y(ce,G,z[ue]),G+=2,Y(ce,G,1e3),G+=2,ce[G]=Oe.dispose,G++,ce[G]=Oe.blend,G++,$(ce,G,R(ce,G-30,30)),G+=4);const ze=Oe.cimg;$(ce,G,(he=ze.length)+(ue==0?0:4)),G+=4;const et=G;X(ce,G,ue==0?"IDAT":"fdAT"),G+=4,ue!=0&&($(ce,G,Me++),G+=4),ce.set(ze,G),G+=he,$(ce,G,R(ce,et,G-et)),G+=4}return $(ce,G,0),G+=4,X(ce,G,"IEND"),G+=4,$(ce,G,R(ce,G-4,4)),G+=4,ce.buffer}function g(A,I,F){for(let z=0;z<A.frames.length;z++){const O=A.frames[z];O.rect.width;const R=O.rect.height,$=new Uint8Array(R*O.bpl+R);O.cimg=b(O.img,R,O.bpp,O.bpl,$,I,F)}}function y(A,I,F,z,O){const R=O[0],$=O[1],Y=O[2],X=O[3],G=O[4],re=O[5];let ee=6,ie=8,fe=255;for(var he=0;he<A.length;he++){const jt=new Uint8Array(A[he]);for(var Ee=jt.length,ue=0;ue<Ee;ue+=4)fe&=jt[ue+3]}const ce=fe!=255,me=function(Ye,Be,Re,at,Te,Cn){const Ft=[];for(var it=0;it<Ye.length;it++){const An=new Uint8Array(Ye[it]),Mn=new Uint32Array(An.buffer);var Zt;let Qn=0,lt=0,ve=Be,At=Re,nt=at?1:0;if(it!=0){const Mt=Cn||at||it==1||Ft[it-2].dispose!=0?1:2;let _r=0,cs=1e9;for(let vr=0;vr<Mt;vr++){var Jt=new Uint8Array(Ye[it-1-vr]);const ct=new Uint32Array(Ye[it-1-vr]);let Ct=Be,Cr=Re,dr=-1,en=-1;for(let Bt=0;Bt<Re;Bt++)for(let mn=0;mn<Be;mn++)Mn[Nt=Bt*Be+mn]!=ct[Nt]&&(mn<Ct&&(Ct=mn),mn>dr&&(dr=mn),Bt<Cr&&(Cr=Bt),Bt>en&&(en=Bt));dr==-1&&(Ct=Cr=dr=en=0),Te&&((1&Ct)==1&&Ct--,(1&Cr)==1&&Cr--);const Vs=(dr-Ct+1)*(en-Cr+1);Vs<cs&&(cs=Vs,_r=vr,Qn=Ct,lt=Cr,ve=dr-Ct+1,At=en-Cr+1)}Jt=new Uint8Array(Ye[it-1-_r]),_r==1&&(Ft[it-1].dispose=2),Zt=new Uint8Array(ve*At*4),t(Jt,Be,Re,Zt,ve,At,-Qn,-lt,0),nt=t(An,Be,Re,Zt,ve,At,-Qn,-lt,3)?1:0,nt==1?v(An,Be,Re,Zt,{x:Qn,y:lt,width:ve,height:At}):t(An,Be,Re,Zt,ve,At,-Qn,-lt,0)}else Zt=An.slice(0);Ft.push({rect:{x:Qn,y:lt,width:ve,height:At},img:Zt,blend:nt,dispose:0})}if(at)for(it=0;it<Ft.length;it++){if((Wt=Ft[it]).blend==1)continue;const An=Wt.rect,Mn=Ft[it-1].rect,Qn=Math.min(An.x,Mn.x),lt=Math.min(An.y,Mn.y),ve={x:Qn,y:lt,width:Math.max(An.x+An.width,Mn.x+Mn.width)-Qn,height:Math.max(An.y+An.height,Mn.y+Mn.height)-lt};Ft[it-1].dispose=1,it-1!=0&&w(Ye,Be,Re,Ft,it-1,ve,Te),w(Ye,Be,Re,Ft,it,ve,Te)}let Oi=0;if(Ye.length!=1)for(var Nt=0;Nt<Ft.length;Nt++){var Wt;Oi+=(Wt=Ft[Nt]).rect.width*Wt.rect.height}return Ft}(A,I,F,R,$,Y),Me={},Oe=[],ze=[];if(z!=0){const jt=[];for(ue=0;ue<me.length;ue++)jt.push(me[ue].img.buffer);const Ye=function(Te){let Cn=0;for(var Ft=0;Ft<Te.length;Ft++)Cn+=Te[Ft].byteLength;const it=new Uint8Array(Cn);let Zt=0;for(Ft=0;Ft<Te.length;Ft++){const Jt=new Uint8Array(Te[Ft]),Oi=Jt.length;for(let Nt=0;Nt<Oi;Nt+=4){let Wt=Jt[Nt],An=Jt[Nt+1],Mn=Jt[Nt+2];const Qn=Jt[Nt+3];Qn==0&&(Wt=An=Mn=0),it[Zt+Nt]=Wt,it[Zt+Nt+1]=An,it[Zt+Nt+2]=Mn,it[Zt+Nt+3]=Qn}Zt+=Oi}return it.buffer}(jt),Be=j(Ye,z);for(ue=0;ue<Be.plte.length;ue++)Oe.push(Be.plte[ue].est.rgba);let Re=0;for(ue=0;ue<me.length;ue++){const at=(tt=me[ue]).img.length;var et=new Uint8Array(Be.inds.buffer,Re>>2,at>>2);ze.push(et);const Te=new Uint8Array(Be.abuf,Re,at);re&&f(tt.img,tt.rect.width,tt.rect.height,Oe,Te,et),tt.img.set(Te),Re+=at}}else for(he=0;he<me.length;he++){var tt=me[he];const jt=new Uint32Array(tt.img.buffer);var Tt=tt.rect.width;for(Ee=jt.length,et=new Uint8Array(Ee),ze.push(et),ue=0;ue<Ee;ue++){const Ye=jt[ue];if(ue!=0&&Ye==jt[ue-1])et[ue]=et[ue-1];else if(ue>Tt&&Ye==jt[ue-Tt])et[ue]=et[ue-Tt];else{let Be=Me[Ye];if(Be==null&&(Me[Ye]=Be=Oe.length,Oe.push(Ye),Oe.length>=300))break;et[ue]=Be}}}const qe=Oe.length;for(qe<=256&&G==0&&(ie=qe<=2?1:qe<=4?2:qe<=16?4:8,ie=Math.max(ie,X)),he=0;he<me.length;he++){(tt=me[he]).rect.x,tt.rect.y,Tt=tt.rect.width;const jt=tt.rect.height;let Ye=tt.img;new Uint32Array(Ye.buffer);let Be=4*Tt,Re=4;if(qe<=256&&G==0){Be=Math.ceil(ie*Tt/8);var vn=new Uint8Array(Be*jt);const at=ze[he];for(let Te=0;Te<jt;Te++){ue=Te*Be;const Cn=Te*Tt;if(ie==8)for(var pt=0;pt<Tt;pt++)vn[ue+pt]=at[Cn+pt];else if(ie==4)for(pt=0;pt<Tt;pt++)vn[ue+(pt>>1)]|=at[Cn+pt]<<4-4*(1&pt);else if(ie==2)for(pt=0;pt<Tt;pt++)vn[ue+(pt>>2)]|=at[Cn+pt]<<6-2*(3&pt);else if(ie==1)for(pt=0;pt<Tt;pt++)vn[ue+(pt>>3)]|=at[Cn+pt]<<7-1*(7&pt)}Ye=vn,ee=3,Re=1}else if(ce==0&&me.length==1){vn=new Uint8Array(Tt*jt*3);const at=Tt*jt;for(ue=0;ue<at;ue++){const Te=3*ue,Cn=4*ue;vn[Te]=Ye[Cn],vn[Te+1]=Ye[Cn+1],vn[Te+2]=Ye[Cn+2]}Ye=vn,ee=2,Re=3,Be=3*Tt}tt.img=Ye,tt.bpl=Be,tt.bpp=Re}return{ctype:ee,depth:ie,plte:Oe,frames:me}}function w(A,I,F,z,O,R,$){const Y=Uint8Array,X=Uint32Array,G=new Y(A[O-1]),re=new X(A[O-1]),ee=O+1<A.length?new Y(A[O+1]):null,ie=new Y(A[O]),fe=new X(ie.buffer);let he=I,Ee=F,ue=-1,ce=-1;for(let Me=0;Me<R.height;Me++)for(let Oe=0;Oe<R.width;Oe++){const ze=R.x+Oe,et=R.y+Me,tt=et*I+ze,Tt=fe[tt];Tt==0||z[O-1].dispose==0&&re[tt]==Tt&&(ee==null||ee[4*tt+3]!=0)||(ze<he&&(he=ze),ze>ue&&(ue=ze),et<Ee&&(Ee=et),et>ce&&(ce=et))}ue==-1&&(he=Ee=ue=ce=0),$&&((1&he)==1&&he--,(1&Ee)==1&&Ee--),R={x:he,y:Ee,width:ue-he+1,height:ce-Ee+1};const me=z[O];me.rect=R,me.blend=1,me.img=new Uint8Array(R.width*R.height*4),z[O-1].dispose==0?(t(G,I,F,me.img,R.width,R.height,-R.x,-R.y,0),v(ie,I,F,me.img,R)):t(ie,I,F,me.img,R.width,R.height,-R.x,-R.y,0)}function v(A,I,F,z,O){t(A,I,F,z,O.width,O.height,-O.x,-O.y,2)}function b(A,I,F,z,O,R,$){const Y=[];let X,G=[0,1,2,3,4];R!=-1?G=[R]:(I*z>5e5||F==1)&&(G=[0]),$&&(X={level:0});const re=wk;for(var ee=0;ee<G.length;ee++){for(let he=0;he<I;he++)S(O,A,he,z,F,G[ee]);Y.push(re.deflate(O,X))}let ie,fe=1e9;for(ee=0;ee<Y.length;ee++)Y[ee].length<fe&&(ie=ee,fe=Y[ee].length);return Y[ie]}function S(A,I,F,z,O,R){const $=F*z;let Y=$+F;if(A[Y]=R,Y++,R==0)if(z<500)for(var X=0;X<z;X++)A[Y+X]=I[$+X];else A.set(new Uint8Array(I.buffer,$,z),Y);else if(R==1){for(X=0;X<O;X++)A[Y+X]=I[$+X];for(X=O;X<z;X++)A[Y+X]=I[$+X]-I[$+X-O]+256&255}else if(F==0){for(X=0;X<O;X++)A[Y+X]=I[$+X];if(R==2)for(X=O;X<z;X++)A[Y+X]=I[$+X];if(R==3)for(X=O;X<z;X++)A[Y+X]=I[$+X]-(I[$+X-O]>>1)+256&255;if(R==4)for(X=O;X<z;X++)A[Y+X]=I[$+X]-n(I[$+X-O],0,0)+256&255}else{if(R==2)for(X=0;X<z;X++)A[Y+X]=I[$+X]+256-I[$+X-z]&255;if(R==3){for(X=0;X<O;X++)A[Y+X]=I[$+X]+256-(I[$+X-z]>>1)&255;for(X=O;X<z;X++)A[Y+X]=I[$+X]+256-(I[$+X-z]+I[$+X-O]>>1)&255}if(R==4){for(X=0;X<O;X++)A[Y+X]=I[$+X]+256-n(0,I[$+X-z],0)&255;for(X=O;X<z;X++)A[Y+X]=I[$+X]+256-n(I[$+X-O],I[$+X-z],I[$+X-O-z])&255}}}function j(A,I){const F=new Uint8Array(A),z=F.slice(0),O=new Uint32Array(z.buffer),R=V(z,I),$=R[0],Y=R[1],X=F.length,G=new Uint8Array(X>>2);let re;if(F.length<2e7)for(var ee=0;ee<X;ee+=4)re=P($,ie=F[ee]*(1/255),fe=F[ee+1]*(1/255),he=F[ee+2]*(1/255),Ee=F[ee+3]*(1/255)),G[ee>>2]=re.ind,O[ee>>2]=re.est.rgba;else for(ee=0;ee<X;ee+=4){var ie=F[ee]*.00392156862745098,fe=F[ee+1]*(1/255),he=F[ee+2]*(1/255),Ee=F[ee+3]*(1/255);for(re=$;re.left;)re=L(re.est,ie,fe,he,Ee)<=0?re.left:re.right;G[ee>>2]=re.ind,O[ee>>2]=re.est.rgba}return{abuf:z.buffer,inds:G,plte:Y}}function V(A,I,F){F==null&&(F=1e-4);const z=new Uint32Array(A.buffer),O={i0:0,i1:A.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=J(A,O.i0,O.i1),O.est=q(O.bst);const R=[O];for(;R.length<I;){let Y=0,X=0;for(var $=0;$<R.length;$++)R[$].est.L>Y&&(Y=R[$].est.L,X=$);if(Y<F)break;const G=R[X],re=M(A,z,G.i0,G.i1,G.est.e,G.est.eMq255);if(G.i0>=re||G.i1<=re){G.est.L=0;continue}const ee={i0:G.i0,i1:re,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=J(A,ee.i0,ee.i1),ee.est=q(ee.bst);const ie={i0:re,i1:G.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ie.bst={R:[],m:[],N:G.bst.N-ee.bst.N},$=0;$<16;$++)ie.bst.R[$]=G.bst.R[$]-ee.bst.R[$];for($=0;$<4;$++)ie.bst.m[$]=G.bst.m[$]-ee.bst.m[$];ie.est=q(ie.bst),G.left=ee,G.right=ie,R[X]=ee,R.push(ie)}for(R.sort((Y,X)=>X.bst.N-Y.bst.N),$=0;$<R.length;$++)R[$].ind=$;return[O,R]}function P(A,I,F,z,O){if(A.left==null)return A.tdst=function(ee,ie,fe,he,Ee){const ue=ie-ee[0],ce=fe-ee[1],me=he-ee[2],Me=Ee-ee[3];return ue*ue+ce*ce+me*me+Me*Me}(A.est.q,I,F,z,O),A;const R=L(A.est,I,F,z,O);let $=A.left,Y=A.right;R>0&&($=A.right,Y=A.left);const X=P($,I,F,z,O);if(X.tdst<=R*R)return X;const G=P(Y,I,F,z,O);return G.tdst<X.tdst?G:X}function L(A,I,F,z,O){const{e:R}=A;return R[0]*I+R[1]*F+R[2]*z+R[3]*O-A.eMq}function M(A,I,F,z,O,R){for(z-=4;F<z;){for(;H(A,F,O)<=R;)F+=4;for(;H(A,z,O)>R;)z-=4;if(F>=z)break;const $=I[F>>2];I[F>>2]=I[z>>2],I[z>>2]=$,F+=4,z-=4}for(;H(A,F,O)>R;)F-=4;return F+4}function H(A,I,F){return A[I]*F[0]+A[I+1]*F[1]+A[I+2]*F[2]+A[I+3]*F[3]}function J(A,I,F){const z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0],R=F-I>>2;for(let $=I;$<F;$+=4){const Y=A[$]*.00392156862745098,X=A[$+1]*(1/255),G=A[$+2]*(1/255),re=A[$+3]*(1/255);O[0]+=Y,O[1]+=X,O[2]+=G,O[3]+=re,z[0]+=Y*Y,z[1]+=Y*X,z[2]+=Y*G,z[3]+=Y*re,z[5]+=X*X,z[6]+=X*G,z[7]+=X*re,z[10]+=G*G,z[11]+=G*re,z[15]+=re*re}return z[4]=z[1],z[8]=z[2],z[9]=z[6],z[12]=z[3],z[13]=z[7],z[14]=z[11],{R:z,m:O,N:R}}function q(A){const{R:I}=A,{m:F}=A,{N:z}=A,O=F[0],R=F[1],$=F[2],Y=F[3],X=z==0?0:1/z,G=[I[0]-O*O*X,I[1]-O*R*X,I[2]-O*$*X,I[3]-O*Y*X,I[4]-R*O*X,I[5]-R*R*X,I[6]-R*$*X,I[7]-R*Y*X,I[8]-$*O*X,I[9]-$*R*X,I[10]-$*$*X,I[11]-$*Y*X,I[12]-Y*O*X,I[13]-Y*R*X,I[14]-Y*$*X,I[15]-Y*Y*X],re=G,ee=k;let ie=[Math.random(),Math.random(),Math.random(),Math.random()],fe=0,he=0;if(z!=0)for(let ue=0;ue<16&&(ie=ee.multVec(re,ie),he=Math.sqrt(ee.dot(ie,ie)),ie=ee.sml(1/he,ie),!(ue!=0&&Math.abs(he-fe)<1e-9));ue++)fe=he;const Ee=[O*X,R*X,$*X,Y*X];return{Cov:G,q:Ee,e:ie,L:fe,eMq255:ee.dot(ee.sml(255,Ee),ie),eMq:ee.dot(ie,Ee),rgba:(Math.round(255*Ee[3])<<24|Math.round(255*Ee[2])<<16|Math.round(255*Ee[1])<<8|Math.round(255*Ee[0])<<0)>>>0}}var k={multVec:(A,I)=>[A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3],A[4]*I[0]+A[5]*I[1]+A[6]*I[2]+A[7]*I[3],A[8]*I[0]+A[9]*I[1]+A[10]*I[2]+A[11]*I[3],A[12]*I[0]+A[13]*I[1]+A[14]*I[2]+A[15]*I[3]],dot:(A,I)=>A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3],sml:(A,I)=>[A*I[0],A*I[1],A*I[2],A*I[3]]};Gi.encode=function(I,F,z,O,R,$,Y){O==null&&(O=0),Y==null&&(Y=!1);const X=y(I,F,z,O,[!1,!1,!1,0,Y,!1]);return g(X,-1),p(X,F,z,R,$)},Gi.encodeLL=function(I,F,z,O,R,$,Y,X){const G={ctype:0+(O==1?0:2)+(R==0?0:4),depth:$,frames:[]},re=(O+R)*$,ee=re*F;for(let ie=0;ie<I.length;ie++)G.frames.push({rect:{x:0,y:0,width:F,height:z},img:new Uint8Array(I[ie]),blend:0,dispose:1,bpp:Math.ceil(re/8),bpl:Math.ceil(ee/8)});return g(G,0,!0),p(G,F,z,Y,X)},Gi.encode.compress=y,Gi.encode.dither=f,Gi.quantize=j,Gi.quantize.getKDtree=V,Gi.quantize.getNearest=P})();const Cm=typeof window<"u",jA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$d=Cm&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper");(Cm||jA)&&($d&&$d.getOriginalSymbol(window,"File")||typeof File<"u");(Cm||jA)&&($d&&$d.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u");function Am({title:t,onBack:e}){const n=xi();return E.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-4 flex items-center gap-4 animate-fade-in",children:[E.jsx("button",{onClick:e||(()=>n(-1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600 active:scale-90",children:E.jsx(Ps,{size:24})}),E.jsx("h2",{className:"text-lg font-bold text-gray-800 truncate",children:t})]})}function Ek(){var O;const[t,e]=se.useState(!1),[n,r]=se.useState(""),[i,o]=se.useState(""),[c,f]=se.useState(""),[p,g]=se.useState(""),[y,w]=se.useState("login"),[v,b]=se.useState(null),[S,j]=se.useState([]),[V,P]=se.useState(null),[L,M]=se.useState(!1),[H,J]=se.useState(!1),q=async()=>{var R;try{if((await Jn.checkPermissions()).camera!=="granted"&&(await Jn.requestPermissions()).camera!=="granted"){alert("Se requiere permiso de cmara para escanear.");return}await Jn.removeAllListeners(),document.body.classList.add("barcode-scanner-active"),J(!0),await Jn.addListener("barcodeScanned",async Y=>{const X=Y.barcode.displayValue;X&&X.trim()&&(f(X.toUpperCase().trim()),await k())}),await Jn.startScan({formats:[kt.QrCode,kt.Code128,kt.Code39,kt.Code93,kt.Codabar,kt.Ean13,kt.Ean8,kt.Itf,kt.UpcA,kt.UpcE,kt.Pdf417,kt.Aztec,kt.DataMatrix],lensFacing:"back",enableTorchToggle:!0,enableZoom:!1,enableVibration:!0})}catch($){if(console.error("Error al iniciar scanner de ID:",$),(R=$.message)!=null&&R.includes("already started"))try{await Jn.stopScan(),await q()}catch(Y){console.error("Error al reiniciar scanner:",Y),await k()}else await k()}},k=async()=>{document.body.classList.remove("barcode-scanner-active"),J(!1);try{await Jn.stopScan(),await Jn.removeAllListeners()}catch(R){console.error("Error al detener scanner:",R)}};se.useEffect(()=>{document.body.classList.remove("barcode-scanner-active");const R=JSON.parse(localStorage.getItem("r3pet_saved_sessions")||"[]");j(R)},[]);const A=async(R,$)=>{const Y=JSON.parse(localStorage.getItem("r3pet_saved_sessions")||"[]"),X={email:R.user.email,id:R.user.uid,full_name:$.full_name,role:$.role,avatar_url:$.avatar_url,session:R,timestamp:Date.now()},G=Y.filter(ee=>ee.email!==X.email),re=[X,...G].slice(0,5);localStorage.setItem("r3pet_saved_sessions",JSON.stringify(re)),j(re)},I=async R=>{R.preventDefault(),e(!0),b(null);try{if(y==="signup"){if(!c||c.length<5)throw new Error("Ingresa una matrcula vlida.");if(!p||p.length<3)throw new Error("Ingresa tu nombre completo.");const Y=(await cv(Ki,n,i)).user,X={full_name:p,role:"student",matricula:c.toUpperCase(),points:0,total_bottles:0,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${Y.uid}`,created_at:fo()};await dm(Bn(Je,"profiles",Y.uid),X),A({user:Y,profile:X},X),b({type:"success",text:"Registro exitoso! Tu cuenta ha sido guardada."}),w("login")}else{const X=(await hN(Ki,V||n,i)).user,G=await Ru(Bn(Je,"profiles",X.uid));if(G.exists()){const re=G.data();A({user:X,profile:re},re)}else throw new Error("No se encontr el perfil de usuario.")}}catch($){console.error("Error de Auth:",$);let Y="Error en la operacin.";$.code==="auth/email-already-in-use"&&(Y="El correo ya est registrado."),$.code==="auth/wrong-password"&&(Y="Contrasea incorrecta."),$.code==="auth/user-not-found"&&(Y="Usuario no encontrado."),b({type:"error",text:$.message||Y})}finally{e(!1),P(null)}},F=async R=>{if((Date.now()-R.timestamp)/(1e3*60*60)<24){e(!0);try{if(Ki.currentUser&&Ki.currentUser.email===R.email){const X=await Ru(Bn(Je,"profiles",Ki.currentUser.uid));X.exists()&&A({user:Ki.currentUser,profile:X.data()},X.data())}else P(R.email),r(R.email),w("login")}catch{P(R.email),r(R.email),w("login")}finally{e(!1)}}else P(R.email),r(R.email),w("login")},z=(R,$)=>{R.stopPropagation();const Y=S.filter(X=>X.email!==$);localStorage.setItem("r3pet_saved_sessions",JSON.stringify(Y)),j(Y)};return E.jsxs("div",{className:`min-h-screen flex flex-col justify-center items-center p-4 relative ${H?"bg-transparent":"bg-gray-100"}`,children:[E.jsxs("div",{className:`w-full max-w-md flex flex-col items-center transition-opacity duration-300 ${H?"opacity-0 pointer-events-none":"opacity-100"}`,children:[E.jsxs("header",{className:"mb-10 text-center flex flex-col items-center animate-fade-in pointer-events-none",children:[E.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-700 p-5 rounded-[2.5rem] text-white shadow-2xl shadow-green-200 mb-6 transform hover:rotate-6 transition-transform duration-500",children:E.jsx(Do,{size:56,className:"filter drop-shadow-md"})}),E.jsxs("h1",{className:"text-5xl font-black text-gray-900 tracking-[ -0.05em] leading-none mb-2",children:["R3",E.jsx("span",{className:"text-green-600",children:"PET"})," Online"]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"h-px w-8 bg-green-200"}),E.jsx("p",{className:"text-[11px] text-green-700 font-black uppercase tracking-[0.4em]",children:"Reciclaje Inteligente"}),E.jsx("div",{className:"h-px w-8 bg-green-200"})]})]}),E.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-xl w-full max-w-sm space-y-4 transition-opacity duration-300 ${H?"opacity-0 pointer-events-none":"opacity-100"}`,children:[y==="login"&&!V&&S.length>0&&!L?E.jsxs("div",{className:"animate-fade-in mb-6",children:[E.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-3 text-center",children:"Cuentas Recientes"}),E.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-1",children:[S.map(R=>E.jsxs("div",{onClick:()=>F(R),className:"flex items-center justify-between p-3 bg-gray-50 hover:bg-green-50 rounded-xl border border-transparent hover:border-green-200 cursor-pointer transition-all group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[R.avatar_url?E.jsx("img",{src:R.avatar_url,className:"w-10 h-10 rounded-full border shadow-sm",alt:"avatar"}):E.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:E.jsx(Is,{size:20})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 leading-tight",children:R.full_name}),E.jsx("p",{className:"text-[10px] text-gray-400",children:R.email})]})]}),E.jsx("button",{onClick:$=>z($,R.email),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},R.id)),E.jsx("button",{onClick:()=>{confirm("Limpiar historial de cuentas?")&&(j([]),localStorage.removeItem("r3pet_saved_sessions"))},className:"w-full py-2 text-[10px] text-gray-400 hover:text-gray-600 uppercase font-bold",children:"Limpiar lista"})]}),E.jsxs("div",{className:"flex items-center gap-2 my-4",children:[E.jsx("div",{className:"flex-1 h-[1px] bg-gray-100"}),E.jsx("span",{className:"text-[10px] text-gray-300 font-bold uppercase",children:""}),E.jsx("div",{className:"flex-1 h-[1px] bg-gray-100"})]}),E.jsx("div",{className:"text-center",children:E.jsx("button",{onClick:()=>M(!0),className:"text-sm text-green-600 font-bold hover:underline",children:"Usar otra cuenta"})})]}):E.jsxs(E.Fragment,{children:[S.length>0&&!V&&y==="login"&&E.jsxs("button",{onClick:()=>M(!1),className:"flex items-center gap-1 text-xs text-gray-400 hover:text-green-600 transition-colors mb-2",children:[E.jsx(Ps,{size:14})," Regresar a mis cuentas"]}),E.jsx("h2",{className:"text-center font-bold text-gray-700 mb-4",children:V?`Hola, ${(O=S.find(R=>R.email===V))==null?void 0:O.full_name}`:y==="login"?"Iniciar Sesin":"Crear Cuenta"}),v&&E.jsx("div",{className:`p-3 rounded text-sm text-center ${v.type==="error"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:v.text}),E.jsxs("form",{onSubmit:I,className:"space-y-3",children:[y==="signup"&&E.jsxs("div",{className:"animate-fade-in space-y-3",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Nombre Completo"}),E.jsx("input",{type:"text",required:!0,value:p,onChange:R=>g(R.target.value),className:"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-green-500 outline-none capitalize",placeholder:"Ej. Juan Prez"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Matrcula Escolar"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",required:!0,value:c,onChange:R=>f(R.target.value),className:"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-green-500 outline-none uppercase",placeholder:"Ej. 20240980"}),E.jsx("button",{type:"button",onClick:q,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Escanear credencial",children:E.jsx(op,{size:20})})]})]})]}),!V&&E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Correo Escolar"}),E.jsx("input",{type:"email",required:!0,value:n,onChange:R=>r(R.target.value),className:"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-green-500 outline-none",placeholder:"alumno@ejemplo.edu"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Contrasea"}),E.jsx("input",{type:"password",required:!0,value:i,onChange:R=>o(R.target.value),className:"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-green-500 outline-none",placeholder:""})]}),E.jsx("button",{disabled:t,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition flex justify-center",children:t?"Procesando...":y==="login"?"Entrar":"Registrarse"}),V&&E.jsx("button",{type:"button",onClick:()=>{P(null),r("")},className:"w-full py-2 text-xs text-gray-400 hover:text-gray-600 font-bold",children:"Usar otra cuenta"})]}),E.jsx("div",{className:"text-center pt-2",children:E.jsx("button",{onClick:()=>{w(y==="login"?"signup":"login"),b(null),P(null)},className:"text-sm text-green-600 font-bold hover:underline",children:y==="login"?"No tienes cuenta? Registrate":"Ya tienes cuenta? Inicia Sesin"})})]}),E.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 text-xs text-center text-gray-400",children:E.jsx("p",{children:"Soporte Tcnico: v1.1.0 Online"})})]})]}),H&&E.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center pointer-events-auto bg-black/40",children:[E.jsxs("div",{className:"w-72 h-72 border-2 border-white/30 rounded-[40px] flex items-center justify-center relative shadow-[0_0_0_100vmax_rgba(0,0,0,0.8)]",children:[E.jsx("div",{className:"absolute inset-0 border-4 border-green-500/50 rounded-[40px] animate-pulse"}),E.jsx("div",{className:"absolute left-6 right-6 h-0.5 bg-red-500 shadow-[0_0_15px_rgba(239,68,68,0.8)] animate-scan-line"}),E.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-xl px-6 py-2.5 rounded-full border border-white/20 shadow-2xl min-w-max text-center",children:[E.jsx("p",{className:"text-white text-[10px] font-black uppercase tracking-[0.2em]",children:"Escanear Credencial"}),E.jsx("p",{className:"text-[8px] text-green-400 font-bold uppercase tracking-widest mt-0.5",children:"Soporta QR y Barras"})]})]}),E.jsxs("button",{onClick:k,className:"mt-20 bg-white text-gray-900 px-12 py-4 rounded-full font-black text-xs uppercase tracking-widest shadow-2xl active:scale-90 transition-all flex items-center gap-3",children:[E.jsx(cp,{size:18})," Cancelar Escaneo"]})]})]})}function _k(){const{points:t,lifetimePoints:e,userId:n,fullName:r}=Pa(),[i,o]=se.useState([]),c=xi();return se.useEffect(()=>{(async()=>{if(!n)return;const p=ei(kn(Je,"transactions"),Ri("student_id","==",n),Zu("timestamp","desc"),tg(5)),g=mi(p,y=>{const w=y.docs.map(v=>({id:v.id,...v.data()}));o(w)},y=>{console.error("Error fetching transactions:",y),y.code==="failed-precondition"&&(console.error(" NDICE COMPUESTO REQUERIDO: Debes crear un ndice en Firebase Console para student_id + timestamp"),console.error("Visita: https://console.firebase.google.com/project/_/firestore/indexes"))});return()=>g()})()},[n]),E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsxs("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-green-100/50 border border-green-50 border-l-8 border-l-green-600 flex justify-between items-start animate-fade-in",children:[E.jsxs("div",{children:[E.jsxs("h2",{className:"text-3xl font-black text-gray-900 tracking-tight leading-none mb-1",children:["Hola, ",(r==null?void 0:r.split(" ")[0])||"Alumno"]}),E.jsx("p",{className:"text-xs font-black text-green-700 bg-green-100/50 px-2 py-1 rounded-lg inline-block uppercase tracking-wider",children:"Eco Dashboard"})]}),E.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-700 text-white px-4 py-2 rounded-2xl text-lg font-black shadow-lg shadow-green-200 active:scale-95 transition-all flex flex-col items-end leading-none",children:[E.jsx("span",{children:t}),E.jsx("span",{className:"text-[10px] opacity-80 font-bold uppercase tracking-widest mt-1",children:"Puntos"})]})]}),E.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 p-6 rounded-3xl shadow-lg text-white relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:E.jsx(Do,{size:120})}),E.jsxs("div",{className:"relative z-10",children:[E.jsx("p",{className:"text-xs font-black uppercase tracking-widest opacity-80 mb-2",children:"Tu Impacto Ambiental"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-baseline gap-1",children:[E.jsx("span",{className:"text-3xl font-black",children:((e||0)*.05).toFixed(1)}),E.jsx("span",{className:"text-xs font-bold opacity-80",children:"kg PET"})]}),E.jsx("p",{className:"text-[10px] font-medium opacity-70",children:"Reciclado total"})]}),E.jsxs("div",{className:"border-l border-white/20 pl-4",children:[E.jsxs("div",{className:"flex items-baseline gap-1 text-emerald-100",children:[E.jsx("span",{className:"text-3xl font-black",children:((e||0)*.075).toFixed(2)}),E.jsx("span",{className:"text-xs font-bold opacity-80",children:"kg CO"})]}),E.jsx("p",{className:"text-[10px] font-medium opacity-70 italic underline decoration-white/30 underline-offset-4",children:"Emisiones evitadas"})]})]})]}),E.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[E.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-tighter",children:"Progreso de Impacto"}),E.jsx("div",{className:"w-32 h-2 bg-black/20 rounded-full overflow-hidden border border-white/10",children:E.jsx("div",{className:"h-full bg-white/70 shadow-[0_0_10px_rgba(255,255,255,0.5)]",style:{width:`${Math.min((e||0)/10,100)}%`}})})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"Tus Movimientos Recientes"}),E.jsx("div",{className:"space-y-3",children:i.length===0?E.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"An no tienes movimientos."}):i.map(f=>{let p=f.description||"Movimiento";f.type==="registro"&&!f.description&&(p=`Registro de botellas: ${f.bottles||0} botellas`);const g=(f.points||0)>0,y=()=>{(f.points||0)>0?c("/app/profile/points-history"):c("/app/profile/redemptions-history")};return E.jsxs("div",{onDoubleClick:y,className:"bg-white p-3 rounded-lg shadow-sm flex justify-between items-center border border-gray-100 cursor-pointer select-none active:scale-[0.98] transition-transform hover:bg-gray-50",title:"Doble clic para ver detalles",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Do,{size:16,className:g?"text-green-500":"text-orange-500"}),E.jsx("span",{className:"text-sm font-medium",children:p})]}),E.jsxs("span",{className:`font-bold ${g?"text-green-600":"text-orange-600"}`,children:[g?"+":"",f.points||0]})]},f.id)})})]})]})}function vk(){const{points:t,userId:e,fetchPoints:n}=Pa(),[r,i]=se.useState(null),[o,c]=se.useState(null),f=[{id:1,name:"Desayuno Escolar",cost:250,icon:I3,color:"text-orange-500",bg:"bg-orange-100"},{id:2,name:"Botella Reusable",cost:500,icon:N3,color:"text-blue-500",bg:"bg-blue-100"},{id:3,name:"Hora Servicio Social",cost:100,icon:da,color:"text-purple-500",bg:"bg-purple-100"}],p=g=>{if(t>=g.cost){const y=`CANJE|${e}|${g.cost}|${g.name}|${Date.now()}`;c({...g,qrData:y})}else i({type:"error",message:`Te faltan ${g.cost-t} puntos.`}),setTimeout(()=>i(null),3e3)};return o?E.jsxs("div",{className:"p-4 flex flex-col items-center justify-center space-y-6 h-full min-h-[70vh]",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center",children:"Validacin de Canje"}),E.jsx("p",{className:"text-gray-500 text-center",children:"Muestra este cdigo al registrador para completar tu canje de:"}),E.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200 text-center w-full",children:[E.jsx("p",{className:"font-bold text-orange-800 text-lg",children:o.name}),E.jsxs("p",{className:"text-orange-600 font-bold",children:[o.cost," Puntos"]})]}),E.jsx("div",{className:"p-6 bg-white rounded-2xl shadow-xl border-4 border-orange-500",children:E.jsx(Em,{value:o.qrData,size:220})}),E.jsx("button",{onClick:()=>{c(null),n()},className:"w-full py-4 bg-gray-100 text-gray-600 rounded-xl font-bold border border-gray-200",children:"Cerrar y verificar puntos"}),E.jsx("p",{className:"text-[10px] text-gray-400 text-center uppercase",children:"Los puntos solo se descontarn cuando el cdigo sea escaneado"})]}):E.jsxs("div",{className:"p-4 space-y-4",children:[r&&E.jsx("div",{className:`fixed top-4 left-4 right-4 p-4 rounded-xl shadow-2xl z-50 text-white font-bold text-center animate-bounce-in ${r.type==="success"?"bg-green-500":"bg-red-500"}`,children:r.message}),E.jsxs("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-indigo-100/50 border border-indigo-50 border-l-8 border-l-green-500 mb-8 animate-fade-in",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tighter",children:"Premios"}),E.jsxs("div",{className:"bg-green-600 text-white px-4 py-2 rounded-2xl text-sm font-black shadow-lg shadow-green-100",children:[t," ",E.jsx("span",{className:"text-[10px] opacity-80 ml-1 italic",children:"PTS"})]})]}),E.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Intercambia tu esfuerzo ecolgico"})]}),E.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.map(g=>E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:`${g.bg} p-3 rounded-full ${g.color}`,children:E.jsx(g.icon,{size:24})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-gray-800",children:g.name}),E.jsx("p",{className:"text-xs text-gray-500",children:"Stock disponible"})]})]}),E.jsxs("button",{onClick:()=>p(g),disabled:t<g.cost,className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${t>=g.cost?"bg-primary text-white hover:bg-primary-dark shadow-md active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[g.cost," pts"]})]},g.id))}),E.jsxs("div",{className:"mt-8 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[E.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Cmo funciona?"}),E.jsx("p",{className:"text-xs text-blue-600",children:"Al presionar el premio, se generar un cdigo QR. Debers mostrarlo en la cafetera. Ellos lo escanearn y en ese momento se descontarn tus puntos automticamente."})]})]})}function Ck(){const{userId:t,fullName:e,email:n}=Pa(),[r,i]=se.useState(""),[o,c]=se.useState(""),[f,p]=se.useState([]),[g,y]=se.useState(null),[w,v]=se.useState(null),[b,S]=se.useState(!1),[j,V]=se.useState(!1),[P,L]=se.useState("bottles"),[M,H]=se.useState(!1),[J,q]=se.useState(!1),[k,A]=se.useState(!1),[I,F]=se.useState(!1),[z,O]=se.useState(!1),[R,$]=se.useState(!1);se.useEffect(()=>{(async()=>{const he=ei(kn(Je,"profiles"),Ri("role","==","student"),tg(20));let ue=(await Ts(he)).docs.map(ce=>({id:ce.id,...ce.data()}));r.length>0&&(ue=ue.filter(ce=>{var me,Me;return((me=ce.full_name)==null?void 0:me.toLowerCase().includes(r.toLowerCase()))||((Me=ce.matricula)==null?void 0:Me.toLowerCase().includes(r.toLowerCase()))})),p(ue)})()},[r]),se.useEffect(()=>()=>{j&&X()},[j]);const Y=async(fe="bottles")=>{var he;L(fe),H(!1);try{if((await Jn.checkPermissions()).camera!=="granted"&&(await Jn.requestPermissions()).camera!=="granted"){alert("Se requiere permiso de cmara para escanear.");return}await Jn.removeAllListeners(),document.body.classList.add("barcode-scanner-active"),V(!0);let ue=!1;await Jn.addListener("barcodeScanned",async ce=>{var Me;if(ue)return;ue=!0;const me=((Me=ce.barcode)==null?void 0:Me.displayValue)||"";if(fe==="bottles"){const Oe=me.trim();let ze=null;try{const et=await Ru(Bn(Je,"profiles",Oe));if(et.exists())ze={id:et.id,...et.data()};else{const tt=ei(kn(Je,"profiles"),Ri("matricula","==",Oe.toUpperCase())),Tt=await Ts(tt);if(!Tt.empty){const qe=Tt.docs[0];ze={id:qe.id,...qe.data()}}}}catch(et){console.error("Error buscando alumno:",et)}ze?(y(ze),i(ze.full_name),await X()):(await X(),v({type:"error",text:"Alumno no encontrado (QR/Cdigo invlido)."}),setTimeout(()=>v(null),4e3))}else if(fe==="canje")if(me.startsWith("CANJE|")){const Oe=me.split("|");await ee(Oe[1],parseInt(Oe[2]),Oe[3]),await X()}else await X(),v({type:"error",text:"Error: Este no es un cdigo de canje vlido."}),setTimeout(()=>v(null),4e3);ue=!1}),await Jn.startScan({formats:[kt.QrCode,kt.Code128,kt.Code39,kt.Code93,kt.Codabar,kt.Ean13,kt.Ean8,kt.Itf,kt.UpcA,kt.UpcE,kt.Pdf417,kt.Aztec,kt.DataMatrix],lensFacing:"back",enableTorchToggle:!0,enableZoom:!1,enableVibration:!0})}catch(Ee){if(console.error("Error al iniciar scanner:",Ee),(he=Ee.message)!=null&&he.includes("already started"))try{await Jn.stopScan(),await Y(fe)}catch(ue){console.error("Error al reiniciar scanner:",ue),$(!0),re(fe)}else $(!0),re(fe)}},X=async()=>{try{document.body.classList.remove("barcode-scanner-active"),V(!1),H(!1),F(!1);try{await Jn.stopScan()}catch(fe){console.warn("Scanner ya estaba detenido:",fe.message)}try{await Jn.removeAllListeners()}catch(fe){console.warn("Error removiendo listeners:",fe.message)}}catch(fe){console.error("Error general al detener scanner:",fe)}},G=async()=>{try{const fe=!I;await Jn.setTorchEnabled({enabled:fe}),F(fe)}catch(fe){console.error("Error linterna:",fe)}},re=(fe="bottles")=>{L(fe),V(!0),H(!1);const he=document.createElement("div");he.id="html5-scanner",he.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: white;
        `,document.body.appendChild(he);const Ee=new pk("html5-scanner",{fps:10,qrbox:{width:250,height:250},supportedScanTypes:[0,1]},!1);Ee.render(async ue=>{try{const ce=ue.trim().replace(/[\n\r\t]/g,"");if(fe==="bottles"){let me=null;const Me=await Ru(Bn(Je,"profiles",ce));if(Me.exists())me={id:Me.id,...Me.data()};else{const Oe=ei(kn(Je,"profiles"),Ri("matricula","==",ce.toUpperCase()),tg(1)),ze=await Ts(Oe);ze.empty||(me={id:ze.docs[0].id,...ze.docs[0].data()})}me?(y(me),i(me.full_name)):(v({type:"error",text:"Alumno no encontrado."}),setTimeout(()=>v(null),4e3))}else if(fe==="canje"&&ce.startsWith("CANJE|")){const me=ce.split("|");await ee(me[1],parseInt(me[2]),me[3])}Ee.clear(),document.body.removeChild(he),V(!1),$(!1)}catch(ce){console.error("Error procesando scan:",ce),v({type:"error",text:"Error procesando cdigo"})}},ue=>{console.warn("Scanner error:",ue)})},ee=async(fe,he,Ee)=>{if(b||k){console.log("Canje ignorado: ya procesando");return}S(!0),A(!0),console.log("Iniciando procesamiento de canje...");try{const ue=Bn(Je,"profiles",fe),ce=kn(Je,"transactions");await Cy(Je,async me=>{const Me=await me.get(ue);if(!Me.exists())throw new Error("Alumno no existe");if((Me.data().points||0)<he)throw new Error("Error: El alumno ya no tiene puntos suficientes.");me.update(ue,{points:$s(-he)});const ze=Bn(ce);me.set(ze,{student_id:fe,student_name:Me.data().full_name,student_email:Me.data().email,student_matricula:Me.data().matricula,performer_id:t,performer_name:e||n||"Registrador",performer_email:n,points:-he,type:"canje",description:`Canje Validado: ${Ee}`,timestamp:fo()});const et=Bn(Je,"global_stats","totals");me.set(et,{total_points:$s(-he),last_update:fo()},{merge:!0})}),console.log("Canje procesado exitosamente"),v({type:"success",text:`Canje VALIDADO! -${he} pts por ${Ee}`})}catch(ue){console.error("Error en processRedemption:",ue),alert("Error al procesar canje: "+ue.message)}finally{S(!1),A(!1),setTimeout(()=>v(null),5e3)}},ie=async()=>{if(!(J||k||b)){if(!g||!o||o<=0){alert("Selecciona un alumno y una cantidad vlida.");return}q(!0),S(!0),A(!0);try{const fe=Math.floor(parseFloat(o)*10),he=Bn(Je,"profiles",g.id),Ee=kn(Je,"transactions");await Cy(Je,async ue=>{var Oe;if(!(await ue.get(he)).exists())throw new Error("Alumno no existe");ue.update(he,{points:$s(fe),total_bottles:$s(parseFloat(o)),lifetime_points:$s(fe)});const me=Bn(Ee);ue.set(me,{student_id:g.id,student_name:g.full_name,student_email:g.email,student_matricula:g.matricula,performer_id:(Oe=Ki.currentUser)==null?void 0:Oe.uid,performer_name:e||n||"Registrador",performer_email:n,points:fe,bottles:parseFloat(o),type:"registro",timestamp:fo()});const Me=Bn(Je,"global_stats","totals");ue.set(Me,{total_points:$s(fe),total_bottles:$s(parseFloat(o)),total_kg:$s(parseFloat(o)*.05),last_update:fo()},{merge:!0})}),v({type:"success",text:`xito! +${fe} pts a ${g.full_name}`}),c(""),i(""),y(null)}catch(fe){console.error("Error en handleRegister:",fe),v({type:"error",text:`Error de Registro (${fe.code||"CODE_UNKNOWN"}): ${fe.message}`})}finally{S(!1),A(!1),q(!1),setTimeout(()=>v(null),3e3)}}};return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:`p-4 h-full flex flex-col space-y-6 overflow-y-auto ${j?"opacity-0 pointer-events-none":"opacity-100"}`,children:[E.jsx("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100 border-l-8 border-l-indigo-600 mb-6 animate-fade-in",children:E.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[E.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-2xl text-white shadow-lg shadow-indigo-100",children:E.jsx(y0,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tighter leading-none",children:"Escner"}),E.jsx("p",{className:"text-[10px] text-indigo-500 font-black uppercase tracking-[0.2em] mt-1",children:"Bio-Registro"})]})]})}),w&&E.jsx("div",{className:`p-4 rounded-xl text-sm font-bold text-center animate-bounce-in shadow-sm ${w.type==="success"?"bg-green-100 text-green-600 border border-green-200":"bg-red-100 text-red-600 border border-red-200"}`,children:w.text}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("button",{onClick:()=>Y("bottles"),disabled:k,className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-3xl shadow-lg flex flex-col items-center justify-center gap-3 text-white transition-all active:scale-95 hover:shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[E.jsx("div",{className:"bg-white/20 p-3 rounded-2xl",children:E.jsx(y0,{size:32})}),E.jsx("span",{className:"font-bold text-sm",children:"Asignar Puntos"})]}),E.jsxs("button",{onClick:()=>Y("canje"),disabled:k,className:"bg-gradient-to-br from-orange-500 to-red-600 p-6 rounded-3xl shadow-lg flex flex-col items-center justify-center gap-3 text-white transition-all active:scale-95 hover:shadow-orange-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[E.jsx("div",{className:"bg-white/20 p-3 rounded-2xl",children:E.jsx(Kl,{size:32})}),E.jsx("span",{className:"font-bold text-sm",children:"Validar Canje"})]})]}),E.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 space-y-4",children:[E.jsxs("h3",{className:"font-bold text-gray-700 flex items-center gap-2",children:[E.jsx(Is,{size:18,className:"text-indigo-500"}),g?"Seleccionado Manualmente":"Registro Manual"]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",placeholder:"Buscar por nombre o matrcula...",value:r,onChange:fe=>{i(fe.target.value),g&&y(null)},className:"w-full p-4 border-2 border-gray-50 rounded-2xl bg-gray-50 focus:ring-2 focus:ring-indigo-500 outline-none transition-all"}),f.length>0&&!g&&E.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border rounded-2xl mt-2 shadow-2xl z-50 max-h-60 overflow-y-auto border-gray-100",children:f.map(fe=>E.jsxs("button",{onClick:()=>{y(fe),i(fe.full_name),p([])},className:"w-full p-4 text-left hover:bg-indigo-50 border-b last:border-0 border-gray-50 transition-colors",children:[E.jsx("p",{className:"font-bold text-sm text-gray-800",children:fe.full_name}),E.jsx("p",{className:"text-xs text-gray-500",children:fe.matricula})]},fe.id))})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:"Botellas a Sumar"}),E.jsx("div",{className:"flex items-center gap-4",children:E.jsx("input",{type:"number",placeholder:"0",value:o,onChange:fe=>c(fe.target.value),className:"flex-1 p-5 border-2 border-indigo-50 rounded-2xl bg-gray-50 focus:ring-2 focus:ring-indigo-500 outline-none text-2xl font-bold text-center text-indigo-600 shadow-inner"})}),E.jsxs("p",{className:"text-center font-bold text-indigo-500 text-xs mt-2",children:["+ ",o?o*10:0," PUNTOS TOTALES"]})]}),E.jsx("button",{onClick:ie,disabled:b||!g,className:`w-full py-5 rounded-2xl font-bold transition-all shadow-lg active:scale-95 ${g?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-100":"bg-gray-100 text-gray-400 cursor-not-allowed shadow-none"}`,children:b?"Procesando...":"Confirmar Registro"})]})]}),j&&E.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center pointer-events-auto bg-black/40",children:[E.jsxs("div",{className:"w-[85vw] h-56 border-2 border-white/40 rounded-3xl flex items-center justify-center relative shadow-[0_0_0_100vmax_rgba(0,0,0,0.85)]",children:[E.jsx("div",{className:"absolute inset-0 border-4 border-indigo-500/40 rounded-3xl animate-pulse"}),E.jsx("div",{className:"absolute left-4 right-4 h-0.5 bg-red-500 shadow-[0_0_20px_rgba(239,68,68,1)] animate-scan-line"}),E.jsxs("div",{className:"absolute -top-24 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-2xl px-6 py-4 rounded-3xl border border-white/20 shadow-2xl min-w-[300px] text-center",children:[E.jsx("p",{className:"text-white text-xs font-black uppercase tracking-widest leading-none mb-1",children:P==="canje"?"Escanear QR de Canje":"Modo: Credencial / Matrcula"}),E.jsx("p",{className:"text-[10px] text-green-400 font-bold uppercase tracking-widest",children:"El cdigo debe cruzar la lnea roja"})]}),E.jsx("div",{className:"absolute -top-1 -left-1 w-10 h-10 border-t-4 border-l-4 border-indigo-400 rounded-tl-2xl"}),E.jsx("div",{className:"absolute -top-1 -right-1 w-10 h-10 border-t-4 border-r-4 border-indigo-400 rounded-tr-2xl"}),E.jsx("div",{className:"absolute -bottom-1 -left-1 w-10 h-10 border-b-4 border-l-4 border-indigo-400 rounded-bl-2xl"}),E.jsx("div",{className:"absolute -bottom-1 -right-1 w-10 h-10 border-b-4 border-r-4 border-indigo-400 rounded-br-2xl"})]}),E.jsxs("div",{className:"mt-12 flex flex-col items-center gap-6",children:[z&&E.jsxs("button",{onClick:G,className:`p-5 rounded-full backdrop-blur-xl border border-white/20 shadow-2xl transition-all active:scale-95 ${I?"bg-yellow-400 text-black border-yellow-500":"bg-white/10 text-white"}`,children:[E.jsx(y0,{size:28,className:I?"animate-pulse":""}),E.jsx("span",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 text-[10px] font-black uppercase tracking-widest text-white whitespace-nowrap",children:I?"Flash Encendido":"Activar Flash"})]}),E.jsxs("button",{onClick:X,className:"bg-white text-gray-900 px-12 py-5 rounded-full font-black text-xs uppercase tracking-[0.2em] shadow-[0_20px_50px_rgba(255,255,255,0.2)] active:scale-90 transition-all flex items-center gap-3",children:[E.jsx(cp,{size:20})," Salir del Escner"]})]}),E.jsx("div",{className:"mt-8 text-white/40 font-black text-[8px] uppercase tracking-[0.4em] animate-fade-in",children:"SOPORTE AVANZADO SEP  QR  BARCODE"})]})]})}function Ak(){const[t,e]=se.useState([]),[n,r]=se.useState(""),[i,o]=se.useState(!0);se.useEffect(()=>{o(!0);const f=ei(kn(Je,"profiles"),Ri("role","==","student")),p=mi(f,g=>{const y=g.docs.map(w=>({id:w.id,...w.data()}));e(y),o(!1)},g=>{console.error("Error fetching students:",g),o(!1)});return()=>p()},[]);const c=t.filter(f=>{var p,g;return((p=f.full_name)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))||((g=f.matricula)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))});return E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[E.jsx("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100 border-l-8 border-l-green-600 mb-6 animate-fade-in",children:E.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[E.jsx("div",{className:"bg-green-600 p-2.5 rounded-2xl text-white shadow-lg shadow-green-100",children:E.jsx(Ll,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tighter leading-none",children:"Alumnado"}),E.jsx("p",{className:"text-[10px] text-green-600 font-black uppercase tracking-[0.2em] mt-1",children:"Comunidad R3PET"})]})]})}),E.jsxs("div",{className:"bg-white p-2 rounded-2xl shadow-sm border border-gray-100 mb-6 flex items-center gap-2 group focus-within:border-green-300 transition-all",children:[E.jsx("div",{className:"pl-3 text-gray-400 group-focus-within:text-green-500 transition-colors",children:E.jsx(ap,{size:20})}),E.jsx("input",{type:"text",placeholder:"Buscar por nombre o matrcula...",className:"w-full p-3 bg-transparent border-none focus:ring-0 text-sm font-medium",value:n,onChange:f=>r(f.target.value)})]}),E.jsx("div",{className:"space-y-3",children:i?E.jsx("div",{className:"text-center py-10 text-gray-400",children:"Cargando alumnos..."}):c.length===0?E.jsx("div",{className:"bg-white p-8 rounded-2xl border border-dashed text-center text-gray-400",children:"No se encontraron alumnos."}):c.map(f=>E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4 relative overflow-hidden",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex-shrink-0 flex items-center justify-center text-gray-400 overflow-hidden",children:f.avatar_url?E.jsx("img",{src:f.avatar_url,alt:f.full_name,className:"w-full h-full object-cover"}):E.jsx(Is,{size:24})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-bold text-gray-800",children:f.full_name}),E.jsx("p",{className:"text-sm text-gray-500",children:f.matricula}),E.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[E.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold",children:[f.points||0," pts"]}),E.jsxs("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-bold",children:["Histrico: ",f.lifetime_points||0]})]})]})]},f.id))})]})}function O0(){const{userId:t,onLogout:e}=Pa();xi();const[n,r]=se.useState(null),[i,o]=se.useState(!1),[c,f]=se.useState(!1);se.useEffect(()=>{t&&p()},[t]);const p=async()=>{const y=await Ru(Bn(Je,"profiles",t));y.exists()&&r({id:y.id,...y.data()})},g=async y=>{var v;const w=(v=y.target.files)==null?void 0:v[0];if(w){if(w.size>3*1024*1024){alert("La imagen debe pesar menos de 3MB");return}if(!w.type.startsWith("image/")){alert("Solo se permiten imgenes");return}o(!0);try{const b=w.name.split(".").pop(),S=`avatars/${t}-${Date.now()}.${b}`,j=iP(uP,S);await nP(j,w);const V=await rP(j);await $C(Bn(Je,"profiles",t),{avatar_url:V})}catch(b){console.error("Error al subir imagen:",b),alert("Error al subir imagen: "+b.message)}finally{o(!1)}}};return E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsxs("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100 border-l-8 border-l-green-600 mb-6 flex items-center gap-6 animate-fade-in relative overflow-hidden",children:[E.jsx("div",{className:"relative flex-shrink-0",children:(n==null?void 0:n.role)==="admin"?E.jsx(E.Fragment,{children:E.jsx(mk,{user:n,size:"xl",showEditButton:!0,onEditClick:()=>f(!0),className:"w-20 h-20"})}):E.jsxs(E.Fragment,{children:[n!=null&&n.avatar_url?E.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden border-2 border-white shadow-md",children:E.jsx("img",{src:n.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"})}):E.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-2xl flex items-center justify-center text-green-600 border-2 border-green-100 shadow-inner",children:E.jsx(Is,{size:32})}),E.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-green-600 text-white p-2 rounded-xl cursor-pointer hover:bg-green-700 shadow-lg border-2 border-white active:scale-95 transition-all",title:"Cambiar foto",children:[E.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:i}),i?E.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):""]})]})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tighter leading-none mb-1",children:(n==null?void 0:n.full_name)||"Cargando..."}),E.jsx("p",{className:"text-xs font-bold text-gray-400 lowercase truncate max-w-[180px]",children:n==null?void 0:n.email}),E.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[E.jsx("span",{className:"text-[10px] font-black bg-green-600 text-white px-2 py-0.5 rounded-md uppercase tracking-widest",children:"Mi Perfil"}),E.jsx("span",{className:"text-[10px] font-black bg-gray-100 text-gray-400 px-2 py-0.5 rounded-md uppercase tracking-widest",children:"v1.2.0"})]})]})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border divide-y",children:[E.jsxs("div",{className:"p-4 flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 font-medium",children:"Matrcula"}),E.jsx("span",{className:"text-gray-900 font-bold",children:(n==null?void 0:n.matricula)||"---"})]}),E.jsxs("div",{className:"p-4 flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 font-medium",children:"Rol"}),E.jsx("span",{className:"text-gray-900 font-bold capitalize",children:n==null?void 0:n.role})]}),(n==null?void 0:n.role)==="student"&&E.jsxs("div",{className:"p-4 flex justify-between items-center",children:[E.jsx("span",{className:"text-gray-600 font-medium",children:"Puntos Actuales"}),E.jsx("span",{className:"text-green-600 font-bold",children:n==null?void 0:n.points})]})]}),(n==null?void 0:n.role)==="student"&&E.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center gap-4",children:[E.jsx("h3",{className:"font-bold text-gray-800",children:"Mi Pase de Reciclaje"}),E.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border-4 border-primary shadow-inner",children:E.jsx(Em,{value:t||"",size:180})}),E.jsx("p",{className:"text-[10px] text-gray-400 text-center uppercase tracking-widest font-bold",children:"Escanea para entregar botellas"})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsx("h3",{className:"font-bold text-gray-700",children:"Historial"}),(n==null?void 0:n.role)==="student"?E.jsxs(E.Fragment,{children:[E.jsxs($i,{to:"/app/profile/points-history",className:"w-full bg-white border p-4 rounded-lg flex items-center justify-between hover:bg-gray-50 transition",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:E.jsx(Do,{size:20})}),E.jsx("span",{className:"font-medium text-gray-800",children:"Historial de Puntos"})]}),E.jsx("span",{className:"text-gray-400",children:""})]}),E.jsxs($i,{to:"/app/profile/redemptions-history",className:"w-full bg-white border p-4 rounded-lg flex items-center justify-between hover:bg-gray-50 transition",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-orange-600",children:E.jsx(Kl,{size:20})}),E.jsx("span",{className:"font-medium text-gray-800",children:"Historial de Canjes"})]}),E.jsx("span",{className:"text-gray-400",children:""})]})]}):(n==null?void 0:n.role)==="registrar"?E.jsxs($i,{to:"/app/profile/work-history",className:"w-full bg-white border p-4 rounded-lg flex items-center justify-between hover:bg-gray-50 transition",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:E.jsx(op,{size:20})}),E.jsx("span",{className:"font-medium text-gray-800",children:"Historial de Registros"})]}),E.jsx("span",{className:"text-gray-400",children:""})]}):null,(n==null?void 0:n.role)==="admin"&&E.jsxs(E.Fragment,{children:[E.jsxs($i,{to:"/app/admin/statistics",className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-100 rounded-xl hover:bg-purple-50 hover:border-purple-200 transition-all group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-purple-100 p-2 rounded-lg text-purple-600 group-hover:scale-110 transition-transform",children:E.jsx(xf,{size:20})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-bold text-gray-800",children:"Eco-Analytics Global"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:"Estadsticas y Rendimiento"})]})]}),E.jsx("span",{className:"text-purple-400 group-hover:translate-x-1 transition-transform",children:""})]}),E.jsxs($i,{to:"/app/admin/history",className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-100 rounded-xl hover:bg-amber-50 hover:border-amber-200 transition-all group",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600 group-hover:scale-110 transition-transform",children:E.jsx(da,{size:20})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-bold text-gray-800",children:"Historial Global"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:"Todas las Transacciones"})]})]}),E.jsx("span",{className:"text-amber-400 group-hover:translate-x-1 transition-transform",children:""})]})]})]}),E.jsxs("button",{onClick:e,className:"w-full bg-red-50 text-red-600 py-3 rounded-lg font-bold border border-red-100 flex items-center justify-center gap-2 hover:bg-red-100 transition",children:[E.jsx(S3,{size:18}),"Cerrar Sesin"]}),E.jsxs("div",{className:"text-center text-xs text-gray-300 mt-8",children:["ID: ",t]})]})}function Ik(){const{userId:t}=Pa(),[e,n]=se.useState([]),[r,i]=se.useState(!1);return se.useEffect(()=>{const o=()=>{i(window.scrollY>300)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),se.useEffect(()=>{if(t){const o=ei(kn(Je,"transactions"),Ri("student_id","==",t),Zu("timestamp","desc")),c=mi(o,f=>{const p=f.docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.points>0);n(p)});return()=>c()}},[t]),E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 relative",children:[E.jsx(Am,{title:"Historial de Puntos",to:"/app/profile"}),E.jsx("div",{className:"p-4 space-y-4",children:E.jsx("div",{className:"space-y-3",children:e.length===0?E.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"No has ganado puntos an."}):e.map(o=>{let c=o.description||"Puntos ganados";o.type==="registro"&&!o.description&&(c=`Registro de ${o.bottles||0} botellas`);let f="Fecha no disponible";if(o.timestamp)try{f=(o.timestamp.toDate?o.timestamp.toDate():new Date(o.timestamp)).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{f="Fecha invlida"}return E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:E.jsx(Do,{size:18})}),E.jsxs("div",{className:"space-y-0.5",children:[E.jsx("p",{className:"font-bold text-gray-800 text-sm",children:c}),E.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:["Registrado por: ",E.jsx("span",{className:"font-bold text-gray-700",children:o.performer_name||o.performer_email||"Sistema"})," ",f]})]})]}),E.jsxs("span",{className:"text-green-600 font-black text-lg",children:["+",o.points||0]})]},o.id)})})}),E.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed bottom-24 right-6 p-4 bg-white text-green-600 rounded-full shadow-2xl border border-green-50 z-40 transition-all duration-300 active:scale-90 flex items-center justify-center ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,children:E.jsx(mf,{size:24})})]})}function bk(){const{userId:t}=Pa(),[e,n]=se.useState([]),[r,i]=se.useState(!1);return se.useEffect(()=>{const o=()=>{i(window.scrollY>300)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),se.useEffect(()=>{if(t){const o=ei(kn(Je,"transactions"),Ri("student_id","==",t),Zu("timestamp","desc")),c=mi(o,f=>{const p=f.docs.map(g=>({id:g.id,...g.data()})).filter(g=>g.points<0);n(p)});return()=>c()}},[t]),E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 relative",children:[E.jsx(Am,{title:"Historial de Canjes",to:"/app/profile"}),E.jsx("div",{className:"p-4 space-y-4",children:E.jsx("div",{className:"space-y-3",children:e.length===0?E.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"No has canjeado premios an."}):e.map(o=>{let c="Fecha no disponible";if(o.timestamp)try{c=(o.timestamp.toDate?o.timestamp.toDate():new Date(o.timestamp)).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{c="Fecha invlida"}return E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-orange-600",children:E.jsx(Kl,{size:18})}),E.jsxs("div",{className:"space-y-0.5",children:[E.jsx("p",{className:"font-bold text-gray-800 text-sm",children:o.description||"Premio canjeado"}),E.jsxs("p",{className:"text-[10px] text-gray-500",children:["Validado por: ",E.jsx("span",{className:"font-bold text-gray-700",children:o.performer_name||o.performer_email||"Personal Autorizado"}),E.jsx("span",{className:"mx-1",children:""}),c]})]})]}),E.jsx("span",{className:"text-orange-600 font-black text-lg",children:o.points||0})]},o.id)})})}),E.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed bottom-24 right-6 p-4 bg-white text-orange-600 rounded-full shadow-2xl border border-orange-50 z-40 transition-all duration-300 active:scale-90 flex items-center justify-center ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,children:E.jsx(mf,{size:24})})]})}function Tk(){const{userId:t}=Pa(),[e,n]=se.useState([]),[r,i]=se.useState(!0),[o,c]=se.useState(""),[f,p]=se.useState({start:"",end:""}),[g,y]=se.useState("all"),[w,v]=se.useState(!1);se.useEffect(()=>{const S=()=>{v(window.scrollY>300)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]),se.useEffect(()=>{let S=()=>{};return(async()=>{i(!0);try{const V=ei(kn(Je,"transactions"),Ri("performer_id","==",t));S=mi(V,P=>{const L=P.docs.map(M=>{var H;return{id:M.id,...M.data(),created_at:((H=M.data().timestamp)==null?void 0:H.toDate())||new Date}}).sort((M,H)=>H.created_at-M.created_at);n(L),i(!1)},P=>{console.error("Error en onSnapshot:",P),i(!1)})}catch(V){console.error("Error fetching work history:",V),i(!1)}})(),()=>S()},[t]);const b=e.filter(S=>{var L,M;const j=!o||((L=S.student_name)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))||((M=S.student_id)==null?void 0:M.toLowerCase().includes(o.toLowerCase())),V=(!f.start||new Date(S.created_at)>=new Date(f.start))&&(!f.end||new Date(S.created_at)<=new Date(f.end)),P=g==="all"||g==="points"&&S.points>0||g==="redemptions"&&S.points<0;return j&&V&&P});return E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 relative",children:[E.jsx(Am,{title:"Mis Registros",to:"/app/profile"}),E.jsxs("div",{className:"p-4 space-y-4",children:[!r&&b.length>0&&E.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-4 rounded-xl text-white shadow-lg",children:[E.jsx("h3",{className:"font-bold mb-3 text-center",children:"Resumen de Actividad"}),E.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-2xl font-bold",children:b.length}),E.jsx("p",{className:"text-xs opacity-80",children:"Registros"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xl font-bold",children:b.reduce((S,j)=>j.points>0?S+j.points:S,0)}),E.jsx("p",{className:"text-xs opacity-80",children:"Pts Asignados"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xl font-bold",children:Math.abs(b.reduce((S,j)=>j.points<0?S+j.points:S,0))}),E.jsx("p",{className:"text-xs opacity-80",children:"Pts Canjeados"})]})]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[E.jsx("h3",{className:"font-bold text-gray-700 mb-3 text-sm",children:"Filtrar por tipo"}),E.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[E.jsx("button",{onClick:()=>y("all"),className:`py-2 px-3 rounded-lg font-medium text-xs transition-all ${g==="all"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Todos"}),E.jsx("button",{onClick:()=>y("points"),className:`py-2 px-3 rounded-lg font-medium text-xs transition-all ${g==="points"?"bg-green-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Puntos"}),E.jsx("button",{onClick:()=>y("redemptions"),className:`py-2 px-3 rounded-lg font-medium text-xs transition-all ${g==="redemptions"?"bg-orange-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Canjes"})]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 space-y-3",children:[E.jsxs("div",{className:"relative",children:[E.jsx(ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),E.jsx("input",{type:"text",placeholder:"Buscar alumno o matrcula...",value:o,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("input",{type:"date",value:f.start,onChange:S=>p(j=>({...j,start:S.target.value})),className:"px-2 py-2 border rounded-lg bg-gray-50 text-xs focus:ring-2 focus:ring-blue-500 outline-none"}),E.jsx("input",{type:"date",value:f.end,onChange:S=>p(j=>({...j,end:S.target.value})),className:"px-2 py-2 border rounded-lg bg-gray-50 text-xs focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),E.jsx("div",{className:"space-y-3",children:r?E.jsx("div",{className:"text-center py-10 text-gray-400",children:"Cargando historial..."}):b.length===0?E.jsx("div",{className:"bg-white p-8 rounded-2xl border border-dashed text-center text-gray-400",children:"No hay registros con los filtros aplicados."}):b.map(S=>{var j;return E.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 animate-fade-in",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:`p-2 rounded-lg ${S.amount>0?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,children:S.amount>0?E.jsx(Do,{size:18}):E.jsx(Kl,{size:18})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-bold text-gray-800 text-sm",children:S.student_name||"Alumno"}),E.jsx("p",{className:"text-[10px] text-gray-500",children:((j=S.student_id)==null?void 0:j.substring(0,8))||"N/A"})]})]}),E.jsxs("span",{className:`font-black text-sm ${S.points>0?"text-green-600":"text-orange-600"}`,children:[S.points>0?"+":"",S.points]})]}),E.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-gray-50",children:[E.jsx("p",{className:"text-[10px] text-gray-500 italic",children:S.description||(S.points>0?"Botellas entregadas":"Canje realizado")}),E.jsxs("p",{className:"text-[10px] text-gray-400",children:[new Date(S.created_at).toLocaleDateString("es-MX"),"  ",new Date(S.created_at).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"})]})]})]},S.id)})})]}),E.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed bottom-24 right-6 p-4 bg-white text-blue-600 rounded-full shadow-2xl border border-blue-50 z-40 transition-all duration-300 active:scale-90 flex items-center justify-center ${w?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,children:E.jsx(mf,{size:24})})]})}function Sk(){const[t,e]=se.useState([]),[n,r]=se.useState(!0),[i,o]=se.useState(!1),c=xi();if(se.useEffect(()=>{const g=()=>{o(window.scrollY>300)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]),se.useEffect(()=>{console.log("RankingScreen: Iniciando carga de datos Firestore...");const g=ei(kn(Je,"profiles"),Ri("role","==","student"),Zu("total_bottles","desc")),y=mi(g,w=>{const v=w.docs.map(b=>({id:b.id,...b.data(),lifetime_points:(b.data().total_bottles||0)*10}));e(v),r(!1)});return()=>y()},[]),n)return E.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-10 text-center",children:[E.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-4"}),E.jsx("p",{className:"text-gray-400 font-medium italic",children:"Cargando clasificacin ambiental..."})]});const f=t.slice(0,3),p=t.slice(3);return E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 relative",children:[E.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 pt-12 pb-20 px-4 rounded-b-[40px] shadow-lg relative overflow-hidden",children:[E.jsx("button",{onClick:()=>c(-1),className:"absolute top-8 left-4 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition-all z-30 active:scale-90",children:E.jsx(Ps,{size:24})}),E.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"}),E.jsxs("div",{className:"relative z-10 text-center space-y-2",children:[E.jsx(Wc,{className:"mx-auto text-yellow-300 drop-shadow-lg",size:48}),E.jsx("h1",{className:"text-2xl font-black text-white",children:"Ranking Escolar"}),E.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Top Alumnos con Impacto Ambiental"})]})]}),E.jsxs("div",{className:"px-4 -mt-12 space-y-6 relative z-20",children:[E.jsxs("div",{className:"flex justify-center items-end gap-2 mb-8 relative z-10",children:[f.length>1&&E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-gray-300 overflow-hidden shadow-lg mb-2 relative bg-gray-200",children:f[1].avatar_url?E.jsx("img",{src:f[1].avatar_url,alt:f[1].full_name,className:"w-full h-full object-cover"}):E.jsx("img",{src:`https://ui-avatars.com/api/?name=${f[1].full_name}&background=random`,alt:f[1].full_name,className:"w-full h-full object-cover"})}),E.jsx("div",{className:"bg-gray-500 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs border-2 border-white shadow-md -mt-4 z-20 mb-1",children:"2"}),E.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-3 rounded-xl text-center shadow-sm w-24",children:[E.jsx("p",{className:"font-bold text-gray-800 text-xs truncate w-full",children:f[1].full_name.split(" ")[0]}),E.jsxs("p",{className:"text-gray-500 text-[10px] font-bold",children:[f[1].lifetime_points," pts"]})]})]}),f.length>0&&E.jsxs("div",{className:"flex flex-col items-center -mb-4 z-20",children:[E.jsxs("div",{className:"relative flex flex-col items-center",children:[E.jsx(b3,{size:32,className:"text-yellow-400 mb-1 animate-bounce-in",style:{animationDelay:"0.2s"}}),E.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-yellow-400 overflow-hidden shadow-xl relative bg-yellow-100",children:f[0].avatar_url?E.jsx("img",{src:f[0].avatar_url,alt:f[0].full_name,className:"w-full h-full object-cover"}):E.jsx("img",{src:`https://ui-avatars.com/api/?name=${f[0].full_name}&background=random`,alt:f[0].full_name,className:"w-full h-full object-cover"})})]}),E.jsx("div",{className:"-mt-4  bg-gradient-to-r from-yellow-400 to-orange-400 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border-2 border-white shadow-lg z-20 mb-2",children:"1"}),E.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-4 pt-4 rounded-2xl text-center shadow-lg w-36 border-2 border-yellow-100 flex flex-col justify-center",children:[E.jsx("p",{className:"font-bold text-gray-800 text-sm truncate w-full mb-1",children:f[0].full_name.split(" ")[0]}),E.jsxs("p",{className:"text-orange-500 font-extrabold text-xs truncate w-full px-1",children:[f[0].lifetime_points," pts"]})]})]}),f.length>2&&E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-orange-300 overflow-hidden shadow-lg mb-2 relative bg-orange-100",children:f[2].avatar_url?E.jsx("img",{src:f[2].avatar_url,alt:f[2].full_name,className:"w-full h-full object-cover"}):E.jsx("img",{src:`https://ui-avatars.com/api/?name=${f[2].full_name}&background=random`,alt:f[2].full_name,className:"w-full h-full object-cover"})}),E.jsx("div",{className:"bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs border-2 border-white shadow-md -mt-4 z-20 mb-1",children:"3"}),E.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-3 rounded-xl text-center shadow-sm w-24",children:[E.jsx("p",{className:"font-bold text-gray-800 text-xs truncate w-full",children:f[2].full_name.split(" ")[0]}),E.jsxs("p",{className:"text-gray-500 text-[10px] font-bold",children:[f[2].lifetime_points," pts"]})]})]})]}),E.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:[E.jsxs("div",{className:"bg-gray-50 px-5 py-3 border-b border-gray-100 flex justify-between items-center",children:[E.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Posicin y Alumno"}),E.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Puntos Totales"})]}),E.jsx("div",{className:"divide-y divide-gray-50",children:p.map((g,y)=>E.jsxs("div",{className:"px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("span",{className:"text-sm font-black text-gray-300 w-6 italic",children:["#",y+4]}),E.jsx("div",{className:"w-10 h-10 rounded-xl overflow-hidden bg-green-50 aspect-square",children:g.avatar_url?E.jsx("img",{src:g.avatar_url,alt:g.full_name,className:"w-full h-full object-cover"}):E.jsx("img",{src:`https://ui-avatars.com/api/?name=${g.full_name}&background=random`,alt:g.full_name,className:"w-full h-full object-cover"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-bold text-gray-800 line-clamp-1 w-40",children:g.full_name}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:g.matricula||"N/A"})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"text-sm font-black text-green-600 underline decoration-green-200 underline-offset-4",children:g.lifetime_points}),E.jsx("p",{className:"text-[9px] text-green-400 font-bold",children:"Puntos PET"})]})]},g.id))})]})]}),E.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`fixed bottom-24 right-6 p-4 bg-white text-green-600 rounded-full shadow-2xl border border-green-50 z-40 transition-all duration-300 active:scale-90 flex items-center justify-center ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"}`,children:E.jsx(mf,{size:24})})]})}function Nk(){const t=xi(),[e,n]=se.useState({totalUsers:0,totalKg:0,totalPoints:0,adminCount:0,studentCount:0,registrarCount:0});return se.useEffect(()=>{const r=mi(Bn(Je,"global_stats","totals"),o=>{if(o.exists()){const c=o.data();n(f=>({...f,totalPoints:c.total_points||0,totalKg:(c.total_kg||0).toFixed(1)}))}}),i=mi(kn(Je,"profiles"),o=>{let c=0,f=0,p=0;o.forEach(g=>{const y=g.data().role;y==="admin"&&c++,y==="student"&&f++,y==="registrar"&&p++}),n(g=>({...g,totalUsers:o.size,adminCount:c,studentCount:f,registrarCount:p}))});return()=>{r(),i()}},[]),E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsxs("header",{className:"bg-white p-6 rounded-3xl shadow-xl shadow-green-100/50 border border-green-50 border-l-8 border-l-green-600 mb-6 animate-fade-in flex items-center gap-4",children:[E.jsx("div",{className:"bg-green-600 p-3 rounded-2xl text-white shadow-lg shadow-green-100",children:E.jsx(lp,{size:28})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tighter leading-none mb-1",children:"Panel de Control"}),E.jsx("p",{className:"text-[10px] text-green-600 font-black uppercase tracking-[0.2em]",children:"Administracin Central"})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[E.jsxs("div",{onDoubleClick:()=>t("/app/admin/statistics"),className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-purple-500 cursor-pointer active:scale-95 transition-all outline-none",title:"Doble clic para ver estadsticas",children:[E.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Total Reciclado"}),E.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[e.totalKg," kg"]})]}),E.jsxs("div",{onDoubleClick:()=>t("/app/admin/statistics"),className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-green-500 cursor-pointer active:scale-95 transition-all outline-none",title:"Doble clic para ver estadsticas",children:[E.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Puntos Generados"}),E.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.totalPoints})]}),E.jsxs("div",{onDoubleClick:()=>t("/app/admin/users"),className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-blue-500 cursor-pointer active:scale-95 transition-all outline-none",title:"Doble clic para gestionar alumnos",children:[E.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Alumnos"}),E.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.studentCount})]}),E.jsxs("div",{onDoubleClick:()=>t("/app/admin/users"),className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-orange-500 cursor-pointer active:scale-95 transition-all outline-none",title:"Doble clic para gestionar registradores",children:[E.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Registradores"}),E.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.registrarCount})]}),E.jsxs("div",{onDoubleClick:()=>t("/app/admin/users"),className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-purple-600 col-span-2 cursor-pointer active:scale-95 transition-all outline-none",title:"Doble clic para gestionar administradores",children:[E.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Administradores"}),E.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.adminCount})]})]}),E.jsx("h3",{className:"font-bold text-gray-700 mb-3 ml-1",children:"Herramientas de Gestin"}),E.jsxs("div",{className:"grid grid-cols-1 gap-3 pb-20",children:[E.jsx($i,{to:"/app/admin/users",className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between hover:bg-gray-50 transition-all active:scale-95",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-blue-100 p-2.5 rounded-xl text-blue-600",children:E.jsx(Ll,{size:20})}),E.jsxs("div",{children:[E.jsx("span",{className:"font-bold text-gray-800 block",children:"Gestin de Usuarios"}),E.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:"Altas, Bajas y Edicin"})]})]})}),E.jsx($i,{to:"/app/admin/statistics",className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between hover:bg-purple-50 hover:border-purple-100 transition-all active:scale-95",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-purple-100 p-2.5 rounded-xl text-purple-600",children:E.jsx(xf,{size:20})}),E.jsxs("div",{children:[E.jsx("span",{className:"font-bold text-gray-800 block text-purple-700",children:"Eco-Analytics Global"}),E.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:"Mtricas e Impacto Detallado"})]})]})}),E.jsx($i,{to:"/app/admin/history",className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between hover:bg-amber-50 hover:border-amber-100 transition-all active:scale-95",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-amber-100 p-2.5 rounded-xl text-amber-600",children:E.jsx(da,{size:20})}),E.jsxs("div",{children:[E.jsx("span",{className:"font-bold text-gray-800 block text-amber-700",children:"Historial Global"}),E.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:"Transacciones y Canjes Detallados"})]})]})})]})]})}function Rk(){const t=xi(),e=(V,P=0)=>{const L=parseFloat(V);return isNaN(L)?"0":L>=1e9?(L/1e9).toFixed(2)+"B":L>=1e6?(L/1e6).toFixed(2)+"M":new Intl.NumberFormat("es-MX",{minimumFractionDigits:P,maximumFractionDigits:P}).format(L)},[n,r]=se.useState({totalUsers:0,studentCount:0,registrarCount:0,adminCount:0,totalPointsCreated:0,totalPointsRedeemed:0,totalKgRecycled:0,totalCo2Saved:0,totalTransactions:0,avgPointsPerStudent:0,weeklyData:[],impactDistribution:[]}),[i,o]=se.useState(!0),[c,f]=se.useState("metrics"),[p,g]=se.useState(!1);se.useEffect(()=>{const V=mi(kn(Je,"profiles"),L=>{let M=0,H=0,J=0;L.forEach(q=>{const k=q.data().role;k==="student"&&M++,k==="registrar"&&H++,k==="admin"&&J++}),r(q=>({...q,totalUsers:L.size,studentCount:M,registrarCount:H,adminCount:J,avgPointsPerStudent:M>0?(q.totalPointsCreated/M).toFixed(0):0}))}),P=mi(kn(Je,"transactions"),L=>{let M=0,H=0,J=0;const q={};for(let A=6;A>=0;A--){const I=new Date;I.setDate(I.getDate()-A);const F=I.toISOString().split("T")[0];q[F]={date:F,earned:0,redeemed:0}}L.forEach(A=>{var z;const I=A.data(),F=I.points||0;F>0&&(M+=F),F<0&&(H+=Math.abs(F)),I.bottles&&(J+=I.bottles*.05);try{const R=((z=I.timestamp)!=null&&z.toDate?I.timestamp.toDate():new Date(I.timestamp)).toISOString().split("T")[0];q[R]&&(F>0&&(q[R].earned+=F),F<0&&(q[R].redeemed+=Math.abs(F)))}catch{console.error("Error parsing date for tx:",I.id)}});const k=[{label:"Puntos Activos",value:Math.max(0,M-H),color:"#10b981"},{label:"Puntos Canjeados",value:H,color:"#f97316"},{label:"Impacto Global",value:Math.floor(J*10),color:"#8b5cf6"}];r(A=>({...A,totalPointsCreated:M,totalPointsRedeemed:H,totalKgRecycled:J,totalCo2Saved:J*1.5,totalTransactions:L.size,weeklyData:Object.values(q),impactDistribution:k}))});return o(!1),()=>{V(),P()}},[]);const y=async()=>{if(window.confirm("Ests SEGURO de resetear los contadores globales a cero? Esta accin no se puede deshacer.")){g(!0);try{const V=Bn(Je,"global_stats","totals");await dm(V,{total_points:0,total_bottles:0,total_kg:0,last_update:fo(),reset_date:fo()}),alert("Contadores globales reseteados correctamente.")}catch(V){console.error("Error resetting stats:",V),alert("Error al resetear contadores: "+V.message)}finally{g(!1)}}},w=async()=>{if(window.confirm("Ests SEGURO de eliminar TODAS las transacciones del historial? Esta accin es irreversible.")){g(!0);try{const V=await Ts(kn(Je,"transactions")),P=20;let L=0;for(let M=0;M<V.docs.length;M+=P){const H=R0(Je),J=V.docs.slice(M,M+P);J.forEach(q=>H.delete(q.ref)),await H.commit(),L+=J.length}alert(`Se han eliminado ${L} transacciones del sistema.`)}catch(V){console.error("Error clearing transactions:",V),alert("Error al limpiar transacciones: "+V.message)}finally{g(!1)}}},v=async()=>{if(window.confirm("Ests SEGURO de poner los puntos de TODOS los alumnos en cero?")){g(!0);try{const V=ei(kn(Je,"profiles"),Ri("role","==","student")),P=await Ts(V),L=20;let M=0;for(let H=0;H<P.docs.length;H+=L){const J=R0(Je),q=P.docs.slice(H,H+L);q.forEach(k=>{J.update(k.ref,{points:0,total_bottles:0,lifetime_points:0})}),await J.commit(),M+=q.length}alert(`Se han reseteado los puntos de ${M} alumnos.`)}catch(V){console.error("Error resetting points:",V),alert("Error al resetear puntos: "+V.message)}finally{g(!1)}}},b=async V=>{const P=V==="student"?"Alumnos":"Registradores";if(window.confirm(`ESTS COMPLETAMENTE SEGURO? Esta accin ELIMINAR permanentemente todos los perfiles de ${P}.`)&&window.confirm(`CONFIRMACIN FINAL: Se borrarn todos los ${P} de Firestore. Esta accin es irreversible. Proceder?`)){g(!0);try{const L=ei(kn(Je,"profiles"),Ri("role","==",V)),M=await Ts(L),H=20;let J=0;for(let q=0;q<M.docs.length;q+=H){const k=R0(Je),A=M.docs.slice(q,q+H);A.forEach(I=>k.delete(I.ref)),await k.commit(),J+=A.length}alert(` Firestore Limpio! Se eliminaron ${J} perfiles de ${P}.

 IMPORTANTE: Los accesos (email/password) siguen existiendo en la pestaa 'Authentication' de Firebase. Debes borrarlos ah manualmente para evitar el error 'email-already-in-use' al registrarse de nuevo.`)}catch(L){console.error(`Error deleting ${V}:`,L),alert(`Error al eliminar ${P}: `+L.message)}finally{g(!1)}}},S=({data:V})=>{const P=Math.max(...V.map(L=>Math.max(L.earned,L.redeemed)),10);return E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"w-full h-48 flex items-end justify-between gap-3 px-2",children:V.map((L,M)=>{const H=L.earned/P*100,J=L.redeemed/P*100;return E.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative h-full justify-end",children:[E.jsxs("div",{className:"absolute -top-12 bg-gray-900/95 backdrop-blur text-white text-[7px] font-bold px-2 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-all z-20 whitespace-nowrap shadow-xl border border-white/10 pointer-events-none",children:[E.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[E.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),E.jsxs("span",{children:["+",L.earned," pts"]})]}),E.jsxs("div",{className:"flex items-center gap-1.5",children:[E.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"}),E.jsxs("span",{children:["-",L.redeemed," pts"]})]})]}),E.jsxs("div",{className:"w-full flex items-end gap-1 h-full max-h-[140px]",children:[E.jsx("div",{className:"flex-1 bg-gradient-to-t from-green-600 to-emerald-400 rounded-t-sm shadow-md transition-all duration-700 hover:brightness-110",style:{height:`${H}%`,minHeight:L.earned>0?"2px":"0"}}),E.jsx("div",{className:"flex-1 bg-gradient-to-t from-orange-600 to-orange-400 rounded-t-sm shadow-md transition-all duration-700 hover:brightness-110",style:{height:`${J}%`,minHeight:L.redeemed>0?"2px":"0"}})]}),E.jsx("span",{className:"text-[8px] font-black text-gray-400 uppercase tracking-tighter mt-1",children:new Date(L.date).toLocaleDateString("es-MX",{weekday:"short"})})]},M)})}),E.jsxs("div",{className:"flex justify-center gap-6 pt-2 border-t border-gray-50",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 shadow-sm"}),E.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest",children:"Generados"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 shadow-sm"}),E.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest",children:"Canjeados"})]})]})]})},j=({data:V})=>{const P=V.reduce((M,H)=>M+H.value,0);let L=0;return E.jsxs("div",{className:"flex flex-col items-center gap-6 py-4",children:[E.jsxs("div",{className:"flex items-center justify-around w-full",children:[E.jsxs("div",{className:"relative group/pie",children:[E.jsxs("svg",{viewBox:"0 0 100 100",className:"w-36 h-36 -rotate-90 drop-shadow-xl",children:[P>0?V.map((M,H)=>{const J=M.value/P*360,q=50+42*Math.cos(L*Math.PI/180),k=50+42*Math.sin(L*Math.PI/180),A=50+42*Math.cos((L+J)*Math.PI/180),I=50+42*Math.sin((L+J)*Math.PI/180),F=J>180?1:0,z=`M 50 50 L ${q} ${k} A 42 42 0 ${F} 1 ${A} ${I} Z`;return L+=J,E.jsx("path",{d:z,fill:M.color,className:"transition-all duration-500 hover:opacity-90 hover:scale-105 origin-center cursor-pointer",children:E.jsx("title",{children:`${M.label}: ${M.value} pts`})},H)}):E.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"#f3f4f6"}),E.jsx("circle",{cx:"50",cy:"50",r:"28",fill:"white",className:"shadow-inner"})]}),E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[E.jsx("p",{className:"text-[10px] font-black text-gray-900 leading-none",children:"TOTAL"}),E.jsx("p",{className:"text-[8px] font-bold text-gray-400 uppercase tracking-tighter",children:"Impacto"})]})]}),E.jsx("div",{className:"space-y-4",children:V.map((M,H)=>E.jsxs("div",{className:"flex items-center gap-3 bg-gray-50/50 p-2 rounded-xl border border-transparent hover:border-gray-100 transition-all",children:[E.jsx("div",{className:"w-3.5 h-3.5 rounded-full shadow-sm",style:{backgroundColor:M.color}}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-[10px] font-black text-gray-800 uppercase tracking-tighter leading-none mb-1",children:M.label}),E.jsxs("div",{className:"flex items-baseline gap-1",children:[E.jsx("span",{className:"text-xs font-black text-gray-700",children:e(M.value)}),E.jsx("span",{className:"text-[8px] font-bold text-gray-400",children:"VAL"}),E.jsxs("span",{className:"ml-2 text-[9px] font-black text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded-md",children:[P>0?(M.value/P*100).toFixed(1):0,"%"]})]})]})]},H))})]}),E.jsx("div",{className:"w-full bg-green-50/50 p-3 rounded-2xl border border-green-100/50",children:E.jsxs("p",{className:"text-[9px] text-green-700 font-medium leading-relaxed italic text-center",children:[E.jsx("span",{className:"font-bold underline",children:"Anlisis Eco:"})," La distribucin muestra el balance de puntos activos frente a la redencin. Una tasa de canje equilibrada favorece la economa circular."]})})]})};return i?E.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-10 text-center",children:[E.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4"}),E.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-[10px]",children:"Analizando Eco-Datos..."})]}):E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[E.jsxs("header",{className:"bg-purple-600 p-6 rounded-b-[40px] shadow-xl border-b-4 border-purple-700 mb-6 animate-fade-in relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"}),E.jsx("div",{className:"flex items-center justify-between relative z-10",children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>t(-1),className:"bg-white/20 p-2.5 rounded-xl text-white active:scale-95 transition-all",children:E.jsx(Ps,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter leading-none mb-1",children:"Eco-Analytics"}),E.jsx("p",{className:"text-[10px] text-purple-100 font-bold uppercase tracking-widest opacity-80",children:"R3PET Global Intelligence"})]})]})}),E.jsxs("div",{className:"mt-6 flex bg-purple-700/50 p-1 rounded-xl relative z-10 border border-purple-400/30",children:[E.jsx("button",{onClick:()=>f("metrics"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-wider transition-all ${c==="metrics"?"bg-white text-purple-700 shadow-md":"text-purple-200 hover:text-white"}`,children:"Mtricas"}),E.jsx("button",{onClick:()=>f("visual"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-wider transition-all ${c==="visual"?"bg-white text-purple-700 shadow-md":"text-purple-200 hover:text-white"}`,children:"Grficas"}),E.jsx("button",{onClick:()=>f("maintenance"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-wider transition-all ${c==="maintenance"?"bg-white text-purple-700 shadow-md":"text-purple-200 hover:text-white"}`,children:"Manto."})]})]}),E.jsx("div",{className:"px-4 space-y-6 animate-fade-in",children:c==="metrics"?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 p-6 rounded-3xl shadow-xl text-white relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:E.jsx(Do,{size:100})}),E.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] mb-4 opacity-80",children:"Impacto Ambiental Acumulado"}),E.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:`font-black tracking-tighter leading-none ${n.totalKgRecycled>99999?n.totalKgRecycled>9999999?"text-xl":"text-2xl":"text-4xl"}`,children:e(n.totalKgRecycled,1)}),E.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-70",children:"KG PET Reciclado"})]}),E.jsxs("div",{className:"space-y-1 border-l border-white/20 pl-6",children:[E.jsx("p",{className:`font-black tracking-tighter leading-none ${n.totalCo2Saved>99999?n.totalCo2Saved>9999999?"text-xl":"text-2xl":"text-4xl"} text-blue-100`,children:e(n.totalCo2Saved,1)}),E.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-70",children:"KG CO Evitado"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-1",children:[E.jsx("div",{className:"w-8 h-8 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-2",children:E.jsx(Ll,{size:18})}),E.jsx("p",{className:"text-2xl font-black text-gray-900",children:e(n.totalUsers)}),E.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest",children:"Usuarios Totales"})]}),E.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-1",children:[E.jsx("div",{className:"w-8 h-8 bg-green-50 text-green-600 rounded-lg flex items-center justify-center mb-2",children:E.jsx(Is,{size:18})}),E.jsx("p",{className:"text-2xl font-black text-gray-900",children:e(n.studentCount)}),E.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest",children:"Alumnos Activos"})]})]}),E.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border-2 border-gray-50 space-y-6",children:[E.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 text-center",children:"Resumen Financiero Eco"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-end border-b border-gray-50 pb-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Puntos Generados"}),E.jsxs("p",{className:"text-xl font-black text-green-600",children:["+",e(n.totalPointsCreated)]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Eco-Emisin"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:"Histrico Total"})]})]}),E.jsxs("div",{className:"flex justify-between items-end border-b border-gray-50 pb-3",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Puntos Canjeados"}),E.jsxs("p",{className:"text-xl font-black text-orange-600",children:["-",e(n.totalPointsRedeemed)]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Eco-Redencin"}),E.jsxs("p",{className:"text-[10px] text-gray-400 font-medium",children:["Tasa: ",n.totalPointsCreated>0?(n.totalPointsRedeemed/n.totalPointsCreated*100).toFixed(1):0,"%"]})]})]}),E.jsxs("div",{className:"flex justify-between items-end",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Promedio p/ Alumno"}),E.jsxs("p",{className:"text-xl font-black text-blue-600",children:[e(n.studentCount>0?n.totalPointsCreated/n.studentCount:0)," pts"]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:"Densidad Eco"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:"Media Global"})]})]})]})]})]}):c==="visual"?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-lg border border-gray-50",children:[E.jsxs("h3",{className:"text-sm font-black text-gray-800 uppercase tracking-wider mb-6 flex items-center justify-between",children:["Tendencia de Reciclaje (Puntos)",E.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] px-2 py-1 rounded-full",children:"ltimos 7 das"})]}),E.jsx(S,{data:n.weeklyData})]}),E.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-lg border border-gray-50",children:[E.jsxs("h3",{className:"text-sm font-black text-gray-800 uppercase tracking-wider mb-2 flex items-center justify-between",children:["Distribucin de Impacto",E.jsx("span",{className:"bg-purple-100 text-purple-700 text-[10px] px-2 py-1 rounded-full",children:"Global"})]}),E.jsx(j,{data:n.impactDistribution})]})]}):E.jsxs("div",{className:"space-y-6",children:[E.jsxs("header",{className:"text-center mb-2",children:[E.jsx("h3",{className:"text-xl font-black text-gray-800 tracking-tighter",children:"Herramientas de Reinicio"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Mantenimiento de Base de Datos"})]}),E.jsxs("div",{className:"bg-red-50 border-2 border-red-100 p-6 rounded-[32px] space-y-6 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:E.jsx(lp,{size:120})}),E.jsxs("div",{className:"relative z-10 space-y-4",children:[E.jsxs("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-red-200",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3 text-red-600",children:[E.jsx(xf,{size:20}),E.jsx("p",{className:"text-xs font-black uppercase tracking-wider",children:"Resetear Estadsticas"})]}),E.jsx("p",{className:"text-[11px] text-gray-500 mb-4 leading-relaxed",children:"Pone en **cero** los contadores globales (Puntos, Botellas, KG). Usa esto para iniciar una nueva temporada o limpiar pruebas."}),E.jsx("button",{onClick:y,disabled:p,className:"w-full py-3 bg-red-600 text-white rounded-xl text-xs font-black shadow-lg shadow-red-200 active:scale-95 transition-all disabled:opacity-50",children:"RESETEAR CONTADORES TOTALES"})]}),E.jsxs("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-red-200",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3 text-red-600",children:[E.jsx(da,{size:20}),E.jsx("p",{className:"text-xs font-black uppercase tracking-wider",children:"Limpiar Historial"})]}),E.jsx("p",{className:"text-[11px] text-gray-500 mb-4 leading-relaxed",children:"Borra **todas las transacciones** de la base de datos de manera definitiva."}),E.jsx("button",{onClick:w,disabled:p,className:"w-full py-3 bg-gray-800 text-white rounded-xl text-xs font-black shadow-lg active:scale-95 transition-all disabled:opacity-50",children:"WIPE: BORRAR TODO EL HISTORIAL"})]}),E.jsxs("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-red-200",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3 text-red-600",children:[E.jsx(Ll,{size:20}),E.jsx("p",{className:"text-xs font-black uppercase tracking-wider",children:"Resetear Puntos Alumnos"})]}),E.jsx("p",{className:"text-[11px] text-gray-500 mb-4 leading-relaxed",children:"Pone en **cero** el balance de todos los alumnos sin eliminar sus perfiles."}),E.jsx("button",{onClick:v,disabled:p,className:"w-full py-3 bg-white text-red-600 border-2 border-red-600 rounded-xl text-xs font-black hover:bg-red-50 active:scale-95 transition-all disabled:opacity-50",children:"REINICIAR PUNTOS DE ALUMNOS"})]}),E.jsxs("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-red-200",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3 text-red-600",children:[E.jsx(R3,{size:20}),E.jsx("p",{className:"text-xs font-black uppercase tracking-wider",children:"Eliminar Cuentas"})]}),E.jsx("p",{className:"text-[11px] text-gray-500 mb-4 leading-relaxed",children:"Borra permanentemente los perfiles de la base de datos Firestore por tipo."}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsx("button",{onClick:()=>b("student"),disabled:p,className:"py-3 bg-red-50 text-red-600 border-2 border-dashed border-red-200 rounded-xl text-[10px] font-black hover:bg-red-100 active:scale-95 transition-all disabled:opacity-50",children:"BORRAR ALUMNOS"}),E.jsx("button",{onClick:()=>b("registrar"),disabled:p,className:"py-3 bg-gray-50 text-gray-600 border-2 border-dashed border-gray-200 rounded-xl text-[10px] font-black hover:bg-gray-100 active:scale-95 transition-all disabled:opacity-50",children:"BORRAR REGIST."})]})]})]}),E.jsx("p",{className:"text-[9px] text-red-400 font-bold uppercase text-center tracking-[0.2em] animate-pulse",children:" ATENCIN: ACCIONES IRREVERSIBLES"})]}),E.jsxs("div",{className:"bg-blue-50 p-6 rounded-[32px] border border-blue-100 flex items-center gap-4",children:[E.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl text-white",children:E.jsx(I_,{size:20})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs font-black text-blue-900 leading-none mb-1",children:"Tu cuenta est segura"}),E.jsx("p",{className:"text-[10px] text-blue-700 font-medium",children:"Estas acciones preservan los perfiles de administradores."})]})]})]})},c)]})}function Dk(){const[t,e]=se.useState([]),[n,r]=se.useState(null),[i,o]=se.useState({points:0,role:"student"}),[c,f]=se.useState("all"),[p,g]=se.useState("");se.useEffect(()=>{y()},[]);const y=async()=>{const S=ei(kn(Je,"profiles")),V=(await Ts(S)).docs.map(P=>({id:P.id,...P.data()}));e(V||[])},w=S=>{r(S),o({points:S.points,role:S.role})},v=async()=>{n&&(await $C(Bn(Je,"profiles",n.id),{points:i.points,role:i.role}),r(null),y())},b=t.filter(S=>c==="all"||S.role===c).filter(S=>{var V,P,L;if(!p)return!0;const j=p.toLowerCase();return((V=S.full_name)==null?void 0:V.toLowerCase().includes(j))||((P=S.email)==null?void 0:P.toLowerCase().includes(j))||((L=S.matricula)==null?void 0:L.toLowerCase().includes(j))});return E.jsxs("div",{className:"p-4",children:[E.jsxs("header",{className:"bg-white p-4 rounded-2xl shadow-lg shadow-green-100/30 border border-green-50 border-l-8 border-l-green-600 mb-4 animate-fade-in flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:()=>navigate(-1),className:"bg-gray-50 p-2 rounded-xl text-gray-400 hover:bg-gray-100 transition-colors",children:E.jsx(Ps,{size:18})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tighter leading-none mb-0.5",children:"Usuarios"}),E.jsx("p",{className:"text-[9px] text-green-600 font-black uppercase tracking-[0.15em]",children:"Gestin de Cuentas"})]})]}),E.jsx($i,{to:"/app/admin/create",className:"bg-green-600 text-white p-2.5 rounded-xl shadow-lg shadow-green-100 active:scale-95 transition-all",children:E.jsx(A_,{size:22})})]}),E.jsxs("div",{className:"bg-white p-1.5 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 group focus-within:border-green-300 transition-all mb-4",children:[E.jsx("div",{className:"pl-2.5 text-gray-400 group-focus-within:text-green-500 transition-colors",children:E.jsx(ap,{size:18})}),E.jsx("input",{type:"text",placeholder:"Nombre, email o matrcula...",className:"w-full p-2 bg-transparent border-none focus:ring-0 text-sm font-medium",value:p,onChange:S=>g(S.target.value)})]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Filtrar por rol"}),E.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:[E.jsxs("button",{onClick:()=>f("all"),className:`flex-shrink-0 px-5 py-2.5 rounded-2xl text-xs font-black uppercase tracking-wider transition-all duration-300 ${c==="all"?"bg-green-600 text-white shadow-lg shadow-green-100 scale-105":"bg-white text-gray-400 border border-gray-100 hover:border-green-200"}`,children:["Todos  ",t.length]}),E.jsxs("button",{onClick:()=>f("student"),className:`flex-shrink-0 px-5 py-2.5 rounded-2xl text-xs font-black uppercase tracking-wider transition-all duration-300 ${c==="student"?"bg-green-600 text-white shadow-lg shadow-green-100 scale-105":"bg-white text-gray-400 border border-gray-100 hover:border-green-200"}`,children:["Alumnos  ",t.filter(S=>S.role==="student").length]}),E.jsxs("button",{onClick:()=>f("registrar"),className:`flex-shrink-0 px-5 py-2.5 rounded-2xl text-xs font-black uppercase tracking-wider transition-all duration-300 ${c==="registrar"?"bg-green-600 text-white shadow-lg shadow-green-100 scale-105":"bg-white text-gray-400 border border-gray-100 hover:border-green-200"}`,children:["Registradores  ",t.filter(S=>S.role==="registrar").length]}),E.jsxs("button",{onClick:()=>f("admin"),className:`flex-shrink-0 px-5 py-2.5 rounded-2xl text-xs font-black uppercase tracking-wider transition-all duration-300 ${c==="admin"?"bg-green-600 text-white shadow-lg shadow-green-100 scale-105":"bg-white text-gray-400 border border-gray-100 hover:border-green-200"}`,children:["Admins  ",t.filter(S=>S.role==="admin").length]})]})]}),E.jsx("div",{className:"space-y-3",children:b.map(S=>{var j,V;return E.jsx("div",{className:`p-4 rounded-xl border-2 animate-fade-in transition-all hover:translate-x-1 ${S.role==="admin"?"bg-purple-50/40 border-purple-100/60":S.role==="registrar"?"bg-amber-50/40 border-amber-100/60":"bg-green-50/40 border-green-100/60"}`,children:(n==null?void 0:n.id)===S.id?E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100/50 pb-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-white rounded-lg overflow-hidden border border-gray-100 shadow-sm flex items-center justify-center",children:S.avatar_url?E.jsx("img",{src:S.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):E.jsx("span",{className:"text-gray-400 font-bold",children:(j=S.full_name)==null?void 0:j.charAt(0).toUpperCase()})}),E.jsx("h3",{className:"font-bold text-gray-900 truncate max-w-[150px]",children:S.full_name})]}),E.jsxs("div",{className:"flex gap-2 shrink-0",children:[E.jsx("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest active:scale-95 transition-all shadow-md shadow-green-100",children:"Guardar"}),E.jsx("button",{onClick:()=>r(null),className:"bg-white text-gray-500 border border-gray-200 px-4 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest active:scale-95 transition-all",children:"Regresar"})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-gray-100",children:[E.jsx("label",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-widest block mb-1",children:"Puntos"}),E.jsx("input",{type:"number",value:i.points,onChange:P=>o({...i,points:parseInt(P.target.value)}),className:"w-full bg-transparent border-none p-0 text-sm font-bold text-gray-700 focus:ring-0"})]}),E.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-gray-100",children:[E.jsx("label",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-widest block mb-1",children:"Rol"}),E.jsxs("select",{value:i.role,onChange:P=>o({...i,role:P.target.value}),className:"w-full bg-transparent border-none p-0 text-sm font-bold text-gray-700 focus:ring-0 capitalize",children:[E.jsx("option",{value:"student",children:"Alumno"}),E.jsx("option",{value:"registrar",children:"Registrador"}),E.jsx("option",{value:"admin",children:"Admin"})]})]})]})]}):E.jsxs("div",{className:"flex items-center justify-between gap-4",children:[E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("div",{className:`w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center text-white text-xl font-bold shadow-md border-2 border-white transition-transform ${S.role==="admin"?"bg-purple-600":S.role==="registrar"?"bg-amber-500":"bg-green-600"}`,children:S.avatar_url?E.jsx("img",{src:S.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):((V=S.full_name)==null?void 0:V.charAt(0).toUpperCase())||"?"}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("div",{className:"flex items-center gap-2 mb-0.5",children:E.jsx("h3",{className:"font-bold text-gray-900 text-base uppercase tracking-tight truncate leading-tight",children:S.full_name})}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`text-[8px] font-bold px-2 py-0.5 rounded shadow-sm uppercase tracking-widest ${S.role==="admin"?"bg-purple-600 text-white":S.role==="registrar"?"bg-amber-500 text-white":"bg-green-600 text-white"}`,children:S.role}),E.jsx("p",{className:"text-[9px] font-semibold text-gray-400 truncate lowercase",children:S.email})]})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsxs("div",{className:"bg-white/60 backdrop-blur-sm p-2.5 rounded-lg border border-white/50 shadow-sm",children:[E.jsxs("p",{className:"text-[7px] text-gray-400 font-bold uppercase tracking-widest leading-none mb-1 flex items-center gap-1",children:[E.jsx(C_,{size:8})," Matrcula"]}),E.jsx("p",{className:"text-[11px] font-bold text-gray-700 break-all leading-tight",children:S.matricula||"---"})]}),E.jsxs("div",{className:"bg-white/60 backdrop-blur-sm p-2.5 rounded-lg border border-white/50 shadow-sm",children:[E.jsxs("p",{className:"text-[7px] text-gray-400 font-bold uppercase tracking-widest leading-none mb-1 flex items-center gap-1",children:[E.jsx(Wc,{size:8})," Balance"]}),E.jsxs("p",{className:`text-xs font-bold ${S.role==="admin"?"text-purple-600":S.role==="registrar"?"text-amber-600":"text-green-600"}`,children:[S.points||0," pts"]})]})]})]}),E.jsx("button",{onClick:()=>w(S),className:`p-3 rounded-lg shadow-md active:scale-95 transition-all border-2 border-white text-white ${S.role==="admin"?"bg-purple-600 hover:bg-purple-700":S.role==="registrar"?"bg-amber-500 hover:bg-amber-600":"bg-green-600 hover:bg-green-700"}`,title:"Editar",children:E.jsx(lp,{size:18})})]})},S.id)})})]})}function Pk(){const t=xi(),[e,n]=se.useState({fullName:"",email:"",password:"",matricula:"",role:"student"}),[r,i]=se.useState(null),[o,c]=se.useState(!1),f=async p=>{if(p.preventDefault(),c(!0),i(null),e.role==="student"&&!e.matricula){i({type:"error",text:"La matrcula es obligatoria para alumnos."}),c(!1);return}try{const y=(await cv(Ki,e.email,e.password)).user;await dm(Bn(Je,"profiles",y.uid),{full_name:e.fullName,email:e.email,role:e.role,matricula:e.role==="student"?e.matricula:null,points:0,total_bottles:0,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${y.uid}`,created_at:fo()}),i({type:"success",text:`Cuenta de ${e.role} creada con xito!`}),setTimeout(()=>t("/app/admin/users"),2e3)}catch(g){i({type:"error",text:g.message})}finally{c(!1)}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[E.jsxs("header",{className:`p-6 border-b-4 animate-fade-in transition-colors duration-500 ${e.role==="admin"?"bg-purple-600 border-purple-700 shadow-purple-100":e.role==="registrar"?"bg-amber-500 border-amber-600 shadow-amber-100":"bg-green-600 border-green-700 shadow-green-100"} shadow-xl flex items-center gap-4 sticky top-0 z-40`,children:[E.jsx("button",{onClick:()=>t(-1),className:"bg-white/20 p-2.5 rounded-xl text-white hover:bg-white/30 transition-all active:scale-95 shadow-sm",children:E.jsx(Ps,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight leading-none mb-1",children:"Nueva Cuenta"}),E.jsx("p",{className:"text-[10px] text-white/80 font-bold uppercase tracking-widest",children:"Panel de Administracin"})]})]}),E.jsxs("div",{className:"p-4 max-w-md mx-auto animate-slide-up",children:[r&&E.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-center gap-3 animate-bounce-in border shadow-sm ${r.type==="error"?"bg-red-50 border-red-100 text-red-600":"bg-green-50 border-green-100 text-green-600"}`,children:[r.type==="error"?E.jsx(cp,{size:20}):E.jsx(CheckCircle,{size:20}),E.jsx("p",{className:"text-xs font-bold uppercase tracking-tight",children:r.text})]}),E.jsxs("form",{onSubmit:f,className:"bg-white p-6 rounded-xl shadow-md border-2 border-gray-100 space-y-5",children:[E.jsx("div",{className:"grid grid-cols-3 gap-2 p-1 bg-gray-50 rounded-xl border border-gray-100",children:["student","registrar","admin"].map(p=>E.jsx("button",{type:"button",onClick:()=>n({...e,role:p}),className:`py-3 rounded-lg text-[9px] font-bold uppercase tracking-widest transition-all ${e.role===p?p==="admin"?"bg-purple-600 text-white shadow-md":p==="registrar"?"bg-amber-500 text-white shadow-md":"bg-green-600 text-white shadow-md":"text-gray-400 hover:text-gray-600"}`,children:p==="student"?"Alumno":p==="registrar"?"Registro":"Admin"},p))}),E.jsxs("div",{className:"space-y-4 pt-2",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1.5 ml-1",children:"Nombre Completo"}),E.jsx("input",{type:"text",required:!0,value:e.fullName,onChange:p=>n({...e,fullName:p.target.value}),className:"w-full p-3.5 bg-gray-50 border-2 border-transparent rounded-xl text-sm font-bold text-gray-700 focus:border-green-100 focus:bg-white transition-all outline-none",placeholder:"Ej. Juan Prez"})]}),e.role==="student"&&E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1.5 ml-1",children:"Matrcula Escolar"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",required:!0,value:e.matricula,onChange:p=>n({...e,matricula:p.target.value}),className:"w-full p-3.5 pl-10 bg-gray-50 border-2 border-transparent rounded-xl text-sm font-bold text-gray-700 focus:border-green-100 focus:bg-white transition-all outline-none",placeholder:"Nmero de control"}),E.jsx(C_,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1.5 ml-1",children:"Correo Electrnico"}),E.jsx("input",{type:"email",required:!0,value:e.email,onChange:p=>n({...e,email:p.target.value}),className:"w-full p-3.5 bg-gray-50 border-2 border-transparent rounded-xl text-sm font-bold text-gray-700 focus:border-green-100 focus:bg-white transition-all outline-none",placeholder:"usuario@escuela.edu"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1.5 ml-1",children:"Contrasea"}),E.jsx("input",{type:"password",required:!0,minLength:6,value:e.password,onChange:p=>n({...e,password:p.target.value}),className:"w-full p-3.5 bg-gray-50 border-2 border-transparent rounded-xl text-sm font-bold text-gray-700 focus:border-green-100 focus:bg-white transition-all outline-none",placeholder:"Mnimo 6 caracteres"})]})]}),E.jsx("button",{type:"submit",disabled:o,className:`w-full py-4 rounded-xl text-xs font-bold uppercase tracking-widest text-white shadow-lg active:scale-95 transition-all mt-4 disabled:opacity-50 flex items-center justify-center gap-2 ${e.role==="admin"?"bg-purple-600 shadow-purple-100":e.role==="registrar"?"bg-amber-500 shadow-amber-100":"bg-green-600 shadow-green-100"}`,children:o?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):E.jsxs(E.Fragment,{children:[E.jsx(A_,{size:18}),"Crear Cuenta"]})})]}),E.jsx("p",{className:"text-center text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-8",children:"R3PET Management System  Professional Edition"})]})]})}function kk({role:t,userId:e,onLogout:n}){const[r,i]=se.useState(0),[o,c]=se.useState(0),[f,p]=se.useState(""),[g,y]=se.useState(""),w=Xl(),v=xi();se.useEffect(()=>{if(e){const O=mi(Bn(Je,"profiles",e),R=>{if(R.exists()){const $=R.data();i($.points||0),c($.total_bottles||0),p($.full_name),y($.email)}});return()=>O()}},[e]),se.useEffect(()=>{const R=(async()=>{const $={student:"/app/dashboard",registrar:"/app/registrar",admin:"/app/admin"},Y=()=>{const X=w.pathname;$[t]===X?window.Capacitor?My.minimizeApp():console.log("Ests en la pgina principal."):window.history.back()};if(window.Capacitor)try{const X=await My.addListener("backButton",Y);return()=>X.remove()}catch(X){console.error("Error configurando botn de retroceso:",X)}else{const X=G=>{G.preventDefault(),Y()};return window.addEventListener("popstate",X),()=>window.removeEventListener("popstate",X)}})();return()=>{R&&typeof R.then=="function"&&R.then($=>$&&$())}},[w.pathname,t]);const S=t==="student"?[{path:"/app/dashboard",icon:T3,label:"Inicio"},{path:"/app/ranking",icon:Wc,label:"Clasificacin"},{path:"/app/rewards",icon:Kl,label:"Premios"},{path:"/app/profile",icon:Is,label:"Perfil"}]:t==="registrar"?[{path:"/app/registrar",icon:op,label:"Inicio"},{path:"/app/ranking",icon:Wc,label:"Ranking"},{path:"/app/registrar/list",icon:Ll,label:"Alumnos"},{path:"/app/profile",icon:Is,label:"Perfil"}]:t==="admin"?[{path:"/app/admin",icon:xf,label:"Inicio"},{path:"/app/ranking",icon:Wc,label:"Ranking"},{path:"/app/admin/users",icon:Ll,label:"Usuarios"},{path:"/app/profile",icon:Is,label:"Perfil"}]:[],j=O=>w.pathname===O,V=t==="admin"?"border-purple-600 text-purple-600":t==="registrar"?"border-blue-600 text-blue-600":"border-green-600 text-green-600",[P,L]=se.useState(null),[M,H]=se.useState(null),[J,q]=se.useState(!0);se.useEffect(()=>{let O;return J&&(O=setTimeout(()=>q(!1),3e3)),()=>clearTimeout(O)},[J]);const k=()=>{J||q(!0)},A=50,I=O=>{k(),H(null),L(O.targetTouches[0].clientX)},F=O=>H(O.targetTouches[0].clientX),z=()=>{if(!P||!M)return;const O=P-M,R=O>A,$=O<-A;if(R||$){const Y=S.findIndex(X=>X.path===w.pathname);if(Y===-1)return;R&&Y<S.length-1?v(S[Y+1].path):$&&Y>0&&v(S[Y-1].path)}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans max-w-md mx-auto relative shadow-2xl overflow-hidden border-x border-gray-200 flex flex-col",onTouchStart:I,onTouchMove:F,onTouchEnd:z,children:[E.jsx("div",{className:"flex-1 overflow-y-auto pb-20 relative",children:E.jsx("div",{className:"animate-fade-in",children:E.jsx(u3,{context:{points:r,setPoints:i,userId:e,onLogout:n,lifetimePoints:o,fullName:f,email:g}})},w.pathname)}),S.findIndex(O=>O.path===w.pathname)>0&&E.jsx("button",{onClick:()=>{k(),v(S[S.findIndex(O=>O.path===w.pathname)-1].path)},className:`nav-helper-btn left hover-bounce-l text-primary ${J?"":"hidden-nav"}`,children:E.jsx(Ps,{size:24})}),S.findIndex(O=>O.path===w.pathname)<S.length-1&&E.jsx("button",{onClick:()=>{k(),v(S[S.findIndex(O=>O.path===w.pathname)+1].path)},className:`nav-helper-btn right hover-bounce-r text-primary ${J?"":"hidden-nav"}`,children:E.jsx(v_,{size:24})}),E.jsx("nav",{className:"fixed bottom-0 w-full max-w-md bg-white border-t border-gray-200 flex justify-around py-2 pb-4 shadow-[0_-5px_15px_rgba(0,0,0,0.05)] z-40",children:S.map(O=>E.jsxs($i,{to:O.path,className:`flex flex-col items-center px-4 py-1 transition-colors ${j(O.path)?V:"text-gray-400"}`,children:[E.jsx(O.icon,{size:24,strokeWidth:j(O.path)?2.5:2}),E.jsx("span",{className:"text-[10px] mt-1 font-medium",children:O.label})]},O.path))})]})}function Ok(){const[t,e]=se.useState(null),[n,r]=se.useState(null),[i,o]=se.useState(!0),c=xi();se.useEffect(()=>{let g=null;const y=gN(Ki,async w=>{w?(r(w.uid),g=mi(Bn(Je,"profiles",w.uid),v=>{if(v.exists()){const b=v.data();e(b.role),console.log("Sesin activa para:",b.full_name)}else e("student"),o(!1);o(!1)})):(e(null),r(null),o(!1),g&&g())});return()=>{y(),g&&g()}},[]);const f=async()=>{await pN(Ki),e(null),r(null),c("/")};if(i)return E.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500",children:"Cargando R3PET..."});const p=g=>g==="admin"?"/app/admin":g==="registrar"?"/app/registrar":"/app/dashboard";return E.jsxs(d3,{children:[E.jsx(Nn,{path:"/",element:t?E.jsx(zx,{to:p(t)}):E.jsx(Ek,{})}),t&&E.jsxs(Nn,{path:"/app",element:E.jsx(kk,{role:t,userId:n,onLogout:f}),children:[t==="student"&&E.jsxs(E.Fragment,{children:[E.jsx(Nn,{path:"dashboard",element:E.jsx(_k,{})}),E.jsx(Nn,{path:"rewards",element:E.jsx(vk,{})}),E.jsx(Nn,{path:"profile",element:E.jsx(O0,{})}),E.jsx(Nn,{path:"profile/points-history",element:E.jsx(Ik,{})}),E.jsx(Nn,{path:"profile/redemptions-history",element:E.jsx(bk,{})})]}),E.jsx(Nn,{path:"ranking",element:E.jsx(Sk,{})}),t==="registrar"&&E.jsxs(E.Fragment,{children:[E.jsx(Nn,{path:"registrar",element:E.jsx(Ck,{})}),E.jsx(Nn,{path:"registrar/list",element:E.jsx(Ak,{})}),E.jsx(Nn,{path:"profile",element:E.jsx(O0,{})}),E.jsx(Nn,{path:"profile/work-history",element:E.jsx(Tk,{})})]}),t==="admin"&&E.jsxs(E.Fragment,{children:[E.jsx(Nn,{path:"admin",element:E.jsx(Nk,{})}),E.jsx(Nn,{path:"admin/users",element:E.jsx(Dk,{})}),E.jsx(Nn,{path:"admin/create",element:E.jsx(Pk,{})}),E.jsx(Nn,{path:"admin/statistics",element:E.jsx(Rk,{})}),E.jsx(Nn,{path:"admin/history",element:E.jsx(Mk,{})}),E.jsx(Nn,{path:"profile",element:E.jsx(O0,{})})]})]}),E.jsx(Nn,{path:"*",element:E.jsx(zx,{to:"/"})})]})}function Mk(){const t=xi(),[e,n]=se.useState([]),[r,i]=se.useState({}),[o,c]=se.useState(!0),[f,p]=se.useState("all"),[g,y]=se.useState(""),[w,v]=se.useState(1),[b,S]=se.useState("all"),[j,V]=se.useState({start:"",end:""}),[P,L]=se.useState(!1),M=20;se.useEffect(()=>{H()},[]);const H=async()=>{c(!0);try{const O=ei(kn(Je,"transactions"),Zu("timestamp","desc")),$=(await Ts(O)).docs.map(G=>{var re;return{id:G.id,...G.data(),created_at:((re=G.data().timestamp)==null?void 0:re.toDate())||new Date}}),Y=await Ts(kn(Je,"profiles")),X={};Y.forEach(G=>{X[G.id]={id:G.id,...G.data()}}),i(X),n($||[])}catch(O){console.error("Error al cargar historial de transacciones:",O)}finally{c(!1)}},J=O=>{const R=new Date(O),$=new Date;switch($.setHours(23,59,59,999),b){case"all":return!0;case"today":const Y=new Date($);return Y.setHours(0,0,0,0),R>=Y&&R<=$;case"week":const X=new Date($);return X.setDate(X.getDate()-7),R>=X&&R<=$;case"month":const G=new Date($);return G.setMonth(G.getMonth()-1),R>=G&&R<=$;case"custom":if(!j.start||!j.end)return!0;const re=new Date(j.start);re.setHours(0,0,0,0);const ee=new Date(j.end);return ee.setHours(23,59,59,999),R>=re&&R<=ee;default:return!0}},q=e.filter(O=>{var re,ee,ie,fe,he,Ee;const R=f==="all"||f==="positive"&&O.points>0||f==="negative"&&O.points<0,$=J(O.created_at),Y=r[O.student_id],X=O.registrar_id?r[O.registrar_id]:null,G=g===""||Y&&(((re=Y.full_name)==null?void 0:re.toLowerCase().includes(g.toLowerCase()))||((ee=Y.matricula)==null?void 0:ee.toLowerCase().includes(g.toLowerCase()))||((ie=Y.email)==null?void 0:ie.toLowerCase().includes(g.toLowerCase())))||X&&(((fe=X.full_name)==null?void 0:fe.toLowerCase().includes(g.toLowerCase()))||((he=X.email)==null?void 0:he.toLowerCase().includes(g.toLowerCase())))||((Ee=O.description)==null?void 0:Ee.toLowerCase().includes(g.toLowerCase()));return R&&$&&G}),k=Math.ceil(q.length/M),A=q.slice((w-1)*M,w*M),I=()=>{p("all"),S("all"),y(""),V({start:"",end:""}),L(!1),v(1)},F=(O,R)=>O>0?E.jsx(Do,{size:16,className:"text-green-500"}):E.jsx(Kl,{size:16,className:"text-orange-500"}),z=O=>{const R=new Date(O);return{date:R.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"}),time:R.toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}};return o?E.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-10",children:[E.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),E.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-[10px]",children:"Cargando Historial Global..."})]}):E.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[E.jsxs("header",{className:"bg-amber-600 p-6 rounded-b-[40px] shadow-xl border-b-4 border-amber-700 mb-6 animate-fade-in relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"}),E.jsx("div",{className:"flex items-center justify-between relative z-10",children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>t(-1),className:"bg-white/20 p-2.5 rounded-xl text-white active:scale-95 transition-all",children:E.jsx(Ps,{size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter leading-none mb-1",children:"Historial Global"}),E.jsx("p",{className:"text-[10px] text-amber-100 font-bold uppercase tracking-widest opacity-80",children:"Transacciones Detalladas R3PET"})]})]})}),E.jsx("div",{className:"mt-4 bg-amber-700/50 p-3 rounded-xl relative z-10 border border-amber-400/30",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"text-white",children:[E.jsx("p",{className:"text-[10px] font-medium opacity-80",children:"Transacciones filtradas"}),E.jsx("p",{className:"text-lg font-black",children:q.length}),E.jsx("p",{className:"text-[9px] opacity-70",children:q.length!==e.length&&`de ${e.length} totales`})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsxs("div",{className:"text-green-100 text-center",children:[E.jsx("p",{className:"text-[10px] font-medium",children:"Registros"}),E.jsx("p",{className:"text-sm font-bold",children:q.filter(O=>(O.points||0)>0).length})]}),E.jsxs("div",{className:"text-orange-100 text-center",children:[E.jsx("p",{className:"text-[10px] font-medium",children:"Canjes"}),E.jsx("p",{className:"text-sm font-bold",children:q.filter(O=>(O.points||0)<0).length})]}),(f!=="all"||b!=="all"||g)&&E.jsx("button",{onClick:I,className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-xs font-bold text-white transition-all active:scale-95",children:"Limpiar Filtros"})]})]})})]}),E.jsxs("div",{className:"px-4 mb-6 space-y-4",children:[E.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:E.jsx("input",{type:"text",placeholder:"Buscar por nombre, matrcula, email o descripcin...",value:g,onChange:O=>{y(O.target.value),v(1)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none text-sm"})}),E.jsxs("div",{className:"flex gap-2",children:[E.jsxs("button",{onClick:()=>p("all"),className:`flex-1 py-2 px-4 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${f==="all"?"bg-amber-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Todas (",e.length,")"]}),E.jsxs("button",{onClick:()=>p("positive"),className:`flex-1 py-2 px-4 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${f==="positive"?"bg-green-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Registros PET (",e.filter(O=>(O.points||0)>0).length,")"]}),E.jsxs("button",{onClick:()=>p("negative"),className:`flex-1 py-2 px-4 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${f==="negative"?"bg-orange-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Canjes (",e.filter(O=>(O.points||0)<0).length,")"]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-3",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center gap-2",children:[E.jsx(da,{size:16,className:"text-amber-600"}),"Filtrar por Periodo"]}),E.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[b==="all"&&"Todas las fechas",b==="today"&&"Hoy",b==="week"&&"ltimos 7 das",b==="month"&&"ltimos 30 das",b==="custom"&&(j.start&&j.end?`${j.start} al ${j.end}`:"Seleccionar rango")]})]}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[E.jsx("button",{onClick:()=>{S("all"),L(!1),v(1)},className:`py-2 px-3 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all ${b==="all"?"bg-amber-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Todas"}),E.jsx("button",{onClick:()=>{S("today"),L(!1),v(1)},className:`py-2 px-3 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all ${b==="today"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Hoy"}),E.jsx("button",{onClick:()=>{S("week"),L(!1),v(1)},className:`py-2 px-3 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all ${b==="week"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"7 das"}),E.jsx("button",{onClick:()=>{S("custom"),L(!P),v(1)},className:`py-2 px-3 rounded-lg text-[9px] font-black uppercase tracking-normal transition-all flex items-center justify-center text-center ${b==="custom"?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Personalizado"})]}),P&&E.jsxs("div",{className:"mt-4 p-4 bg-teal-50 rounded-xl border border-teal-200 space-y-3 animate-fade-in",children:[E.jsx("p",{className:"text-xs font-bold text-teal-700 uppercase tracking-wider",children:"Rango de Fechas Personalizado"}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider block mb-1",children:"Desde"}),E.jsx("input",{type:"date",value:j.start,onChange:O=>{V(R=>({...R,start:O.target.value})),v(1)},className:"w-full p-2 border border-teal-200 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 outline-none",max:new Date().toISOString().split("T")[0]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider block mb-1",children:"Hasta"}),E.jsx("input",{type:"date",value:j.end,onChange:O=>{V(R=>({...R,end:O.target.value})),v(1)},className:"w-full p-2 border border-teal-200 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 outline-none",max:new Date().toISOString().split("T")[0],min:j.start})]})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>{const O=new Date,R=new Date(O);R.setDate(R.getDate()-7),V({start:R.toISOString().split("T")[0],end:O.toISOString().split("T")[0]}),v(1)},className:"flex-1 py-2 bg-teal-100 text-teal-700 rounded-lg text-xs font-bold hover:bg-teal-200 transition-all",children:"ltima Semana"}),E.jsx("button",{onClick:()=>{const O=new Date,R=new Date(O);R.setMonth(R.getMonth()-1),V({start:R.toISOString().split("T")[0],end:O.toISOString().split("T")[0]}),v(1)},className:"flex-1 py-2 bg-teal-100 text-teal-700 rounded-lg text-xs font-bold hover:bg-teal-200 transition-all",children:"ltimo Mes"})]})]})]})]}),E.jsx("div",{className:"px-4 space-y-3",children:A.length===0?E.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center",children:[E.jsx(da,{size:48,className:"mx-auto text-gray-300 mb-4"}),E.jsx("p",{className:"text-gray-400 font-bold",children:"No se encontraron transacciones"}),E.jsx("p",{className:"text-gray-300 text-sm mt-2",children:f!=="all"||b!=="all"||g?`Con los filtros actuales (${q.length!==e.length?q.length+" de "+e.length+" totales":""})`:"No hay transacciones registradas en el sistema"}),(f!=="all"||b!=="all"||g)&&E.jsx("button",{onClick:I,className:"mt-4 px-6 py-2 bg-amber-600 text-white rounded-lg text-sm font-bold hover:bg-amber-700 transition-all active:scale-95",children:"Mostrar Todas las Transacciones"})]}):A.map((O,R)=>{const $=r[O.student_id],Y=O.performer_id||O.registrar_id,X=Y?r[Y]:null,G=O.performer_name||(X==null?void 0:X.full_name),re=z(O.created_at),ee=O.points||0,ie=ee>0;return E.jsxs("div",{className:`bg-white p-4 rounded-2xl shadow-sm border-2 animate-fade-in transition-all hover:shadow-md ${ie?"border-green-100 hover:border-green-200":"border-orange-100 hover:border-orange-200"}`,style:{animationDelay:`${R*50}ms`},children:[E.jsxs("div",{className:"flex items-start justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:`p-2 rounded-xl ${ie?"bg-green-100":"bg-orange-100"}`,children:F(ee,O.description)}),E.jsxs("div",{children:[E.jsx("span",{className:`text-sm font-bold ${ie?"text-green-700":"text-orange-700"}`,children:ie?"Registro PET":"Canje Realizado"}),E.jsx("p",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider mt-0.5",children:O.description})]})]}),E.jsx("div",{className:"text-right",children:E.jsxs("span",{className:`text-lg font-black ${ie?"text-green-600":"text-orange-600"}`,children:[ie?"+":"",ee.toLocaleString()," pts"]})})]}),E.jsxs("div",{className:"mb-3",children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Estudiante Beneficiado"}),E.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-xl",children:[E.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:E.jsx(Is,{size:14,className:"text-blue-600"})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800",children:($==null?void 0:$.full_name)||O.student_name||"Usuario Desconocido"}),E.jsxs("div",{className:"flex gap-4 text-[9px] text-gray-500",children:[E.jsxs("span",{children:["Matrcula: ",($==null?void 0:$.matricula)||O.student_matricula||"---"]}),E.jsxs("span",{children:["Email: ",($==null?void 0:$.email)||O.student_email||"---"]})]})]})]})]}),G&&E.jsxs("div",{className:"mb-3",children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Registrado Por"}),E.jsxs("div",{className:"flex items-center gap-3 bg-amber-50 p-3 rounded-xl",children:[E.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:E.jsx(I_,{size:14,className:"text-amber-600"})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"text-sm font-bold text-gray-800",children:G}),X?E.jsxs("div",{className:"flex gap-4 text-[9px] text-gray-500",children:[E.jsxs("span",{children:["Rol: ",X.role==="admin"?"Administrador":X.role==="registrar"?"Registrador":"Estudiante"]}),E.jsxs("span",{children:["Email: ",X.email]})]}):E.jsxs("div",{className:"flex gap-4 text-[9px] text-gray-500",children:[O.performer_email&&E.jsxs("span",{children:["Email: ",O.performer_email]}),!O.performer_email&&E.jsx("span",{className:"italic text-gray-400",children:"Perfil no disponible"})]})]})]})]}),E.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-gray-100",children:[E.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400",children:[E.jsx(da,{size:12}),E.jsx("span",{children:re.date}),E.jsx("span",{children:""}),E.jsx("span",{children:re.time})]}),O.client_tx_id&&E.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-300",children:[E.jsx("span",{children:"ID:"}),E.jsxs("span",{className:"font-mono bg-gray-100 px-1 py-0.5 rounded",children:[O.client_tx_id.slice(0,12),"..."]})]})]})]},O.id)})}),k>1&&E.jsxs("div",{className:"px-4 mt-8 flex items-center justify-between bg-white p-4 rounded-2xl shadow-sm border border-gray-100",children:[E.jsxs("div",{className:"text-[10px] text-gray-400",children:["Mostrando ",(w-1)*M+1,"-",Math.min(w*M,q.length)," de ",q.length," transacciones"]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>v(Math.max(1,w-1)),disabled:w===1,className:"p-2 rounded-lg bg-gray-100 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition-all",children:E.jsx(Ps,{size:16})}),E.jsxs("span",{className:"text-sm font-bold text-gray-600 px-3",children:[w," / ",k]}),E.jsx("button",{onClick:()=>v(Math.min(k,w+1)),disabled:w===k,className:"p-2 rounded-lg bg-gray-100 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition-all",children:E.jsx(v_,{size:16})})]})]})]})}M0.createRoot(document.getElementById("root")).render(E.jsx(yn.StrictMode,{children:E.jsx(w3,{children:E.jsx(Ok,{})})}));export{k0 as C,zl as E,yA as W};
